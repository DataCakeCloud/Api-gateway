(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-eca02916"],{"1f17":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"d",(function(){return o})),a.d(e,"f",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"e",(function(){return l}));var n=a("953e");function i(t,e){var a=Object(n["a"])("ds-query-sql-".concat(t));if(a){a=JSON.parse(a);var i=a.findIndex((function(t){return t.name===e.name}));i>-1?a[i]=Object.assign(a[i],e):a.push(e)}else a=[e];Object(n["c"])("ds-query-sql-".concat(t),JSON.stringify(a))}function r(t,e){var a=Object(n["a"])("ds-query-sql-".concat(t));if(a)if(a=JSON.parse(a),e){var i=a.findIndex((function(t){return t.name===e}));i>-1&&(a.splice(i,1),Object(n["c"])("ds-query-sql-".concat(t),JSON.stringify(a)))}else Object(n["b"])("ds-query-sql-".concat(t))}var o=["integer","bigint","smallint","tinyint","float","real","double"];function s(t){localStorage.setItem("cmpType",JSON.stringify({value:t,startDate:(new Date).getTime()}))}function c(){var t=JSON.parse(localStorage.getItem("cmpType")||null);if(t){var e=(new Date).getTime(),a=t.startDate;return e-a<864e5&&t.value}return!1}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.trim().endsWith(";")?t.slice(0,-1):t}},"297d":function(t,e,a){"use strict";a("83e0")},3068:function(t,e,a){},"49adc":function(t,e,a){"use strict";a("6183")},"5dae":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper_table"},[a("el-table",{ref:"singleTable",class:["singleTable",t.tableOptions.format.transposition?"tansTable":""],attrs:{border:"",stripe:"",data:t.handelTableData,"highlight-current-row":"","cell-style":{padding:"0",height:"30px"},"header-cell-style":{padding:"0",height:"36px"}},on:{"sort-change":t.sortChange}},[t.tableOptions.format.indexType?a("el-table-column",{attrs:{type:"index",width:"50",index:t.indexMethod,align:"center"}},[a("template",{slot:"header"},[t._v("序号")])],2):t._e(),t._v(" "),t._l(t.transTableHeader,(function(e){return a("el-table-column",{key:e.valueKey,attrs:{"min-width":"180",prop:e.valueKey,align:t.tableOptions.align,"show-overflow-tooltip":!t.tableOptions.format.wrap,sortable:"custom"},scopedSlots:t._u([{key:"header",fn:function(n){return[e.name&&14*e.name.length<n.column.realWidth?a("span",[t._v(t._s(e.name))]):a("el-tooltip",{attrs:{effect:"dark",content:e.name,placement:"top"}},[a("span",{staticStyle:{"max-width":"90%",display:"inline-block"}},[t._v(t._s(e.name))])])]}},{key:"default",fn:function(n){return[t.tableOptions.format.transposition?[a("span",{staticClass:"cell_label",style:t.cellStyle(t.tremFormatFn(n.row.valueKey).tremFormat,n.row[e.valueKey])},["text"===t.tremFormatFn(n.row.valueKey).showType?a("span",[t._v("\n              "+t._s(n.row[e.name])+"\n            ")]):"link"===t.tremFormatFn(n.row.valueKey).showType?a("a",{attrs:{href:n.row[e.valueKey],target:"_blank"}},[t._v("\n              "+t._s(n.row[e.name])+"\n            ")]):"img"===t.tremFormatFn(n.row.valueKey).showType?a("img",{attrs:{src:n.row[e.valueKey]}}):t._e()])]:[a("span",{staticClass:"cell_label",style:t.cellStyle(e.tremFormat,n.row[e.valueKey])},["text"===e.showType?a("span",[t._v("\n              "+t._s(n.row[e.valueKey])+"\n            ")]):"link"===e.showType?a("a",{attrs:{href:n.row[e.valueKey],target:"_blank"}},[t._v("\n              "+t._s(n.row[e.valueKey])+"\n            ")]):"img"===e.showType?a("img",{attrs:{src:n.row[e.valueKey]}}):t._e()])]]}}],null,!0)})}))],2)],1)},i=[],r={props:{tableData:{type:Array,default:function(){return[]}},tableOptions:{type:Object,default:function(){return{filterList:[],align:"",format:{indexType:!1,transposition:!1,wrap:!1,auto:!1},pagination:{paginationType:!1,pageSize:20,pageNum:1,max:1e3}}}}},data:function(){return{}},computed:{transTableHeader:function(){if(this.tableOptions.format.transposition){var t=this.handelTableData[0]&&Object.keys(this.handelTableData[0]).map((function(t){if("valueKey"!==t)return{name:t,valueKey:t}}));return t.filter((function(t){return t}))}return this.tableOptions.filterList},handelTableData:function(){var t=this,e=this.tableData;if(e.length<=0)return[];if(this.tableOptions.format.transposition){var a=this.tableOptions.filterList.map((function(t){return t.valueKey})),n={};a.forEach((function(t){n[t]=e.map((function(e){return e[t]}))}));var i=[];Object.keys(n).forEach((function(e){var a={};a.name=t.tableOptions.filterList.find((function(t){return t.valueKey===e})).name,a.valueKey=e,n[e].forEach((function(t,e){a["key"+e]=t})),i.push(a)})),e=i}return e}},methods:{sortChange:function(t){this.$emit("sortChange",t)},indexMethod:function(t){return(this.tableOptions.pagination.pageNum-1)*this.tableOptions.pagination.pageSize+t+1},tremFormatFn:function(t){return this.tableOptions.filterList.find((function(e){return e.valueKey===t}))||{}},cellStyle:function(t,e){if(!t||!e&&0!==e)return{};var a=t.symbol,n=t.value,i=t.viewColor,r=n;if("number"===typeof e&&(r=Number(n)),!a||!r&&0!==r||!i)return{};if("lt"===a){if(e<r)return{"background-color":i,color:"#fff"}}else if("equal"===a){if(r===e)return{"background-color":i,color:"#fff"}}else if("gt"===a&&e>r)return{"background-color":i,color:"#fff"};return{}}}},o=r,s=(a("7c9a"),a("2877")),c=Object(s["a"])(o,n,i,!1,null,"56e5cad8",null);e["a"]=c.exports},"60f6":function(t,e,a){},6183:function(t,e,a){},"7c9a":function(t,e,a){"use strict";a("60f6")},8302:function(t,e,a){"use strict";a("e320")},"834c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chartPanel_wrapper"},[a("div",{staticClass:"wrap_left"},[a("div",{staticClass:"search_top"},[a("div",{staticClass:"search_left"},[a("el-tooltip",{attrs:{effect:"dark",content:"全部",placement:"top",enterable:!1},nativeOn:{click:function(e){return t.getCatalogue("all")}}},[a("i",{staticClass:"el-icon-s-cooperation icon"})]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"收藏",placement:"top",enterable:!1},nativeOn:{click:function(e){return t.getCatalogue("tuck")}}},[a("svg-icon",{staticClass:"title_follow icon",attrs:{"icon-class":"follow"}})],1),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"分享",placement:"top",enterable:!1},nativeOn:{click:function(e){return t.getCatalogue("share")}}},[a("svg-icon",{staticClass:"share1",attrs:{"icon-class":"share1"}})],1)],1),t._v(" "),a("div",{staticClass:"search_right"},[a("el-tooltip",{attrs:{effect:"dark",content:"新建仪表盘",placement:"top",enterable:!1},nativeOn:{click:function(e){return t.addDashboard({},{},{},"tree")}}},[a("i",{staticClass:"el-icon-circle-plus-outline icon"})])],1)]),t._v(" "),"all"===t.activeTitle?a("customTree",{directives:[{name:"loading",rawName:"v-loading",value:t.folderLoading,expression:"folderLoading"}],ref:"customTree",attrs:{"set-no-drag":t.setNoDrag,"tree-data":t.folderList,"default-props":t.defaultProps,options:t.treeOptions,"node-options":t.nodeOptions,"is-contextmenu":!0,"is-filter":!0,depth:4,"no-drag":t.noDrag,"context-menu-option":t.contextMenuOption},on:{moveFile:t.moveFile,delFile:t.delFile,resetFolderName:t.resetFolderName,addFile:t.addFile,"node-click":t.handelFolder}}):t._e(),t._v(" "),a("div",{staticClass:"left_list"},[t.dashboardLoading?a("i",{staticClass:"el-icon-loading"}):a("div",{staticClass:"list_box"},[t._l(t.dashboardList,(function(e){return a("div",{key:e.id,staticClass:"list_item"},[a("div",{staticClass:"item",on:{click:function(a){return t.handelDashboard(e)}}},[a("span",{staticClass:"item_left"},[a("svg-icon",{attrs:{"icon-class":"dash"}}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(e.name))])],1),t._v(" "),a("span",{staticClass:"item_right"},["tuck"===t.activeTitle?a("el-tooltip",{staticClass:"item_tuck",attrs:{effect:"dark",content:"取消",placement:"top"},nativeOn:{click:function(a){return a.stopPropagation(),t.addTuckDashBoard(e)}}},[a("svg-icon",{class:["title_follow icon","shadow"],attrs:{"icon-class":"follow"}})],1):t._e()],1)])])})),t._v(" "),0===t.dashboardList.length?a("el-empty",{attrs:{description:"暂无数据"}}):t._e()],2)])],1),t._v(" "),a("div",{staticClass:"wrap_right"},[t.empty?a("el-empty",{attrs:{description:"暂无图表"}}):a("dashboardBox",{directives:[{name:"loading",rawName:"v-loading",value:t.dashLoading,expression:"dashLoading"}],ref:"dashboardBox"})],1)])},i=[],r=a("ff91"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"dashBoardBox",staticClass:"container"},[a("div",{staticClass:"tool_top"},[a("div",{staticClass:"tool_left"},[a("div",{staticClass:"title"},[t.nameType?a("el-input",{directives:[{name:"autoFous",rawName:"v-autoFous"}],attrs:{placeholder:"仪表盘名称",maxlength:"10",clearable:"",size:"mini"},on:{blur:function(e){t.nameType=!1}},model:{value:t.info.name,callback:function(e){t.$set(t.info,"name",e)},expression:"info.name"}}):a("div",{staticClass:"name_content"},[a("span",{staticClass:"name"},[t._v(t._s(t.info.name))]),t._v(" "),"look"!==t.type?a("i",{staticClass:"el-icon-edit icon",on:{click:function(e){t.nameType=!0}}}):t._e()])],1),t._v(" "),a("div",{staticClass:"owner"},[a("i",{staticClass:"el-icon-user"}),t._v(" "),a("span",[t._v(t._s(t.info.createBy))])])]),t._v(" "),a("div",{staticClass:"tool_right"},["look"===t.type?a("el-date-picker",{staticClass:"w130",attrs:{type:"date",disabled:t.disabledSchedule,"picker-options":t.pickerOptions,"value-format":"yyyyMMdd",placeholder:"选择日期",size:"mini"},on:{change:t.timeChange},model:{value:t.info.time,callback:function(e){t.$set(t.info,"time",e)},expression:"info.time"}}):t._e(),t._v(" "),"add"===t.type||"edit"===t.type?a("span",[t._v("\n        定时刷新\n        "),a("el-switch",{on:{change:t.scheduleChange},model:{value:t.info.is_schedule,callback:function(e){t.$set(t.info,"is_schedule",e)},expression:"info.is_schedule"}})],1):t._e(),t._v(" "),"look"!==t.type?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addChartBtn}},[t._v("添加图表")]):t._e(),t._v(" "),"look"!==t.type||t.isShare?t._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.editDashboar}},[a("i",{staticClass:"el-icon-edit"}),t._v("\n        编 辑\n      ")]),t._v(" "),"look"!==t.type?a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.cancelDashboard}},[t._v(" 取 消 ")]):t._e(),t._v(" "),"look"!==t.type?a("el-button",{staticClass:"toolbar-save icon",attrs:{type:"primary",size:"mini"},on:{click:t.addDashBoardSub}},[t.submitLoading?a("i",{staticClass:"el-icon-loading"}):a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"save"}}),t._v("\n        保 存\n      ")],1):t._e(),t._v(" "),"look"!==t.type||t.isShare?t._e():a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.delDashBoard}},[a("i",{staticClass:"el-icon-delete icon"}),t._v("\n        删 除\n      ")]),t._v(" "),"look"!==t.type||t.isShare?t._e():a("el-button",{staticClass:"share",attrs:{type:"primary",size:"mini"},on:{click:t.share}},[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":"share"}}),t._v("\n        分 享\n      ")],1)],1)]),t._v(" "),"look"!==t.type||t.info.describe?a("el-input",{attrs:{disabled:"look"===t.type,type:"textarea",rows:3,placeholder:"请输入仪表盘描述"},model:{value:t.info.describe,callback:function(e){t.$set(t.info,"describe",e)},expression:"info.describe"}}):t._e(),t._v(" "),a("div",{staticClass:"content"},[a("dashBoardGrid",{attrs:{options:t.gridOptions,data:t.dashBoardData,"sub-height":"look"===t.type&&!t.info.describe,"add-padding":"look"!==t.type&&t.dashBoardData.length>0}})],1),t._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.addChartLoading,expression:"addChartLoading"}],staticClass:"addChartDial",attrs:{title:"添加图表",visible:t.addChartType,width:"60%"},on:{"update:visible":function(e){t.addChartType=e},close:t.addChartClose}},[a("div",{staticClass:"search"},[a("el-input",{staticClass:"search_input",attrs:{size:"mini",placeholder:"图表名称"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getChartTable(e)}},model:{value:t.params.title,callback:function(e){t.$set(t.params,"title",e)},expression:"params.title"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:t.getChartTable},slot:"suffix"})])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.chartTableLoading,expression:"chartTableLoading"}],ref:"chartTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.chartData,"header-cell-style":{padding:"3px 0"}}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.selectable}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"图表名称",sortable:"","min-width":"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"createBy",label:"创建人",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.$utils.parseTime(e.row.createTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"图表类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["table"===e.row.type?a("svg-icon",{staticClass:"chartTable",attrs:{"icon-class":"chartTable"}}):"line"===e.row.type?a("svg-icon",{staticClass:"chartLine",attrs:{"icon-class":"chartLine"}}):"interval"===e.row.type||"stack"===e.row.type?a("svg-icon",{staticClass:"chartColumn",attrs:{"icon-class":"chartColumn"}}):"polygon"===e.row.type?a("svg-icon",{staticClass:"rectChart",attrs:{"icon-class":"rectChart"}}):t._e()]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","page-sizes":[10,20,50,100],"current-page":t.params.pageNum,"page-size":t.params.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addChartType=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addChartSubmit}},[t._v(" 确 定 ")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"addChartDial",attrs:{title:"调度时间",visible:t.scheduleType,width:"40%"},on:{"update:visible":function(e){t.scheduleType=e},close:t.closeDispatch}},[a("div",{staticClass:"chartDialBox"},[a("el-alert",{attrs:{title:"若开启定时刷新，将会在数据开发中运行定时任务",type:"warning","show-icon":"",closable:!1}}),t._v(" "),a("div",{staticClass:"form_item"},[a("div",{staticClass:"label"},[t._v("定时调度时间:")]),t._v(" "),a("div",{staticClass:"item_item"},[a("span",{staticClass:"symbolText"},[t._v(" 每 ")]),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{disabled:""},model:{value:t.dispashForm.cycle,callback:function(e){t.$set(t.dispashForm,"cycle",e)},expression:"dispashForm.cycle"}},t._l(t.cycleList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("span",{staticClass:"symbolText"},[t._v(" 在 ")]),t._v(" "),a("el-select",{staticStyle:{width:"100px"},model:{value:t.dispashForm.hourly,callback:function(e){t.$set(t.dispashForm,"hourly",e)},expression:"dispashForm.hourly"}},t._l(t.hourlyList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("span",{staticClass:"symbolText"},[t._v(" : ")]),t._v(" "),a("el-select",{staticStyle:{width:"100px"},model:{value:t.dispashForm.minute,callback:function(e){t.$set(t.dispashForm,"minute",e)},expression:"dispashForm.minute"}},t._l(t.minuteList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("span",{staticClass:"symbolText"},[t._v(" 开始调度 ")])],1)])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.scheduleType=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmTime}},[t._v("确 定")])],1)]),t._v(" "),a("dashBoardShare",{ref:"dashBoardShare",on:{submitFn:t.shareSubmit}})],1)},s=[],c=a("2f62"),l=a("8cbe"),u=a("b199"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"grid_box",class:["grid_box",t.subHeight?"subHeight":"",t.addPadding?"addPadding":""]},[0===t.data.length?a("el-empty",{attrs:{description:"暂无图表"}}):a("draggable",{staticClass:"draggable",attrs:{handle:".move_bar",group:"player",animation:"500",delay:"0",disabled:t.options.isDrag,"ghost-class":"ghost","chosen-class":"chosen","force-fallback":"",move:t.onMove},on:{start:t.onStart,end:t.onEnd}},t._l(t.data,(function(e,n){return a("el-card",{key:e.id+""+n,staticClass:"grid_item",style:{width:e.width,height:e.height+"px"}},[a("dashBoardItem",{attrs:{data:e,options:t.options},on:{delDashBoard:t.delDashBoard}}),t._v(" "),t.options.isDrag?t._e():a("i",{directives:[{name:"dragSize",rawName:"v-dragSize",value:e,expression:"data"}],staticClass:"el-icon-caret-bottom move_icon"})],1)})),1)],1)},h=[],f=a("b76a"),p=a.n(f),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashBoardItem_content"},[a("div",{staticClass:"item_title"},[a("div",{staticClass:"title_l"},[t.options.isDrag?t._e():a("div",{staticClass:"move_bar"}),t._v(" "),a("div",{staticClass:"title_l_r"},[a("span",{staticClass:"name"},[t._v(t._s(t.data.name))]),t._v(" "),t.data.viewTime?a("span",{staticClass:"time"},[t._v(t._s(t.$utils.parseTime(t.data.viewTime)))]):t._e()])]),t._v(" "),a("div",{staticClass:"title_r"},[t.options.isDrag?t._e():a("el-dropdown",{ref:"expdropdown",attrs:{placement:"bottom-start",trigger:"click"}},[a("span",{staticClass:"title_icon"},[a("svg-icon",{staticClass:"svg_extendedMenu",attrs:{"icon-class":"extendedMenu"}})],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.editDashBoard(t.data)}}},[t._v("编 辑")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){return t.delDashBoard(t.data)}}},[t._v("删 除")])],1)],1)],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.data.resData,expression:"!data.resData"}],ref:"itemBox",staticClass:"item_box",style:{height:t.data.height-50+"px"}},[t.nullData?a("el-empty",{attrs:{description:"暂无数据"}}):["table"===t.data.type&&t.data.resData&&t.data.resData.length>0?a("div",{staticClass:"item_item"},[t.data.param.tableSearhList&&t.data.param.tableSearhList.length>0?a("div",{staticClass:"search"},t._l(t.data.param.tableSearhList,(function(e){return a("div",{key:e.name,staticClass:"search_item"},[a("span",{staticClass:"name"},[t._v(t._s(e.name+": "))]),t._v(" "),a("el-input",{attrs:{placeholder:e.name,size:"mini",clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"val.value"}})],1)})),0):t._e(),t._v(" "),a("myTable",{attrs:{"table-data":t.tableData,"table-options":Object.assign({},t.data.param,t.data.param.form.params)},on:{sortChange:t.sortChange}}),t._v(" "),t.data.param.form.params.pagination.paginationType?a("el-pagination",{attrs:{background:"",total:t.filterData.length,layout:"total, sizes, prev, pager, next, jumper","current-page":t.data.param.form.params.pagination.pageNum,"page-size":t.data.param.form.params.pagination.pageSize,"page-sizes":[10,20,30,50]},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1):a("div",{staticClass:"item_item"},[t.data.resData&&t.data.resData.length>0?a("chart",t._b({key:t.data.height,attrs:{data:Object.assign({},{result:t.data.resData,type:t.data.columnList})}},"chart",Object.assign({},{chartConfig:t.data.param.form,chartConfigOptions:Object.assign(t.data.param.chartOptions,{chartHeight:t.data.height-60,padding:t.setPadding(t.data)})}),!1)):t._e()],1)]],2)])},v=[],b=a("e46f"),g=a("5dae"),y=a("1f17"),_={components:{chart:b["a"],myTable:g["a"]},props:{data:{type:Object,default:function(){return{resData:[]}}},options:{type:Object,default:function(){return{isDrag:!1}}}},data:function(){return{filterType:!1,nullData:!1}},computed:{tableData:function(){var t=this.filterData;if(this.filterType){var e=JSON.parse(JSON.stringify(t));t=e.sort(this.sortFun(this.filterColumn.prop,"ascending"===this.filterColumn.order))}if(this.data.param.form.params&&this.data.param.form.params.pagination.paginationType){var a=this.data.param.form.params.pagination.pageSize*(this.data.param.form.params.pagination.pageNum-1),n=a+this.data.param.form.params.pagination.pageSize;t=t.slice(a,n)}return t},filterData:function(){var t=this,e=this.data.resData;if(this.data.param.tableSearhList&&this.data.param.tableSearhList.length>0&&this.data.param.tableSearhList.some((function(t){return t.value.trim()}))){var a=this.data.param.tableSearhList.filter((function(t){return t.value.trim()})),n=a.map((function(t){return t.valueKey})),i=a.map((function(t){return t.value}));e=e.filter((function(e){var a=[];return n.forEach((function(n,r){var o=t.data.columnList.find((function(t){return Object.keys(t)[0]===n}));o&&y["d"].includes(o[Object.keys(o)[0]])?(e[n]||0===e[n])&&a.push(e[n]===1*i[r]):e[n]&&a.push(e[n].includes(i[r]))})),!(!a||0===a.length)&&!a.some((function(t){return!t}))}))}return e}},watch:{"data.height":{handler:function(t){var e=this.$refs.itemBox;e&&(e.style.height=t-65+"px")}},"data.resData":{handler:function(t){t&&0===t.length?this.nullData=!0:t&&(this.nullData=!1)},immediate:!0},"data.param.tableSearhList":{handler:function(){this.data.param.form.params&&this.data.param.form.params.pagination.paginationType&&(this.data.param.form.params.pagination.pageNum=1)},deep:!0}},methods:{setPadding:function(t){if("polygon"===t.type)return[0,0,20,0];var e=[10,10,40,60];return t.param.form.legend&&(e[2]=60),t.param.form.axisY.name&&(e[3]=100),e},delDashBoard:function(t){var e=this;this.$confirm("确定要删除该图表吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("delDashBoard",t)}))},sortChange:function(t){this.filterColumn=t,this.filterType=t.order},sortFun:function(t,e){return e=void 0===e||e?1:-1,function(a,n){var i=/^[0-9]+.?[0-9]*$/;return a=a[t],n=n[t],i.test(a)&&i.test(n)&&(a=Number(a),n=Number(n)),a<n?-1*e:a>n?1*e:0}},handleSizeChange:function(t){this.data.param.form.params.pagination.pageSize=t},handleCurrentChange:function(t){this.data.param.form.params.pagination.pageNum=t},editDashBoard:function(t){window.open("".concat(this.$locationOrigin,"/data-analysis/query?uuid=").concat(t.uuid,"&BIID=").concat(t.id))}}},O=_,k=(a("ac58"),a("2877")),w=Object(k["a"])(O,m,v,!1,null,"4037fb74",null),x=w.exports;function C(t){return j(t)||T(t)||S(t)||D()}function D(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){if(t){if("string"===typeof t)return L(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?L(t,e):void 0}}function T(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function j(t){if(Array.isArray(t))return L(t)}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var B={components:{draggable:p.a,dashBoardItem:x},directives:{dragSize:{inserted:function(t,e){var a=t,n=t.parentElement.parentElement;a.style.cursor="se-resize",a.onmousedown=function(t){document.body.style.cursor="se-resize",t.preventDefault();var a,i,r=t.clientX,o=t.clientY,s=n.clientWidth,c=n.clientHeight;document.onmousemove=function(t){var l=t.clientX-r,u=t.clientY-o;a=s+l<200?200:s+l,i=c+u<200?200:c+u,n.style.width="calc(".concat(a/e.value.contentWidth*100>=100?100:a/e.value.contentWidth*100,"% - 10px)"),n.style.height="".concat(i,"px")},document.onmouseup=function(t){document.body.style.cursor="default",e.value.width="calc(".concat(a/e.value.contentWidth*100>=100?100:a/e.value.contentWidth*100,"% - 10px)"),e.value.height=i,document.onmousemove=null,document.onmouseup=null}}},update:function(t,e){var a=t,n=t.parentElement.parentElement;a.style.cursor="se-resize",a.onmousedown=function(t){document.body.style.cursor="se-resize",t.preventDefault();var a,i,r=t.clientX,o=t.clientY,s=n.clientWidth,c=n.clientHeight;document.onmousemove=function(t){var l=t.clientX-r,u=t.clientY-o;a=s+l<200?200:s+l,i=c+u<200?200:c+u,n.style.width="calc(".concat(a/e.value.contentWidth*100>=100?100:a/e.value.contentWidth*100,"% - 10px)"),n.style.height="".concat(i,"px")},document.onmouseup=function(t){document.body.style.cursor="default",e.value.width="calc(".concat(a/e.value.contentWidth*100>=100?100:a/e.value.contentWidth*100,"% - 10px)"),e.value.height=i,document.onmousemove=null,document.onmouseup=null}}}}},props:{options:{type:Object,default:function(){return{isDrag:!1}}},data:{type:Array,default:function(){return[]}},subHeight:{type:Boolean,default:!1},addPadding:{type:Boolean,default:!1}},data:function(){return{containerWidth:0}},watch:{containerWidth:function(t){this.data.forEach((function(e){e.contentWidth=t}))},data:function(t){var e=this;t.forEach((function(t){t.contentWidth=e.containerWidth}))}},mounted:function(){var t,e=this;this.containerWidth=(null==(t=this.$refs.grid_box)?void 0:t.clientWidth)||0,window.onresize=function(){var t;e.containerWidth=(null==(t=e.$refs.grid_box)?void 0:t.clientWidth)||0}},methods:{delDashBoard:function(t){var e=this.data.findIndex((function(e){return e.id===t.id}));e>-1&&this.data.splice(e,1)},onStart:function(t){},onEnd:function(t){var e,a,n=this.data.splice(t.oldIndex,1);(e=this.data).splice.apply(e,[t.newIndex,0].concat(C(n)));var i=this.data.splice(t.newIndex+1,1);(a=this.data).splice.apply(a,[t.oldIndex,0].concat(C(i)))},onMove:function(t,e){return!0}}},N=B,E=(a("49adc"),Object(k["a"])(N,d,h,!1,null,"1c54b76b",null)),F=E.exports,$=a("c46b");function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function z(t){return Y(t)||X(t)||P(t)||A()}function A(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(t,e){if(t){if("string"===typeof t)return J(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?J(t,e):void 0}}function X(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Y(t){if(Array.isArray(t))return J(t)}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function W(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function q(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?W(Object(a),!0).forEach((function(e){M(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function M(t,e,a){return e=K(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function K(t){var e=H(t,"string");return"symbol"===I(e)?e:String(e)}function H(t,e){if("object"!==I(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var G={components:{dashBoardGrid:F,dashBoardShare:$["a"]},data:function(){return{isShare:!1,submitLoading:!1,type:"look",dispashForm:{hourly:0,minute:0,cycle:"daily"},info:{name:"",createBy:"",time:"",is_schedule:!1,describe:"",crontab:""},scheduleType:!1,oldInfo:{},oldDashBoardData:[],nameType:!1,addChartType:!1,chartTableLoading:!1,params:{title:"",pageSize:20,pageNum:1,type:"my"},total:0,chartData:[],dashBoardData:[],pickerOptions:{disabledDate:function(t){return t>new Date}},addChartLoading:!1,folderObj:{},disabledSchedule:!1,cycleList:[{label:"天",value:"daily"}]}},computed:q(q({},Object(c["c"])(["userInfo"])),{},{gridOptions:function(){return{isDrag:"look"===this.type}},hourlyList:function(){for(var t=[],e=0;e<=23;e++)t.push({label:e<10?"0"+e:e+"",value:e});return t},minuteList:function(){for(var t=[],e=0;e<=60;e++)t.push({label:e<10?"0"+e:e+"",value:e});return t}}),methods:{selectable:function(t){var e=this.dashBoardData.map((function(t){return t.id}));return!e.includes(t.id)},delDashBoard:function(){var t=this;this.$confirm("确定要删除该看板吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(e){Object(l["z"])({id:t.info.id+""}).then((function(e){var a;0===e.code&&(null==(a=t.$parent)||a.getDashboardTree(),t.$parent.empty=!0,t.$message({type:"success",message:"操作成功"}))}))}))},timeChange:function(t){var e=this;this.dashBoardData.forEach((function(a){a.resData=void 0,e.getDashData(e.dashBoardData,{id:a.id,bidt:t,status:a.status,uuid:a.uuid})}))},resetData:function(){this.info={name:"",createBy:"",time:"",is_schedule:!1,describe:"",crontab:""},this.dashBoardData=[]},initData:function(t){var e=this;this.type="look",this.isShare=t.isShare,this.info.describe=t.describeDash,this.info.name=t.name,this.info.createBy=t.createBy,this.info.time=t.time,this.info.id=t.id,this.info.crontab=t.crontab,this.info.classid=t.classId,this.info.is_schedule=!!t.isSchedule,this.dashBoardData=JSON.parse(t.params),this.dashBoardData.forEach((function(e){var a=t.chartlist.findIndex((function(t){return t.id===e.id}));a>-1&&(e.param=JSON.parse(t.chartlist[a].param),e["status"]=t.chartlist[a].status)})),0===t.isSchedule?(this.disabledSchedule=!0,this.dashBoardData.forEach((function(t){e.getDashData(e.dashBoardData,{id:t.id,bidt:e.$utils.parseTime(t.createTime,"{y}{m}{d}"),status:t.status,uuid:t.uuid})}))):(this.disabledSchedule=!1,this.info.time=this.$utils.parseTime((new Date).getTime(),"{y}{m}{d}"),this.dashBoardData.forEach((function(t){e.getDashData(e.dashBoardData,{id:t.id,bidt:e.info.time,status:t.status,uuid:t.uuid})})))},getDashData:function(t,e){var a=this,n=[],i={},r=l["Q"],o=t.findIndex((function(t){return t.id===e.id}));if("success"!==e.status)if(this.info.is_schedule){if(this.$utils.parseTime(t[o].createTime,"{y}{m}{d}")!==this.info.time)return void this.$set(t,o,q(q({},t[o]),{},{resData:n,viewTime:null}));r=l["W"],i=e.uuid,t[o].viewTime=t[o].createTime}else r=l["W"],i=e.uuid,t[o].viewTime=t[o].createTime;else if(i.id=e.id,i.bidt=e.bidt,this.info.is_schedule){var s=this.info.crontab.split(" ").filter((function(t,e){return e<=1})).reverse().join(":");t[o].viewTime=e.bidt+" ".concat(s)}else t[o].viewTime=t[o].createTime;r(i).then((function(t){var a;"success"!==e.status?n=(null==(a=t.data)?void 0:a.result)||[]:n=t.data})).finally((function(){t.forEach((function(i,r){i.id===e.id&&a.$set(t,r,q(q({},i),{},{resData:n}))}))}))},addDashBoardSub:function(){var t=this;if(!this.submitLoading)if(this.info.name){this.submitLoading=!0;var e=q(q({},this.info),{},{classid:this.folderObj.id+"",params:JSON.stringify(this.dashBoardData.map((function(t){return q(q({},t),{},{resData:void 0,param:{},viewTime:null})}))),chart_id:this.dashBoardData.map((function(t){return t.id+""}))});this.info.is_schedule?e.is_schedule="1":e.is_schedule="0";var a=l["c"];this.info.id&&(a=l["Cb"],e.id+="",e.classid=this.info.classid+""),a(e).then((function(e){var a;0===e.code&&(t.type="look",t.info.is_schedule?t.disabledSchedule=!1:(t.disabledSchedule=!0,t.info.time=""),e.data&&(t.info.id=e.data.id,t.info.classid=e.data.classId),t.$message({type:"success",message:"保存成功"}),null==(a=t.$parent)||a.getDashboardTree())})).finally((function(){t.submitLoading=!1}))}else this.$message({type:"warning",message:"请输入看板名称"})},shareSubmit:function(t){var e=this,a={sharer:this.userInfo.userId,sharee:t.sharee,shareeEmail:t.shareeEmail,shareid:this.info.id+"",shareUrl:this.$locationOrigin+"/data-analysis/dashboardManagement?dashBoardId=".concat(this.info.id)};Object(l["xb"])(a).then((function(t){0===t.code&&e.$message({type:"success",message:"操作成功"})}))},share:function(){this.$refs.dashBoardShare.open()},addDashboard:function(t,e,a){this.folderObj=a,this.type="add",this.info={name:"",createBy:this.userInfo.userId,time:"",reset:!1,content:""},this.dashBoardData=[],this.nameType=!0},addChartSubmit:function(){var t,e=this;this.addChartLoading=!0;var a=this.$refs.chartTable.selection.map((function(t){return t.width="table"===t.type?"calc(100% - 10px)":"calc(50% - 10px)",e.$set(t,"height",400),t.resData=void 0,t.param=JSON.parse(t.param),t.columnList=JSON.parse(t.columnList),t}));(t=this.dashBoardData).push.apply(t,z(a)),this.dashBoardData.filter((function(t){return!t.resData})).forEach((function(t){e.getDashData(e.dashBoardData,{id:t.id,bidt:t.uuid_time,status:t.status,uuid:t.uuid})})),this.addChartType=!1,this.addChartLoading=!1},closeDispatch:function(){this.info.crontab||(this.dispashForm.hourly=0,this.dispashForm.minute=0,this.dispashForm.cycle="daily",this.info.is_schedule=!1)},confirmTime:function(){var t=this;Object(u["w"])({cycle:"daily",range:[],interval:5,startTime:"00:00",endTime:"23:59",fixedTime:"".concat(this.dispashForm.hourly<10?"0".concat(this.dispashForm.hourly):this.dispashForm.hourly,":").concat(this.dispashForm.minute<10?"0".concat(this.dispashForm.minute):this.dispashForm.minute)}).then((function(e){t.info.crontab=e.data})).finally((function(){t.scheduleType=!1}))},scheduleChange:function(t){this.scheduleType=t,t||(this.info.crontab="")},editDashboar:function(){this.type="edit",this.oldInfo=JSON.parse(JSON.stringify(this.info)),this.oldDashBoardData=JSON.parse(JSON.stringify(this.dashBoardData)),this.nameType=!0},cancelDashboard:function(){"add"===this.type&&(this.$parent.empty=!0),this.type="look",Object.keys(this.oldInfo).length>0&&(this.info=this.oldInfo),this.oldDashBoardData.length>0&&(this.dashBoardData=this.oldDashBoardData),this.nameType=!1},addChartBtn:function(){this.addChartType=!0,this.getChartTable()},handleSizeChange:function(t){this.params.pageSize=t,this.getChartTable()},handleCurrentChange:function(t){this.params.pageNum=t,this.getChartTable()},addChartClose:function(){this.params.title="",this.params.pageSize=20,this.params.pageNum=1,this.chartData=[]},getChartTable:function(){var t=this;this.chartTableLoading=!0,Object(l["R"])(this.params).then((function(e){t.chartData=e.data.list,t.total=e.data.total})).finally((function(){t.chartTableLoading=!1}))}}},V=G,U=(a("b764"),Object(k["a"])(V,o,s,!1,null,"063d72f4",null)),R=U.exports,Q=a("953e");function Z(t){return nt(t)||at(t)||et(t)||tt()}function tt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function et(t,e){if(t){if("string"===typeof t)return it(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?it(t,e):void 0}}function at(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function nt(t){if(Array.isArray(t))return it(t)}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var rt={components:{customTree:r["a"],dashboardBox:R},data:function(){return{nodeOptions:{key:"type",value:"看板",icon:"dash"},empty:!0,defaultProps:{children:"child",label:"name"},treeOptions:{"expand-on-click-node":!1,draggable:!0},noDrag:[],folderLoading:!1,folderList:[],activeTitle:"all",dashboardList:[],dashboardLoading:!1,contextMenuOption:{menuList:[{label:"新建仪表盘",disabledFn:this.dashboardDisabledType,onClick:this.addDashboard},{label:"收藏",disabledFn:this.dashBoardTuckType,onClick:this.tuckDashboard}],setMenu:this.setMenu},dashLoading:!1}},mounted:function(){this.getDashboardTree();var t=this.$route.query.dashBoardId;if(t)this.handelDashboard({id:t,isShare:!0});else{var e=JSON.parse(Object(Q["a"])("dashboardSave"));e&&this.handelDashboard({id:e.id,isShare:e.isShare})}},methods:{setNoDrag:function(t,e,a){return"看板"!==e.data.type},addTuckDashBoard:function(t){var e=this;1===t.isFavorate?Object(l["p"])({id:t.id+"",type:"dashboard"}).then((function(t){0===t.code&&e.$message({type:"success",message:"取消成功"})})).finally((function(){e.getDashboardTree(),e.getDashboardList()})):Object(l["j"])({favorId:t.id+"",type:"dashboard",isActive:1}).then((function(t){0===t.code&&e.$message({type:"success",message:"收藏成功"})})).finally((function(){e.getDashboardTree()}))},addDashboard:function(t,e,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.empty=!1,this.$nextTick((function(){if(i){var r,o=n.folderList[0]||{};null==(r=n.$refs.dashboardBox)||r.addDashboard(t,e,o)}else{var s;null==(s=n.$refs.dashboardBox)||s.addDashboard(t,e,a)}}))},tuckDashboard:function(t,e,a){this.addTuckDashBoard(a)},getCatalogue:function(t){this.activeTitle=t,"all"!==t&&this.getDashboardList()},dashboardDisabledType:function(t,e,a){return!a[this.defaultProps.children]||"看板"===a.type||4===e.level},dashBoardTuckType:function(t,e,a){return"看板"!==a.type},setMenu:function(t,e,a,n){t.forEach((function(t){"新建文件夹"===t.label&&("看板"===t.type||a.level>=3)&&(t.disabled=!0),"收藏"===t.label&&1===n.isFavorate&&(t.label="取消收藏")}));var i=t.findIndex((function(t){return"新建仪表盘"===t.label})),r=t.splice(i,1);return t.splice.apply(t,[1,0].concat(Z(r))),t},moveFile:function(t,e){var a=this,n={id:t.id+"",parent_id:e.id?e.id+"":null,is_query:"看板"===t.type?"1":"0"};Object(l["rb"])(n).then((function(t){0===t.code&&a.$message({type:"success",message:"操作成功"})})).finally((function(){a.getDashboardTree()}))},delFile:function(t){var e=this,a=l["A"];"看板"===t.type&&(a=l["z"]),a({id:t.id+""}).then((function(a){0===a.code&&(e.$message({type:"success",message:"删除成功"}),"看板"===t.type&&(e.empty=!0),e.getDashboardTree())}))},resetFolderName:function(t){var e=this,a={id:t.id+"",is_query:"看板"===t.type?"1":"0",name:t[this.defaultProps.label]};Object(l["I"])(a).then((function(t){0===t.code&&e.$message({type:"success",message:"修改成功"})})).finally((function(){e.getDashboardTree()}))},addFile:function(t,e){var a,n=this,i={name:t.addFileName,level:e?e.level+1:1,parent_id:e?e.id:null==(a=this.folderList[0])?void 0:a.id,is_active:1,is_query:0};Object(l["d"])(i).then((function(t){"SUCCESS"===t.codeStr&&(n.$message({type:"success",message:"新建成功"}),n.getDashboardTree())}))},handelFolder:function(t,e,a){"看板"===t.type&&this.handelDashboard(t)},handelDashboard:function(t){var e,a=this;this.empty=!1,null==(e=this.$refs.dashboardBox)||e.resetData(),this.dashLoading=!0,Object(l["T"])({id:t.id}).then((function(e){var n;0===e.code&&(null==(n=a.$refs.dashboardBox)||n.initData(Object.assign(e.data[0],{isShare:t.isShare})),Object(Q["c"])("dashboardSave",JSON.stringify({id:t.id,isShare:t.isShare})))})).finally((function(){a.dashLoading=!1}))},getDashboardList:function(){var t=this;this.dashboardLoading=!0,Object(l["U"])({pageNum:1,pageSize:1e4,type:this.activeTitle}).then((function(e){t.dashboardList=e.data.list})).finally((function(){t.dashboardLoading=!1}))},getDashboardTree:function(){var t=this;this.folderLoading=!0,Object(l["V"])().then((function(e){t.folderList=e.data})).finally((function(){t.folderLoading=!1}))}}},ot=rt,st=(a("8302"),Object(k["a"])(ot,n,i,!1,null,"05f702a8",null));e["default"]=st.exports},"83e0":function(t,e,a){},"871c":function(t,e,a){},ac55:function(t,e,a){"use strict";a("f796")},ac58:function(t,e,a){"use strict";a("3068")},b199:function(t,e,a){"use strict";a.d(e,"y",(function(){return r})),a.d(e,"W",(function(){return o})),a.d(e,"E",(function(){return s})),a.d(e,"p",(function(){return c})),a.d(e,"ab",(function(){return l})),a.d(e,"s",(function(){return u})),a.d(e,"r",(function(){return d})),a.d(e,"t",(function(){return h})),a.d(e,"Q",(function(){return f})),a.d(e,"T",(function(){return p})),a.d(e,"A",(function(){return m})),a.d(e,"O",(function(){return v})),a.d(e,"B",(function(){return b})),a.d(e,"q",(function(){return g})),a.d(e,"e",(function(){return y})),a.d(e,"g",(function(){return _})),a.d(e,"d",(function(){return O})),a.d(e,"ib",(function(){return k})),a.d(e,"n",(function(){return w})),a.d(e,"Y",(function(){return x})),a.d(e,"I",(function(){return C})),a.d(e,"H",(function(){return D})),a.d(e,"c",(function(){return S})),a.d(e,"hb",(function(){return T})),a.d(e,"m",(function(){return j})),a.d(e,"j",(function(){return L})),a.d(e,"f",(function(){return B})),a.d(e,"bb",(function(){return N})),a.d(e,"J",(function(){return E})),a.d(e,"F",(function(){return F})),a.d(e,"h",(function(){return $})),a.d(e,"db",(function(){return I})),a.d(e,"z",(function(){return z})),a.d(e,"R",(function(){return A})),a.d(e,"u",(function(){return P})),a.d(e,"D",(function(){return X})),a.d(e,"P",(function(){return Y})),a.d(e,"w",(function(){return J})),a.d(e,"Z",(function(){return W})),a.d(e,"C",(function(){return q})),a.d(e,"eb",(function(){return M})),a.d(e,"a",(function(){return K})),a.d(e,"fb",(function(){return H})),a.d(e,"cb",(function(){return G})),a.d(e,"G",(function(){return V})),a.d(e,"U",(function(){return U})),a.d(e,"i",(function(){return R})),a.d(e,"k",(function(){return Q})),a.d(e,"K",(function(){return Z})),a.d(e,"L",(function(){return tt})),a.d(e,"N",(function(){return et})),a.d(e,"M",(function(){return at})),a.d(e,"b",(function(){return nt})),a.d(e,"l",(function(){return it})),a.d(e,"o",(function(){return rt})),a.d(e,"S",(function(){return ot})),a.d(e,"gb",(function(){return st})),a.d(e,"X",(function(){return ct})),a.d(e,"v",(function(){return lt})),a.d(e,"V",(function(){return ut}));var n=a("7258"),i="/ds_task/task";function r(t){return n["b"].post("/ds_task/metadata/search",t,{timeout:12e4})}function o(){return n["b"].get("/ds_task/sysdict/getTemplateList")}function s(t){return n["b"].get("/ds_task/dict/list",{params:t})}function c(t){return n["b"].get("/ds_task/artifact/list",{params:t})}function l(t){return n["b"].get("/ds_task/artifactversion/list",{params:t})}function u(t){return n["b"].get("/ds_task/flinkcluster/list",{params:t})}function d(t){return n["b"].get("/ds_task/flinkcluster/auto",{params:t})}function h(t){return n["b"].get("/ds_task/flinkcluster/noauto",{params:t})}function f(t){return n["b"].get("".concat(i,"/get"),{params:t})}function p(t){return n["b"].get("".concat(i,"/page"),{params:t,timeout:6e4})}function m(t){return n["b"].post("/ds_task/metadata/getddl",t)}function v(t){return n["b"].get("".concat(i,"/getInsertSql"),{params:t,timeout:6e5})}function b(t){return n["b"].post("/ds_task/metadata/getdispalyddl",t)}function g(t){return n["b"].get("".concat(i,"/getChildDependencies"),{params:{id:t}})}function y(t){return n["b"].get("".concat(i,"/backfill"),{params:t})}function _(t){return n["b"].put("".concat(i,"/onlineAndOffline"),null,{params:t})}function O(t){return n["b"].post("".concat(i,"/add"),t)}function k(t){return n["b"].put("".concat(i,"/update"),t)}function w(t){return n["b"].delete("".concat(i,"/new/delete"),{params:t})}function x(t){return n["b"].get("/ds_task/user/list",{params:{name:t}})}function C(t){return n["b"].get("/ds_task/label/list",{params:{name:t}})}function D(t){return n["b"].get("/ds_task/label/get",{params:{id:t}})}function S(t){return n["b"].post("/ds_task/label/add",t)}function T(t){return n["b"].put("/ds_task/label/update",t)}function j(t){return n["b"].delete("/ds_task/label/delete",{params:{id:t}})}function L(t){return n["b"].patch("/ds_task/collect/add",null,{params:t})}function B(t){return n["b"].get("/ds_task/collect/cancel",{params:t})}function N(t){return n["b"].get("/ds_task/collect/my",{params:t})}function E(t){return n["b"].get("/ds_task/task/listforlabel",{params:{name:t}})}function F(t){return n["b"].get("/ds_task/task/iam",{params:t})}function $(t){return n["b"].post("/ds_task/task/check",t,{timeout:18e4})}function I(t){return n["b"].get("/ds_task/task/name/search",{params:{name:t}})}function z(t){return n["b"].get("/ds_task/task/backfillDateDetail",{params:t})}function A(t){return n["b"].get("/ds_task/task/last7",{params:t})}function P(t){return n["b"].get("/ds_task/user/getEffectiveCostList",{params:{name:t}})}function X(t){return n["b"].get("/ds_task/task/getGitSqlFile",{params:t})}function Y(t){return n["b"].post("/ds_task/task/sqlTbls",t,{headers:{"Content-Type":"multipart/form-data"}})}function J(t){return n["b"].post("/ds_task/task/getCrontab",t)}function W(t){return n["b"].get("/ds_task/taskversion/pages",{params:t})}function q(){return n["b"].get("/ds_task/auditlog/type?module=task")}function M(t){return n["b"].get("/ds_task/taskversion/verionSwitch",{params:t})}function K(t){return n["b"].post("/ds_task/task/addAndStart",t)}function H(t){return n["b"].post("/ds_task/task/updateAndStart",t)}function G(t){return n["b"].post("/ds_task/task/date/preview",t)}function V(t){return n["b"].post("/ds_task/task/mergeSmallFiles/jars",t)}function U(t){return n["b"].post("/ds_task/task/getTasks",t)}function R(t){return n["b"].post("/ds_task/task/checkPath",t,{headers:{"Content-Type":"multipart/form-data"}})}function Q(t){return n["b"].post("/ds_task/task/fastBackfill?taskId="+t.taskId,t)}function Z(t){return n["b"].get("/ds_task/task/renderContent",{params:t})}function tt(t){return n["b"].post("/ds_task/metadata/preview",t)}function et(t){return n["b"].get("/ds_task/actor/sources/page",{params:t})}function at(t){return n["b"].get("/ds_task/taskfolder/listFolder",{params:t})}function nt(t){return n["b"].post("/ds_task/taskfolder/saveFolder",t)}function it(t){return n["b"].get("/ds_task/taskfolder/deleteFolder",{params:t})}function rt(t){return n["b"].post("/ds_task/taskfolder/editFolder",t)}function ot(t){return n["b"].get("/ds_task/taskfolder/listTask",{params:t})}function st(t){return n["b"].post("/ds_task/taskfolder/updateTask",t)}function ct(t){return n["b"].get("/ds_task/wechatAlert/listById?id=".concat(t))}function lt(t){return n["b"].post("/pipeline/cron/get",t)}function ut(t){return n["b"].get("/ds_task/task/templateRendering",{params:t})}},b764:function(t,e,a){"use strict";a("871c")},c46b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dashBoardDialg",attrs:{title:"分享",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close}},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分享给:",prop:"shareeEmail",rules:[{required:!0,message:"请选择被分享者",trigger:"change"}]}},[a("el-select",{attrs:{filterable:"",placeholder:"请输入用户邮箱","remote-method":function(e){t.remoteMethod(e)},remote:"","reserve-keyword":!1,loading:t.loadingSelect},model:{value:t.form.shareeEmail,callback:function(e){t.$set(t.form,"shareeEmail",e)},expression:"form.shareeEmail"}},t._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value},nativeOn:{click:function(a){return t.handelClick(e)}}})})),1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},i=[],r=a("7e3c");function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return e};var t,e={},a=Object.prototype,n=a.hasOwnProperty,i=Object.defineProperty||function(t,e,a){t[e]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function d(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,a){return t[e]=a}}function h(t,e,a,n){var r=e&&e.prototype instanceof y?e:y,o=Object.create(r.prototype),s=new N(n||[]);return i(o,"_invoke",{value:T(t,a,s)}),o}function f(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var p="suspendedStart",m="suspendedYield",v="executing",b="completed",g={};function y(){}function _(){}function O(){}var k={};d(k,c,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(E([])));x&&x!==a&&n.call(x,c)&&(k=x);var C=O.prototype=y.prototype=Object.create(k);function D(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function a(i,r,s,c){var l=f(t[i],t,r);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==o(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){a("next",t,s,c)}),(function(t){a("throw",t,s,c)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return a("throw",t,s,c)}))}c(l.arg)}var r;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){a(t,n,e,i)}))}return r=r?r.then(i,i):i()}})}function T(e,a,n){var i=p;return function(r,o){if(i===v)throw new Error("Generator is already running");if(i===b){if("throw"===r)throw o;return{value:t,done:!0}}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var c=j(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var l=f(e,a,n);if("normal"===l.type){if(i=n.done?b:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=b,n.method="throw",n.arg=l.arg)}}}function j(e,a){var n=a.method,i=e.iterator[n];if(i===t)return a.delegate=null,"throw"===n&&e.iterator.return&&(a.method="return",a.arg=t,j(e,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var r=f(i,e.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,g;var o=r.arg;return o?o.done?(a[e.resultName]=o.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,g):o:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(e){if(e||""===e){var a=e[c];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function a(){for(;++i<e.length;)if(n.call(e,i))return a.value=e[i],a.done=!1,a;return a.value=t,a.done=!0,a};return r.next=r}}throw new TypeError(o(e)+" is not iterable")}return _.prototype=O,i(C,"constructor",{value:O,configurable:!0}),i(O,"constructor",{value:_,configurable:!0}),_.displayName=d(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,d(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},D(S.prototype),d(S.prototype,l,(function(){return this})),e.AsyncIterator=S,e.async=function(t,a,n,i,r){void 0===r&&(r=Promise);var o=new S(h(t,a,n,i),r);return e.isGeneratorFunction(a)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},D(C),d(C,u,"Generator"),d(C,c,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),a=[];for(var n in e)a.push(n);return a.reverse(),function t(){for(;a.length;){var n=a.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=E,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function i(n,i){return s.type="throw",s.arg=e,a.next=n,i&&(a.method="next",a.arg=t),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),B(a),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var i=n.arg;B(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,n){return this.delegate={iterator:E(e),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function c(t,e,a,n,i,r,o){try{var s=t[r](o),c=s.value}catch(l){return void a(l)}s.done?e(c):Promise.resolve(c).then(n,i)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var r=t.apply(e,a);function o(t){c(r,n,i,o,s,"next",t)}function s(t){c(r,n,i,o,s,"throw",t)}o(void 0)}))}}var u={name:"DashBoardShare",data:function(){return{dialogVisible:!1,loadingSelect:!1,tenantId:JSON.parse(sessionStorage.getItem("userInfo")).tenantId,options:[],form:{sharee:"",shareeEmail:"",grade:""}}},methods:{handelClick:function(t){this.form.sharee=t.name},submit:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.$emit("submitFn",JSON.parse(JSON.stringify(t.form))),t.dialogVisible=!1)}))},open:function(){this.dialogVisible=!0},close:function(){this.$refs.form.resetFields(),this.options=[]},remoteMethod:function(){var t=l(s().mark((function t(e,a){var n;return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.trim()){t.next=11;break}return this.loadingSelect=!0,t.next=4,Object(r["N"])({name:e,tenantId:this.tenantId});case 4:return t.next=6,t.sent.data;case 6:n=t.sent,this.loadingSelect=!1,this.options=n.list.length>0?n.list.map((function(t){return{label:t.email,value:t.email,name:t.name}})):[],t.next=12;break;case 11:this.options=[];case 12:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()}},d=u,h=(a("ac55"),a("2877")),f=Object(h["a"])(d,n,i,!1,null,"209b253c",null);e["a"]=f.exports},e320:function(t,e,a){},e46f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper",style:{height:t.chartConfigOptions.chartHeight+"px"}},[a("div",{staticClass:"container",attrs:{id:t.chartConfigOptions.chartId}}),t._v(" "),t.chartType?t._e():a("el-empty",{staticClass:"empty",attrs:{description:"暂无数据"}})],1)},i=[],r=a("917c"),o={data:function(){return{chart:null,chartOption:{id:"",autoFit:!0,chartHeight:300,padding:[20,20,40,60],axisX:"",axisY:""}}},methods:{initChart:function(){this.chart=null,this.chart=new r["a"]({container:this.chartOption.id,width:this.chartOption.chartWidth,height:this.chartOption.chartHeight,autoFit:this.chartOption.autoFit,padding:this.chartOption.padding})},setChartData:function(t){this.chart.data(t)},formatterValue:function(t){var e=t;return"number"===this.chartOption.axisY.format?e=t:"hundred"===this.chartOption.axisY.format?e=100*e+" %":"thousand"===this.chartOption.axisY.format&&(e=1e3*e+" ‰"),e},setChartOption:function(t){var e,a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){};this.chart.clear(),this.chartOption.legend?this.chart.legend({position:"bottom",offsetY:"line"===t?8:4}):this.chart.legend(this.chartOption.legend),this.chart.scale(this.chartOption.axisX.value,{nice:!0,alias:this.chartOption.axisX.name}),this.chart.scale(this.chartOption.axisY.value,{nice:!0,alias:this.chartOption.axisY.name}),this.chart.axis(this.chartOption.axisX.value,{title:this.chartOption.axisX.name?{position:"center",offset:30}:null}),this.chart.axis(this.chartOption.axisY.value,{title:this.chartOption.axisY.name?{position:"center"}:null,label:{formatter:function(t){var e=t;return"number"===a.chartOption.axisY.format?e=t:"hundred"===a.chartOption.axisY.format?e=100*e+" %":"thousand"===a.chartOption.axisY.format&&(e=1e3*e+" ‰"),e.length>8?"".concat(e.slice(0,8),"..."):e}}}),this.chart.on("axis-label:mouseenter",(function(t){if(t.target.cfg.delegateObject.axis.cfg.field===a.chartOption.axisY.value){var e=document.getElementById("extension");if(!e){var n=document.createElement("div");n.id="extension",n.style.display="none",document.body.appendChild(n)}var i=document.querySelector("#extension");i.style.position="absolute",i.style.color="#333",i.style.background="#fff",i.style["font-size"]="12px",i.style.padding="5px",i.style.display="inline",i.style.border="1px solid #333",i.style["z-index"]="10000",i.innerText=a.formatterValue(t.target.cfg.delegateObject.item.name),document.body.onmousemove=function(t){var e=t.pageX-30,a=t.pageY+20;i.style.top=a+"px",i.style.left=e+"px"}}})),this.chart.on("axis-label:mouseleave",(function(t){var e=document.querySelector("#extension");e&&(e.style.display="none")})),"line"===t?(this.chart.tooltip({shared:!0,showCrosshairs:!0}),this.chart.line().position("".concat(this.chartOption.axisX.value,"*").concat(this.chartOption.axisY.value)).color("".concat(this.chartOption.dimension)).shape("smooth"),e=this.chart.point().position("".concat(this.chartOption.axisX.value,"*").concat(this.chartOption.axisY.value)).color("".concat(this.chartOption.dimension)).shape("circle")):"interval"===t||"stack"===t?(this.chart.tooltip({shared:!0,showMarkers:!1}),this.chart.interaction("active-region"),e=this.chart.interval().position("".concat(this.chartOption.axisX.value,"*").concat(this.chartOption.axisY.value)).adjust("stack").color("".concat(this.chartOption.group))):"polygon"===t&&(this.chart.axis(!1),this.chart.tooltip({showTitle:!1,showMarkers:!1,itemTpl:'<li style="list-style: none;"><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}<br/><span style="padding-left: 16px">value：{value}</span><br/><br/></li>'}),e=this.chart.polygon().position("x*y").color("name").tooltip("name*value",(function(t,e){return"hundred"===a.chartOption.format?e=100*e+" %":"thousand"===a.chartOption.format&&(e=1e3*e+" ‰"),{name:t,value:e}})).style({lineWidth:1,stroke:"#fff"}).label("name",{offset:0,style:{textBaseline:"middle"},content:function(t){if("root"!==t.name)return t.name}})),n(this.chart,e)},renderChart:function(){this.chart.render()}}},s=a("7104"),c=a.n(s),l=a("1f17");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=h(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function h(t,e){if(t){if("string"===typeof t)return f(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function p(t,e,a){return e=m(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function m(t){var e=v(t,"string");return"symbol"===u(e)?e:String(e)}function v(t,e){if("object"!==u(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var b=c.a.DataView,g={name:"Chart",mixins:[o],props:{data:{type:Object,default:function(){return{}}},chartConfig:{type:Object,default:function(){return{}}},chartConfigOptions:{type:Object,default:function(){return{chartHeight:300,autoFit:!0}}}},data:function(){return{chartOption:{id:this.chartConfigOptions.chartId,autoFit:!0,axisX:"",axisY:"",chartHeight:this.chartConfigOptions.chartHeight,padding:this.chartConfigOptions.padding||[]},chartType:!1}},computed:{chartData:function(){var t=this,e=this.data.result;return this.data.type&&e.forEach((function(e){Object.keys(e).forEach((function(a){var n=t.data.type.find((function(t){return t[a]}));n&&l["d"].includes(n[Object.values(n)[0]])&&(e[a]=Number(e[a]))})),t.data.type.length!==Object.keys(e).length&&t.data.type.forEach((function(t){!e[Object.keys(t)[0]]&&l["d"].includes(t[Object.keys(t)[0]])&&(e[Object.keys(t)[0]]=0)}))})),e}},watch:{chartConfig:{handler:function(t,e){Object.assign(this.chartOption,t);var a=["title","describe"],n=a.some((function(a){return t[a]!==e[a]}));n||this.setOption()},deep:!0}},mounted:function(){this.initChart(),Object.assign(this.chartOption,this.chartConfig),this.setOption()},methods:{customOption:function(t,e){var a=this.chartOption.type;"line"===a&&(this.chartOption.legend?t.legend({position:"bottom",offsetY:"line"===a?8:4,marker:function(t,e,a){return{symbol:"square",style:{fill:a.style.stroke}}}}):t.legend(this.chartOption.legend))},setOption:function(){var t=this,e=this.chartOption.type;if("polygon"===e){if(!this.chartOption.dimension||!this.chartOption.norm)return;var a=JSON.parse(JSON.stringify(this.chartData)),n=Array.from(new Set(a.map((function(e){return e[t.chartOption.dimension]})))),i=[];n.forEach((function(e){var n,r=(n={},p(n,t.chartOption.dimension,e),p(n,t.chartOption.norm,0),n);a.forEach((function(a){a[t.chartOption.dimension]===e&&(isNaN(Number(a[t.chartOption.norm]))?r[t.chartOption.norm]=r[t.chartOption.norm]+0:r[t.chartOption.norm]=r[t.chartOption.norm]+Number(a[t.chartOption.norm]))})),i.push(r)})),this.$emit("normNumChange",i.length);for(var r=0;r<i.length-1;r++)for(var o=0;o<i.length-1-r;o++)if(i[o+1][this.chartOption.norm]>i[o][this.chartOption.norm]){var s=[i[o+1],i[o]];i[o]=s[0],i[o+1]=s[1]}var c=null,l=this.chartOption.viewNum?this.chartOption.viewNum:i.length;if(c=i.slice(0,l),this.chartOption.viewNum&&this.chartOption.viewNum!==i.length){var u={},h=i.slice(l),f=0;h.forEach((function(e){isNaN(Number(e[t.chartOption.norm]))?f+=0:f+=Number(e[t.chartOption.norm])})),u[this.chartOption.dimension]="其他",u[this.chartOption.norm]=f,c.push(u)}var m={name:"root",children:c.map((function(e){return{name:e[t.chartOption.dimension],value:e[t.chartOption.norm]}}))},v=new b;v.source(m,{type:"hierarchy"}).transform({field:"value",type:"hierarchy.treemap",tile:"treemapResquarify"});var g,y=[],_=d(v.getAllNodes());try{for(_.s();!(g=_.n()).done;){var O=g.value;if("root"!==O.data.name){var k={name:O.data.name,x:O.x,y:O.y,value:O.data.value};y.push(k)}}}catch(T){_.e(T)}finally{_.f()}this.setChartData(y)}if("polygon"===e){if(!this.chartOption.dimension||!this.chartOption.norm)return}else{if(!this.chartOption.axisX.value||!this.chartOption.axisY.value)return;if(this.chartOption.group||this.chartOption.dimension){var w=Array.from(new Set(this.chartData.map((function(e){return e[t.chartOption.axisX.value]+""})))),x=[];w.forEach((function(e){var a=[];t.chartData.forEach((function(n){n[t.chartOption.axisX.value]!==e&&n[t.chartOption.axisX.value]!==Number(e)||a.push(n)}));var n=t.chartOption.group||t.chartOption.dimension,i=Array.from(new Set(a.map((function(t){return t[n]+""}))));i.forEach((function(e,i,r){var o=a.filter((function(t){return t&&t[n]===e}));if(o.length>0){var s=o.reduce((function(e,a){return e[t.chartOption.axisY.value]>a[t.chartOption.axisY.value]?e:a}));x.push(s)}}))})),x.sort((function(e,a){return isNaN(new Date(e[t.chartOption.axisX.value]).getTime())?e[t.chartOption.axisX.value]-a[t.chartOption.axisX.value]:new Date(e[t.chartOption.axisX.value]).getTime()-new Date(a[t.chartOption.axisX.value]).getTime()})),this.setChartData(x)}else{for(var C=[],D=[],S=this.chartData.length-1;S>=0;S--)C.includes(this.chartData[S][this.chartOption.axisX.value])||(C.push(this.chartData[S][this.chartOption.axisX.value]),D.push(this.chartData[S]));D.sort((function(e,a){return isNaN(new Date(e[t.chartOption.axisX.value]).getTime())?e[t.chartOption.axisX.value]-a[t.chartOption.axisX.value]:new Date(e[t.chartOption.axisX.value]).getTime()-new Date(a[t.chartOption.axisX.value]).getTime()})),this.setChartData(D)}}this.setChartOption(e,this.customOption),this.renderChart(),this.chartType=!0}}},y=g,_=(a("297d"),a("2877")),O=Object(_["a"])(y,n,i,!1,null,"5f9ef927",null);e["a"]=O.exports},f796:function(t,e,a){}}]);