(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-118dac41"],{"008f":function(t,e,a){"use strict";a("60f2")},"19c7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{class:["left-tree","transition",t.isOpen?"":"close"]},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t.isOpen?a("span",[t._v("成本中心")]):t._e(),t._v(" "),a("span",{class:[t.isOpen?"el-icon-s-unfold":"el-icon-s-fold","close-btn","transition"],on:{click:t.handleOpen}})]),t._v(" "),a("ul",{class:["list",{"no-text":!t.isOpen}]},[t._l(t.list,(function(e,n){return[e.permission?a("li",{key:n,class:["item",{active:t.$route.name===e.name}],on:{click:function(a){return t.handleLink(e)}}},[a("svg-icon",{attrs:{"icon-class":e.icon}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isOpen&&e.show,expression:"isOpen && item.show"}],staticClass:"text"},[t._v(t._s(e.text))])],1):t._e()]}))],2)])},i=[],o={name:"LeftTree",data:function(){return{isOpen:null===window.sessionStorage.getItem("costLeftTreeOpen")||JSON.parse(window.sessionStorage.getItem("costLeftTreeOpen")),list:[{name:"NewCostCenter",text:"首页",icon:"cost",show:!0,permission:!0},{name:"NewCostAnalysis",text:"成本分析",icon:"analysis",show:!0,permission:!0},{name:"NewCostBill",text:"账单",icon:"bill",show:!0,permission:!0},{name:"NewCostReport",text:"报告管理",icon:"report",show:!0,permission:!0},{name:"group",text:"业务架构配置",icon:"group",show:!0,permission:!0}]}},created:function(){},methods:{handleOpen:function(){var t=this;if(this.isOpen=!this.isOpen,this.isOpen)var e=setTimeout((function(a){t.list.forEach((function(t){t.show=!0})),clearTimeout(e)}),150);else this.list.forEach((function(t){t.show=!1}));window.sessionStorage.setItem("costLeftTreeOpen",this.isOpen)},handleLink:function(t){this.$router.push({name:t.name})}}},s=o,r=(a("669f"),a("2877")),l=Object(r["a"])(s,n,i,!1,null,"077742c5",null);e["a"]=l.exports},"2f32":function(t,e,a){"use strict";a("fd78")},"3a69":function(t,e,a){},"405f":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"g",(function(){return r})),a.d(e,"h",(function(){return l})),a.d(e,"f",(function(){return c})),a.d(e,"d",(function(){return u})),a.d(e,"e",(function(){return p}));var n=a("7258");function i(t){return n["b"].post("/cost/home/request",t)}function o(t){return n["b"].post("/cost/listDictionary",t)}function s(t){return n["b"].post("/cost/report/del",t)}function r(t){return n["b"].post("/cost/report/save",t)}function l(t){return n["b"].post("/cost/report/saveAs",t)}function c(t){return n["b"].post("/cost/report/list",t)}function u(t){return n["b"].post("/cost/report/getById",t)}function p(t){return n["b"].post("/cost/report/history",t)}},"60f2":function(t,e,a){},"669f":function(t,e,a){"use strict";a("7afd")},"7afd":function(t,e,a){},"7c1f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card-container"},[a("div",{staticClass:"box-content"},[a("LeftTree"),t._v(" "),a("div",{staticClass:"box-r"},[a("div",{staticClass:"r-t"},[a("CustomForm",{attrs:{filters:t.topParams},on:{updateParams:t.updateParams}})],1),t._v(" "),a("div",{staticClass:"r-b"},[a("div",{staticClass:"r-b-l"},[a("div",{staticClass:"r-b-l-t"},[a("CostInfo",{attrs:{params:t.params,info:t.info,loading:t.infoLoading}}),t._v(" "),a("el-card",{staticClass:"c-proportions dashboard-card chart-card-box"},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("成本占比（每月累计 / T - 2）")]),t._v(" "),a("div",{staticClass:"chart-view"},[a("ProductProportionChart",{attrs:{list:t.productProportionList,loading:t.productProportionLoading}}),t._v(" "),a("LesseeProportionChart",{attrs:{list:t.lesseeProportionList,loading:t.lesseeProportionLoading,params:t.params}})],1)])],1),t._v(" "),a("el-card",{staticClass:"r-b-l-b dashboard-card chart-card-box"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("成本变化")]),t._v(" "),a("el-button",{staticStyle:{position:"absolute",top:"0",right:"10px"},attrs:{type:"text",icon:"el-icon-link"},on:{click:t.handleAnalysis}},[t._v("成本分析")])],1),t._v(" "),a("CostChange",{attrs:{list:t.costChangingList,loading:t.costChangingLoading}})],1)],1),t._v(" "),a("div",{staticClass:"r-b-r"},[a("el-card",{staticClass:"r-b-r-card dashboard-card chart-card-box"},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n              成本波动\n              "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("template",{slot:"content"},[a("p",[t._v("成本波动指的是总成本的波动，例如当前月比上月总成本减少了$1000，T-2比T-3总成本增加了$800")])]),t._v(" "),a("i",{staticClass:"el-icon-info"})],2)],1),t._v(" "),a("CostFluctuationChart",{attrs:{list:t.costFluctuationList,loading:t.costFluctuationLoading}})],1),t._v(" "),a("el-card",{staticClass:"r-b-r-card r-b-r-b dashboard-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("最近访问报告")]),t._v(" "),a("VisiteReport",{attrs:{list:t.reportHistoryList,loading:t.reportHistoryLoading}})],1)],1)])])],1)])},i=[],o=a("19c7"),s=a("8e3d"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"c-desc dashboard-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("成本摘要")]),t._v(" "),a("div",{staticClass:"info-content"},[a("div",{staticClass:"time-range"},[t._v(t._s(t.timeRange))]),t._v(" "),a("p",{staticClass:"title"},[t._v("总成本")]),t._v(" "),a("p",{staticClass:"num font-size-30"},[t._v("$ "+t._s(t.info.value))]),t._v(" "),isNaN(parseInt(t.info.basic))?t._e():a("p",{staticClass:"tip font-size-12"},[t._v("环比 "),a("span",{domProps:{innerHTML:t._s(t.getValue(t.info.basic))}})])])])},l=[],c=a("ed08"),u={name:"CostInfo",props:{params:{type:Object,default:function(){}},info:{type:[Object,Number]},loading:Boolean},computed:{timeRange:function(){var t="",e=new Date,a=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,i=e.getDate(),o=e.getDate()-2<10?"0"+(e.getDate()-2):e.getDate()-2,s=Object(c["getLastMonthAndDay"])().split(" ~ ")[1],r=new Date(s).getTime(),l=1===parseInt(i)?Object(c["parseDate"])(r-864e5):2===parseInt(i)?s:"".concat(a,"-").concat(n,"-").concat(o);switch(this.params.homeDayType){case 1:t="".concat(a,"-").concat(n);break;case 2:t=l;break;default:t=Object(c["getLastMonthAndDay"])();break}return t}},methods:{getValue:function(t){return t?Object(c["getValue"])(t):""}}},p=u,d=(a("2f32"),a("2877")),h=Object(d["a"])(p,r,l,!1,null,"2a963e3d",null),m=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chart"},[t.list.length||t.loading?t._e():a("el-empty",{attrs:{description:"无产品占比数据","image-size":100}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}],staticClass:"view",attrs:{id:"productProportionChart"}})],1)},v=[],g=a("22b4"),y=a("1be7"),b=a("9394"),C=a("3094"),w=a("2da7"),_=a("4b2a"),L=a("ff32"),O=a("49bb"),x=a("ee29"),T=a("f95e");g["a"]([b["a"],C["a"],w["a"],_["a"],L["a"],O["a"],T["a"],x["a"]]);var D={name:"ProductProportionChart",props:{loading:Boolean,list:{type:Array,default:function(){return[]}}},data:function(){return{myChart:null,option:{title:{text:"计费项"},tooltip:{trigger:"item",formatter:"{b} : $ {c} 占比 ({d}%)"},grid:{left:"1%",right:"8%",bottom:"3%",top:"20%"},series:[{name:"访问占比",type:"pie",radius:["40%","70%"],itemStyle:{borderRadius:5},data:[]}]}}},watch:{list:function(t){if(t.length){if(!this.myChart){var e=document.getElementById("productProportionChart");this.myChart=y["b"](e)}this.render(t)}}},methods:{render:function(t){var e=t.map((function(t){return{value:t.value,name:t.key}}))||[];this.option.series[0].data=e,this.option&&this.myChart.setOption(this.option,!0),Object(c["chartResizeListen"])(this,this.myChart,"productProportionChart")}}},j=D,k=(a("008f"),Object(d["a"])(j,f,v,!1,null,"2aa03246",null)),P=k.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chart"},[t.list.length||t.loading?t._e():a("el-empty",{attrs:{description:"无租户 / Group 占比数据","image-size":100}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}],staticClass:"view",attrs:{id:"lesseeProportionChart"}})],1)},$=[];g["a"]([b["a"],C["a"],w["a"],_["a"],L["a"],O["a"],T["a"],x["a"]]);var S={name:"LesseeProportionChart",props:{loading:Boolean,list:{type:Array,default:function(){return[]}},params:{type:Object,default:function(){}}},data:function(){return{myChart:null,option:{title:{text:"业务线"},tooltip:{trigger:"item",formatter:"{b} : $ {c} 占比 ({d}%)"},grid:{left:"1%",right:"8%",bottom:"3%",top:"20%",containLabel:!0},series:[{name:"访问占比",type:"pie",radius:["40%","70%"],itemStyle:{borderRadius:5},data:[]}]}}},watch:{list:function(t){if(t.length){if(!this.myChart){var e=document.getElementById("lesseeProportionChart");this.myChart=y["b"](e)}this.render(t)}},params:{handler:function(t){this.option.title.text=1===t.roleView?"Group":"业务线"},immediate:!0,deep:!0}},methods:{render:function(t){var e=t.map((function(t){return{value:t.value,name:t.key}}))||[];this.option.series[0].data=e,this.option&&this.myChart.setOption(this.option,!0),Object(c["chartResizeListen"])(this,this.myChart,"lesseeProportionChart")}}},E=S,V=(a("c4f5"),Object(d["a"])(E,N,$,!1,null,"6f12b309",null)),A=V.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chart"},[t.list.length||t.loading?t._e():a("el-empty",{attrs:{description:"无成本变化数据","image-size":120}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length&&!t.loading,expression:"list.length && !loading"}],staticClass:"view",attrs:{id:"changeChart"}})],1)},F=[],B=a("3620"),R=a("c55a");g["a"]([b["a"],w["a"],_["a"],L["a"],B["a"],T["a"],R["a"]]);var z={name:"ChangeChart",props:{loading:Boolean,list:{type:Array,default:function(){return[]}}},data:function(){return{myChart:null,params:{startDate:Object(c["parseDate"])((new Date).getTime()-432e6),endDate:Object(c["parseDate"])((new Date).getTime()-864e5),departments:[],pus:[],costType:"DP"},option:{title:{left:"center",text:""},tooltip:{trigger:"axis",confine:!0,formatter:function(t){var e=t.map((function(t){var e={marker:t.marker,name:t.name,seriesName:t.seriesName,value:t.value};return e})).sort((function(t,e){return e.value-t.value})),a="";return e.forEach((function(t){a+='\n                <div style="display: flex; justify-content: space-between;">\n                  <span style="margin-right: 20px;">'.concat(t.marker).concat(t.seriesName," ").concat(t.name,"</span> <span>$ ").concat(t.value,"</span>\n                </div>\n              ")})),a}},color:[],legend:{type:"scroll",orient:"vertical",width:105,right:10,top:20,bottom:40,data:[]},grid:{left:"1%",bottom:"3%",right:125,top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",splitLine:{show:!1},max:function(t){return t.max}},series:[]}}},watch:{list:function(t){if(t.length){if(!this.myChart){var e=document.getElementById("changeChart");this.myChart=y["b"](e)}this.render(t)}}},methods:{render:function(t){var e,a=t.map((function(t){return t.key})),n=t.map((function(t){return Object(c["randomColor"])()}));e=t[0].objData.length>1?t.map((function(t,e){var a={name:t.key,type:"line",symbol:"none",lineStyle:{color:n[e]},data:t.objData.map((function(t){return t.value}))};return a})):t.map((function(t,e){var a={name:t.key,type:"bar",emphasis:{focus:"series"},itemStyle:{color:n[e]},data:t.objData.map((function(t){return t.value}))};return a}));var i=t[0].objData.map((function(t){var e=t.dt;return e}));this.option.color=n,this.option.xAxis.data=i,this.option.legend.data=a,this.option.series=e,this.option&&this.myChart.setOption(this.option,!0),Object(c["chartResizeListen"])(this,this.myChart,"changeChart")}}},H=z,M=(a("c4a5"),Object(d["a"])(H,I,F,!1,null,"0fcd14c6",null)),J=M.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chart"},[t.list.length||t.loading?t._e():a("el-empty",{attrs:{description:"无成本波动数据","image-size":120}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}],staticClass:"view",attrs:{id:"costFluctuationChart"}})],1)},G=[],Q=a("4cb5");g["a"]([b["a"],w["a"],_["a"],Q["a"],T["a"]]);var U={name:"CostFluctuationChart",props:{loading:Boolean,list:{type:Array,default:function(){return[]}}},data:function(){return{myChart:null,option:{tooltip:{trigger:"item",formatter:function(t){var e="\n              <p>计费项：".concat(t.name,"</p>\n              <p>成本波动：$ ").concat(Object(c["toQian"])(t.value),"</p>\n            ");return e}},grid:{top:10,right:15,left:110,bottom:30},xAxis:{type:"value",axisLabel:{formatter:"{value}",interval:0,rotate:15},position:"bottom",splitLine:{show:!1}},yAxis:[{type:"category",position:"left",axisLine:{show:!1},triggerEvent:!0,axisLabel:{show:!0,align:"left",overflow:"truncate",margin:90,formatter:function(t){var e="";return t.length>5?(e=t.substr(0,5)+"...",e):t}},axisTick:{show:!0},splitLine:{show:!0},data:[]}],series:[{type:"bar",stack:"Total",label:{show:!0,position:"inside",formatter:function(t){return Object(c["toQian"])(t.data)}},data:[],itemStyle:{normal:{color:function(t){return t.value<0?"#E47373":"#27CDA2"}}}}]}}},watch:{list:function(t){if(t.length){if(!this.myChart){var e=document.getElementById("costFluctuationChart");this.myChart=y["b"](e),Object(c["extension"])(this.myChart)}this.render(t)}}},methods:{render:function(t){var e=[],a=[];t.forEach((function(t){e.unshift(t.key),a.unshift(t.value)})),this.option.yAxis[0].data=e,this.option.series[0].data=a,this.option&&this.myChart.setOption(this.option,!0),Object(c["chartResizeListen"])(this,this.myChart,"costFluctuationChart")}}},Y=U,K=(a("a629"),Object(d["a"])(Y,q,G,!1,null,"196d50f8",null)),W=K.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[t.list.length||t.loading?[a("div",{staticClass:"table-list table-title"},[a("div",{staticClass:"table-name list-item"},[t._v("名称")]),t._v(" "),a("div",{staticClass:"table-owner list-item"},[t._v("创建者")]),t._v(" "),a("div",{staticClass:"table-visite-times list-item"},[t._v("上次访问时间")])]),t._v(" "),a("el-divider"),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-box"},[t._l(t.list,(function(e,n){return[a("div",{key:n,staticClass:"table-list"},[a("div",{staticClass:"list-table-name table-name cell-ellipsis list-item",on:{click:function(a){return t.handleLink(e)}}},[t._v(t._s(e.reportName))]),t._v(" "),a("div",{staticClass:"table-owner cell-ellipsis list-item"},[t._v(t._s(e.createUser))]),t._v(" "),a("div",{staticClass:"table-visite-times list-item"},[t._v(t._s(e.visitTime))])]),t._v(" "),n!==t.list.length-1?a("el-divider",{key:n+"_"+n+"_divider"}):t._e()]}))],2)]:a("el-empty",{attrs:{description:"无访问报告数据"}})],2)},Z=[],tt=a("405f"),et={name:"",props:{loading:Boolean,list:{type:Array,default:function(){return[]}}},methods:{handleLink:function(t){this.$router.push({name:"NewCostAnalysis",query:{id:t.reportId}})}}},at=et,nt=(a("d589"),Object(d["a"])(at,X,Z,!1,null,"41d7d599",null)),it=nt.exports,ot={name:"CostCenter",components:{LeftTree:o["a"],CustomForm:s["a"],CostInfo:m,ProductProportionChart:P,LesseeProportionChart:A,CostChange:J,CostFluctuationChart:W,VisiteReport:it},data:function(){return{infoLoading:!1,lesseeProportionLoading:!1,productProportionLoading:!1,costChangingLoading:!1,costFluctuationLoading:!1,reportHistoryLoading:!1,productProportionList:[],lesseeProportionList:[],costChangingList:[],costFluctuationList:[],reportHistoryList:[],info:{},params:{}}},computed:{topParams:function(){var t=window.sessionStorage.getItem("topParams"),e=null!==t&&"undefined"!==t&&JSON.parse(t)||{};return e}},methods:{getCostInfo:function(t){var e=this;this.infoLoading=!0,Object(tt["b"])(t).then((function(t){e.infoLoading=!1,e.info=t.data}))},getProductProportion:function(t){var e=this;this.productProportionLoading=!0,Object(tt["b"])(t).then((function(t){e.productProportionLoading=!1,e.productProportionList=t.data}))},getLesseeProportion:function(t){var e=this;this.lesseeProportionLoading=!0,Object(tt["b"])(t).then((function(t){e.lesseeProportionLoading=!1,e.lesseeProportionList=t.data}))},getCostChanging:function(t){var e=this;this.costChangingLoading=!0,Object(tt["b"])(t).then((function(t){e.costChangingLoading=!1,e.costChangingList=t.data}))},getCostFluctuation:function(t){var e=this;this.costFluctuationLoading=!0,Object(tt["b"])(t).then((function(t){e.costFluctuationLoading=!1,e.costFluctuationList=t.data}))},getReportHistory:function(){var t=this;this.reportHistoryLoading=!0,Object(tt["e"])().then((function(e){t.reportHistoryLoading=!1,t.reportHistoryList=e.data}))},updateParams:function(t){this.params=Object.assign({},t),this.getCostInfo({reportType:1,homeDayType:t.homeDayType,roleView:t.roleView,tenantName:t.tenantName}),this.getProductProportion({reportType:2,homeDayType:t.homeDayType,roleView:t.roleView,tenantName:t.tenantName}),this.getLesseeProportion({reportType:3,homeDayType:t.homeDayType,roleView:t.roleView,tenantName:t.tenantName}),this.getCostFluctuation({reportType:4,homeDayType:t.homeDayType,roleView:t.roleView,tenantName:t.tenantName}),this.getCostChanging({reportType:5,homeDayType:t.homeDayType,roleView:t.roleView,tenantName:t.tenantName}),this.getReportHistory()},handleAnalysis:function(){this.$router.push({name:"NewCostAnalysis"})}}},st=ot,rt=(a("de7e"),Object(d["a"])(st,n,i,!1,null,"31ccef52",null));e["default"]=rt.exports},"89f2":function(t,e,a){},"8b54":function(t,e,a){"use strict";a("89f2")},"8e3d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-form",{attrs:{inline:!0,model:t.params,"label-position":"top","label-width":"80px"}},[t.isShow?[a("el-form-item",{attrs:{prop:"date"}},[a("el-date-picker",{ref:"datePicker",staticClass:"calendar",staticStyle:{width:"230px"},attrs:{"start-placeholder":"请选择开始日期","range-separator":"至","end-placeholder":"请选择结束日期","picker-options":t.pickerOptions,type:"daterange","unlink-panels":""},on:{change:t.handleChange},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"dtType"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"选择时间模式"},on:{change:t.handleChange},model:{value:t.params.dtType,callback:function(e){t.$set(t.params,"dtType",e)},expression:"params.dtType"}},t._l(t.dateTypeList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"chartType"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"选择图表模式"},on:{change:t.handleChange},model:{value:t.params.chartType,callback:function(e){t.$set(t.params,"chartType",e)},expression:"params.chartType"}},t._l(t.chartTypeList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"relateCost"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("template",{slot:"content"},[a("p",[t._v("· 间接成本：考虑其他数据开发任务分摊过来的成本，即考虑成本分摊，以DE平台成本归属配置为标准")]),t._v(" "),a("p",[t._v("· 直接成本：任务开发产生的成本，不考虑成本归属。即不考虑分摊")])])],2)],1)]:t._e(),t._v(" "),a("el-form-item",{attrs:{prop:"roleView"}},[!t.isCloud||t.userInfo.isSupperAdmin?a("el-radio-group",{attrs:{size:"small"},on:{change:t.handleChange},model:{value:t.params.roleView,callback:function(e){t.$set(t.params,"roleView",e)},expression:"params.roleView"}},[t._l(t.angleList,(function(e,n){return[a("el-radio-button",{key:n,attrs:{label:e.value}},[t._v(t._s(e.name))])]}))],2):t._e()],1),t._v(" "),1===t.params.roleView?a("el-form-item",{attrs:{prop:"tenantName"}},[a("el-select",{staticStyle:{width:"110px"},attrs:{clearable:"",placeholder:"所有租户"},on:{change:t.handleChange},model:{value:t.params.tenantName,callback:function(e){t.$set(t.params,"tenantName",e)},expression:"params.tenantName"}},[t._l(t.tenantList,(function(t,e){return[a("el-option",{key:e,attrs:{label:t.name,value:t.value}})]}))],2)],1):t._e(),t._v(" "),t.isShow?t._e():[a("el-form-item",{attrs:{prop:"homeDayType"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.handleChange},model:{value:t.params.homeDayType,callback:function(e){t.$set(t.params,"homeDayType",e)},expression:"params.homeDayType"}},[t._l(t.homeDayTypeList,(function(e,n){return[a("el-radio-button",{key:n,attrs:{label:e.value}},[t._v(t._s(e.name))])]}))],2)],1)]],2),t._v(" "),a("div",{staticClass:"t-tip"},[t._v("温馨提示：每天15:00产出T-2数据。")])],1)},i=[],o=a("ed08"),s=a("405f"),r=a("2f62");function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e=d(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function d(t){var e=h(t,"string");return"symbol"===l(e)?e:String(e)}function h(t,e){if("object"!==l(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m=1,f={name:"CustomForm",props:{isShow:{type:Boolean,default:!1},filters:{type:Object,default:function(){}},pickerType:{type:Number,default:0}},data:function(){return{dateTypeList:this.$t("cost.dateTypeList"),angleList:[{name:"平台",value:0},{name:"租户",value:1}],chartTypeList:[{name:" 柱状图",value:0},{name:"堆叠图",value:1},{name:"折线图",value:2}],isCostList:[{name:"间接成本",value:0},{name:"直接成本",value:1}],homeDayTypeList:this.$t("cost.homeDayTypeList"),tenantList:this.$t("cost.lesseeList"),params:{reportType:6,startDate:"",endDate:"",dtType:0,chartType:0,roleView:0,relateCost:1,tenantName:"",homeDayType:(new Date).getDate()<5?3:2},shortcuts:this.$t("cost.shortcuts"),pickerOptions:{shortcuts:[{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e]),m=2}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e]),m=3}}]}}},computed:u(u({},Object(r["c"])(["userInfo","isCloud"])),{},{dates:{get:function(){var t,e=this;if(this.pickerType)return t=this.shortcuts.find((function(t){return t.id===e.pickerType})),1!==t.id?t.time():[this.params.startDate,this.params.endDate];var a=this.shortcuts[0].time();return a},set:function(t){this.shortcuts[0].time=function(){return t}}}}),watch:{filters:{handler:function(t){Object.keys(t).length&&(this.params=t,this.dates=[t.startDate,t.endDate])},deep:!0},dates:{handler:function(t){this.params.startDate=Object(o["parseDate"])(new Date(t[0])),this.params.endDate=Object(o["parseDate"])(new Date(t[1]))},immediate:!0}},created:function(){this.handleChange(),this.getTenantList()},methods:{getTenantList:function(){var t=this,e={requestType:2,name:""};Object(s["a"])(e).then((function(e){t.tenantList=t.tenantList.concat(e.data)}))},handleChangeTimeType:function(){this.handleChange()},handleChangeChartType:function(){this.handleChange()},handleChangeTime:function(){this.handleChange()},handleChange:function(){var t=this.shortcuts.find((function(t){return t.id===m}));this.$emit("updateParams",this.params,t)}}},v=f,g=(a("8b54"),a("2877")),y=Object(g["a"])(v,n,i,!1,null,"b3306f38",null);e["a"]=y.exports},"969d":function(t,e,a){},a629:function(t,e,a){"use strict";a("db12")},c296:function(t,e,a){},c4a5:function(t,e,a){"use strict";a("c296")},c4f5:function(t,e,a){"use strict";a("ff0f")},d589:function(t,e,a){"use strict";a("3a69")},db12:function(t,e,a){},de7e:function(t,e,a){"use strict";a("969d")},fd78:function(t,e,a){},ff0f:function(t,e,a){}}]);