(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-fd537182"],{"4dbf":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"box-card-container"},[e._v("\n  "+e._s(e.title)+"\n  "),r("el-divider"),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.params,"label-width":"120px",rules:e.rules,"inline-message":""}},[r("el-form-item",{attrs:{label:e.$t("common.name"),prop:"name"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"名字只能包含a-z,A-Z,0-9或_或-"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("common.description"),prop:"description"}},[r("el-input",{staticClass:"w400",attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:e.params.description,callback:function(t){e.$set(e.params,"description",t)},expression:"params.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"集群类型",prop:"typeCode"}},[r("el-radio-group",{model:{value:e.params.typeCode,callback:function(t){e.$set(e.params,"typeCode",t)},expression:"params.typeCode"}},[r("el-radio",{attrs:{label:"K8S"}},[e._v("K8S")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("cluster.address"),prop:"address"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入K8S集群名称"},model:{value:e.params.address,callback:function(t){e.$set(e.params,"address",t)},expression:"params.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"region",prop:"region"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入region"},model:{value:e.params.region,callback:function(t){e.$set(e.params,"region",t)},expression:"params.region"}})],1),e._v(" "),r("el-collapse",{staticClass:"collapse"},[r("el-collapse-item",{attrs:{title:"高级设置",name:"1"}},[r("el-form-item",{attrs:{label:"State Path",prop:"statePath"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入State Path"},model:{value:e.params.statePath,callback:function(t){e.$set(e.params,"statePath",t)},expression:"params.statePath"}}),e._v(" "),r("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[r("div",{attrs:{slot:"content"},slot:"content"},[e._v("Savepoint/Checkpoint状态存储公共路径"),r("br"),e._v("如：s3a://bucketName/path/")]),e._v(" "),r("i",{staticClass:"el-icon-question"})])],1),e._v(" "),r("el-form-item",{attrs:{label:"ZK Quorum",prop:"zookeeperQuorum"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入ZK Quorum"},model:{value:e.params.zookeeperQuorum,callback:function(t){e.$set(e.params,"zookeeperQuorum",t)},expression:"params.zookeeperQuorum"}}),e._v(" "),r("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[r("div",{attrs:{slot:"content"},slot:"content"},[e._v("zookeeper.quorum地址"),r("br"),e._v("如：test.mw-1.cbs.sg2.zk:2181,test.mw-2.cbs.sg2.zk:2181")]),e._v(" "),r("i",{staticClass:"el-icon-question"})])],1),e._v(" "),r("el-form-item",{attrs:{label:"logEsSource"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入logEsSource"},model:{value:e.params.logEsSource,callback:function(t){e.$set(e.params,"logEsSource",t)},expression:"params.logEsSource"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"containerImage"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入containerImage"},model:{value:e.params.containerImage,callback:function(t){e.$set(e.params,"containerImage",t)},expression:"params.containerImage"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"env"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入env"},model:{value:e.params.env,callback:function(t){e.$set(e.params,"env",t)},expression:"params.env"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"namespace"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入namespace"},model:{value:e.params.nameSpace,callback:function(t){e.$set(e.params,"nameSpace",t)},expression:"params.nameSpace"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"node_selector"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入node_selector"},model:{value:e.params.nodeSelector,callback:function(t){e.$set(e.params,"nodeSelector",t)},expression:"params.nodeSelector"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"tolerations"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入tolerations"},model:{value:e.params.tolerations,callback:function(t){e.$set(e.params,"tolerations",t)},expression:"params.tolerations"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"version"}},[r("el-input",{staticClass:"w400",attrs:{placeholder:"请输入version"},model:{value:e.params.version,callback:function(t){e.$set(e.params,"version",t)},expression:"params.version"}})],1)],1)],1),e._v(" "),r("div",{staticStyle:{"padding-left":"20%",margin:"50px 0 40px"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},n=[],s=r("7ea2"),o=r("ed08");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t=p(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=m(e,"string");return"symbol"===c(t)?t:String(t)}function m(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==c(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var d=function(e,t,r){var a=/^[\w-]+$/;a.test(t)?r():r(new Error("名字只能包含a-z,A-Z,0-9,_或-"))},f={data:function(){return{id:"",params:{name:"",description:"",typeCode:"K8S",address:"",region:"",statePath:"",zookeeperQuorum:"",logEsSource:"",containerImage:"",env:"",nameSpace:"",nodeSelector:"",tolerations:"",version:""}}},computed:{title:function(){return this.id?"编辑集群":"新建集群"},rules:function(){var e={name:[{required:!0,message:this.$t("cluster.nameRule"),trigger:["blur","change"]},{validator:d,trigger:["blur","change"]}],clusterType:[{required:!0,message:this.$t("cluster.typeRule"),trigger:["blur","change"]}],typeCode:[{required:!0,message:"请选择集群类型",trigger:["blur","change"]}],region:[{required:!0,message:"请输入region",trigger:["blur","change"]}],address:[{required:!0,message:this.$t("cluster.addressRule"),trigger:["blur","change"]}]};return e}},created:function(){this.id=this.$route.query.id,this.id&&this.getClusterInfo(this.id)},methods:{getClusterInfo:function(e){var t=this;Object(s["l"])(e).then((function(e){var r=e.data;t.params=Object(o["copyToNeed"])(r,Object.keys(t.params))}))},submit:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=s["a"],a=l({},e.params);e.id&&(r=s["t"],a.id=e.id),r(a).then((function(t){e.$router.push("/config/cluster")}))}else e.$message({type:"info",message:"请完善集群信息！"})}))},cancel:function(){this.$router.push("/config/cluster")}}},b=f,v=(r("6b65"),r("2877")),g=Object(v["a"])(b,a,n,!1,null,"628847e8",null);t["default"]=g.exports},"6b65":function(e,t,r){"use strict";r("7435")},7435:function(e,t,r){},"7ea2":function(e,t,r){"use strict";r.d(t,"m",(function(){return s})),r.d(t,"a",(function(){return o})),r.d(t,"t",(function(){return c})),r.d(t,"l",(function(){return i})),r.d(t,"g",(function(){return l})),r.d(t,"o",(function(){return u})),r.d(t,"p",(function(){return p})),r.d(t,"q",(function(){return m})),r.d(t,"r",(function(){return d})),r.d(t,"s",(function(){return f})),r.d(t,"n",(function(){return b})),r.d(t,"b",(function(){return v})),r.d(t,"f",(function(){return g})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return _})),r.d(t,"i",(function(){return k})),r.d(t,"k",(function(){return w})),r.d(t,"j",(function(){return S})),r.d(t,"h",(function(){return $}));var a=r("7258"),n="/ds_task/flinkcluster";function s(e){return a["b"].get("".concat(n,"/page?"),{params:e})}function o(e){return a["b"].post("".concat(n,"/add"),e)}function c(e){return a["b"].put("".concat(n,"/update"),e)}function i(e){return a["b"].get("".concat(n,"/get?id=").concat(e))}function l(e){return a["b"].delete("".concat(n,"/delete"),{params:{id:e}})}function u(e){return a["b"].post("/cluster-service/cloud/resource/add",e,{timeout:6e5})}function p(e){return a["b"].delete("/cluster-service/cloud/resource/delete/".concat(e))}function m(e){return a["b"].get("/cluster-service/cloud/resource/getOne",{params:e})}function d(e){return a["b"].get("/cluster-service/cloud/resource/search",{params:e})}function f(e){return a["b"].post("/cluster-service/cloud/resource/update",e,{timeout:6e5})}function b(e){return a["b"].get("/cluster-service/cloud/resource/getRegion",{params:e})}function v(e){return a["b"].post("/cluster-service/cloud/data/add",e,{timeout:6e5})}function g(e){return a["b"].post("/cluster-service/cloud/data/update",e,{timeout:6e5})}function h(e){return a["b"].delete("/cluster-service/cloud/data/delete",{params:e})}function y(e){return a["b"].get("/cluster-service/cloud/data/getOne",{params:e})}function _(e){return a["b"].get("/cluster-service/cloud/data/search",{params:e})}function k(e){return a["b"].get("/cluster-service/cluster/service/roles",{params:e})}function w(e){return a["b"].get("/cluster-service/cluster/vpcs",{params:e})}function S(e){return a["b"].get("/cluster-service/cluster/subnets",{params:e})}function $(e){return a["b"].get("/cluster-service/cluster/security/groups",{params:e})}}}]);