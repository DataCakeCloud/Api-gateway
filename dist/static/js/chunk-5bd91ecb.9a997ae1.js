(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-5bd91ecb"],{3768:function(e,t,n){},"45c2":function(e,t,n){},4946:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("List")},a=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"box-card-container"},[r("div",{staticClass:"task-list"},[r("div",{staticClass:"left-wrap transition",class:{"left-close":!e.isOpen}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"tree"},[r("el-tabs",{staticClass:"border-card",attrs:{type:"border-card"},on:{"tab-click":e.tabClick},model:{value:e.tabActiveName,callback:function(t){e.tabActiveName=t},expression:"tabActiveName"}},[r("el-tab-pane",{attrs:{name:"文件夹",label:"文件夹"}},["文件夹"===e.tabActiveName?r("CustomTree",{ref:"taskFolderTree",attrs:{"context-menu-option":e.contextMenuOption,"tree-data":e.folderList,"default-props":e.defaultProps,options:e.treeOptions,"is-contextmenu":!0,"is-filter":!0,depth:3,"is-locked":!0},on:{delFile:e.delFile,resetFolderName:e.resetFolderName,addFile:e.addFile,"node-click":e.handelFolder}}):e._e()],1),e._v(" "),r("el-tab-pane",{attrs:{name:"标签",label:"标签"}},[r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("全部标签")])]),e._v(" "),r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择标签",size:"small",title:e.tagTitle,filterable:"",clearable:""},on:{change:e.clickTag},model:{value:e.labelId,callback:function(t){e.labelId=t},expression:"labelId"}},e._l(e.allTagList,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[r("el-tooltip",{attrs:{"popper-class":"tag-popper",content:t.name,placement:"top",disabled:e.isTipDisabled}},[r("span",{staticStyle:{float:"left","max-width":"320px",overflow:"hidden","text-overflow":"ellipsis"},on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.name))])]),e._v(" "),r("el-popover",{staticClass:"icon-star",attrs:{trigger:"hover","popper-class":"tag-popper"}},[e._v("\n                    收藏\n                    "),e._v(" "),r("el-rate",{attrs:{slot:"reference",disabled:"",max:1},nativeOn:{click:function(n){return e.collectTag(t)}},slot:"reference",model:{value:t.collectVal,callback:function(n){e.$set(t,"collectVal",n)},expression:"item.collectVal"}})],1)],1)})),1)],1),e._v(" "),r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("我的收藏")])]),e._v(" "),e.collectList&&e.collectList.labels?e._l(e.collectList.labels,(function(t){return r("span",{key:t.name,on:{contextmenu:function(n){return n.preventDefault(),e.onContextmenu(n,t,3)}}},[r("el-tooltip",{attrs:{"popper-class":"tag-popper",content:t.name,placement:"bottom-start",disabled:e.isTipDisabled}},[r("el-tag",{staticClass:"item",attrs:{effect:t.id==e.params.labelId?"dark":"plain"},on:{click:function(n){return e.clickTag(t.id)}},nativeOn:{mouseenter:function(t){return e.isShowTooltip(t)}}},[e._v(e._s(t.name))])],1)],1)})):r("div",{staticClass:"no-data"},[e._v("No Data")])],2),e._v(" "),r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("\n                  我的标签\n                  "),r("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"tag-popper"}},[e._v("\n                    右击可编辑标签\n                    "),r("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),r("el-button",{staticStyle:{float:"right",padding:"0"},attrs:{type:"text"},on:{click:e.addTag}},[e._v("添加")])],1),e._v(" "),e.tagList.current&&0===e.tagList.current.length?r("div",{staticClass:"no-data"},[e._v("No Data")]):e._l(e.tagList.current,(function(t){return r("span",{key:t.name,on:{contextmenu:function(n){return n.preventDefault(),e.onContextmenu(n,t,1)}}},[r("el-tooltip",{attrs:{"popper-class":"tag-popper",content:t.name,placement:"bottom-start",disabled:e.isTipDisabled}},[r("el-tag",{staticClass:"item",attrs:{effect:t.id==e.params.labelId?"dark":"plain"},on:{click:function(n){return e.clickTag(t.id)}},nativeOn:{mouseenter:function(t){return e.isShowTooltip(t)}}},[e._v(e._s(t.name))])],1)],1)}))],2),e._v(" "),r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("\n                  公开给我的标签\n                  "),r("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"tag-popper"}},[e._v("\n                    右击可编辑标签\n                    "),r("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1)]),e._v(" "),0===e.publishTagList.length?r("div",{staticClass:"no-data"},[e._v("No Data")]):e._l(e.publishTagList,(function(t){return r("span",{key:t.name,on:{contextmenu:function(n){return n.preventDefault(),e.onContextmenu(n,t,4)}}},[r("el-tooltip",{attrs:{"popper-class":"tag-popper",content:t.name,placement:"bottom-start",disabled:e.isTipDisabled}},[r("el-tag",{staticClass:"item",attrs:{effect:t.id==e.params.labelId?"dark":"plain"},on:{click:function(n){return e.clickTag(t.id)}},nativeOn:{mouseenter:function(t){return e.isShowTooltip(t)}}},[e._v(e._s(t.name))])],1)],1)}))],2)],1)],1)],1),e._v(" "),r("div",{class:["tree-arrow",{"tree-arrow-close":!e.isOpen}],on:{click:e.handleOpen}},[r("i",{class:["icon-arrow-tree",e.isOpen?"el-icon-arrow-left":"el-icon-arrow-right"]})])]),e._v(" "),r("div",{ref:"rightWrap",staticClass:"right-wrap"},[r("div",{staticClass:"search-condition-wrap"},[r("div",{staticClass:"search-group"},[r("search-item",{staticClass:"custom-search",attrs:{width:"120px",span:8,label:"ID/名称"}},[r("el-autocomplete",{staticClass:"search-input",attrs:{size:"small","popper-class":"suggest-input","fetch-suggestions":e.querySearch,"value-key":"name",placeholder:"任务名称/ID","trigger-on-focus":!1,clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[r("el-tooltip",{attrs:{effect:"dark",content:n.name,placement:"left-end"}},[r("div",[e._v(e._s(n.name))])])]}}]),model:{value:e.params.keyWord,callback:function(t){e.$set(e.params,"keyWord","string"===typeof t?t.trim():t)},expression:"params.keyWord"}})],1),e._v(" "),r("search-item",{staticClass:"custom-search",attrs:{span:7,width:"80px",label:"任务类型"}},[r("el-select",{staticClass:"search-input",attrs:{size:"small",placeholder:"任务类型",clearable:""},on:{change:e.search},model:{value:e.params.templateCode,callback:function(t){e.$set(e.params,"templateCode",t)},expression:"params.templateCode"}},e._l(e.templateCodeList,(function(t,n){return r("el-option-group",{key:n,attrs:{label:n}},e._l(t,(function(e){return r("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})})),1)})),1)],1),e._v(" "),r("search-item",{staticClass:"custom-search",attrs:{span:8,width:"60px",label:"任务状态"}},[r("el-select",{staticClass:"search-input",attrs:{size:"small",placeholder:"任务状态",clearable:""},on:{change:e.search},model:{value:e.params.online,callback:function(t){e.$set(e.params,"online",t)},expression:"params.online"}},[r("el-option",{attrs:{label:"上线",value:1}}),e._v(" "),r("el-option",{attrs:{label:"下线",value:0}})],1)],1),e._v(" "),r("search-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowAll,expression:"isShowAll"}],staticClass:"custom-search",attrs:{width:"120px",span:8,label:"前置依赖数据集"}},[r("el-input",{staticClass:"search-input table",attrs:{size:"small",placeholder:"请输入前置依赖数据集",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.params.inputGuids,callback:function(t){e.$set(e.params,"inputGuids","string"===typeof t?t.trim():t)},expression:"params.inputGuids"}})],1),e._v(" "),r("search-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowAll,expression:"isShowAll"}],staticClass:"custom-search",attrs:{width:"80px",span:7,label:"产出数据集"}},[r("el-input",{staticClass:"search-input table",attrs:{size:"small",placeholder:"请输入产出数据集",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.params.tableName,callback:function(t){e.$set(e.params,"tableName","string"===typeof t?t.trim():t)},expression:"params.tableName"}})],1)],1),e._v(" "),r("div",{staticClass:"btns"},[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.search}}),e._v(" "),r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.create}},[e._v("新建")]),e._v(" "),r("el-button",{staticStyle:{"margin-left":"0","min-width":"auto"},attrs:{type:"text",size:"small"},on:{click:e.changeHeight}},[e._v("\n            "+e._s(e.text)+"\n            "),r("i",{class:e.isShowAll?"el-icon-arrow-down ":"el-icon-arrow-right"})])],1)]),e._v(" "),r("el-alert",{staticClass:"custom-alert",attrs:{"show-icon":"",closable:!1}},[r("div",{attrs:{slot:"title"},slot:"title"},[e._v("\n          结果共 "+e._s(e.statisticNum.total)+" 个，\n          "),e._v("\n          实例最近执行状态为：\n          "),r("span",{class:["status-tag","success","SUCCESS"===e.params.statusCode?"active":""],on:{click:function(t){return e.changeStatusCode("SUCCESS")}}},[e._v("已成功")]),e._v(" "),e.params.statusCode?e._e():r("span",[e._v(e._s(e.statisticNum.success)+" 个，")]),e._v(" "),r("span",{class:["status-tag","failed","FAILED"===e.params.statusCode?"active":""],on:{click:function(t){return e.changeStatusCode("FAILED")}}},[e._v("已失败")]),e._v(" "),e.params.statusCode?e._e():r("span",[e._v(e._s(e.statisticNum.failed)+" 个，")]),e._v(" "),r("span",{class:["status-tag","running","RUNNING"===e.params.statusCode?"active":""],on:{click:function(t){return e.changeStatusCode("RUNNING")}}},[e._v("执行中")]),e._v(" "),e.params.statusCode?e._e():r("span",[e._v(e._s(e.statisticNum.running)+" 个，")]),e._v(" "),r("span",{class:["status-tag","unexecuted","UNEXECUTED"===e.params.statusCode?"active":""],on:{click:function(t){return e.changeStatusCode("UNEXECUTED")}}},[e._v("未执行")]),e._v(" "),e.params.statusCode?e._e():r("span",[e._v(e._s(e.statisticNum.unexecuted)+" 个")]),e._v(" "),r("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click"}},[r("el-checkbox-group",{model:{value:e.selectedCols,callback:function(t){e.selectedCols=t},expression:"selectedCols"}},e._l(e.taskTableColList,(function(t){return r("div",{key:t.name},[r("el-checkbox",{attrs:{label:t.name},on:{change:function(n){return e.changeCols(t.name,n)}}},[e._v(e._s(t.label))])],1)})),0),e._v(" "),r("el-button",{staticStyle:{"min-width":"40px",padding:"5px",position:"absolute",top:"1px",right:"0"},attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v("自定义列"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1)],1)]),e._v(" "),r("div",{class:e.fullscreen?"table-fullscreen":""},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableList",staticClass:"custom-table",attrs:{data:e.tableData,border:!0,stripe:"","header-cell-style":{height:"40px",padding:"0"},"cell-style":{height:"36px",padding:"0"},height:e.tableHeight},on:{"header-dragend":e.dragHeader}},[e.showtableCol("id")?r("el-table-column",{attrs:{prop:"id",label:"任务ID","min-width":"65"}}):e._e(),e._v(" "),e.showtableCol("name")?r("el-table-column",{attrs:{prop:"name",label:"任务名称","min-width":"270",sortable:"","sort-orders":[null]},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{content:t.row.name,placement:"top",disabled:e.isTipDisabled}},[r("a",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip,click:function(n){return e.gotoDetail(t.row)},contextmenu:function(n){return n.preventDefault(),e.onContextmenuName(n,t.row)}}},[e._v(e._s(t.row.name))])])]}}],null,!1,3271873246)}):e._e(),e._v(" "),e.showtableCol("displayTemplateCode")?r("el-table-column",{attrs:{prop:"displayTemplateCode",label:"任务类型","min-width":"220"}}):e._e(),e._v(" "),e.showtableCol("createBy")?r("el-table-column",{attrs:{prop:"createBy",label:"创建人","min-width":"100","show-overflow-tooltip":!0}}):e._e(),e._v(" "),e.showtableCol("userGroups")?r("el-table-column",{attrs:{prop:"userGroups",label:"用户组","min-width":"100","show-overflow-tooltip":!0}}):e._e(),e._v(" "),e.showtableCol("statusCode")?r("el-table-column",{attrs:{prop:"statusCode",label:"最近运行状态","min-width":"190",align:"right","header-align":"left","class-name":"statusCol"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n              最近运行状态\n              "),e._v(" "),r("i",{staticClass:"el-icon-info",on:{click:function(t){e.infoType=!0}}})]},proxy:!0},{key:"default",fn:function(t){return[t.row.isStreamingTemplateCode?r("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[r("p",[e._v("执行时间："+e._s(t.row.releaseTime?e.$utils.parseTime(t.row.releaseTime):"-"))]),e._v(" "),r("p",[e._v("执行状态："+e._s(e.realtimeStateCode[t.row.statusCode]||"-"))]),e._v(" "),r("span",{class:["circle","task-state",e.formatColor(t.row.statusCode)],attrs:{slot:"reference"},slot:"reference"})]):e._l(t.row.taskInstances,(function(t,n){return r("el-popover",{key:n,attrs:{trigger:"hover",placement:"bottom"}},[r("p",[e._v("执行时间："+e._s(t.execution_date?e.$utils.parseTime(t.execution_date):"-"))]),e._v(" "),r("p",[e._v("执行状态："+e._s(e.offlineStateCode[t.state]||"-"))]),e._v(" "),r("p",[e._v("开始时间："+e._s(t.start_date?e.$utils.parseTime(t.start_date):"-"))]),e._v(" "),r("p",[e._v("结束时间："+e._s(t.end_date?e.$utils.parseTime(t.end_date):"-"))]),e._v(" "),r("p",[e._v("耗时："+e._s(t.duration||"-"))]),e._v(" "),r("span",{class:["circle","task-state",t.state],attrs:{slot:"reference"},slot:"reference"})])}))]}}],null,!1,1418027342)}):e._e(),e._v(" "),e.showtableCol("outputGuids")?r("el-table-column",{attrs:{prop:"outputGuids",label:"产出数据集","min-width":"150",formatter:e.formatter},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{disabled:e.isTipDisabled}},[r("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.formatGuids(t.row.outputGuids))},slot:"content"}),e._v(" "),r("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(e.formatDataView(t.row.outputGuids)))])])]}}],null,!1,3556321670)}):e._e(),e._v(" "),e.showtableCol("inputGuids")?r("el-table-column",{attrs:{prop:"inputGuids",label:"前置依赖数据集","min-width":"150",formatter:e.formatter},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{disabled:e.isTipDisabled}},[r("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.formatGuids(t.row.inputGuids))},slot:"content"}),e._v(" "),r("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(e.formatDataView(t.row.inputGuids)))])])]}}],null,!1,1472989542)}):e._e(),e._v(" "),e.showtableCol("updateTime")?r("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",sortable:"","sort-orders":[null],"min-width":"145"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.$utils.parseTime(t.row.updateTime))+"\n            ")]}}],null,!1,3759684101)}):e._e(),e._v(" "),e.showtableCol("online")?r("el-table-column",{attrs:{prop:"online",fixed:"right",label:"状态",align:"center","header-align":"left",sortable:"","sort-method":e.statusSort,"min-width":"80"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n              状态\n              "),r("el-popover",{staticClass:"header-tip",attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[e._v("\n                上下线状态\n                "),r("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])]},proxy:!0},{key:"default",fn:function(t){return[t.row.isStreamingTemplateCode?e._e():r("el-switch",{staticClass:"online-switch",attrs:{value:1===t.row.online,disabled:!t.row.canEdit||t.row.isStreamingTemplateCode,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(n){return e.goLine(t.row)}}})]}}],null,!1,2582193780)}):e._e(),e._v(" "),e.showtableCol("description")?r("el-table-column",{attrs:{prop:"description",label:"任务描述","min-width":"150",formatter:e.formatter},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{disabled:e.isTipDisabled}},[r("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.formatGuids(t.row.description))},slot:"content"}),e._v(" "),r("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.description||"-"))])])]}}],null,!1,2053357332)}):e._e(),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"170"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 操作 "),r("i",{staticClass:"btn-full-screen el-icon-full-screen",attrs:{title:e.fullscreen?"还原":"放大"},on:{click:e.switchFullscreen}})]},proxy:!0},{key:"default",fn:function(t){return[1===t.row.hiddenType?r("el-tooltip",{attrs:{content:"跳转到工作流详情","open-delay":200,"popper-class":"tag-popper"}},[r("i",{class:["el-icon-edit","table-icon"],on:{click:function(n){return e.gotoFlow(t.row)}}})]):[1===t.row.online&&2===t.row.isIrregularSheduler?r("el-tooltip",{attrs:{content:"手动执行","open-delay":200,"popper-class":"tag-popper"}},[r("i",{staticClass:"el-icon-video-play table-icon",on:{click:function(n){return e.customRunTask(t.row)}}})]):e._e(),e._v(" "),r("el-tooltip",{attrs:{content:t.row.canEdit?"编辑":"查看","open-delay":200,"popper-class":"tag-popper"}},[r("i",{class:[t.row.canEdit?"el-icon-edit":"el-icon-view","table-icon"],on:{click:function(n){return e.edit(t.row)}}})]),e._v(" "),r("el-tooltip",{attrs:{content:"复制任务","open-delay":200,"popper-class":"tag-popper"}},[r("i",{staticClass:"el-icon-document-copy table-icon",on:{click:function(n){return e.copyTask(t.row)}}})]),e._v(" "),t.row.canEdit?[t.row.isStreamingTemplateCode||1!==t.row.online?e._e():r("el-tooltip",{attrs:{content:"补数","open-delay":200,"popper-class":"tag-popper"}},[r("i",{staticClass:"el-icon-document-add table-icon",on:{click:function(n){return e.addNum(t.row)}}})]),e._v(" "),t.row.isStreamingTemplateCode?e._e():r("el-tooltip",{attrs:{content:"版本信息","open-delay":200,"popper-class":"tag-popper"}},[r("i",{staticClass:"el-icon-finished table-icon",on:{click:function(n){return e.getVersion(t.row)}}})])]:e._e(),e._v(" "),t.row.canDelete?r("el-tooltip",{attrs:{content:"删除","open-delay":200,"popper-class":"tag-popper"}},[r("i",{staticClass:"el-icon-delete table-icon table-icon-red global-color-cb",on:{click:function(n){return e.deleteData(t.row.id)}}})]):e._e()]]}}])})],1),e._v(" "),r("el-pagination",{staticStyle:{"padding-top":"10px"},attrs:{background:"",total:e.total,"current-page":e.params.pageNum,"page-sizes":[10,20,30,50,100],"page-size":e.params.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),r("win-add-num",{ref:"dialog",on:{save:e.getTaskListByPage}}),e._v(" "),r("win-add-tag",{ref:"dialogTag",attrs:{"user-id":e.userInfo.userId},on:{save:e.reloadApi}}),e._v(" "),r("folder-task",{ref:"folderTask",on:{saveFolderTask:e.saveFolderTask}}),e._v(" "),r("el-dialog",{attrs:{title:"offline"===e.ifnotifyFrom?"下线":"删除",visible:e.dialogVisible,width:"420px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"是否通知直接下游",prop:"ifnotify",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[r("el-radio-group",{model:{value:e.ruleForm.ifnotify,callback:function(t){e.$set(e.ruleForm,"ifnotify",t)},expression:"ruleForm.ifnotify"}},[r("el-radio",{attrs:{label:!0}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:function(t){return e.save(e.ifnotifyFrom)}}},[e._v("确 定")])],1)],1),e._v(" "),r("win-version-list",{ref:"versionList"}),e._v(" "),r("el-info",{attrs:{title:"任务执行状态流"},model:{value:e.infoType,callback:function(t){e.infoType=t},expression:"infoType"}},[r("img",{staticStyle:{height:"400px","min-width":"400px"},attrs:{src:n("e38b"),alt:"状态图"}})])],1)},s=[],o=n("460e"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"custom-dialog",attrs:{title:"补数",visible:e.dialogVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"任务名称"}},[n("span",[e._v(e._s(e.taskName))])]),e._v(" "),n("el-form-item",{attrs:{label:"起止时间",prop:"timeRange"}},[n("el-date-picker",{key:e.dateKey,staticClass:"dialog-select",attrs:{"popper-class":"yyyy-MM-dd HH"===e.valueFormat?"time-hour":"",type:e.dateType,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":e.valueFormat,format:e.valueFormat,"picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"]},model:{value:e.ruleForm.timeRange,callback:function(t){e.$set(e.ruleForm,"timeRange",t)},expression:"ruleForm.timeRange"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"补数方式",prop:"type"}},[n("el-select",{staticClass:"dialog-select",attrs:{placeholder:"请选择补数方式"},on:{change:e.changeType},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[n("el-option",{attrs:{label:"普通",value:1}}),e._v(" "),n("el-option",{attrs:{label:"深度",value:2}})],1)],1),e._v(" "),2===e.ruleForm.type?n("el-form-item",{attrs:{label:"下游选择",prop:e.treeParams.data&&e.treeParams.data.length?"childIds":""}},[n("el-tree-select",{ref:"treeSelect",staticClass:"dialog-select",staticStyle:{display:"inline-block"},attrs:{"no-data":"test",placeholder:"请选择下游依赖",styles:{width:"100%"},"tree-params":e.treeParams,"select-params":e.selectParams},on:{check:e.checkChange},model:{value:e.ruleForm.childIds,callback:function(t){e.$set(e.ruleForm,"childIds",t)},expression:"ruleForm.childIds"}}),e._v(" "),n("el-checkbox",{on:{change:e.changeAllCheck},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("全选")]),e._v(" "),n("el-popover",{attrs:{placement:"bottom",trigger:"hover","popper-class":"tag-popper"}},[n("div",[e._v("只能选择下游任务负责人为自己的任务")]),e._v(" "),n("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer",color:"#409eff"},attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"通知下游负责人",required:""}},[n("el-radio-group",{staticClass:"dialog-select",attrs:{disabled:e.notifyDisabled},model:{value:e.ruleForm.isSendNotify,callback:function(t){e.$set(e.ruleForm,"isSendNotify",t)},expression:"ruleForm.isSendNotify"}},[n("el-radio",{attrs:{label:!0}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.save}},[e._v("确 定")])],1)],1)},c=[],u=n("b199"),d={name:"WinAddNum",data:function(){return{dialogVisible:!1,formLoading:!1,notifyDisabled:!1,ruleForm:{timeRange:[],type:1,childIds:[],isCheckDependency:!0,isSendNotify:!0},rules:{timeRange:[{required:!0,message:"请选择起止时间",trigger:"change"}],type:[{required:!0,message:"请选择补数方式",trigger:"change"}],childIds:[{required:!0,message:"请选择下游选择",trigger:"change"}]},dateKey:0,dateType:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss",pickerOptions:{disabledDate:function(e){return e.getTime()>new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1)}},childDepsList:[],defaultProps:{value:"id",label:"name"},treeParams:{"expand-on-click-node":!1,"check-on-click-node":!0,"check-strictly":!0,"node-key":"id",data:[],props:{children:"children",label:"name",value:"id"}},selectParams:{"collapse-tags":!0,placeholder:"请选择下游依赖"},allChecked:!1,currentId:"",taskName:"",btnDisabled:!1}},methods:{init:function(e){var t=this;this.formLoading=!0,Object(u["q"])(this.currentId).then((function(e){var n=e.data;t.treeParams.data=t.filterData(n.children)})),Object(u["z"])({taskId:this.currentId}).then((function(e){var n=e.data;n&&("hourly"===n.granularity?(t.dateType="datetimerange",t.valueFormat="yyyy-MM-dd HH"):"minutely"===n.granularity?(t.dateType="datetimerange",t.valueFormat="yyyy-MM-dd HH:mm"):"monthly"===n.granularity?(t.dateType="monthrange",t.valueFormat="yyyy-MM"):(t.dateType="daterange",t.valueFormat="yyyy-MM-dd"))})).finally((function(){t.formLoading=!1}))},filterData:function(e){var t=this;return e.forEach((function(e){e.children&&e.children.length>0?t.filterData(e.children):e.children=void 0})),e},changeType:function(){2!==this.ruleForm.type||this.treeParams.data.length?this.notifyDisabled=!1:this.notifyDisabled=!0},showWin:function(e){this.currentId=e.id,this.taskName=e.name,this.init(e.outputGuids),this.dialogVisible=!0,this.btnDisabled=!1,this.dateKey++},checkChange:function(e,t){var n=t.checkedKeys.indexOf(e.id);-1!==n?this.selectedParent(e):e.children&&e.children.length&&this.cancelSelectedChild(e.children)},selectedParent:function(e){var t=this.$refs.treeSelect.$refs.tree.getNode(e);void 0!==t.parent.key&&(this.$refs.treeSelect.$refs.tree.setChecked(t.parent,!0),this.$refs.treeSelect.ids=this.$refs.treeSelect.$refs.tree.getCheckedKeys(),this.selectedParent(t.parent))},cancelSelectedChild:function(e){var t=this;e.forEach((function(e){t.$refs.treeSelect.$refs.tree.setChecked(e,!1),t.$refs.treeSelect.ids=t.$refs.treeSelect.$refs.tree.getCheckedKeys(),e.children&&e.children.length&&t.cancelSelectedChild(e.children)}))},changeAllCheck:function(e){e?(this.setAllCheck(this.treeParams.data),this.ruleForm.childIds=this.$refs.treeSelect.$refs.tree.getCheckedKeys()):(this.$refs.treeSelect.$refs.tree.setCheckedKeys([]),this.$refs.treeSelect.ids=[],this.ruleForm.childIds=[])},setAllCheck:function(e){var t=this;e.forEach((function(e){t.$refs.treeSelect.$refs.tree.setChecked(e,!0),t.$refs.treeSelect.ids=t.$refs.treeSelect.$refs.tree.getCheckedKeys(),e.children&&e.children.length>0&&t.setAllCheck(e.children)}))},dateFormat:function(){if("yyyy-MM-dd HH:mm"===this.valueFormat)this.ruleForm.timeRange[0]+=":00",this.ruleForm.timeRange[1]+=":59";else if("yyyy-MM-dd HH"===this.valueFormat)this.ruleForm.timeRange[0]+=":00:00",this.ruleForm.timeRange[1]+=":59:59";else if("yyyy-MM-dd"===this.valueFormat)this.ruleForm.timeRange[0]+=" 00:00:00",this.ruleForm.timeRange[1]+=" 23:59:59";else if("yyyy-MM"===this.valueFormat){var e=this.ruleForm.timeRange[1].split("-"),t=new Date(e[0],e[1],0).getDate();this.ruleForm.timeRange[0]+="-01 00:00:00",this.ruleForm.timeRange[1]+="-".concat(t," 23:59:59")}},resetForm:function(){this.$refs.ruleForm.resetFields(),this.allChecked=!1},save:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.btnDisabled=!0,e.dateFormat(),Object(u["e"])({id:e.currentId,startDate:e.ruleForm.timeRange[0],endDate:e.ruleForm.timeRange[1],childIds:e.ruleForm.childIds.join(","),isCheckDependency:e.ruleForm.isCheckDependency,isSendNotify:e.ruleForm.isSendNotify}).then((function(t){e.dialogVisible=!1,e.$message({type:"success",message:"操作成功"}),e.$emit("save")})).finally((function(){e.btnDisabled=!1})))}))}}},f=d,p=(n("eeb1"),n("2877")),h=Object(p["a"])(f,l,c,!1,null,"877be38e",null),m=h.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[n("el-form-item",{attrs:{label:"标签名字",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入标签名字，不超过128个字符",maxlength:"128",clearable:"",disabled:4===e.tagType},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"关联任务"}},[n("div",{class:["task-tag-wrap",e.selectTasks.length?"border-dashed":""]},e._l(e.selectTasks,(function(t){return n("el-tag",{key:t.id,staticClass:"task-tag",attrs:{closable:"",type:"info",effect:"plain"},on:{close:function(n){return e.handleClose(t)}}},[e._v("\n            "+e._s(t.name)+"\n          ")])})),1),e._v(" "),n("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.taskLoading,expression:"taskLoading"}],attrs:{placeholder:"请选择归属于该标签的任务（最多可选500个）"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),e.filterText?n("div",{staticClass:"tree-wrap"},[n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.options,props:e.defaultProps,"empty-text":e.filterText?"No Data":"","check-on-click-node":!0,"expand-on-click-node":!1,"node-key":"id","show-checkbox":"","default-expand-all":""},on:{check:e.handleCheck}})],1):e._e()],1),e._v(" "),n("el-form-item",{attrs:{label:"是否公开此标签"}},[n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n          是否公开此标签\n          "),n("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"tag-popper",width:"250"}},[e._v("\n            标签公开后，公开对象除了不能删除此标签外，可任意编辑此标签\n            "),n("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),n("el-radio",{attrs:{label:0,disabled:e.createBy!==e.userId},model:{value:e.ruleForm.publish,callback:function(t){e.$set(e.ruleForm,"publish",t)},expression:"ruleForm.publish"}},[e._v("否")]),e._v(" "),n("el-radio",{attrs:{label:1,disabled:e.createBy!==e.userId},model:{value:e.ruleForm.publish,callback:function(t){e.$set(e.ruleForm,"publish",t)},expression:"ruleForm.publish"}},[e._v("是")])],1),e._v(" "),e.showPublic?n("el-form-item",{attrs:{label:"公开给",prop:"publishers"}},[n("el-select",{staticClass:"senior-input",attrs:{placeholder:"请输入协作人",filterable:"",multiple:"",remote:"","allow-create":"","reserve-keyword":"",disabled:e.createBy!==e.userId,"remote-method":function(t){e.remoteMethod(t,"collaboratorsList")},loading:e.loading,"popper-class":"custom-popper"},model:{value:e.ruleForm.publishers,callback:function(t){e.$set(e.ruleForm,"publishers",t)},expression:"ruleForm.publishers"}},e._l(e.collaboratorsList,(function(t){return n("el-option",{key:t.shareId,attrs:{value:t.shareId,label:t.name}},[n("div",{staticStyle:{"max-width":"250px","word-break":"break-all"}},[e._v("("+e._s(t.staffId)+")-"+e._s(t.name)+e._s(t.deptFullPath?"-"+t.deptFullPath:""))])])})),1)],1):e._e()],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.save}},[e._v("确 定")])],1)],1)},v=[],b=n("b893"),k={props:{userId:{type:String,default:""}},data:function(){var e=function(e,t,n){var r=/^[A-Za-z0-9_\u4e00-\u9fa5]{2,128}$/;r.test(t)?n():n(new Error("【只包含a-z,A-Z,0-9或_或中文】，长度2-128"))},t=function(e,t,n){0===t.length?n(new Error("请选择公开人")):n()};return{createBy:"",taskLoading:!1,showPublic:!1,collaboratorsList:[],dialogVisible:!1,loading:!1,ruleForm:{name:"",publishers:[],publish:0},rules:{name:[{required:!0,validator:e,trigger:["blur","change"]}],publishers:[{required:!0,validator:t,trigger:["blur","change"]}]},btnDisabled:!1,selectTasks:[],filterText:"",options:[],defaultProps:{multiple:!0,value:"id",label:"name"},title:"添加标签",tagType:0}},watch:{filterText:function(e){this.filterTasks({vm:this,value:e})},"ruleForm.publish":function(e){this.showPublic=1===e}},created:function(){this.createBy=this.userId},methods:{showWin:function(e,t){this.dialogVisible=!0,this.btnDisabled=!1,this.tagType=t,e?(this.ruleForm.id=e,this.title="编辑标签",this.getInfo(e)):(this.ruleForm.id="",this.ruleForm.publishers=[],this.ruleForm.publish=0,this.title="添加标签")},getInfo:function(e){var t=this;this.loading=!0,Object(u["H"])(e).then((function(e){var n=e.data;t.createBy=n.createBy,t.ruleForm.name=n.name,t.ruleForm.publish=n.publish,t.ruleForm.publishers=n.publishers?n.publishers.split(","):[],n.list&&(t.selectTasks=n.list.map((function(e){return{id:e.id,name:e.name}}))),t.loading=!1}))},filterTasks:b["d"]((function(e){var t=e.vm,n=e.value;n?t.getList(n):t.options=[]}),400),remoteMethod:function(e,t){var n=this;""!==e?Object(u["Y"])(e).then((function(e){var r=e.data;n[t]=r.filter((function(e){return e.shareId!==n.createBy}))})):this[t]=[]},getList:function(e){var t=this;this.taskLoading=!0,Object(u["J"])(e).then((function(e){t.taskLoading=!1;var n=e.data;if(t.options=[],n){for(var r in n)n[r].forEach((function(e){e.name="(".concat(e.id,")").concat(e.name)})),t.options.push({id:"createBy-"+r,name:r,children:n[r]});t.$nextTick((function(){t.selectTasks.forEach((function(e){t.$refs.tree.setChecked(e,!0)}))}))}}))},handleCheck:function(e,t){var n=this,r=t.checkedKeys,a=t.checkedNodes;if(r.includes(e.id))a.forEach((function(e){if(!e.children){var t=n.selectTasks.find((function(t){return t.id===e.id}));t||(n.selectTasks.length>=500?n.$refs.tree.setChecked(e,!1):n.selectTasks.push({id:e.id,name:e.name}))}})),this.selectTasks.length>=500&&this.$message({type:"warning",message:"关联任务不能超过500个"});else if(e.children)e.children.forEach((function(e){var t=n.selectTasks.findIndex((function(t){return t.id===e.id}));-1!==t&&n.selectTasks.splice(t,1)}));else{var i=this.selectTasks.findIndex((function(t){return t.id===e.id}));-1!==i&&this.selectTasks.splice(i,1)}},handleClose:function(e){this.selectTasks.splice(this.selectTasks.findIndex((function(t){return t.id===e.id})),1),this.$refs.tree.setChecked(e,!1)},resetForm:function(){this.$refs.ruleForm.resetFields(),this.selectTasks=[],this.filterText="",this.options=[]},save:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){e.btnDisabled=!0;var n,r={name:e.ruleForm.name,tasks:e.selectTasks.map((function(e){return e.id})).join(","),publish:e.ruleForm.publish,publishers:e.ruleForm.publishers.join(",")};e.ruleForm.id?(r.id=e.ruleForm.id,n=Object(u["hb"])(r)):n=Object(u["c"])(r),n.then((function(t){e.dialogVisible=!1,e.$message({type:"success",message:e.title+"成功"}),e.$emit("save")})).finally((function(){e.btnDisabled=!1}))}}))}}},y=k,w=(n("dbeb"),Object(p["a"])(y,g,v,!1,null,"409cdfc2",null)),_=w.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{width:"30%",title:"关联任务",visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"已关联任务"}},[n("el-input",{attrs:{placeholder:"请选择归属于该标签的任务（最多可选500个）"},on:{input:e.getFilterLinkedTask},model:{value:e.filterLinkedTask,callback:function(t){e.filterLinkedTask=t},expression:"filterLinkedTask"}}),e._v(" "),e.filterSelectTasks.length?n("div",{class:["task-tag-wrap",e.selectTasks.length?"border-dashed":""]},e._l(e.filterSelectTasks,(function(t){return n("el-tag",{key:t.id,staticClass:"task-tag",attrs:{closable:"",type:"info",effect:"plain"},on:{close:function(n){return e.handleClose(t)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1):n("div",{class:["task-tag-wrap",e.selectTasks.length?"border-dashed":""]},e._l(e.selectTasks,(function(t){return n("el-tag",{key:t.id,staticClass:"task-tag",attrs:{closable:"",type:"info",effect:"plain"},on:{close:function(n){return e.handleClose(t)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1),e._v(" "),e.selectTasks.length?e._e():n("div",{staticClass:"no-task"},[e._v("暂无关联任务")])],1),e._v(" "),n("el-form-item",{attrs:{label:"添加关联任务"}},[n("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.taskLoading,expression:"taskLoading"}],attrs:{placeholder:"请选择归属于该标签的任务（最多可选500个）"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),e.filterText?n("div",{staticClass:"tree-wrap"},[n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.options,props:e.defaultProps,"empty-text":e.filterText?"No Data":"","check-on-click-node":!0,"expand-on-click-node":!1,"node-key":"id","show-checkbox":"","default-expand-all":""},on:{check:e.handleCheck}})],1):e._e()],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},T=[],L={data:function(){return{dialogVisible:!1,selectTasks:[],options:[],filterSelectTasks:[],taskLoading:!1,formLoading:!1,filterLinkedTask:"",filterText:"",ruleForm:{},rules:{},folderId:"",btnDisabled:!1,defaultProps:{multiple:!0,value:"id",label:"name"}}},watch:{filterText:function(e){this.filterTasks({vm:this,value:e})}},methods:{showFolderTask:function(e){this.dialogVisible=!0,this.filterLinkedTask="",this.filterSelectTasks=[],this.folderId=e,this.filterText="",this.getInfo(e)},getFilterLinkedTask:function(e){this.selectTasks.length&&(this.filterSelectTasks=this.selectTasks.filter((function(t,n){return-1!==t.name.indexOf(e)})))},getInfo:function(e){var t=this;this.formLoading=!0,Object(u["S"])({folderId:e}).then((function(e){var n=e.data;n.length?t.selectTasks=n.map((function(e){return{id:e.taskId,name:e.taskName}})):t.selectTasks=[],t.formLoading=!1}))},filterTasks:b["d"]((function(e){var t=e.vm,n=e.value;n?t.getList(n):t.options=[]}),400),getList:function(e){var t=this;this.taskLoading=!0,Object(u["J"])(e).then((function(e){t.taskLoading=!1;var n=e.data;if(t.options=[],n){for(var r in n)t.options.push({id:"createBy-"+r,name:r,children:n[r]});t.$nextTick((function(){t.selectTasks.forEach((function(e){t.$refs.tree.setChecked(e,!0)}))}))}}))},handleCheck:function(e,t){var n=this,r=t.checkedKeys,a=t.checkedNodes;if(r.includes(e.id))a.forEach((function(e){if(!e.children){var t=n.selectTasks.find((function(t){return t.id===e.id}));t||(n.selectTasks.length>=500?n.$refs.tree.setChecked(e,!1):n.selectTasks.push({id:e.id,name:e.name}))}})),this.selectTasks.length>=500&&this.$message({type:"warning",message:"关联任务不能超过500个"});else if(e.children)e.children.forEach((function(e){var t=n.selectTasks.findIndex((function(t){return t.id===e.id}));-1!==t&&n.selectTasks.splice(t,1)}));else{var i=this.selectTasks.findIndex((function(t){return t.id===e.id}));-1!==i&&this.selectTasks.splice(i,1)}},handleClose:function(e){this.selectTasks.splice(this.selectTasks.findIndex((function(t){return t.id===e.id})),1),this.$refs.tree.setChecked(e,!1)},save:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){e.btnDisabled=!0;var n={folderId:e.folderId,taskIds:e.selectTasks.map((function(e){return{taskId:e.id,taskName:e.name}}))};Object(u["gb"])(n).then((function(t){e.dialogVisible=!1,e.$message({type:"success",message:"关联成功"}),e.$emit("saveFolderTask"),e.btnDisabled=!1})).finally((function(){e.btnDisabled=!1}))}}))}}},S=L,x=(n("9aba"),Object(p["a"])(S,C,T,!1,null,"04ce0943",null)),F=x.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-drawer",{attrs:{visible:e.drawer,"append-to-body":!0,direction:"rtl","show-close":!1,size:"800"},on:{"update:visible":function(t){e.drawer=t}}},[n("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[e._v("\n    版本信息\n    "),n("el-popover",{attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[e._v("\n      记录所保存的历史版本信息，以及针对任务所进行的上/下线、补数/重算这类操作信息\n      "),n("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),n("div",{staticStyle:{"margin-bottom":"10px","padding-left":"20px"}},[e._v("\n    操作类型:\n    "),n("el-select",{staticStyle:{width:"125px","margin-left":"10px"},attrs:{size:"mini",clearable:"",placeholder:"请选择"},on:{change:function(t){return e.handleCurrentChange(1)}},model:{value:e.params.eventCode,callback:function(t){e.$set(e.params,"eventCode",t)},expression:"params.eventCode"}},e._l(e.eventCodeList,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0,stripe:"","cell-style":{padding:"10px 0"}}},[n("el-table-column",{attrs:{prop:"eventVersion",label:"版本号","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.eventVersion?n("el-tooltip",{attrs:{content:"跳转到当前版本的编辑页面","open-delay":200,"popper-class":"tag-popper"}},[n("a",{staticClass:"link",on:{click:function(n){return e.edit(t.row.eventVersion)}}},[e._v("V"+e._s(t.row.eventVersion)+e._s(t.row.currentVersion?"-当前版本":""))])]):n("span",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作时间","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.$utils.parseTime(t.row.createTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"eventCode",label:"操作类型","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createBy",label:"操作人","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"eventMessage",label:"描述","min-width":"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.eventVersion?n("el-button",{attrs:{disabled:t.row.currentVersion,type:"text",size:"mini"},on:{click:function(n){return e.switchVer(t.row)}}},[e._v("切换")]):e._e()]}}])})],1),e._v(" "),n("el-pagination",{staticStyle:{"margin-bottom":"15px"},attrs:{background:"",total:e.total,"current-page":e.params.pageNum,"page-sizes":[10,20,30,50,100],"page-size":e.params.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},N=[],E={name:"WinVersionList",data:function(){return{drawer:!1,templateCode:"",loading:!1,tableData:[],total:0,eventCodeList:[],params:{eventCode:"",eventId:"",pageNum:1,pageSize:20,module:"task"}}},methods:{showWin:function(e){this.drawer=!0,this.templateCode=e.templateCode,this.params.eventId=e.id,this.params.pageNum=1,this.params.pageSize=20,this.getList(),this.getEventCodeList()},getList:function(){var e=this;this.loading=!0,Object(u["Z"])(this.params).then((function(t){e.loading=!1;var n=t.data;e.total=n.total,e.tableData=n.list}))},getEventCodeList:function(){var e=this;Object(u["C"])().then((function(t){e.eventCodeList=t.data}))},handleCurrentChange:function(e){this.params.pageNum=e,this.getList()},handleSizeChange:function(e){this.params.pageSize=e,this.params.pageNum=1,this.getList()},switchVer:function(e){var t=this;this.$confirm("确定切换为当前版本?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["eb"])({taskId:t.params.eventId,version:e.eventVersion}).then((function(e){t.$message({type:"success",message:"切换成功"}),t.getList()}))})).catch((function(){}))},edit:function(e){var t=b["n"][this.templateCode],n=this.$router.resolve({path:"/task/".concat(t),query:{id:this.params.eventId,version:e}}).href;window.open(n,"_blank")}}},O=E,D=(n("b943"),Object(p["a"])(O,I,N,!1,null,"66e278ea",null)),j=D.exports,$=n("ff91"),A=n("6d5e"),P=n("2f62");function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function H(e){return B(e)||V(e)||M(e)||R()}function R(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(e,t){if(e){if("string"===typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function V(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function B(e){if(Array.isArray(e))return z(e)}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */q=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,s=Object.create(i.prototype),o=new N(r||[]);return a(s,"_invoke",{value:S(e,n,o)}),s}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function v(){}function b(){}function k(){}var y={};c(y,s,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(E([])));_&&_!==n&&r.call(_,s)&&(y=_);var C=k.prototype=v.prototype=Object.create(y);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(a,i,s,o){var l=d(e[a],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==G(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(u).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,o)}))}o(l.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function S(t,n,r){var a=f;return function(i,s){if(a===h)throw new Error("Generator is already running");if(a===m){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var l=x(o,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var c=d(t,n,r);if("normal"===c.type){if(a=r.done?m:p,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=m,r.method="throw",r.arg=c.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function E(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(G(t)+" is not iterable")}return b.prototype=k,a(C,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:b,configurable:!0}),b.displayName=c(k,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,o,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var s=new L(u(e,n,r,a),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(C),c(C,l,"Generator"),c(C,s,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return o.type="throw",o.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;I(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:E(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function W(e,t,n,r,a,i,s){try{var o=e[i](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(r,a)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){W(i,r,a,s,o,"next",e)}function o(e){W(i,r,a,s,o,"throw",e)}s(void 0)}))}}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t=Z(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){var t=Y(e,"string");return"symbol"===G(t)?t:String(t)}function Y(e,t){if("object"!==G(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var X={name:"TaskList",components:{SearchItem:o["a"],WinAddNum:m,WinAddTag:_,WinVersionList:j,CustomTree:$["a"],FolderTask:F},data:function(){var e,t=!0;sessionStorage.getItem("isOpen")&&(t="true"===sessionStorage.getItem("isOpen")),sessionStorage.getItem("taskParams")&&(e=JSON.parse(sessionStorage.getItem("taskParams")));var n,r=[{name:"id",label:"任务ID",width:0},{name:"name",label:"任务名称",width:0},{name:"displayTemplateCode",label:"任务类型",width:0},{name:"createBy",label:"创建人",width:0},{name:"userGroups",label:"用户组",width:0},{name:"statusCode",label:"最近运行状态",width:0},{name:"outputGuids",label:"产出数据集",width:0},{name:"inputGuids",label:"前置依赖数据集",width:0},{name:"updateTime",label:"更新时间",width:0},{name:"online",label:"状态",width:0},{name:"description",label:"任务描述",width:0}];return localStorage.getItem("taskTableCols")&&(n=JSON.parse(localStorage.getItem("taskTableCols"))),{rateV:1,infoType:!1,treeNode:[],timeRange:[],linkTaskForm:{},statisticNum:{failed:0,online:0,success:0,canceled:0,unexecuted:0,running:0,total:0},tabActiveName:"文件夹",folderList:[],checked:!0,isShowSelf:!1,labelId:e&&e.labelId?e.labelId:"",params:{keyWord:e&&e.keyWord?e.keyWord:"",createBy:e&&e.createBy?e.createBy:"",templateCode:e&&e.templateCode?e.templateCode:"",online:e&&e.online?e.online:"",statusCode:e&&e.statusCode?e.statusCode:"",tenancyCode:e&&e.tenancyCode?e.tenancyCode:"",labelId:e&&e.labelId?e.labelId:"",tableName:e&&e.tableName?e.tableName:"",inputGuids:e&&e.inputGuids?e.inputGuids:"",down:e&&e.down?e.down:"",pageNum:e&&e.pageNum?e.pageNum:1,pageSize:Number(sessionStorage.getItem("pageSize"))||30},contextMenuOption:{},templateCodeList:{},total:0,tableData:[],selectFolderId:"",ownerLoading:!1,ownerList:[],loading:!1,isOpen:t,isShowAll:!0,fullscreen:!1,statusConfig:b["o"],codeToText:b["a"],offlineStateCode:b["i"],realtimeStateCode:b["k"],tagList:{},allTagList:[],publishTagList:[],collectList:{},isTipDisabled:!1,keyWordResults:[],dialogVisible:!1,btnDisabled:!1,ruleForm:{id:"",status:0,ifnotify:!1},ifnotifyFrom:"",taskTableColList:r,showTaskCols:n||r,selectedCols:(n||r).map((function(e){return e.name})),defaultProps:{children:"child",label:"name"},treeOptions:{"expand-on-click-node":!1,draggable:!1}}},computed:K(K({},Object(P["c"])(["isAdmin","userInfo"])),{},{tagTitle:function(){var e=this,t=this.allTagList.find((function(t){return t.id===e.labelId}));return t?t.name:""},userInfo:function(){return this.$store.getters.userInfo||JSON.parse(sessionStorage.getItem("userInfo"))},text:function(){return this.isShowAll?"收起":"展开"},tableHeight:function(){return this.isShowAll?"calc(100vh - 218px)":"calc(100vh - 181px)"}}),activated:function(){this.reloadApi()},created:function(){var e=this;document.onkeyup=function(t){"Escape"!==t.code&&27!==t.keycode||(e.fullscreen=!1)},this.contextMenuOption={menuList:[{label:"关联任务",disabledFn:function(e,t,n){return!1},onClick:this.linkTask},{label:"新建任务",disabledFn:function(e,t,n){return!1},onClick:this.newTask}],setMenu:function(e,t,n,r){return e.forEach((function(t,n){"移 动"===t.label&&e.splice(n,1)})),e}},this.getFolderList(),this.init()},methods:{formatDataView:function(e){return e?e.toString().split("@")[0]:"-"},saveFolderTask:function(){this.search()},tabClick:function(){"标签"===this.tabActiveName?this.params.folderIds="":this.params.labelId=""},linkTask:function(e,t,n){this.$refs.folderTask.showFolderTask(n.id)},newTask:function(e,t,n){this.$router.push({name:"TaskStep1",query:{folderId:n.id}})},init:function(){var e=this;this.loading=!0,Object(u["W"])().then((function(t){var n=t.data;n.sort.map((function(t){e.templateCodeList[t.code]=n[t.code]}))}))},getFolderList:function(){var e=this;Object(u["M"])({type:0}).then((function(t){var n,r=t.data||[];e.folderList=[],r.map((function(t,r){t.child=[],t.level=0,t.parentId||(n=t,e.folderList.push(t))}));var a=r.filter((function(e){return e.parentId}));e.resolveTreeData(n,a)}))},resolveTreeData:function(e,t){var n=this,r=JSON.parse(JSON.stringify(t));t.map((function(t,a){t.parentId===e.id&&(r.splice(a,1),e.child.push(t),n.resolveTreeData(t,r))}))},getAllChildrenIDs:function(e,t){var n=this;e.child.map((function(e){t.ids+=e.id+",",e.child.length&&n.getAllChildrenIDs(e,t)}))},handelFolder:function(e){var t,n={ids:""};this.selectFolderId=e.id,(null==(t=this.folderList[0])?void 0:t.id)!==e.id&&(n.ids+=e.id+",",e.child&&e.child.length&&this.getAllChildrenIDs(e,n)),this.params.folderIds=e.id?n.ids.slice(0,-1):"",this.search()},delFile:function(){var e=U(q().mark((function e(t){var n=this;return q().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(u["l"])({ids:t.id+""}).then((function(e){n.$message({type:"success",message:"删除成功"}),n.getFolderList()}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),resetFolderName:function(e){var t=this,n={type:0,parentId:e.parentId+"",id:e.id+"",name:e[this.defaultProps.label]};Object(u["o"])(n).then((function(e){t.$message({type:"success",message:"修改成功"}),t.getFolderList()}))},addFile:function(e,t){var n,r=this,a={type:0,name:e.addFileName,parent_id:t?t.id:null==(n=this.folderList[0])?void 0:n.id};Object(u["b"])(a).then((function(e){0===e.code&&(r.$message({type:"success",message:"新建成功"}),r.getFolderList())}))},showtableCol:function(e){var t=this.showTaskCols.findIndex((function(t){return t.name===e}));return-1!==t},reloadApi:function(){var e=this;this.getLabelList(),this.getTaskListByPage(),Object(u["W"])().then((function(t){var n=t.data;n.sort.map((function(t){e.templateCodeList[t.code]=n[t.code]}))}))},filterTags:b["d"]((function(e){var t=e.vm,n=e.value;t.getLabelList(n)}),400),getLabelList:function(e){var t=this;Object(u["I"])(e).then((function(e){var n=e.data;n&&(t.tagList=n,t.allTagList=[].concat(H(n.current),H(n.others)),t.publishTagList=t.allTagList.filter((function(e,n){return 1===e.publish&&e.publishers.includes(t.userInfo.userId)}))),t.getMyLabel()}))},getMyLabel:function(){var e=this;Object(u["bb"])().then((function(t){var n=t.data;n?(e.collectList=n,e.allTagList.forEach((function(t){t.collectVal=0;var n=e.collectList.labels.findIndex((function(e){return e.name===t.name}));n>-1&&(t.collectVal=1)}))):e.collectList={}}))},isShowTooltip:function(e){var t=e.target.clientWidth,n=e.target.scrollWidth;this.isTipDisabled=!(n>t)},addTag:function(){this.$refs.dialogTag.showWin()},clickTag:function(e){this.params.labelId===e?this.$set(this.params,"labelId",""):this.$set(this.params,"labelId",e),this.labelId=this.params.labelId,this.params.pageNum=1,this.getTaskListByPage()},onContextmenu:function(e,t,n){var r,a=this,i=[{label:"编辑",onClick:function(){a.$refs.dialogTag.showWin(t.id,n)},disabled:!(t.isMy||t.publish)},{label:"删除",onClick:function(){a.$confirm("确定删除此标签?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["m"])(t.id).then((function(e){a.$message({type:"success",message:"删除成功!"}),a.getLabelList(),t.id===a.params.labelId&&(a.labelId="",a.params.labelId="",a.search())}))})).catch((function(){}))},disabled:!t.isMy},{label:"添加收藏",onClick:function(){Object(u["j"])({labelId:t.id}).then((function(e){a.$message({type:"success",message:"收藏成功!"}),a.getLabelList()}))}},{label:"取消收藏",onClick:function(){Object(u["f"])({labelId:t.id}).then((function(e){a.$message({type:"success",message:"取消收藏成功!"}),a.getLabelList()}))}}];1===n?r=[i[0],i[1],i[2]]:2===n?r=[i[2]]:3===n?r=[i[0],i[1],i[3]]:4===n&&(r=[i[0]]),this.$contextmenu({items:r,event:e,zIndex:2100,minWidth:50}),e.preventDefault()},onContextmenuName:function(e,t){var n=this,r=[{label:"复制",onClick:function(){n.copyHandler(t.name)}},{label:"在新标签页打开链接",onClick:function(){if(t.isStreamingTemplateCode){var e=n.$router.resolve({path:"/task/info",query:{id:t.id}}),r=e.href;window.open(r,"_blank")}else{var a=n.$router.resolve({path:"/task/detail",query:{id:t.id,name:t.name}}),i=a.href;window.open(i,"_blank")}}}];this.$contextmenu({items:r,event:e,zIndex:2100,minWidth:50}),e.preventDefault()},collectTag:function(e){var t=this;e.collectVal?Object(u["f"])({labelId:e.id}).then((function(e){t.$message({type:"success",message:"取消收藏成功!"}),t.getLabelList()})):Object(u["j"])({labelId:e.id}).then((function(e){t.$message({type:"success",message:"收藏成功!"}),t.getLabelList()}))},indexMethod:function(e){return(this.params.pageNum-1)*this.params.pageSize+e+1},getTaskListByPage:function(){var e=this;this.loading=!0;var t=K({},this.params);Object.keys(t).forEach((function(e){""===t[e]&&delete t[e]})),Object(u["T"])(t).then((function(t){var n=t.data;e.loading=!1,e.total=n.result.total,e.statisticNum.failed=n.FAILED,e.statisticNum.online=n.ONLINE,e.statisticNum.success=n.SUCCESS,e.statisticNum.canceled=n.CANCELED,e.statisticNum.running=n.RUNNING,e.statisticNum.unexecuted=n.UNEXECUTED,e.statisticNum.total=n.TOTAL,e.tableData=n.result.list;var r=e.tableData?e.tableData.map((function(e){return e.id})):[];Object(u["R"])({ids:r.join(",")}).then((function(t){var n=t.data,r=function(t){var r=e.tableData.find((function(e){return e.id===Number(t)}));r&&e.$set(r,"taskInstances",n[t])};for(var a in n)r(a)}))})),sessionStorage.setItem("taskParams",JSON.stringify(t))},formatter:function(e,t,n,r){return""===n||null===n?"-":n},statusSort:function(e,t){if(e.online>t.online)return-1},formatGuids:function(e){var t=/[,，]/g;e=this.formatDataView(e);var n=e?e.replace(t,",<br>"):"-";return n},remoteMethod:function(e){var t=this;""!==e?(this.ownerLoading=!0,Object(u["Y"])(e).then((function(e){t.ownerLoading=!1;var n=e.data;t.ownerList=n}))):this.ownerList=[]},querySearch:function(e,t){var n=this;Object(u["db"])(e).then((function(e){var r=e.data;n.keyWordResults=r||[],t(n.keyWordResults)}))},switchFullscreen:function(){this.fullscreen=!this.fullscreen},search:function(e){this.params.pageNum=1,this.getTaskListByPage()},handleCurrentChange:function(e){this.params.pageNum=e,this.getTaskListByPage()},handleSizeChange:function(e){this.params.pageSize=e,this.params.pageNum=1,this.getTaskListByPage(),sessionStorage.setItem("pageSize",this.params.pageSize)},input:function(e){this.$forceUpdate()},create:function(){this.$router.push({name:"TaskStep1",query:{folderId:this.selectFolderId}})},changeStatusCode:function(e){e===this.params.statusCode?this.params.statusCode="":this.params.statusCode=e,this.search()},changeHeight:function(){this.isShowAll=!this.isShowAll},copyTask:function(e){var t=b["n"][e.templateCode];this.$router.push({path:"/task/".concat(t),query:{copyId:e.id}})},gotoDetail:function(e){e.isStreamingTemplateCode?this.$router.push({path:"/task/info",query:{id:e.id}}):this.$router.push({path:"/task/detail",query:{id:e.id,name:e.name}})},gotoFlow:function(e){this.$router.push({path:"/workflow/add",query:{id:e.workflowId}})},edit:function(e){var t=b["n"][e.templateCode];location.href="/#/task/".concat(t,"?id=").concat(e.id)},addNum:function(e){this.$refs.dialog.showWin(e)},getVersion:function(e){this.$refs.versionList.showWin(e)},goOnLine:function(e){var t=this;this.$confirm("确定发版?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(A["r"])({id:e.id}).then((function(e){t.$message({type:"success",message:"操作成功!"}),t.getTaskListByPage()}))})).catch((function(){}))},goLine:function(e){var t=this;1===e.online?(this.dialogVisible=!0,this.ruleForm.id=e.id,this.ifnotifyFrom="offline",this._row=e):this.$confirm("确定上线?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,Object(A["r"])({id:e.id}).then((function(n){t.$message({type:"success",message:"操作成功!"}),Object(u["Q"])({id:e.id}).then((function(t){e.online=t.data.online,e.updateTime=t.data.updateTime}))})).finally((function(){t.loading=!1}))})).catch((function(){}))},save:function(e){var t,n=this;this.btnDisabled=!0,"offline"===e?t=Object(u["g"])(this.ruleForm):"delete"===e&&(t=Object(u["n"])({id:this.ruleForm.id,ifNotify:this.ruleForm.ifnotify})),t.then((function(t){n.$message({type:"success",message:"操作成功!"}),n.dialogVisible=!1,"offline"===e?Object(u["Q"])({id:n._row.id}).then((function(e){n._row.online=e.data.online,n._row.updateTime=e.data.updateTime})):"delete"===e&&n.getTaskListByPage()})).finally((function(){n.btnDisabled=!1}))},resetForm:function(){this.ruleForm.id="",this.ruleForm.ifnotify=!1},deleteData:function(e){this.dialogVisible=!0,this.ruleForm.id=e,this.ifnotifyFrom="delete"},handleOpen:function(){this.isOpen=!this.isOpen,sessionStorage.setItem("isOpen",this.isOpen)},formatColor:function(e){var t="";return"FAILED"===e?t="failed":["CANCELED","FINISHED","SUSPENDED"].includes(e)?t="success":["INITIALIZING","RUNNING"].includes(e)?t="running":["FAILING","CANCELLING","RESTARTING","RECONCILING"].includes(e)&&(t="up_for_retry"),t},filterCreateBy:function(){var e=this;this.$nextTick((function(){var t=e.$refs.cascader.suggestions.reduce((function(e,t){return e.some((function(e){return e.text===t.text}))?e:[].concat(H(e),[t])}),[]);e.$refs.cascader.suggestions=t}))},changeCols:function(e,t){var n=this;t?this.showTaskCols.push({name:e,width:0}):this.showTaskCols=this.showTaskCols.filter((function(t){return t.name!==e})),this.$nextTick((function(){n.$refs.tableList.doLayout()})),localStorage.setItem("taskTableCols",JSON.stringify(this.showTaskCols))},dragHeader:function(e,t,n){var r=this.showTaskCols.find((function(e){return e.name===n.property}));r.width=e,localStorage.setItem("taskTableCols",JSON.stringify(this.showTaskCols))},customRunTask:function(e){var t=this;this.$confirm("确定执行任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["k"])({taskId:e.id}).then((function(n){t.$message({type:"success",message:"操作成功!"}),Object(u["Q"])({id:e.id}).then((function(t){e.releaseTime=t.data.releaseTime,e.statusCode=t.data.statusCode})),Object(u["R"])({ids:e.id}).then((function(n){var r=n.data;for(var a in r)t.$set(e,"taskInstances",r[a])}))}))}))}}},ee=X,te=(n("5758"),Object(p["a"])(ee,i,s,!1,null,"1f4c9062",null)),ne=te.exports;function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t=oe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){var t=le(e,"string");return"symbol"===re(t)?t:String(t)}function le(e,t){if("object"!==re(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var ce={components:{List:ne},data:function(){var e,t;return{tab:null!=(e=this.$route.query)&&e.tab?null==(t=this.$route.query)?void 0:t.tab:"1"}},computed:ie({},Object(P["c"])(["isAdmin"])),watch:{tab:function(){this.$router.push(this.$route.path+"?tab="+this.tab)}}},ue=ce,de=Object(p["a"])(ue,r,a,!1,null,null,null);t["default"]=de.exports},"55f6":function(e,t,n){},5758:function(e,t,n){"use strict";n("55f6")},"5c3d":function(e,t,n){},"6d5e":function(e,t,n){"use strict";n.d(t,"n",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"t",(function(){return s})),n.d(t,"o",(function(){return o})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"r",(function(){return p})),n.d(t,"s",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"f",(function(){return v})),n.d(t,"q",(function(){return b})),n.d(t,"g",(function(){return k})),n.d(t,"k",(function(){return y})),n.d(t,"j",(function(){return w})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return C}));var r=n("7258");function a(e){return r["b"].get("/ds_task/taskinstance/page",{params:e})}function i(e){return r["b"].post("/ds_task/taskinstance/clear",null,{params:e})}function s(e){return r["b"].patch("/ds_task/taskinstance/stop",null,{params:e})}function o(e){return r["b"].get("/ds_task/tasksnapshot/page",{params:e})}function l(e){return r["b"].get("/ds_task/task/metricsui",{params:e})}function c(e){return r["b"].get("/ds_task/task/logsui",{params:e})}function u(e){return r["b"].get("/ds_task/task/serviceui",{params:e})}function d(e){return r["b"].get("/ds_task/taskversion/list",{params:e})}function f(e){return r["b"].get("/ds_task/tasksnapshot/list",{params:e})}function p(e){return r["b"].patch("/ds_task/task/start",null,{params:e,timeout:3e5})}function h(e){return r["b"].patch("/ds_task/task/stop",null,{params:e})}function m(e){return r["b"].patch("/ds_task/task/cancel",null,{params:e})}function g(e){return r["b"].post("/ds_task/tasksnapshot/trigger",e)}function v(e){return r["b"].get("/ds_task/taskinstance/diagnose",{params:e})}function b(e){return r["b"].post("/ds_task/dashboard/permission",e)}function k(e){return r["b"].get("/ds_task/taskinstance/exeSql/get",{params:e})}function y(e){return r["b"].post("/pipeline/taskinstance/record",e)}function w(e){return r["b"].get("/ds_task/taskinstance/offline_pages",{params:e})}function _(e){return r["b"].post("/ds_task/taskinstance/batch_clear",e)}function C(e){return r["b"].post("/ds_task/taskinstance/batch_stop",e)}},"7ea2":function(e,t,n){"use strict";n.d(t,"m",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"t",(function(){return o})),n.d(t,"l",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"o",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"q",(function(){return f})),n.d(t,"r",(function(){return p})),n.d(t,"s",(function(){return h})),n.d(t,"n",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"f",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return y})),n.d(t,"i",(function(){return w})),n.d(t,"k",(function(){return _})),n.d(t,"j",(function(){return C})),n.d(t,"h",(function(){return T}));var r=n("7258"),a="/ds_task/flinkcluster";function i(e){return r["b"].get("".concat(a,"/page?"),{params:e})}function s(e){return r["b"].post("".concat(a,"/add"),e)}function o(e){return r["b"].put("".concat(a,"/update"),e)}function l(e){return r["b"].get("".concat(a,"/get?id=").concat(e))}function c(e){return r["b"].delete("".concat(a,"/delete"),{params:{id:e}})}function u(e){return r["b"].post("/cluster-service/cloud/resource/add",e,{timeout:6e5})}function d(e){return r["b"].delete("/cluster-service/cloud/resource/delete/".concat(e))}function f(e){return r["b"].get("/cluster-service/cloud/resource/getOne",{params:e})}function p(e){return r["b"].get("/cluster-service/cloud/resource/search",{params:e})}function h(e){return r["b"].post("/cluster-service/cloud/resource/update",e,{timeout:6e5})}function m(e){return r["b"].get("/cluster-service/cloud/resource/getRegion",{params:e})}function g(e){return r["b"].post("/cluster-service/cloud/data/add",e,{timeout:6e5})}function v(e){return r["b"].post("/cluster-service/cloud/data/update",e,{timeout:6e5})}function b(e){return r["b"].delete("/cluster-service/cloud/data/delete",{params:e})}function k(e){return r["b"].get("/cluster-service/cloud/data/getOne",{params:e})}function y(e){return r["b"].get("/cluster-service/cloud/data/search",{params:e})}function w(e){return r["b"].get("/cluster-service/cluster/service/roles",{params:e})}function _(e){return r["b"].get("/cluster-service/cluster/vpcs",{params:e})}function C(e){return r["b"].get("/cluster-service/cluster/subnets",{params:e})}function T(e){return r["b"].get("/cluster-service/cluster/security/groups",{params:e})}},"9aba":function(e,t,n){"use strict";n("5c3d")},b199:function(e,t,n){"use strict";n.d(t,"y",(function(){return i})),n.d(t,"W",(function(){return s})),n.d(t,"E",(function(){return o})),n.d(t,"p",(function(){return l})),n.d(t,"ab",(function(){return c})),n.d(t,"s",(function(){return u})),n.d(t,"r",(function(){return d})),n.d(t,"t",(function(){return f})),n.d(t,"Q",(function(){return p})),n.d(t,"T",(function(){return h})),n.d(t,"A",(function(){return m})),n.d(t,"O",(function(){return g})),n.d(t,"B",(function(){return v})),n.d(t,"q",(function(){return b})),n.d(t,"e",(function(){return k})),n.d(t,"g",(function(){return y})),n.d(t,"d",(function(){return w})),n.d(t,"ib",(function(){return _})),n.d(t,"n",(function(){return C})),n.d(t,"Y",(function(){return T})),n.d(t,"I",(function(){return L})),n.d(t,"H",(function(){return S})),n.d(t,"c",(function(){return x})),n.d(t,"hb",(function(){return F})),n.d(t,"m",(function(){return I})),n.d(t,"j",(function(){return N})),n.d(t,"f",(function(){return E})),n.d(t,"bb",(function(){return O})),n.d(t,"J",(function(){return D})),n.d(t,"F",(function(){return j})),n.d(t,"h",(function(){return $})),n.d(t,"db",(function(){return A})),n.d(t,"z",(function(){return P})),n.d(t,"R",(function(){return G})),n.d(t,"u",(function(){return H})),n.d(t,"D",(function(){return R})),n.d(t,"P",(function(){return M})),n.d(t,"w",(function(){return V})),n.d(t,"Z",(function(){return B})),n.d(t,"C",(function(){return z})),n.d(t,"eb",(function(){return q})),n.d(t,"a",(function(){return W})),n.d(t,"fb",(function(){return U})),n.d(t,"cb",(function(){return J})),n.d(t,"G",(function(){return K})),n.d(t,"U",(function(){return Q})),n.d(t,"i",(function(){return Z})),n.d(t,"k",(function(){return Y})),n.d(t,"K",(function(){return X})),n.d(t,"L",(function(){return ee})),n.d(t,"N",(function(){return te})),n.d(t,"M",(function(){return ne})),n.d(t,"b",(function(){return re})),n.d(t,"l",(function(){return ae})),n.d(t,"o",(function(){return ie})),n.d(t,"S",(function(){return se})),n.d(t,"gb",(function(){return oe})),n.d(t,"X",(function(){return le})),n.d(t,"v",(function(){return ce})),n.d(t,"V",(function(){return ue}));var r=n("7258"),a="/ds_task/task";function i(e){return r["b"].post("/ds_task/metadata/search",e,{timeout:12e4})}function s(){return r["b"].get("/ds_task/sysdict/getTemplateList")}function o(e){return r["b"].get("/ds_task/dict/list",{params:e})}function l(e){return r["b"].get("/ds_task/artifact/list",{params:e})}function c(e){return r["b"].get("/ds_task/artifactversion/list",{params:e})}function u(e){return r["b"].get("/ds_task/flinkcluster/list",{params:e})}function d(e){return r["b"].get("/ds_task/flinkcluster/auto",{params:e})}function f(e){return r["b"].get("/ds_task/flinkcluster/noauto",{params:e})}function p(e){return r["b"].get("".concat(a,"/get"),{params:e})}function h(e){return r["b"].get("".concat(a,"/page"),{params:e,timeout:6e4})}function m(e){return r["b"].post("/ds_task/metadata/getddl",e)}function g(e){return r["b"].get("".concat(a,"/getInsertSql"),{params:e,timeout:6e5})}function v(e){return r["b"].post("/ds_task/metadata/getdispalyddl",e)}function b(e){return r["b"].get("".concat(a,"/getChildDependencies"),{params:{id:e}})}function k(e){return r["b"].get("".concat(a,"/backfill"),{params:e})}function y(e){return r["b"].put("".concat(a,"/onlineAndOffline"),null,{params:e})}function w(e){return r["b"].post("".concat(a,"/add"),e)}function _(e){return r["b"].put("".concat(a,"/update"),e)}function C(e){return r["b"].delete("".concat(a,"/new/delete"),{params:e})}function T(e){return r["b"].get("/ds_task/user/list",{params:{name:e}})}function L(e){return r["b"].get("/ds_task/label/list",{params:{name:e}})}function S(e){return r["b"].get("/ds_task/label/get",{params:{id:e}})}function x(e){return r["b"].post("/ds_task/label/add",e)}function F(e){return r["b"].put("/ds_task/label/update",e)}function I(e){return r["b"].delete("/ds_task/label/delete",{params:{id:e}})}function N(e){return r["b"].patch("/ds_task/collect/add",null,{params:e})}function E(e){return r["b"].get("/ds_task/collect/cancel",{params:e})}function O(e){return r["b"].get("/ds_task/collect/my",{params:e})}function D(e){return r["b"].get("/ds_task/task/listforlabel",{params:{name:e}})}function j(e){return r["b"].get("/ds_task/task/iam",{params:e})}function $(e){return r["b"].post("/ds_task/task/check",e,{timeout:18e4})}function A(e){return r["b"].get("/ds_task/task/name/search",{params:{name:e}})}function P(e){return r["b"].get("/ds_task/task/backfillDateDetail",{params:e})}function G(e){return r["b"].get("/ds_task/task/last7",{params:e})}function H(e){return r["b"].get("/ds_task/user/getEffectiveCostList",{params:{name:e}})}function R(e){return r["b"].get("/ds_task/task/getGitSqlFile",{params:e})}function M(e){return r["b"].post("/ds_task/task/sqlTbls",e,{headers:{"Content-Type":"multipart/form-data"}})}function V(e){return r["b"].post("/ds_task/task/getCrontab",e)}function B(e){return r["b"].get("/ds_task/taskversion/pages",{params:e})}function z(){return r["b"].get("/ds_task/auditlog/type?module=task")}function q(e){return r["b"].get("/ds_task/taskversion/verionSwitch",{params:e})}function W(e){return r["b"].post("/ds_task/task/addAndStart",e)}function U(e){return r["b"].post("/ds_task/task/updateAndStart",e)}function J(e){return r["b"].post("/ds_task/task/date/preview",e)}function K(e){return r["b"].post("/ds_task/task/mergeSmallFiles/jars",e)}function Q(e){return r["b"].post("/ds_task/task/getTasks",e)}function Z(e){return r["b"].post("/ds_task/task/checkPath",e,{headers:{"Content-Type":"multipart/form-data"}})}function Y(e){return r["b"].post("/ds_task/task/fastBackfill?taskId="+e.taskId,e)}function X(e){return r["b"].get("/ds_task/task/renderContent",{params:e})}function ee(e){return r["b"].post("/ds_task/metadata/preview",e)}function te(e){return r["b"].get("/ds_task/actor/sources/page",{params:e})}function ne(e){return r["b"].get("/ds_task/taskfolder/listFolder",{params:e})}function re(e){return r["b"].post("/ds_task/taskfolder/saveFolder",e)}function ae(e){return r["b"].get("/ds_task/taskfolder/deleteFolder",{params:e})}function ie(e){return r["b"].post("/ds_task/taskfolder/editFolder",e)}function se(e){return r["b"].get("/ds_task/taskfolder/listTask",{params:e})}function oe(e){return r["b"].post("/ds_task/taskfolder/updateTask",e)}function le(e){return r["b"].get("/ds_task/wechatAlert/listById?id=".concat(e))}function ce(e){return r["b"].post("/pipeline/cron/get",e)}function ue(e){return r["b"].get("/ds_task/task/templateRendering",{params:e})}},b893:function(e,t,n){"use strict";n.d(t,"n",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"m",(function(){return p})),n.d(t,"o",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"i",(function(){return g})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return y})),n.d(t,"h",(function(){return w})),n.d(t,"e",(function(){return _})),n.d(t,"d",(function(){return C})),n.d(t,"b",(function(){return T})),n.d(t,"g",(function(){return L})),n.d(t,"f",(function(){return S}));var r=n("7ea2"),a=n("4360");function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof k?t:k,s=Object.create(i.prototype),o=new O(r||[]);return a(s,"_invoke",{value:F(e,n,o)}),s}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",m="suspendedYield",g="executing",v="completed",b={};function k(){}function y(){}function w(){}var _={};d(_,l,(function(){return this}));var C=Object.getPrototypeOf,T=C&&C(C(D([])));T&&T!==n&&r.call(T,l)&&(_=T);var L=w.prototype=k.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,i,o,l){var c=p(e[a],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,l)}))}l(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function F(t,n,r){var a=h;return function(i,s){if(a===g)throw new Error("Generator is already running");if(a===v){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var l=I(o,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=g;var c=p(t,n,r);if("normal"===c.type){if(a=r.done?v:m,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=v,r.method="throw",r.arg=c.arg)}}}function I(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=p(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return y.prototype=w,a(L,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:y,configurable:!0}),y.displayName=d(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},S(x.prototype),d(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var s=new x(f(e,n,r,a),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},S(L),d(L,u,"Generator"),d(L,l,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return o.type="throw",o.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e,t,n,r,a,i,s){try{var o=e[i](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,l,"next",e)}function l(e){o(i,r,a,s,l,"throw",e)}s(void 0)}))}}var c={StreamingSQL:"step2FlinkSQL",StreamingJAR:"step2FlinkJar",Metis2Hive:"step2Metis",MysqlCDC2Hive:"step2CDC",Mysql2Lakehouse:"step2Hive",Mysql2Hive:"step2Hive",File2Lakehouse:"step2File",Mysql2Hudi:"step2Hudi",Hive2Hive:"step2HiveSQL",DataMigration:"step2HCCloud",SPARKJAR:"step2SparkJar",Hive2Sharestore:"step2ShareStore",Hive2Clickhouse:"step2ClickHouse",Hive2Mysql:"step2MySql",Hive2Doris:"step2Doris",PythonShell:"step2Shell",Db2Hive:"step2DB",Hive2Redis:"step2Redis",Hive2Redshift:"step2Redshift",MergeSmallFiles:"step2FileMerge",Hive2File:"step2Hive2File",TfJob:"step2TrainingModel"},u=a["a"].getters["isCloud"],d=[{title:"数据接入 Data Ingestion",list:[{label:"DB -> Lakehouse",templateCode:"step2Hive",path:"step2Hive",content:"该模板适用于拉取各类关系型DataBase数据到Lakehouse湖仓，提供离线全量和实时增量同步方案。"},{label:"File -> Lakehouse",templateCode:"File2Lakehouse",path:"step2File",content:"该模板适用于将对象存储(如AWS S3、OBS、KS3等)或分布式文件存储(如HDFS等)中存储的各种格式(如csv、json、paruet、orc等)的文件数据同步到Lakehouse湖仓中。"},{label:"Kafka -> Lakehouse",templateCode:"Metis2Hive",path:"step2Metis",content:"Kafka2Lakehouse统一模板，对接Kafka/Metis，透传至Lakehouse表。",isGray:!0}]},{title:"湖仓处理 Data Transformation",list:[{label:"Lakehouse -> Lakehouse",templateCode:"Hive2Hive",path:"step2HiveSQL",content:"基于Hive SQL/Spark SQL数据处理，不同的执行引擎语法略有差异，请参考官方语法。"}]},{title:"数据导出 Data Digestion",list:[{label:"Lakehouse -> Doris",templateCode:"Hive2Doris",path:"step2Doris",content:"用于数据的导出处理，可将数据从Lakehouse导出到Doris中。"},{label:"Lakehouse -> File",templateCode:"Hive2File",path:"step2Hive2File",content:"用于Lakehouse数据导出到文件的任务，可以支持以邮件的方式将文件发送给用户。"},{label:"Lakehouse -> MySQL",templateCode:"Hive2Mysql",path:"step2MySql",content:"用于数据的导出处理，可将数据从Lakehouse导出到MySQL中。"},{label:"Lakehouse -> ClickHouse",content:"用于数据的导出处理，可将数据从Lakehouse导出到ClickHouse中。",isGray:!0},{label:"Lakehouse -> Redshift",content:"适用于将S3文件中结构化数据映射到Aws Redshift表中的业务场景。",isGray:!0}]}],f=[{title:"数据接入 Data Ingestion",list:[{label:"Spark Jar",templateCode:"SPARKJAR",path:"step2SparkJar",content:"用于湖仓数据的基于Jar包的数据处理，一般用于更加复杂的数据处理逻辑。"},{label:"Shell/Python脚本",templateCode:"PythonShell",path:"step2Shell",content:"用于python和shell脚本任务的执行。"}]},{title:"湖仓处理 Lakehouse ETL",list:[{label:"Flink Jar",templateCode:"StreamingJAR",path:"step2FlinkJar",content:"通过上传Flink Jar包的方式，进行流式数据处理。",isGray:!0},{label:"Flink SQL",templateCode:"StreamingSQL",path:"step2FlinkSQL",content:"流式任务的统一模板，基于SQL查询的方式（Flink SQL）进行数据处理。Metis日志处理，统一归集到此处通过SQL的方式进行处理。",isGray:!0}]}],p={CREATED:"#8896B3",INITIALIZING:"rgba(146, 112, 202, 0.8)",SCHEDULED:"rgba(146, 112, 202, 0.8)",RUNNING:"#409EFF",RESTARTING:"#C6E2FF",RECONCILING:"#41F3D8",SUSPENDED:"#67C23A",CANCELED:"#E6A23C",CANCELLING:"#E6A23C",FAILED:"#FF5656",SUCCESS:"#67C23A",FINISHED:"#67C23A",FAILLING:"#FCE2E2"},h={CREATED:"#8896B3",INITIALIZING:"rgba(146, 112, 202, 0.8)",SCHEDULED:"rgba(146, 112, 202, 0.8)",RUNNING:"#409EFF",CANCELED:"#E6A23C",FAILED:"#FF5656",SUCCESS:"#67C23A",SUSPENDED:"#67C23A",FINISHED:"#67C23A",OFFLINE:"#dcdfe6"},m={CREATED:"已创建",INITIALIZING:"已上线",SCHEDULED:"已上线",RUNNING:"执行中",CANCELED:"已取消",FAILED:"失败",SUCCESS:"成功",SUSPENDED:"成功",FINISHED:"成功",OFFLINE:"已下线"},g={waiting:"检查上游",termination:"终止检查上游",waiting_queue:"排队中",running:"运行中",up_for_retry:"等待重试",failed:"失败",success:"成功"},v={INITIALIZING:"初始化中",CREATED:"已创建",RUNNING:"运行中",FAILING:"失败中",CANCELLING:"取消中",RESTARTING:"重启中",RECONCILING:"调度中",FAILED:"已失败",CANCELED:"已下线",FINISHED:"已完成",SUSPENDED:"已停止"};function b(){return k.apply(this,arguments)}function k(){return k=l(i().mark((function e(){var t,n;return i().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["r"])();case 2:return t=e.sent,n=t.data,e.abrupt("return",n.list.map((function(e){return{label:e.description,value:e.regionAlias}})));case 5:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}var y=u?b():new Promise((function(e,t){e([{label:"AWS 美东",value:"ue1"},{label:"AWS 新加坡",value:"sg1"},{label:"华为 新加坡",value:"sg2"}])})),w=[{label:"P0",value:0},{label:"P1",value:1},{label:"P2",value:2},{label:"P3",value:3}],_={GENERAL:"一般",SENIOR:"紧急"};function C(e,t){var n="";return function(r){n&&clearTimeout(n),n=setTimeout((function(){e(r)}),t)}}function T(e){if(null==e)return null;var t=Array.isArray(e)?[]:{};for(var n in e)e.hasOwnProperty(n)&&("object"===s(e[n])?t[n]=T(e[n]):t[n]=e[n]);return t}var L=[{package:"awscli",version:"1.16.263"},{package:"backports.ssl-match-hostname",version:"3.5.0.1"},{package:"boto",version:"2.49.0"},{package:"boto3",version:"1.9.220"},{package:"botocore",version:"1.12.253"},{package:"certifi",version:"2020.12.5"},{package:"chardet",version:"3.0.4"},{package:"colorama",version:"0.4.1"},{package:"docutils",version:"0.15.2"},{package:"futures",version:"3.3.0"},{package:"idna",version:"2.10"},{package:"iniparse",version:"0.4"},{package:"ipaddress",version:"1.0.16"},{package:"jmespath",version:"0.9.5"},{package:"kitchen",version:"1.1.1"},{package:"pip",version:"20.3.3"},{package:"pyasn1",version:"0.4.8"},{package:"pycurl",version:"7.19.0"},{package:"pygobject",version:"3.22.0"},{package:"pygpgme",version:"0.3"},{package:"pyliblzma",version:"0.5.3"},{package:"python-dateutil",version:"2.8.1"},{package:"pyxattr",version:"0.5.1"},{package:"PyYAML",version:"5.1.2"},{package:"requests",version:"2.24.0"},{package:"rsa",version:"3.4.2"},{package:"s3transfer",version:"0.2.1"},{package:"setuptools",version:"0.9.8"},{package:"six",version:"1.15.0"},{package:"urlgrabber",version:"3.10"},{package:"urllib3",version:"1.25.11"},{package:"yum-metadata-parser",version:"1.1.4"}],S={sg2:"swr.ap-southeast-3.myhuaweicloud.com/shareit-bdp/airflow-business:script_task",ue1:"848318613114.dkr.ecr.us-east-1.amazonaws.com/bdp/airflow:script_task",sg1:"848318613114.dkr.ecr.ap-southeast-1.amazonaws.com/bdp/workflow:script_task"}},b943:function(e,t,n){"use strict";n("45c2")},dbeb:function(e,t,n){"use strict";n("3768")},de04:function(e,t,n){},e38b:function(e,t,n){e.exports=n.p+"static/img/status2.1539c716.png"},eeb1:function(e,t,n){"use strict";n("de04")}}]);