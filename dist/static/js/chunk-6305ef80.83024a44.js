(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-6305ef80"],{"04ec":function(e,t,r){"use strict";r("fda9")},"102e":function(e,t,r){},"4b19":function(e,t,r){"use strict";r("102e")},9355:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"role-list box-card-container"},[r("div",{staticClass:"search-condition-wrap"},[r("search-condition",{attrs:{label:"账号类型"}},[r("el-input",{staticClass:"search-box",attrs:{placeholder:"请输入账号类型名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name","string"===typeof t?t.trim():t)},expression:"params.name"}})],1),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.search}},[e._v("查询")]),e._v(" "),r("el-button",{staticClass:"create",attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0,e.operateType="add"}}},[e._v("新建")])],1),e._v(" "),r("div",{staticClass:"table-wrap"},[r("table-page",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"table-data":e.tableData,"column-data":e.columnData,"table-height":"calc(100vh - 230px)",total:e.total,"page-num":e.params.pageNum,"page-size":e.params.pageSize},on:{changePage:e.changePage}},[r("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{staticStyle:{margin:"0 10px"},attrs:{type:"text",size:"mini"},on:{click:function(r){return e.roleDetail(t.row)}}},[e._v("添加/移除产品权限")]),e._v(" "),r("el-button",{staticClass:"global-color-cb",attrs:{type:"text",size:"mini"},on:{click:function(r){return e.deleteData(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:e.showSuccess?"账号类型授权":"edit"===e.operateType?"编辑账号类型":"新建账号类型",visible:e.dialogVisible,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.handleClose}},[r("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.showSuccess,expression:"!showSuccess"}],ref:"roleRef",attrs:{model:e.roleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"账号类型名称",prop:"name"}},[r("el-input",{model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}}),e._v(" "),r("div",[e._v("允许英文字母、数字或'_'。字符数应小于等于64个")])],1),e._v(" "),r("el-form-item",{attrs:{label:"账号类型描述"}},[r("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.roleForm.description,callback:function(t){e.$set(e.roleForm,"description",t)},expression:"roleForm.description"}})],1)],1),e._v(" "),e.showSuccess?r("ul",{staticClass:"seccueeBox"},[r("li",[r("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""}}),e._v(" "),r("span",{staticClass:"successTitle"},[e._v(" 账号类型创建成功")])],1),e._v(" "),r("li",[r("span",{staticClass:"labelEle"},[e._v("已选实体账号:"+e._s(e.tenantName))])]),e._v(" "),r("li",[r("span",{staticClass:"labelEle"},[e._v("账号类型名称："+e._s(e.addUserForm.roleName))])]),e._v(" "),r("li",[e._v("\n        为确保账号类型的正常使用，建议您继续为此账号类型添加权限\n        "),r("el-button",{attrs:{type:"primary"},on:{click:e.addMenu}},[e._v("新增权限")])],1)]):e._e(),e._v(" "),e.showSuccess?e._e():r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"账号类型详情",visible:e.detailVisible,width:"700px"},on:{"update:visible":function(t){e.detailVisible=t},closed:e.detailClose}},[r("div",[r("el-card",{staticClass:"box-card"},[r("el-descriptions",{attrs:{column:2}},[r("el-descriptions-item",{attrs:{label:"账号类型名称"}},[e._v(e._s(e.addUserForm.roleName))]),e._v(" "),r("el-descriptions-item",{attrs:{label:"账号类型ID"}},[e._v(e._s(e.addUserForm.roleId))]),e._v(" "),r("el-descriptions-item",{attrs:{label:"账号类型描述"}},[e._v(e._s(e.addUserForm.description))])],1)],1),e._v(" "),r("el-tabs",{attrs:{type:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{name:"second"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("i",{staticClass:"el-icon-s-tools"}),e._v(" 权限配置")]),e._v(" "),r("MenuAction",{ref:"menuActionRef",attrs:{"all-arr":e.allArr,"action-checked":e.actionChecked,"menu-checked":e.menuChecked}})],1)],1)],1),e._v(" "),r("span",{staticClass:"detail-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.detailVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:"second"===e.activeName,expression:"activeName === 'second'"}],attrs:{type:"primary"},on:{click:e.saveBtn}},[e._v("保 存")])],1)])],1)},i=[],a=r("88c9"),o=r("6041"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"inner-card leftCard"},[r("div",{staticClass:"inner-card-header",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("可见菜单")])]),e._v(" "),r("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.menuLoading,expression:"menuLoading"}],ref:"menuTree",attrs:{"expand-on-click-node":!1,data:e.menus,accordion:"","show-checkbox":"","node-key":"id","default-expand-all":!0,"check-strictly":!1,props:e.props},on:{"node-click":e.menuClick,check:e.checkChange}})],1),e._v(" "),r("el-card",{staticClass:"inner-card"},[r("div",{staticClass:"inner-card-header",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("功能权限")])]),e._v(" "),r("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.menuLoading,expression:"menuLoading"}],ref:"actionTree",attrs:{data:e.actions,"node-key":"id","expand-on-click-node":!1,"check-strictly":!1,"show-checkbox":"","check-on-click-node":!1,props:e.props,"default-expand-all":"","filter-node-method":e.filterAction},on:{check:e.actionChange},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var n=t.data;return r("span",{staticClass:"custom-tree-node"},[r("span",{staticClass:"node-name",class:{"menu-invalid":0===n.status}},[e._v(e._s(n.name))])])}}])})],1)],1)},s=[];function l(e){return h(e)||f(e)||d(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m={name:"MenuAction",props:{menuLoading:{type:Boolean,default:!1},allArr:{type:Array,default:function(){return[]}},menuChecked:{type:Array,default:function(){return[]}},actionChecked:{type:Array,default:function(){return[]}}},data:function(){return{props:{label:"name"},clickLevel:1,menus:[],actions:[]}},watch:{allArr:{deep:!0,handler:function(e){var t=this;this.actions=[],this.menus=[];var r=JSON.parse(JSON.stringify(e));r.forEach((function(e){e.children&&e.children.forEach((function(r){var n;r.children&&2===r.level&&(r.children.forEach((function(t){t.grandId1=e.id,t.grandId2=r.id,t.children&&t.children.forEach((function(t){t.grandId1=e.id,t.grandId2=r.id}))})),(n=t.actions).push.apply(n,l(r.children)),delete r.children)}))})),this.menus=r;var n=this.menus.map((function(e){return e.id}));this.$nextTick((function(){var e=[];t.menuChecked.length>0&&t.menuChecked.forEach((function(t,r){n.includes(t)||e.push(t)})),t.$refs.menuTree.setCheckedKeys(e),t.$refs.actionTree.setCheckedKeys(t.actionChecked)}))},immediate:!0}},methods:{actionChange:function(e,t){var r=this,n=e.id,i=e.parentMenuId,a=t.checkedKeys,o=JSON.parse(JSON.stringify(this.allArr));o.forEach((function(e){if(e.children){var t=e.children.find((function(e){return e.id===i}));if(t){var o=[];if(t.children.forEach((function(e){o.push(e.id)})),a.includes(n)){var c=r.$refs.menuTree.getNode(t.id);r.$refs.menuTree.setChecked(c,!0)}if(o.every((function(e){return!a.includes(e)}))){var s=r.$refs.menuTree.getNode(t.id);r.$refs.menuTree.setChecked(s,!1)}}}}))},checkChange:function(e,t){var r=this,n=JSON.parse(JSON.stringify(this.allArr)),i=[];if(1===e.level){var a=n.find((function(t){return t.id===e.id})).children;a&&a.forEach((function(e){e.children&&e.children.forEach((function(e){i.push(e.id),e.children&&e.children.forEach((function(e){i.push(e.id)}))}))}))}else 2===e.level&&n.forEach((function(t){if(t.children){var r=t.children.find((function(t){return t.id===e.id}));r&&r.children&&r.children.forEach((function(e){i.push(e.id),e.children&&e.children.forEach((function(e){i.push(e.id)}))}))}}));i.forEach((function(n){var i=r.$refs.actionTree.getNode(n);r.$refs.menuTree.setChecked(i,t.checkedKeys.includes(e.id))}))},filterAction:function(e,t,r){return 1===this.clickLevel?t.grandId1===e:t.grandId2===e},menuClick:function(e){this.clickLevel=1===e.level?1:2,this.$refs.actionTree.filter(e.id)}}},v=m,y=(r("4b19"),r("2877")),g=Object(y["a"])(v,c,s,!1,null,"9b8d42ba",null),b=g.exports,w=r("7e3c");function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t=S(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=O(e,"string");return"symbol"===k(t)?t:String(t)}function O(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function E(e){return T(e)||j(e)||L(e)||N()}function N(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(e,t){if(e){if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function j(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function T(e){if(Array.isArray(e))return F(e)}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */I=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,o=Object.create(a.prototype),c=new T(n||[]);return i(o,"_invoke",{value:E(e,r,c)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};l(w,o,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(F([])));x&&x!==r&&n.call(x,o)&&(w=x);var C=b.prototype=y.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(i,a,o,c){var s=d(e[i],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==k(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,o,c)}),(function(e){r("throw",e,o,c)})):t.resolve(u).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}})}function E(t,r,n){var i=f;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(n.method=a,n.arg=o;;){var c=n.delegate;if(c){var s=N(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=d(t,r,n);if("normal"===l.type){if(i=n.done?m:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=m,n.method="throw",n.arg=l.arg)}}}function N(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,N(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function F(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(k(t)+" is not iterable")}return g.prototype=b,i(C,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new O(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=F,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return c.type="throw",c.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;j(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:F(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function A(e,t,r,n,i,a,o){try{var c=e[a](o),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(n,i)}function $(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){A(a,n,i,o,c,"next",e)}function c(e){A(a,n,i,o,c,"throw",e)}o(void 0)}))}}var P=function(){return{roleId:"",roleName:"",userIds:[{id:""}],description:""}},U={components:{SearchCondition:a["a"],TablePage:o["a"],MenuAction:b},data:function(){var e=this;return{props:{multiple:!0,value:"id",label:"name"},tenantId:JSON.parse(sessionStorage.getItem("userInfo")).tenantId,tenantName:JSON.parse(sessionStorage.getItem("userInfo")).tenantName,showSuccess:!1,allArr:[],actionChecked:[],menuChecked:[],operateType:"",menuLoading:!1,actionLoading:!1,addGroupVisible:!1,addUserForm:P(),activeName:"second",detailVisible:!1,roleForm:{name:"",description:""},rules:{name:[{required:!0,message:"请输入账号类型名称",trigger:"blur"},{max:64,message:"字符数应小于等于64个",trigger:"blur"},{pattern:/^\w+$/,message:"格式错误",trigger:"blur"}]},dialogVisible:!1,loading:!1,tableData:[],columnData:[{prop:"name",label:"账号类型",width:"150",tooltip:!0},{prop:"description",label:"账号类型描述",width:"180",tooltip:!0},{prop:"createTime",label:"创建时间",width:"180",format:function(t){return e.$utils.parseTime(t.createTime)}},{prop:"updateBy",label:"创建人",width:"100"}],total:0,params:{name:"",pageNum:1,pageSize:10,tenantId:JSON.parse(sessionStorage.getItem("userInfo")).tenantId}}},created:function(){this.getList()},methods:{roleGetFn:function(){var e=$(I().mark((function e(t){return I().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(w["u"])({id:t});case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),roleDetail:function(){var e=$(I().mark((function e(t){var r,n,i,a,o,c,s,l;return I().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,Object(w["u"])({id:r});case 3:return e.next=5,e.sent.data;case 5:return n=e.sent,i=n.name,a=n.description,o=n.menus,c=void 0===o?[]:o,s=n.actionChecked,l=n.menuChecked,this.addUserForm.roleId=r,this.addUserForm.roleName=i,this.addUserForm.description=a,this.allArr=c,this.actionChecked=s,this.menuChecked=l,this.detailVisible=!0,e.abrupt("return");case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addMenu:function(){this.dialogVisible=!1,this.detailVisible=!0,this.roleDetail({id:this.addUserForm.roleId})},saveBtn:function(){var e=this,t=this.$refs.menuActionRef.$refs.menuTree.getCheckedKeys();0===t.length?this.$confirm("未配置任何权限，确定保存吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.updateMenusFn()})).catch((function(){})):this.updateMenusFn()},updateMenusFn:function(){var e=$(I().mark((function e(){var t,r,n,i,a;return I().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.menuActionRef.$refs.actionTree.getCheckedKeys(),r=this.$refs.menuActionRef.$refs.menuTree.getCheckedKeys(),n=this.$refs.menuActionRef.$refs.menuTree.getHalfCheckedKeys(),i=[].concat(E(t),E(r),E(n)),a={id:this.addUserForm.roleId,menuIds:i.join(",")},e.next=7,Object(w["y"])(a);case 7:this.$message.success("保存成功"),this.detailVisible=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submit:function(){var e=this;this.$refs["roleRef"].validate(function(){var t=$(I().mark((function t(r){var n,i,a;return I().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=11;break}return n="add"===e.operateType?w["s"]:w["x"],i="add"===e.operateType?x(x({},e.roleForm),{},{id:e.tenantId}):x(x({},e.roleForm),{},{id:e.addUserForm.roleId}),t.next=5,n(i);case 5:return t.next=7,t.sent.data;case 7:a=t.sent,"add"===e.operateType?(e.showSuccess=!0,e.addUserForm.roleId=a.id,e.addUserForm.roleName=e.roleForm.name):(e.$message.success("编辑成功"),e.dialogVisible=!1,e.getList()),t.next=12;break;case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},edit:function(e){var t=e.name,r=e.description,n=e.id;this.operateType="edit",this.addUserForm.roleId=n,this.roleForm.name=t,this.roleForm.description=r,this.dialogVisible=!0},handleClose:function(){this.$refs.roleRef.resetFields(),this.roleForm={name:"",description:""},this.showSuccess&&this.getList(),this.showSuccess=!1},detailClose:function(){this.addUserForm=P(),this.activeName="second"},changePage:function(e){this.params.pageSize=e.pageSize,this.params.pageNum=e.pageNum,this.getList()},getList:function(){var e=this;this.loading=!0;var t=x({},this.params);Object.keys(t).forEach((function(e){""===t[e]&&delete t[e]})),Object(w["w"])(t).then((function(t){e.loading=!1;var r=t.data;e.total=r.total,e.tableData=r.list}))},reset:function(){this.params={componentCode:"",createBy:"",keyword:"",pageNum:1,pageSize:10},this.getList()},search:function(){this.params.pageNum=1,this.getList()},deleteData:function(e){var t=this,r=e.name,n=e.id;this.$confirm("确定删除".concat(r,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(w["t"])({id:n}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()}))})).catch((function(){}))}}},V=U,D=(r("04ec"),Object(y["a"])(V,n,i,!1,null,"66ecfd7f",null));t["default"]=D.exports},fda9:function(e,t,r){}}]);