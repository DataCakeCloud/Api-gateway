(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-2d0b8b2e"],{3094:function(e,t,n){"use strict";var o=n("22b4"),r=n("7fae"),i=n("3a56"),a=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return Object(r["a"])(t,e),t.type="dataZoom.select",t}(i["a"]),s=a,u=n("7dcf"),c=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return Object(r["a"])(t,e),t.type="dataZoom.select",t}(u["a"]),l=c,d=n("1459");function p(e){e.registerComponentModel(s),e.registerComponentView(l),Object(d["a"])(e)}var f=n("6d8b"),h=function(){function e(){}return e}(),g={};function v(e,t){g[e]=t}function m(e){return g[e]}var b=n("6cb7"),y=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return Object(r["a"])(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;f["k"](this.option.feature,(function(e,n){var o=m(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(t)),f["G"](e,o.defaultOption))}))},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(b["a"]),x=y,O=n("e86a"),_=n("2306"),C=n("7d6c"),w=n("4319"),k=n("80f0"),M=n("7919"),T=n("b12f"),A=n("8918"),j=n("76a5"),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["a"])(t,e),t.prototype.render=function(e,t,n,o){var r=this.group;if(r.removeAll(),e.get("show")){var i=+e.get("itemSize"),a="vertical"===e.get("orient"),s=e.get("feature")||{},u=this._features||(this._features={}),c=[];f["k"](s,(function(e,t){c.push(t)})),new k["a"](this._featureNames||[],c).add(l).update(l).remove(f["h"](l,null)).execute(),this._featureNames=c,M["a"](r,e,n),r.add(M["b"](r.getBoundingRect(),e)),a||r.eachChild((function(e){var t=e.__title,o=e.ensureState("emphasis"),a=o.textConfig||(o.textConfig={}),s=e.getTextContent(),u=s&&s.ensureState("emphasis");if(u&&!f["v"](u)&&t){var c=u.style||(u.style={}),l=O["d"](t,j["a"].makeFont(c)),d=e.x+r.x,p=e.y+r.y+i,h=!1;p+l.height>n.getHeight()&&(a.position="top",h=!0);var g=h?-5-l.height:i+10;d+l.width/2>n.getWidth()?(a.position=["100%",g],c.align="right"):d-l.width/2<0&&(a.position=[0,g],c.align="left")}}))}function l(r,i){var a,l=c[r],p=c[i],f=s[l],g=new w["a"](f,e,e.ecModel);if(o&&null!=o.newTitle&&o.featureName===l&&(f.title=o.newTitle),l&&!p){if(I(l))a={onclick:g.option.onclick,featureName:l};else{var v=m(l);if(!v)return;a=new v}u[l]=a}else if(a=u[p],!a)return;a.uid=Object(A["c"])("toolbox-feature"),a.model=g,a.ecModel=t,a.api=n;var b=a instanceof h;l||!p?!g.get("show")||b&&a.unusable?b&&a.remove&&a.remove(t,n):(d(g,a,l),g.setIconStatus=function(e,t){var n=this.option,o=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,o[e]&&("emphasis"===t?C["o"]:C["z"])(o[e])},a instanceof h&&a.render&&a.render(g,t,n,o)):b&&a.dispose&&a.dispose(t,n)}function d(o,s,u){var c,l,d=o.getModel("iconStyle"),p=o.getModel(["emphasis","iconStyle"]),g=s instanceof h&&s.getIcons?s.getIcons():o.get("icon"),v=o.get("title")||{};f["A"](g)?(c={},c[u]=g):c=g,f["A"](v)?(l={},l[u]=v):l=v;var m=o.iconPaths={};f["k"](c,(function(u,c){var h=_["createIcon"](u,{},{x:-i/2,y:-i/2,width:i,height:i});h.setStyle(d.getItemStyle());var g=h.ensureState("emphasis");g.style=p.getItemStyle();var v=new j["a"]({style:{text:l[c],align:p.get("textAlign"),borderRadius:p.get("textBorderRadius"),padding:p.get("textPadding"),fill:null},ignore:!0});h.setTextContent(v),_["setTooltipConfig"]({el:h,componentModel:e,itemName:c,formatterParamsExtra:{title:l[c]}}),h.__title=l[c],h.on("mouseover",(function(){var t=p.getItemStyle(),o=a?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";v.setStyle({fill:p.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:p.get("textBackgroundColor")}),h.setTextConfig({position:p.get("textPosition")||o}),v.ignore=!e.get("showTitle"),n.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==o.get(["iconStatus",c])&&n.leaveEmphasis(this),v.hide()})),("emphasis"===o.get(["iconStatus",c])?C["o"]:C["z"])(h),r.add(h),h.on("click",f["c"](s.onclick,s,t,n,c)),m[c]=h}))}},t.prototype.updateView=function(e,t,n,o){f["k"](this._features,(function(e){e instanceof h&&e.updateView&&e.updateView(e.model,t,n,o)}))},t.prototype.remove=function(e,t){f["k"](this._features,(function(n){n instanceof h&&n.remove&&n.remove(e,t)})),this.group.removeAll()},t.prototype.dispose=function(e,t){f["k"](this._features,(function(n){n instanceof h&&n.dispose&&n.dispose(e,t)}))},t.type="toolbox",t}(T["a"]);function I(e){return 0===e.indexOf("my")}var R=S,L=n("22d1"),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["a"])(t,e),t.prototype.onclick=function(e,t){var n=this.model,o=n.get("name")||e.get("title.0.text")||"echarts",r="svg"===t.getZr().painter.getType(),i=r?"svg":n.get("type",!0)||"png",a=t.getConnectedDataURL({type:i,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=L["a"].browser;if(Object(f["v"])(MouseEvent)&&(s.newEdge||!s.ie&&!s.edge)){var u=document.createElement("a");u.download=o+"."+i,u.target="_blank",u.href=a;var c=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(c)}else if(window.navigator.msSaveOrOpenBlob||r){var l=a.split(","),d=l[0].indexOf("base64")>-1,p=r?decodeURIComponent(l[1]):l[1];d&&(p=window.atob(p));var h=o+"."+i;if(window.navigator.msSaveOrOpenBlob){var g=p.length,v=new Uint8Array(g);while(g--)v[g]=p.charCodeAt(g);var m=new Blob([v]);window.navigator.msSaveOrOpenBlob(m,h)}else{var b=document.createElement("iframe");document.body.appendChild(b);var y=b.contentWindow,x=y.document;x.open("image/svg+xml","replace"),x.write(p),x.close(),y.focus(),x.execCommand("SaveAs",!0,h),document.body.removeChild(b)}}else{var O=n.get("lang"),_='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(O&&O[0]||"")+'" /></body>',C=window.open();C.document.write(_),C.document.title=o}},t.getDefaultOption=function(e){var t={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return t},t}(h),B=E,z=n("1be7"),D=n("e0d3"),P="__ec_magicType_stack__",V=[["line","bar"],["stack"]],N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["a"])(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return f["k"](e.get("type"),(function(e){t[e]&&(n[e]=t[e])})),n},t.getDefaultOption=function(e){var t={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return t},t.prototype.onclick=function(e,t,n){var o=this.model,r=o.get(["seriesIndex",n]);if(Z[n]){var i,a={series:[]},s=function(e){var t=e.subType,r=e.id,i=Z[n](t,r,e,o);i&&(f["i"](i,e.option),a.series.push(i));var s=e.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var u=s.getAxesByScale("ordinal")[0];if(u){var c=u.dim,l=c+"Axis",d=e.getReferringComponents(l,D["b"]).models[0],p=d.componentIndex;a[l]=a[l]||[];for(var h=0;h<=p;h++)a[l][p]=a[l][p]||{};a[l][p].boundaryGap="bar"===n}}};f["k"](V,(function(e){f["q"](e,n)>=0&&f["k"](e,(function(e){o.setIconStatus(e,"normal")}))})),o.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},s);var u=n;"stack"===n&&(i=f["G"]({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),"emphasis"!==o.get(["iconStatus",n])&&(u="tiled")),t.dispatchAction({type:"changeMagicType",currentType:u,newOption:a,newTitle:i,featureName:"magicType"})}},t}(h),Z={line:function(e,t,n,o){if("bar"===e)return f["G"]({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(e,t,n,o){if("line"===e)return f["G"]({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(e,t,n,o){var r=n.get("stack")===P;if("line"===e||"bar"===e)return o.setIconStatus("stack",r?"normal":"emphasis"),f["G"]({id:t,stack:r?"":P},o.get(["option","stack"])||{},!0)}};z["c"]({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var H=N,G=n("607d"),F=new Array(60).join("-"),X="\t";function Y(e){var t={},n=[],o=[];return e.eachRawSeries((function(e){var r=e.coordinateSystem;if(!r||"cartesian2d"!==r.type&&"polar"!==r.type)n.push(e);else{var i=r.getBaseAxis();if("category"===i.type){var a=i.dim+"_"+i.index;t[a]||(t[a]={categoryAxis:i,valueAxis:r.getOtherAxis(i),series:[]},o.push({axisDim:i.dim,axisIndex:i.index})),t[a].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:o}}function q(e){var t=[];return f["k"](e,(function(e,n){var o=e.categoryAxis,r=e.valueAxis,i=r.dim,a=[" "].concat(f["F"](e.series,(function(e){return e.name}))),s=[o.model.getCategories()];f["k"](e.series,(function(e){var t=e.getRawData();s.push(e.getRawData().mapArray(t.mapDimension(i),(function(e){return e})))}));for(var u=[a.join(X)],c=0;c<s[0].length;c++){for(var l=[],d=0;d<s.length;d++)l.push(s[d][c]);u.push(l.join(X))}t.push(u.join("\n"))})),t.join("\n\n"+F+"\n\n")}function U(e){return f["F"](e,(function(e){var t=e.getRawData(),n=[e.name],o=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,r=arguments[e-1],i=t.getName(r),a=0;a<e-1;a++)o[a]=arguments[a];n.push((i?i+X:"")+o.join(X))})),n.join("\n")})).join("\n\n"+F+"\n\n")}function W(e){var t=Y(e);return{value:f["n"]([q(t.seriesGroupByCategoryAxis),U(t.other)],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+F+"\n\n"),meta:t.meta}}function J(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function $(e){var t=e.slice(0,e.indexOf("\n"));if(t.indexOf(X)>=0)return!0}var K=new RegExp("["+X+"]+","g");function Q(e){for(var t=e.split(/\n+/g),n=J(t.shift()).split(K),o=[],r=f["F"](n,(function(e){return{name:e,data:[]}})),i=0;i<t.length;i++){var a=J(t[i]).split(K);o.push(a.shift());for(var s=0;s<a.length;s++)r[s]&&(r[s].data[i]=a[s])}return{series:r,categories:o}}function ee(e){for(var t=e.split(/\n+/g),n=J(t.shift()),o=[],r=0;r<t.length;r++){var i=J(t[r]);if(i){var a=i.split(K),s="",u=void 0,c=!1;isNaN(a[0])?(c=!0,s=a[0],a=a.slice(1),o[r]={name:s,value:[]},u=o[r].value):u=o[r]=[];for(var l=0;l<a.length;l++)u.push(+a[l]);1===u.length&&(c?o[r].value=u[0]:o[r]=u[0])}}return{name:n,data:o}}function te(e,t){var n=e.split(new RegExp("\n*"+F+"\n*","g")),o={series:[]};return f["k"](n,(function(e,n){if($(e)){var r=Q(e),i=t[n],a=i.axisDim+"Axis";i&&(o[a]=o[a]||[],o[a][i.axisIndex]={data:r.categories},o.series=o.series.concat(r.series))}else{r=ee(e);o.series.push(r)}})),o}var ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["a"])(t,e),t.prototype.onclick=function(e,t){setTimeout((function(){t.dispatchAction({type:"hideTip"})}));var n=t.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=o.get("backgroundColor")||"#fff";var i=document.createElement("h4"),a=o.get("lang")||[];i.innerHTML=a[0]||o.get("title"),i.style.cssText="margin:10px 20px",i.style.color=o.get("textColor");var s=document.createElement("div"),u=document.createElement("textarea");s.style.cssText="overflow:auto";var c=o.get("optionToContent"),l=o.get("contentToOption"),d=W(e);if(f["v"](c)){var p=c(t.getOption());f["A"](p)?s.innerHTML=p:f["u"](p)&&s.appendChild(p)}else{u.readOnly=o.get("readOnly");var h=u.style;h.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",h.color=o.get("textColor"),h.borderColor=o.get("textareaBorderColor"),h.backgroundColor=o.get("textareaColor"),u.value=d.value,s.appendChild(u)}var g=d.meta,v=document.createElement("div");v.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),y=document.createElement("div");m+=";background-color:"+o.get("buttonColor"),m+=";color:"+o.get("buttonTextColor");var x=this;function O(){n.removeChild(r),x._dom=null}Object(G["a"])(b,"click",O),Object(G["a"])(y,"click",(function(){if(null==l&&null!=c||null!=l&&null==c)O();else{var e;try{e=f["v"](l)?l(s,t.getOption()):te(u.value,g)}catch(n){throw O(),new Error("Data view format error "+n)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),O()}})),b.innerHTML=a[1],y.innerHTML=a[2],y.style.cssText=b.style.cssText=m,!o.get("readOnly")&&v.appendChild(y),v.appendChild(b),r.appendChild(i),r.appendChild(s),r.appendChild(v),s.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){var t={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return t},t}(h);function oe(e,t){return f["F"](e,(function(e,n){var o=t&&t[n];if(f["z"](o)&&!f["s"](o)){var r=f["z"](e)&&!f["s"](e);r||(e={value:e});var i=null!=o.name&&null==e.name;return e=f["i"](e,o),i&&delete e.name,e}return e}))}z["c"]({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var n=[];f["k"](e.newOption.series,(function(e){var o=t.getSeriesByName(e.name)[0];if(o){var r=o.get("data");n.push({name:e.name,data:oe(e.data,r)})}else n.push(f["m"]({type:"scatter"},e))})),t.mergeOption(f["i"]({series:n},e.newOption))}));var re=ne,ie=f["k"],ae=Object(D["m"])();function se(e,t){var n=de(e);ie(t,(function(t,o){for(var r=n.length-1;r>=0;r--){var i=n[r];if(i[o])break}if(r<0){var a=e.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(a){var s=a.getPercentRange();n[0][o]={dataZoomId:o,start:s[0],end:s[1]}}}})),n.push(t)}function ue(e){var t=de(e),n=t[t.length-1];t.length>1&&t.pop();var o={};return ie(n,(function(e,n){for(var r=t.length-1;r>=0;r--)if(e=t[r][n],e){o[n]=e;break}})),o}function ce(e){ae(e).snapshots=null}function le(e){return de(e).length}function de(e){var t=ae(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["a"])(t,e),t.prototype.onclick=function(e,t){ce(e),t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var t={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return t},t}(h);z["c"]({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var fe=pe,he=n("6fd3"),ge=n("2dc5"),ve=n("c7a2"),me=n("d498"),be=n("87b1"),ye=n("a4fe"),xe=!0,Oe=Math.min,_e=Math.max,Ce=Math.pow,we=1e4,ke=6,Me=6,Te="globalPan",Ae={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},je={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Se={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Ie=0,Re=function(e){function t(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new ge["a"],n._uid="brushController_"+Ie++,Object(f["k"])(lt,(function(e,t){this._handlers[t]=Object(f["c"])(e,this)}),n),n}return Object(r["a"])(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||ye["c"](t,Te,this._uid),Object(f["k"])(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=Object(f["G"])(Object(f["d"])(Se),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;ye["b"](e,Te,this._uid),Object(f["k"])(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};Object(f["k"])(e,(function(e){t[e.panelId]=Object(f["d"])(e)}))}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=Object(f["F"])(e,(function(e){return Object(f["G"])(Object(f["d"])(Se),e,!0)}));var t="\0-brush-index-",n=this._covers,o=this._covers=[],r=this,i=this._creatingCover;return new k["a"](n,e,s,a).add(u).update(u).remove(c).execute(),this;function a(e,n){return(null!=e.id?e.id:t+n)+"-"+e.brushType}function s(e,t){return a(e.__brushOption,t)}function u(t,a){var s=e[t];if(null!=a&&n[a]===i)o[t]=n[a];else{var u=o[t]=null!=a?(n[a].__brushOption=s,n[a]):Ee(r,Le(r,s));De(r,u)}}function c(e){n[e]!==i&&r.group.remove(n[e])}},t.prototype.unmount=function(){return this.enableBrush(!1),Ze(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(he["a"]);function Le(e,t){var n=ft[t.brushType].createCover(e,t);return n.__brushOption=t,ze(n,t),e.group.add(n),n}function Ee(e,t){var n=Pe(t);return n.endCreating&&(n.endCreating(e,t),ze(t,t.__brushOption)),t}function Be(e,t){var n=t.__brushOption;Pe(t).updateCoverShape(e,t,n.range,n)}function ze(e,t){var n=t.z;null==n&&(n=we),e.traverse((function(e){e.z=n,e.z2=n}))}function De(e,t){Pe(t).updateCommon(e,t),Be(e,t)}function Pe(e){return ft[e.__brushOption.brushType]}function Ve(e,t,n){var o,r=e._panels;if(!r)return xe;var i=e._transform;return Object(f["k"])(r,(function(e){e.isTargetByCursor(t,n,i)&&(o=e)})),o}function Ne(e,t){var n=e._panels;if(!n)return xe;var o=t.__brushOption.panelId;return null!=o?n[o]:xe}function Ze(e){var t=e._covers,n=t.length;return Object(f["k"])(t,(function(t){e.group.remove(t)}),e),t.length=0,!!n}function He(e,t){var n=Object(f["F"])(e._covers,(function(e){var t=e.__brushOption,n=Object(f["d"])(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function Ge(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],o=t[0],r=n[0]-o[0],i=n[1]-o[1],a=Ce(r*r+i*i,.5);return a>ke}function Fe(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function Xe(e,t,n,o){var r=new ge["a"];return r.add(new ve["a"]({name:"main",style:We(n),silent:!0,draggable:!0,cursor:"move",drift:Object(f["h"])(et,e,t,r,["n","s","w","e"]),ondragend:Object(f["h"])(He,t,{isEnd:!0})})),Object(f["k"])(o,(function(n){r.add(new ve["a"]({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Object(f["h"])(et,e,t,r,n),ondragend:Object(f["h"])(He,t,{isEnd:!0})}))})),r}function Ye(e,t,n,o){var r=o.brushStyle.lineWidth||0,i=_e(r,Me),a=n[0][0],s=n[1][0],u=a-r/2,c=s-r/2,l=n[0][1],d=n[1][1],p=l-i+r/2,f=d-i+r/2,h=l-a,g=d-s,v=h+r,m=g+r;Ue(e,t,"main",a,s,h,g),o.transformable&&(Ue(e,t,"w",u,c,i,m),Ue(e,t,"e",p,c,i,m),Ue(e,t,"n",u,c,v,i),Ue(e,t,"s",u,f,v,i),Ue(e,t,"nw",u,c,i,i),Ue(e,t,"ne",p,c,i,i),Ue(e,t,"sw",u,f,i,i),Ue(e,t,"se",p,f,i,i))}function qe(e,t){var n=t.__brushOption,o=n.transformable,r=t.childAt(0);r.useStyle(We(n)),r.attr({silent:!o,cursor:o?"move":"default"}),Object(f["k"])([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var r=t.childOfName(n.join("")),i=1===n.length?Ke(e,n[0]):Qe(e,n);r&&r.attr({silent:!o,invisible:!o,cursor:o?je[i]+"-resize":null})}))}function Ue(e,t,n,o,r,i,a){var s=t.childOfName(n);s&&s.setShape(rt(ot(e,t,[[o,r],[o+i,r+a]])))}function We(e){return Object(f["i"])({strokeNoScale:!0},e.brushStyle)}function Je(e,t,n,o){var r=[Oe(e,n),Oe(t,o)],i=[_e(e,n),_e(t,o)];return[[r[0],i[0]],[r[1],i[1]]]}function $e(e){return _["getTransform"](e.group)}function Ke(e,t){var n={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},r=_["transformDirection"](n[t],$e(e));return o[r]}function Qe(e,t){var n=[Ke(e,t[0]),Ke(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}function et(e,t,n,o,r,i){var a=n.__brushOption,s=e.toRectRange(a.range),u=nt(t,r,i);Object(f["k"])(o,(function(e){var t=Ae[e];s[t[0]][t[1]]+=u[t[0]]})),a.range=e.fromRectRange(Je(s[0][0],s[1][0],s[0][1],s[1][1])),De(t,n),He(t,{isEnd:!1})}function tt(e,t,n,o){var r=t.__brushOption.range,i=nt(e,n,o);Object(f["k"])(r,(function(e){e[0]+=i[0],e[1]+=i[1]})),De(e,t),He(e,{isEnd:!1})}function nt(e,t,n){var o=e.group,r=o.transformCoordToLocal(t,n),i=o.transformCoordToLocal(0,0);return[r[0]-i[0],r[1]-i[1]]}function ot(e,t,n){var o=Ne(e,t);return o&&o!==xe?o.clipPath(n,e._transform):Object(f["d"])(n)}function rt(e){var t=Oe(e[0][0],e[1][0]),n=Oe(e[0][1],e[1][1]),o=_e(e[0][0],e[1][0]),r=_e(e[0][1],e[1][1]);return{x:t,y:n,width:o-t,height:r-n}}function it(e,t,n){if(e._brushType&&!pt(e,t.offsetX,t.offsetY)){var o=e._zr,r=e._covers,i=Ve(e,t,n);if(!e._dragging)for(var a=0;a<r.length;a++){var s=r[a].__brushOption;if(i&&(i===xe||s.panelId===i.panelId)&&ft[s.brushType].contain(r[a],n[0],n[1]))return}i&&o.setCursorStyle("crosshair")}}function at(e){var t=e.event;t.preventDefault&&t.preventDefault()}function st(e,t,n){return e.childOfName("main").contain(t,n)}function ut(e,t,n,o){var r,i=e._creatingCover,a=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),Ge(e)||i){if(a&&!i){"single"===s.brushMode&&Ze(e);var u=Object(f["d"])(s);u.brushType=ct(u.brushType,a),u.panelId=a===xe?null:a.panelId,i=e._creatingCover=Le(e,u),e._covers.push(i)}if(i){var c=ft[ct(e._brushType,a)],l=i.__brushOption;l.range=c.getCreatingRange(ot(e,i,e._track)),o&&(Ee(e,i),c.updateCommon(e,i)),Be(e,i),r={isEnd:o}}}else o&&"single"===s.brushMode&&s.removeOnClick&&Ve(e,t,n)&&Ze(e)&&(r={isEnd:o,removeOnClick:!0});return r}function ct(e,t){return"auto"===e?t.defaultBrushType:e}var lt={mousedown:function(e){if(this._dragging)dt(this,e);else if(!e.target||!e.target.draggable){at(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var n=this._creatingPanel=Ve(this,e,t);n&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,o=this.group.transformCoordToLocal(t,n);if(it(this,e,o),this._dragging){at(e);var r=ut(this,e,o,!1);r&&He(this,r)}},mouseup:function(e){dt(this,e)}};function dt(e,t){if(e._dragging){at(t);var n=t.offsetX,o=t.offsetY,r=e.group.transformCoordToLocal(n,o),i=ut(e,t,r,!0);e._dragging=!1,e._track=[],e._creatingCover=null,i&&He(e,i)}}function pt(e,t,n){var o=e._zr;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}var ft={lineX:ht(0),lineY:ht(1),rect:{createCover:function(e,t){function n(e){return e}return Xe({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=Fe(e);return Je(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,o){Ye(e,t,n,o)},updateCommon:qe,contain:st},polygon:{createCover:function(e,t){var n=new ge["a"];return n.add(new me["a"]({name:"main",style:We(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new be["a"]({name:"main",draggable:!0,drift:Object(f["h"])(tt,e,t),ondragend:Object(f["h"])(He,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,o){t.childAt(0).setShape({points:ot(e,t,n)})},updateCommon:qe,contain:st}};function ht(e){return{createCover:function(t,n){return Xe({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=Fe(t),o=Oe(n[0][e],n[1][e]),r=_e(n[0][e],n[1][e]);return[o,r]},updateCoverShape:function(t,n,o,r){var i,a=Ne(t,n);if(a!==xe&&a.getLinearBrushOtherExtent)i=a.getLinearBrushOtherExtent(e);else{var s=t._zr;i=[0,[s.getWidth(),s.getHeight()][1-e]]}var u=[o,i];e&&u.reverse(),Ye(t,n,u,r)},updateCommon:qe,contain:st}}var gt=Re,vt=n("9850"),mt={axisPointer:1,tooltip:1,brush:1};function bt(e,t,n){var o=t.getComponentByElement(e.topTarget),r=o&&o.coordinateSystem;return o&&o!==n&&!mt.hasOwnProperty(o.mainType)&&r&&r.model!==n}function yt(e){return e=_t(e),function(t){return _["clipPointsByRect"](t,e)}}function xt(e,t){return e=_t(e),function(n){var o=null!=t?t:n,r=o?e.width:e.height,i=o?e.x:e.y;return[i,i+(r||0)]}}function Ot(e,t,n){var o=_t(e);return function(e,r){return o.contain(r[0],r[1])&&!bt(e,t,n)}}function _t(e){return vt["a"].create(e)}var Ct=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],wt=function(){function e(e,t,n){var o=this;this._targetInfoList=[];var r=Mt(t,e);Object(f["k"])(Tt,(function(e,t){(!n||!n.include||Object(f["q"])(n.include,t)>=0)&&e(r,o._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var o=St[e.brushType](0,n,t);e.__rangeOffset={offset:Rt[e.brushType](o.values,e.range,[1,1]),xyMinMax:o.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,n){Object(f["k"])(e,(function(e){var o=this.findTargetInfo(e,t);o&&!0!==o&&Object(f["k"])(o.coordSyses,(function(o){var r=St[e.brushType](1,o,e.range,!0);n(e,r.values,o,t)}))}),this)},e.prototype.setInputRanges=function(e,t){Object(f["k"])(e,(function(e){var n=this.findTargetInfo(e,t);if(e.range=e.range||[],n&&!0!==n){e.panelId=n.panelId;var o=St[e.brushType](0,n.coordSys,e.coordRange),r=e.__rangeOffset;e.range=r?Rt[e.brushType](o.values,r.offset,Et(o.xyMinMax,r.xyMinMax)):o.values}}),this)},e.prototype.makePanelOpts=function(e,t){return Object(f["F"])(this._targetInfoList,(function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:yt(o),isTargetByCursor:Ot(o,e,n.coordSysModel),getLinearBrushOtherExtent:xt(o)}}))},e.prototype.controlSeries=function(e,t,n){var o=this.findTargetInfo(e,n);return!0===o||o&&Object(f["q"])(o.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,o=Mt(t,e),r=0;r<n.length;r++){var i=n[r],a=e.panelId;if(a){if(i.panelId===a)return i}else for(var s=0;s<At.length;s++)if(At[s](o,i))return i}return!0},e}();function kt(e){return e[0]>e[1]&&e.reverse(),e}function Mt(e,t){return Object(D["q"])(e,t,{includeMainTypes:Ct})}var Tt={grid:function(e,t){var n=e.xAxisModels,o=e.yAxisModels,r=e.gridModels,i=Object(f["f"])(),a={},s={};(n||o||r)&&(Object(f["k"])(n,(function(e){var t=e.axis.grid.model;i.set(t.id,t),a[t.id]=!0})),Object(f["k"])(o,(function(e){var t=e.axis.grid.model;i.set(t.id,t),s[t.id]=!0})),Object(f["k"])(r,(function(e){i.set(e.id,e),a[e.id]=!0,s[e.id]=!0})),i.each((function(e){var r=e.coordinateSystem,i=[];Object(f["k"])(r.getCartesians(),(function(e,t){(Object(f["q"])(n,e.getAxis("x").model)>=0||Object(f["q"])(o,e.getAxis("y").model)>=0)&&i.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:i[0],coordSyses:i,getPanelRect:jt.grid,xAxisDeclared:a[e.id],yAxisDeclared:s[e.id]})})))},geo:function(e,t){Object(f["k"])(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:jt.geo})}))}},At=[function(e,t){var n=e.xAxisModel,o=e.yAxisModel,r=e.gridModel;return!r&&n&&(r=n.axis.grid.model),!r&&o&&(r=o.axis.grid.model),r&&r===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],jt={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(_["getTransform"](e)),t}},St={lineX:Object(f["h"])(It,0),lineY:Object(f["h"])(It,1),rect:function(e,t,n,o){var r=e?t.pointToData([n[0][0],n[1][0]],o):t.dataToPoint([n[0][0],n[1][0]],o),i=e?t.pointToData([n[0][1],n[1][1]],o):t.dataToPoint([n[0][1],n[1][1]],o),a=[kt([r[0],i[0]]),kt([r[1],i[1]])];return{values:a,xyMinMax:a}},polygon:function(e,t,n,o){var r=[[1/0,-1/0],[1/0,-1/0]],i=Object(f["F"])(n,(function(n){var i=e?t.pointToData(n,o):t.dataToPoint(n,o);return r[0][0]=Math.min(r[0][0],i[0]),r[1][0]=Math.min(r[1][0],i[1]),r[0][1]=Math.max(r[0][1],i[0]),r[1][1]=Math.max(r[1][1],i[1]),i}));return{values:i,xyMinMax:r}}};function It(e,t,n,o){var r=n.getAxis(["x","y"][e]),i=kt(Object(f["F"])([0,1],(function(e){return t?r.coordToData(r.toLocalCoord(o[e]),!0):r.toGlobalCoord(r.dataToCoord(o[e]))}))),a=[];return a[e]=i,a[1-e]=[NaN,NaN],{values:i,xyMinMax:a}}var Rt={lineX:Object(f["h"])(Lt,0),lineY:Object(f["h"])(Lt,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return Object(f["F"])(e,(function(e,o){return[e[0]-n[0]*t[o][0],e[1]-n[1]*t[o][1]]}))}};function Lt(e,t,n,o){return[t[0]-o[e]*n[0],t[1]-o[e]*n[1]]}function Et(e,t){var n=Bt(e),o=Bt(t),r=[n[0]/o[0],n[1]/o[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}function Bt(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var zt=wt,Dt=n("ef6a"),Pt=n("2f1f"),Vt=f["k"],Nt=Object(D["n"])("toolbox-dataZoom_"),Zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["a"])(t,e),t.prototype.render=function(e,t,n,o){this._brushController||(this._brushController=new gt(n.getZr()),this._brushController.on("brush",f["c"](this._onBrush,this)).mount()),Xt(e,t,this,o,n),Ft(e,t)},t.prototype.onclick=function(e,t,n){Ht[n].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},o=this.ecModel;this._brushController.updateCovers([]);var r=new zt(Gt(this.model),o,{include:["grid"]});r.matchOutputRanges(t,o,(function(e,t,n){if("cartesian2d"===n.type){var o=e.brushType;"rect"===o?(i("x",n,t[0]),i("y",n,t[1])):i({lineX:"x",lineY:"y"}[o],n,t)}})),se(o,n),this._dispatchZoomAction(n)}function i(e,t,r){var i=t.getAxis(e),s=i.model,u=a(e,s,o),c=u.findRepresentativeAxisProxy(s).getMinMaxSpan();null==c.minValueSpan&&null==c.maxValueSpan||(r=Object(Dt["a"])(0,r.slice(),i.scale.getExtent(),0,c.minValueSpan,c.maxValueSpan)),u&&(n[u.id]={dataZoomId:u.id,startValue:r[0],endValue:r[1]})}function a(e,t,n){var o;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){var r=n.getAxisModel(e,t.componentIndex);r&&(o=n)})),o}},t.prototype._dispatchZoomAction=function(e){var t=[];Vt(e,(function(e,n){t.push(f["d"](e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){var t={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return t},t}(h),Ht={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(ue(this.ecModel))}};function Gt(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}function Ft(e,t){e.setIconStatus("back",le(t)>1?"emphasis":"normal")}function Xt(e,t,n,o,r){var i=n._isZoomActive;o&&"takeGlobalCursor"===o.type&&(i="dataZoomSelect"===o.key&&o.dataZoomSelectActive),n._isZoomActive=i,e.setIconStatus("zoom",i?"emphasis":"normal");var a=new zt(Gt(e),t,{include:["grid"]}),s=a.makePanelOpts(r,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(s).enableBrush(!(!i||!s.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}Object(Pt["b"])("dataZoom",(function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var o=t.getModel(n),r=[],i=Gt(o),a=Object(D["q"])(e,i);return Vt(a.xAxisModels,(function(e){return s(e,"xAxis","xAxisIndex")})),Vt(a.yAxisModels,(function(e){return s(e,"yAxis","yAxisIndex")})),r}function s(e,t,n){var i=e.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:Nt+t+i};a[n]=i,r.push(a)}}));var Yt=Zt;function qt(e){e.registerComponentModel(x),e.registerComponentView(R),v("saveAsImage",B),v("magicType",H),v("dataView",re),v("dataZoom",Yt),v("restore",fe),Object(o["a"])(p)}n.d(t,"a",(function(){return qt}))}}]);