(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-7a8a5db0"],{"09bc":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card-container"},[a("el-form",{attrs:{inline:!0,model:e.params,"label-position":"top","label-width":"80px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("div",[a("el-form-item",{attrs:{prop:"id"}},[a("el-input",{attrs:{placeholder:"请输入监控ID",clearable:""},model:{value:e.params.id,callback:function(t){e.$set(e.params,"id",t)},expression:"params.id"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"ruleType"}},[a("el-select",{attrs:{clearable:!0,placeholder:"请选择规则类别"},model:{value:e.params.ruleType,callback:function(t){e.$set(e.params,"ruleType",t)},expression:"params.ruleType"}},[e._l(e.ruleTypeList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.value}})]}))],2)],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("确定")])],1)],1),e._v(" "),a("div",[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添加模板")])],1)],1)])],1),e._v(" "),e.body.length||e.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-table",{ref:"reportTable",attrs:{data:e.body,height:"calc(100vh - 250px)","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"规则模板ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"模板类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.ruleTypeList.find((function(e){return e.value===t.row.ruleType}))["name"])+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"模板名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述",align:"center",width:"400"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleConfigDqc(t.row)}}},[e._v("配置监控")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除吗？"},on:{confirm:function(a){return e.handleDelete(t.row)}}},[a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.pageNo,"page-sizes":[10,20,30,40],"page-size":e.params.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):a("el-empty",{attrs:{description:"无报表数据"}}),e._v(" "),a("TemplateDetail",{attrs:{visible:e.detailVisible,"detail-data":e.detailData},on:{"update:visible":function(t){e.detailVisible=t}}})],1)},i=[],l=a("a211"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"规则详情",visible:e.visible,width:"35%",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisiable=t}}},[a("el-descriptions",{attrs:{column:1}},[a("el-descriptions-item",{attrs:{label:"模板名"}},[e._v(e._s(e.detail.name))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"规则类型"}},[e._v(e._s(e.detail.ruleType))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"SQL条件"}},[e._v(e._s(e.detail.sqlCondition))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"SQL表达式"}},[e._v(e._s(e.detail.sqlStatement))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"检验类型"}},[e._v(e._s(e.detail.checkType))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"检验方式"}},[e._v(e._s(e.detail.checkAction))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"描述"}},[e._v(e._s(e.detail.description))])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("关闭")])],1)],1)},o=[],s={name:"Edit",props:{detailData:{type:Object,default:function(){}},visible:{type:Boolean,required:!0}},data:function(){return{detail:{},loading:!1,dialogVisiable:this.visible,checkTypeList:this.$t("dqc.checkTypeList"),fieldTypeList:this.$t("dqc.fieldTypeList")}},watch:{visible:function(){this.dialogVisiable=this.visible,this.dialogVisiable&&this.templateInfo()},dialogVisiable:function(e){this.$emit("update:visible",e)}},methods:{templateInfo:function(){var e=this;this.loading=!0,Object(l["j"])({id:this.detailData.id}).then((function(t){if(e.loading=!1,0===t.resultCode){var a=t.data;e.detail=a}}))},cancel:function(){this.$emit("update:visible",!1)}}},c=s,u=a("2877"),d=Object(u["a"])(c,r,o,!1,null,null,null),p=d.exports,f={name:"DqcRuleList",components:{TemplateDetail:p},data:function(){return{detailVisible:!1,detailData:{},loading:!1,body:[],defaultParams:{id:null,ruleType:null,pageNo:1,pageSize:10},params:{id:null,ruleType:null,pageNo:1,pageSize:10},total:0,ruleTypeList:this.$t("dqc.ruleTypeList")}},created:function(){this.handleSearch()},methods:{templatePages:function(e){var t=this;this.loading=!0,Object(l["k"])(e).then((function(e){if(t.loading=!1,0===e.resultCode){var a=e.data;t.body=a.list,t.params.pageNo=a.pageNum,t.params.pageSize=a.pageSize,t.total=a.total}else t.$message({type:"error",message:e.msg||"服务端错误"})}))},handleSizeChange:function(e){this.params.pageSize=e,this.handleSearch()},handleCurrentChange:function(e){this.params.pageNum=e,this.handleSearch()},handleReset:function(){this.params=Object.assign({},this.defaultParams),this.handleSearch()},handleSearch:function(){var e=Object.assign({},this.params);this.templatePages(e)},handleAdd:function(){this.$router.push({name:"DqcRuleModelConfig"})},handleConfigDqc:function(e){this.$router.push({name:"DqcConfig",query:{ruleId:e.id}})},handleDetail:function(e){this.detailVisible=!0,this.detailData=e},handleEdit:function(e){this.$router.push({name:"DqcRuleModelConfig",query:{id:e.id}})},handleDelete:function(e){var t=this;Object(l["i"])({id:e.id}).then((function(e){0===e.resultCode?t.$message({type:"success",message:"删除成功"}):t.$message({type:"error",message:e.msg||"服务端错误"})}))}}},m=f,h=Object(u["a"])(m,n,i,!1,null,null,null);t["default"]=h.exports},a211:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"g",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"e",(function(){return p})),a.d(t,"h",(function(){return f})),a.d(t,"l",(function(){return m})),a.d(t,"j",(function(){return h})),a.d(t,"i",(function(){return b})),a.d(t,"k",(function(){return g}));var n=a("7258"),i="/sla-service/metric",l="/sla-service/template";function r(e){return n["b"].post("".concat(i,"/add"),e)}function o(e){return n["b"].post("".concat(i,"/update"),e)}function s(e){return n["b"].get("".concat(i,"/info"),{params:e})}function c(e){return n["b"].get("".concat(i,"/report"),{params:e})}function u(e){return n["b"].get("".concat(i,"/active"),{params:e})}function d(e){return n["b"].get("".concat(i,"/delete"),{params:e})}function p(e){return n["b"].get("".concat(i,"/pages"),{params:e})}function f(e){return n["b"].post("".concat(l,"/addItem"),e)}function m(e){return n["b"].post("".concat(l,"/updateItem"),e)}function h(e){return n["b"].get("".concat(l,"/info"),{params:e})}function b(e){return n["b"].get("".concat(l,"/delete"),{params:e})}function g(e){return n["b"].get("".concat(l,"/pages"),{params:e})}}}]);