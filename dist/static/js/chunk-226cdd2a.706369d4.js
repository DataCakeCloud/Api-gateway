(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-226cdd2a"],{5889:function(t,e,n){"use strict";n.d(e,"h",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"j",(function(){return p})),n.d(e,"e",(function(){return m})),n.d(e,"a",(function(){return h})),n.d(e,"f",(function(){return b})),n.d(e,"d",(function(){return v})),n.d(e,"b",(function(){return g})),n.d(e,"k",(function(){return y})),n.d(e,"g",(function(){return w})),n.d(e,"i",(function(){return k}));var r=n("7258");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e=c(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=u(t,"string");return"symbol"===a(e)?e:String(e)}function u(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var l={headers:{"Content-Type":"application/json"}};function d(t,e){return r["b"].get("/ds_task/actor/".concat(e,"s/page"),{params:t})}function f(t,e){return r["b"].get("/ds_task/actor/".concat(e,"s/delete"),{params:t})}function p(t,e){return r["b"].get("/ds_task/actor/".concat(e,"_definitions/spec"),{params:t})}function m(t,e){return r["b"].get("/ds_task/actor/".concat(e,"s/exist"),{params:t})}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["b"].post("/ds_task/metadata/checkConnection",t,i(i({},e),{},{timeout:18e5}))}function b(t,e){return r["b"].get("/ds_task/actor/".concat(e,"s/get"),{params:t})}function v(t,e){return r["b"].get("/ds_task/actor/".concat(e,"s/document/").concat(t))}function g(t,e){return r["b"].post("/ds_task/actor/".concat(e,"s/create"),t,i(i({},l),{},{timeout:12e4}))}function y(t,e){return r["b"].post("/ds_task/actor/".concat(e,"s/update"),t,i(i({},l),{},{timeout:12e4}))}function w(t){return r["b"].get("/ds_task/actor/sources/listUserGroup",{params:t})}function k(t){return r["b"].post("/ds_task/actor/sources/saveUserGroup",t)}},"5d2b":function(t,e,n){"use strict";n("d4ba")},b199:function(t,e,n){"use strict";n.d(e,"y",(function(){return o})),n.d(e,"W",(function(){return i})),n.d(e,"E",(function(){return s})),n.d(e,"p",(function(){return c})),n.d(e,"ab",(function(){return u})),n.d(e,"s",(function(){return l})),n.d(e,"r",(function(){return d})),n.d(e,"t",(function(){return f})),n.d(e,"Q",(function(){return p})),n.d(e,"T",(function(){return m})),n.d(e,"A",(function(){return h})),n.d(e,"O",(function(){return b})),n.d(e,"B",(function(){return v})),n.d(e,"q",(function(){return g})),n.d(e,"e",(function(){return y})),n.d(e,"g",(function(){return w})),n.d(e,"d",(function(){return k})),n.d(e,"ib",(function(){return _})),n.d(e,"n",(function(){return O})),n.d(e,"Y",(function(){return S})),n.d(e,"I",(function(){return x})),n.d(e,"H",(function(){return P})),n.d(e,"c",(function(){return j})),n.d(e,"hb",(function(){return L})),n.d(e,"m",(function(){return N})),n.d(e,"j",(function(){return D})),n.d(e,"f",(function(){return E})),n.d(e,"bb",(function(){return T})),n.d(e,"J",(function(){return C})),n.d(e,"F",(function(){return I})),n.d(e,"h",(function(){return G})),n.d(e,"db",(function(){return A})),n.d(e,"z",(function(){return B})),n.d(e,"R",(function(){return z})),n.d(e,"u",(function(){return F})),n.d(e,"D",(function(){return $})),n.d(e,"P",(function(){return U})),n.d(e,"w",(function(){return V})),n.d(e,"Z",(function(){return M})),n.d(e,"C",(function(){return q})),n.d(e,"eb",(function(){return R})),n.d(e,"a",(function(){return J})),n.d(e,"fb",(function(){return Y})),n.d(e,"cb",(function(){return K})),n.d(e,"G",(function(){return W})),n.d(e,"U",(function(){return H})),n.d(e,"i",(function(){return Q})),n.d(e,"k",(function(){return X})),n.d(e,"K",(function(){return Z})),n.d(e,"L",(function(){return tt})),n.d(e,"N",(function(){return et})),n.d(e,"M",(function(){return nt})),n.d(e,"b",(function(){return rt})),n.d(e,"l",(function(){return at})),n.d(e,"o",(function(){return ot})),n.d(e,"S",(function(){return it})),n.d(e,"gb",(function(){return st})),n.d(e,"X",(function(){return ct})),n.d(e,"v",(function(){return ut})),n.d(e,"V",(function(){return lt}));var r=n("7258"),a="/ds_task/task";function o(t){return r["b"].post("/ds_task/metadata/search",t,{timeout:12e4})}function i(){return r["b"].get("/ds_task/sysdict/getTemplateList")}function s(t){return r["b"].get("/ds_task/dict/list",{params:t})}function c(t){return r["b"].get("/ds_task/artifact/list",{params:t})}function u(t){return r["b"].get("/ds_task/artifactversion/list",{params:t})}function l(t){return r["b"].get("/ds_task/flinkcluster/list",{params:t})}function d(t){return r["b"].get("/ds_task/flinkcluster/auto",{params:t})}function f(t){return r["b"].get("/ds_task/flinkcluster/noauto",{params:t})}function p(t){return r["b"].get("".concat(a,"/get"),{params:t})}function m(t){return r["b"].get("".concat(a,"/page"),{params:t,timeout:6e4})}function h(t){return r["b"].post("/ds_task/metadata/getddl",t)}function b(t){return r["b"].get("".concat(a,"/getInsertSql"),{params:t,timeout:6e5})}function v(t){return r["b"].post("/ds_task/metadata/getdispalyddl",t)}function g(t){return r["b"].get("".concat(a,"/getChildDependencies"),{params:{id:t}})}function y(t){return r["b"].get("".concat(a,"/backfill"),{params:t})}function w(t){return r["b"].put("".concat(a,"/onlineAndOffline"),null,{params:t})}function k(t){return r["b"].post("".concat(a,"/add"),t)}function _(t){return r["b"].put("".concat(a,"/update"),t)}function O(t){return r["b"].delete("".concat(a,"/new/delete"),{params:t})}function S(t){return r["b"].get("/ds_task/user/list",{params:{name:t}})}function x(t){return r["b"].get("/ds_task/label/list",{params:{name:t}})}function P(t){return r["b"].get("/ds_task/label/get",{params:{id:t}})}function j(t){return r["b"].post("/ds_task/label/add",t)}function L(t){return r["b"].put("/ds_task/label/update",t)}function N(t){return r["b"].delete("/ds_task/label/delete",{params:{id:t}})}function D(t){return r["b"].patch("/ds_task/collect/add",null,{params:t})}function E(t){return r["b"].get("/ds_task/collect/cancel",{params:t})}function T(t){return r["b"].get("/ds_task/collect/my",{params:t})}function C(t){return r["b"].get("/ds_task/task/listforlabel",{params:{name:t}})}function I(t){return r["b"].get("/ds_task/task/iam",{params:t})}function G(t){return r["b"].post("/ds_task/task/check",t,{timeout:18e4})}function A(t){return r["b"].get("/ds_task/task/name/search",{params:{name:t}})}function B(t){return r["b"].get("/ds_task/task/backfillDateDetail",{params:t})}function z(t){return r["b"].get("/ds_task/task/last7",{params:t})}function F(t){return r["b"].get("/ds_task/user/getEffectiveCostList",{params:{name:t}})}function $(t){return r["b"].get("/ds_task/task/getGitSqlFile",{params:t})}function U(t){return r["b"].post("/ds_task/task/sqlTbls",t,{headers:{"Content-Type":"multipart/form-data"}})}function V(t){return r["b"].post("/ds_task/task/getCrontab",t)}function M(t){return r["b"].get("/ds_task/taskversion/pages",{params:t})}function q(){return r["b"].get("/ds_task/auditlog/type?module=task")}function R(t){return r["b"].get("/ds_task/taskversion/verionSwitch",{params:t})}function J(t){return r["b"].post("/ds_task/task/addAndStart",t)}function Y(t){return r["b"].post("/ds_task/task/updateAndStart",t)}function K(t){return r["b"].post("/ds_task/task/date/preview",t)}function W(t){return r["b"].post("/ds_task/task/mergeSmallFiles/jars",t)}function H(t){return r["b"].post("/ds_task/task/getTasks",t)}function Q(t){return r["b"].post("/ds_task/task/checkPath",t,{headers:{"Content-Type":"multipart/form-data"}})}function X(t){return r["b"].post("/ds_task/task/fastBackfill?taskId="+t.taskId,t)}function Z(t){return r["b"].get("/ds_task/task/renderContent",{params:t})}function tt(t){return r["b"].post("/ds_task/metadata/preview",t)}function et(t){return r["b"].get("/ds_task/actor/sources/page",{params:t})}function nt(t){return r["b"].get("/ds_task/taskfolder/listFolder",{params:t})}function rt(t){return r["b"].post("/ds_task/taskfolder/saveFolder",t)}function at(t){return r["b"].get("/ds_task/taskfolder/deleteFolder",{params:t})}function ot(t){return r["b"].post("/ds_task/taskfolder/editFolder",t)}function it(t){return r["b"].get("/ds_task/taskfolder/listTask",{params:t})}function st(t){return r["b"].post("/ds_task/taskfolder/updateTask",t)}function ct(t){return r["b"].get("/ds_task/wechatAlert/listById?id=".concat(t))}function ut(t){return r["b"].post("/pipeline/cron/get",t)}function lt(t){return r["b"].get("/ds_task/task/templateRendering",{params:t})}},b8b9:function(t,e,n){"use strict";n.d(e,"e",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return m})),n.d(e,"f",(function(){return h})),n.d(e,"b",(function(){return b})),n.d(e,"d",(function(){return v}));var r=n("7258");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e=c(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=u(t,"string");return"symbol"===a(e)?e:String(e)}function u(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var l={headers:{"Content-Type":"multipart/form-data"}},d="/ds_task";function f(t,e){return r["b"].get("".concat(d,"/actor/").concat(e,"_definitions/page"),{params:t})}function p(t){return r["b"].get("".concat(d,"/actor/").concat(t,"_definitions/list"))}function m(t,e){return r["b"].post("".concat(d,"/actor/").concat(e,"_definitions/create"),t,i(i({},l),{},{timeout:12e4}))}function h(t,e){return r["b"].post("".concat(d,"/actor/").concat(e,"_definitions/update"),t,l)}function b(t,e){return r["b"].post("".concat(d,"/actor/").concat(e,"_definitions/delete"),t,l)}function v(t,e){return r["b"].post("".concat(d,"/actor/").concat(e,"_definitions/open"),t,l)}},d47c:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white"},[n("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"数据源",name:"source"}},[n("TabPane",{attrs:{"active-name":t.activeName}})],1)],1)],1)},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"box-card-container"},[n("div",{staticClass:"search-condition-wrap"},[n("div",{staticClass:"search-group"},[n("search-item",{staticClass:"custom-search",attrs:{span:8,width:"120px",label:"数据源名称"}},[n("el-input",{attrs:{placeholder:"请输入数据源名称",clearable:""},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}})],1),t._v(" "),n("search-item",{staticClass:"custom-search time-ele",attrs:{span:8,width:"120px",label:"数据源类型"}},[n("el-input",{attrs:{placeholder:"请输入数据源类型",clearable:""},model:{value:t.params.sourceName,callback:function(e){t.$set(t.params,"sourceName",e)},expression:"params.sourceName"}})],1),t._v(" "),n("search-item",{directives:[{name:"show",rawName:"v-show",value:t.isShowAll,expression:"isShowAll"}],staticClass:"custom-search time-ele",attrs:{span:8,width:"120px",label:"创建时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"创建时间","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions},model:{value:t.params.createDate,callback:function(e){t.$set(t.params,"createDate",e)},expression:"params.createDate"}})],1),t._v(" "),n("search-item",{directives:[{name:"show",rawName:"v-show",value:t.isShowAll,expression:"isShowAll"}],staticClass:"custom-search time-ele",attrs:{span:8,width:"120px",label:"更新时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"更新时间","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions},model:{value:t.params.updateDate,callback:function(e){t.$set(t.params,"updateDate",e)},expression:"params.updateDate"}})],1),t._v(" "),n("search-item",{directives:[{name:"show",rawName:"v-show",value:t.isShowAll,expression:"isShowAll"}],staticClass:"custom-search time-ele last-ele",attrs:{span:8,width:"120px",label:"创建人"}},[n("el-select",{staticClass:"search-input",attrs:{placeholder:"请输入负责人",clearable:"",filterable:"",remote:"","remote-method":t.remoteMethod,loading:t.ownerLoading,"popper-class":"custom-popper"},model:{value:t.params.createBy,callback:function(e){t.$set(t.params,"createBy",e)},expression:"params.createBy"}},t._l(t.ownerList,(function(e){return n("el-option",{key:e.shareId,attrs:{value:e.shareId,label:e.shareId}},[n("div",{staticStyle:{"max-width":"420px","word-break":"break-all"}},[t._v("("+t._s(e.staffId)+")-"+t._s(e.name)+t._s(e.deptFullPath?"-"+e.deptFullPath:""))])])})),1)],1),t._v(" "),n("search-item",{staticClass:"custom-search btns",attrs:{span:8,width:"0px"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowAll,expression:"isShowAll"}],staticClass:"btn-search"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.search}}),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:t.resetParamsFn}},[t._v("重置")])],1),t._v(" "),n("div",{staticClass:"add-btn"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.toDetail}},[t._v("添加数据源")]),t._v(" "),n("el-button",{staticStyle:{"margin-left":"0","min-width":"auto"},attrs:{type:"text",size:"mini"},on:{click:function(e){t.isShowAll=!t.isShowAll}}},[t._v("\n            "+t._s(t.text)+"\n            "),n("i",{class:t.isShowAll?"el-icon-arrow-down ":"el-icon-arrow-right"})])],1)])],1)]),t._v(" "),n("div",{staticClass:"table-wrap"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"default-sort":{prop:"createTime",order:"descending"}},on:{"sort-change":t.changeGateSort}},[n("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号",width:"70",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"数据源名称",prop:"name",sortable:"","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.toDetail(e.row,"look")}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"数据源类型","min-width":"120","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"name-col"},[n("div",{staticClass:"img-box"},[n("el-image",{attrs:{src:e.row[t.activeName+"Icon"],fit:"fill"}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])])],1),t._v(" "),n("div",{staticClass:"text-content"},[n("span",{staticClass:"name-cont"},[t._v(t._s(e.row.sourceName))]),t._v(" "),n("span",[t._v("("+t._s(e.row[t.activeName+"ReleaseStage"])+")")])])])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"createBy",label:"创建人","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"updateBy",label:"更新人","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:"","min-width":"90","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.$utils.parseTime(e.row.createTime)))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",sortable:"","min-width":"90","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.$utils.parseTime(e.row.updateTime)))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return t.toDetail(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{background:"",total:t.total,"current-page":t.params.pageNum,"page-sizes":[10,20,30,50,100],"page-size":t.params.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.changePage}})],1),t._v(" "),n("el-dialog",{attrs:{visible:t.permissionVisible,width:"40%"},on:{"update:visible":function(e){t.permissionVisible=e}}},[n("span",{staticStyle:{"font-weight":"500","font-size":"16px"},attrs:{slot:"title"},slot:"title"},[t._v("\n      权限设置\n      "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"您可以指定该数据源对哪些用户/用户组可见，但这并不意味着该用户/用户组具有数据源下的库、表权限，最终由数据源的账号权限决定。",placement:"top"}},[n("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer"}})])],1),t._v(" "),n("div",[n("el-button",{staticClass:"btnEle",attrs:{type:"primary"},on:{click:t.handelAddGroup}},[t._v("添加用户组")]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.permissionLoading,expression:"permissionLoading"}],staticStyle:{"margin-top":"10px"},attrs:{data:t.userTable,"max-height":"350px"}},[n("el-table-column",{attrs:{prop:"shareId",label:"用户组"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n            "+t._s(1===n.type?n.shareId:n.name)+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"赋予权限",align:"center","min-width":"250px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-checkbox-group",{model:{value:r.actorPrivileges,callback:function(e){t.$set(r,"actorPrivileges",e)},expression:"row.actorPrivileges"}},t._l(t.permissionTypeList,(function(e){return n("el-checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])})),1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"global-color-cb",attrs:{type:"text",size:"mini"},on:{click:function(n){return t.deleteUser(e.$index)}}},[t._v("移除")])]}}])})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer permission-dialog",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.permissionVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{disabled:t.savePermissionLoading,type:"primary"},on:{click:t.savePermission}},[t.savePermissionLoading?n("i",{staticClass:"el-icon-loading"}):t._e(),t._v("\n        保 存\n      ")])],1)]),t._v(" "),n("el-dialog",{attrs:{title:"添加用户组",center:"",visible:t.addGroupVisible,width:"450px"},on:{"update:visible":function(e){t.addGroupVisible=e},close:function(){return t.userGroupIds=[]}}},[n("div",[n("span",{staticClass:"labelEle"},[t._v("用户组名称")]),t._v(" "),n("el-select",{attrs:{placeholder:"请选择用户组",multiple:"",clearable:""},model:{value:t.userGroupIds,callback:function(e){t.userGroupIds=e},expression:"userGroupIds"}},t._l(t.groupOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),n("span",{staticClass:"dialog-footer permission-dialog",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.addGroupVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",loading:t.addUserLoading},on:{click:t.addUserBtn}},[t._v("增 加")])],1)])],1)},i=[],s=n("2f62"),c=n("460e"),u=n("b199"),l=n("b8b9"),d=n("5889"),f=n("7e3c");function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function m(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */m=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),s=new T(r||[]);return a(i,"_invoke",{value:L(t,n,s)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",b="executing",v="completed",g={};function y(){}function w(){}function k(){}var _={};u(_,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(C([])));S&&S!==n&&r.call(S,i)&&(_=S);var x=k.prototype=y.prototype=Object.create(_);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(a,o,i,s){var c=d(t[a],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==p(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function L(e,n,r){var a=f;return function(o,i){if(a===b)throw new Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=N(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=b;var u=d(e,n,r);if("normal"===u.type){if(a=r.done?v:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function N(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,N(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(p(e)+" is not iterable")}return w.prototype=k,a(x,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:w,configurable:!0}),w.displayName=u(k,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,u(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},P(j.prototype),u(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new j(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},P(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function h(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,a)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){h(o,r,a,i,s,"next",t)}function s(t){h(o,r,a,i,s,"throw",t)}i(void 0)}))}}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e=w(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t){var e=k(t,"string");return"symbol"===p(e)?e:String(e)}function k(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var _=function(){return{pageNum:1,pageSize:10,sourceDefinitionId:"",sourceId:"",name:"",sourceName:"",createDate:"",updateDate:"",createBy:"",region:"",sortKey:"createTime",sortOrder:"desc"}},O={components:{SearchItem:c["a"]},props:{activeName:{type:String,default:"source"}},data:function(){return{permissionTypeList:[{label:"使用",value:"DESC CATALOG"},{label:"编辑",value:"ALTER CATALOG"},{label:"删除",value:"DROP CATALOG"}],props:{multiple:!0,value:"id",label:"name"},actorId:"",userTable:[],groupOptions:[],userGroupIds:[],addUserLoading:!1,addGroupLoading:!1,addGroupVisible:!1,permissionVisible:!1,permissionLoading:!1,savePermissionLoading:!1,optionList:[],isShowAll:!0,ownerLoading:!1,ownerList:[],params:_(),pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},total:0,tableData:[],loading:!1,model:null,fileList:[]}},computed:g(g({},Object(s["c"])(["userInfo","isAdmin","currentUserGroup"])),{},{rightWidth:function(){return this.isOpen?"calc(100% - 225px)":"calc(100% - 10px)"},text:function(){return this.isShowAll?"收起":"展开"}}),watch:{activeName:function(t,e){this.getDataSourceByPage()},permissionVisible:function(t){t&&this.getUserList()}},created:function(){this.getDataSourceByPage(),document.addEventListener("keyup",this.keyUpEnter)},beforeDestroy:function(){document.removeEventListener("keyup",this.keyUpEnter)},methods:{handelAddGroup:function(){this.addGroupVisible=!0,this.getGroupPage()},keyUpEnter:function(t){13===t.keyCode&&this.search()},addUserBtn:function(){var t,e=this;if(this.userGroupIds.length){var n=[];this.groupOptions.forEach((function(t){e.userGroupIds.includes(t.id)&&n.push(t)}));var r=this.userTable.map((function(t){var e=t.id;return e})).some((function(t){return!!n.find((function(e){return e.id===t}))}));r?this.$message({type:"warning",message:"选择的用户组存在已有的列表中"}):((t=this.userTable).push.apply(t,n),this.addGroupVisible=!1)}else this.$message({type:"warning",message:"请选择用户组"})},getUserList:function(){var t=this;this.userTable=[],this.permissionLoading=!0;var e={id:this.actorId};Object(d["g"])(e).then((function(e){t.userTable=e.data})).finally((function(){t.permissionLoading=!1}))},savePermission:function(){var t=this;this.savePermissionLoading=!0;var e={id:this.actorId,userGroupVoList:this.userTable};Object(d["i"])(e).then((function(e){0===e.code&&(t.$message.success("操作成功"),t.permissionVisible=!1)})).finally((function(){t.savePermissionLoading=!1}))},deleteUser:function(t){this.userTable.splice(t,1)},getGroupPage:function(){var t=this,e=this.userInfo||{},n=e.userGroup,r=void 0===n?[]:n,a=e.roles;if(a.includes("admin")){var o={tenantId:JSON.parse(sessionStorage.getItem("userInfo")).tenantId,name:"",pageNum:1,pageSize:1e4};Object(f["l"])(o).then((function(e){t.groupOptions=e.data.list||[]}))}else this.groupOptions=r.map((function(t){return g(g({},t),{},{actorPrivileges:[]})}))},showPermission:function(){var t=b(m().mark((function t(e){return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.actorId=e.sourceId,this.permissionVisible=!0;case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeGateSort:function(t){var e=t.order,n=t.prop;this.params.sortKey=n,this.params.sortOrder="descending"===e?"desc":"asc",this.search()},getDataSourceByPage:function(){var t=this,e=g({},this.params);e.sourceName&&"destination"===this.activeName&&(e["".concat(this.activeName,"Name")]=e.sourceName,e.sourceName=""),Object.keys(e).forEach((function(t){""===e[t]&&delete e[t]})),this.loading=!0,Object(d["h"])(e,this.activeName).then(function(){var e=b(m().mark((function e(n){var r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.data,t.total=r.total,t.tableData=r.list;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loading=!1}))},handleSizeChange:function(t){this.params.pageNum=1,this.params.pageSize=t,this.getDataSourceByPage()},changePage:function(t){this.params.pageNum=t,this.getDataSourceByPage()},resetParamsFn:function(){this.params.name="",this.params.sourceName="",this.params.region="",this.params.createDate="",this.params.updateDate="",this.params.createBy=""},remoteMethod:function(t){var e=this;""!==t?(this.ownerLoading=!0,Object(u["Y"])(t).then((function(t){var n=t.data;e.ownerLoading=!1,e.ownerList=n}))):this.ownerList=[]},listGetFn:function(){var t=b(m().mark((function t(){var e;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["c"])(this.activeName);case 2:return t.next=4,t.sent.data;case 4:e=t.sent,this.optionList=e.length>0?e.map((function(t){return{name:t.name,sourceDefinitionId:t.sourceDefinitionId}})):[];case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),toDetail:function(){var t=b(m().mark((function t(e){var n,r,a=arguments;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=a.length>1&&void 0!==a[1]?a[1]:"",r={activeName:this.activeName},e.sourceId&&(n&&(r.operate=n),r.id=e["".concat(this.activeName,"DefinitionId")],r.editId=e["".concat(this.activeName,"Id")]),this.$router.push({path:"/config/sourceInstance/sourceDetail",query:r});case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),indexMethod:function(t){return(this.params.pageNum-1)*this.params.pageSize+t+1},search:function(){this.params.pageNum=1,this.getDataSourceByPage()},handleDelete:function(t){var e=this;this.$confirm("确定删除此数据源?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n=y({},"".concat(e.activeName,"Id"),t["".concat(e.activeName,"Id")]);e.loading=!0,Object(d["c"])(n,e.activeName).then((function(t){e.$message.success("删除成功"),e.getDataSourceByPage()})).finally((function(){e.loading=!1}))})).catch((function(){}))}}},S=O,x=(n("5d2b"),n("2877")),P=Object(x["a"])(S,o,i,!1,null,"7a3f236c",null),j=P.exports,L={components:{TabPane:j},data:function(){return{activeName:"source"}},computed:{},watch:{},created:function(){},methods:{}},N=L,D=Object(x["a"])(N,r,a,!1,null,"1bf1d483",null);e["default"]=D.exports},d4ba:function(t,e,n){}}]);