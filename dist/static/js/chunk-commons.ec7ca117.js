(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-commons"],{"0357":function(e,t,a){},"042b":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",staticClass:"step-three",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-tabs",[a("el-tab-pane",{staticClass:"base-form",attrs:{label:"基本属性"}},[a("el-form-item",{staticClass:"name-item",attrs:{label:"任务名称","label-width":"110px",prop:"name"}},[a("el-popover",{attrs:{disabled:!e.nameDisabled,placement:"bottom",trigger:"hover","popper-class":"tag-popper"}},[["Mysql2Hive","File2Lakehouse"].includes(e.ruleForm.templateCode)?a("div",[e._v(e._s(e.ruleForm.name))]):a("div",[e._v("只有下线任务才可以修改任务名称")]),e._v(" "),a("el-input",{attrs:{slot:"reference",placeholder:e.namePlaceholder,disabled:e.nameDisabled,maxlength:["StreamingSQL","StreamingJAR","MysqlCDC2Hive","Metis2Hive","Db2Hive"].includes(e.ruleForm.templateCode)||e.ruleForm.isLakeHouseReal?45:60},on:{change:e.changeName},nativeOn:{keyup:function(t){return e.nameKeyUp(t)}},slot:"reference",model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("span",{staticClass:"name-tips"},[e._v(e._s(e.nameTips))])],1),e._v(" "),a("el-form-item",{attrs:{label:"任务描述","label-width":"110px"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1)],1),e._v(" "),e.ruleForm.isLakeHouseReal?e._e():a("div",[e.isShowDispatch&&"task"===e.source?a("el-tabs",[a("el-tab-pane",{attrs:{label:"调度配置"}},[a("el-form-item",{attrs:{label:"调度方式","label-width":"110px",prop:"triggerParam.isIrregularSheduler"}},[a("el-radio-group",{staticClass:"cron-input",attrs:{disabled:e.isWorkflow},on:{change:e.changeRegularSheduler},model:{value:e.ruleForm.triggerParam.isIrregularSheduler,callback:function(t){e.$set(e.ruleForm.triggerParam,"isIrregularSheduler",t)},expression:"ruleForm.triggerParam.isIrregularSheduler"}},[a("el-radio",{attrs:{label:1}},[e._v("周期调度")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("手动调度")])],1),e._v(" "),a("span",{staticClass:"tip"},[e._v("说明：周期调度将按照调度周期例行调度，手动调度则是指从任务列表不定时的去手动触发执行")])],1),e._v(" "),1===e.ruleForm.triggerParam.isIrregularSheduler?[a("el-form-item",{attrs:{label:"调度周期","label-width":"110px",prop:"triggerParam.outputGranularity"}},[a("el-select",{staticClass:"cron-input",attrs:{disabled:e.isWorkflow,placeholder:"请选择调度周期"},on:{change:e.changeOutputGranularity},model:{value:e.ruleForm.triggerParam.outputGranularity,callback:function(t){e.$set(e.ruleForm.triggerParam,"outputGranularity",t)},expression:"ruleForm.triggerParam.outputGranularity"}},e._l(e.cycleList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("span",{staticClass:"tip"},[e._v("说明：表示该任务以怎样的频率执行")])],1),e._v(" "),"minutely"===e.ruleForm.triggerParam.outputGranularity?a("el-form-item",{attrs:{label:"时间间隔","label-width":"110px",prop:"triggerParam.crontabParam.interval"}},[a("el-select",{staticClass:"cron-input",attrs:{placeholder:"请选择时间间隔",clearable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.interval,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"interval",t)},expression:"ruleForm.triggerParam.crontabParam.interval"}},e._l(e.intervalList,(function(e){return a("el-option",{key:e,attrs:{label:"每"+e,value:e}})})),1),e._v(" "),a("span",[e._v("分钟")])],1):e._e(),e._v(" "),"hourly"===e.ruleForm.triggerParam.outputGranularity?a("el-form-item",{attrs:{label:"定时调度时间","label-width":"110px",prop:"triggerParam.crontabParam.fixedTime"}},[a("el-select",{staticClass:"cron-input",attrs:{placeholder:"请选择定时调度时间",clearable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.fixedTime,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"fixedTime",t)},expression:"ruleForm.triggerParam.crontabParam.fixedTime"}},e._l(e.minuteList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),e._v(" "),a("span",[e._v("分")])],1):e._e(),e._v(" "),e.isShowRange?a("el-form-item",{key:"range",attrs:{label:"指定天","label-width":"110px",prop:"triggerParam.crontabParam.range"}},[a("el-select",{staticClass:"cron-input",attrs:{placeholder:"请选择指定时间",multiple:"",clearable:"",filterable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.range,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"range",t)},expression:"ruleForm.triggerParam.crontabParam.range"}},e._l(e.rangeList,(function(t){return a("el-option",{key:t,attrs:{label:e.formatRangeLabel(t,e.ruleForm.triggerParam.outputGranularity),value:t}})})),1)],1):e._e(),e._v(" "),e.isShowFixed?a("el-form-item",{attrs:{label:"定时调度时间","label-width":"110px",prop:"triggerParam.crontabParam.fixedTime"}},[a("el-time-picker",{staticClass:"cron-input",attrs:{placeholder:"请选择定时调度时间",format:"HH:mm","value-format":"HH:mm",clearable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.fixedTime,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"fixedTime",t)},expression:"ruleForm.triggerParam.crontabParam.fixedTime"}})],1):e._e(),e._v(" "),"hourly"===e.ruleForm.triggerParam.outputGranularity||"minutely"===e.ruleForm.triggerParam.outputGranularity?[a("el-form-item",{attrs:{label:"高级配置","label-width":"110px"}},[a("el-checkbox",{on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.advancedSetting,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"advancedSetting",t)},expression:"ruleForm.triggerParam.crontabParam.advancedSetting"}})],1),e._v(" "),e.ruleForm.triggerParam.crontabParam.advancedSetting?["minutely"===e.ruleForm.triggerParam.outputGranularity?[a("el-form-item",{attrs:{label:"开始时间","label-width":"110px"}},[a("el-time-picker",{staticClass:"cron-input",attrs:{placeholder:"请选择开始时间","picker-options":e.startMinPicker,"default-value":e.startDefaultValue,format:"HH:mm","value-format":"HH:mm",clearable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.startTime,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"startTime",t)},expression:"ruleForm.triggerParam.crontabParam.startTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间","label-width":"110px"}},[a("el-time-picker",{staticClass:"cron-input",attrs:{placeholder:"请选择结束时间","picker-options":e.endMinPicker,"default-value":e.endDefaultValue,format:"HH:mm","value-format":"HH:mm",clearable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.endTime,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"endTime",t)},expression:"ruleForm.triggerParam.crontabParam.endTime"}})],1)]:e._e(),e._v(" "),"hourly"===e.ruleForm.triggerParam.outputGranularity?a("el-form-item",{attrs:{label:"","label-width":"80px"}},[a("el-radio-group",{staticClass:"hour-radio",on:{change:e.changeIsRange},model:{value:e.isRange,callback:function(t){e.isRange=t},expression:"isRange"}},[a("el-radio",{attrs:{label:!0}},[a("el-form-item",{key:"range",attrs:{label:"指定小时","label-width":"90px",prop:e.isRange?"triggerParam.crontabParam.range":""}},[a("el-select",{staticClass:"cron-input",attrs:{placeholder:"请选择指定时间",disabled:!e.isRange,multiple:"",clearable:"",filterable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.range,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"range",t)},expression:"ruleForm.triggerParam.crontabParam.range"}},e._l(e.rangeList,(function(e){return a("el-option",{key:e,attrs:{label:e+"时",value:e}})})),1)],1)],1),e._v(" "),a("br"),e._v(" "),a("el-radio",{attrs:{label:!1}},[a("el-form-item",{key:"interval",attrs:{label:"时间间隔","label-width":"90px",prop:e.isRange?"":"triggerParam.crontabParam.interval"}},[a("el-select",{staticClass:"cron-input",attrs:{placeholder:"请选择时间间隔",disabled:e.isRange,clearable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.interval,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"interval",t)},expression:"ruleForm.triggerParam.crontabParam.interval"}},e._l(e.intervalList,(function(e){return a("el-option",{key:e,attrs:{label:"每"+e,value:e}})})),1),e._v(" "),a("span",[e._v("小时")])],1),e._v(" "),a("el-form-item",{key:"startTime",attrs:{label:"开始时间","label-width":"90px"}},[a("el-time-picker",{staticClass:"cron-input",attrs:{placeholder:"请选择开始时间","picker-options":e.startPicker,"default-value":e.startDefaultValue,disabled:e.isRange,format:"HH:mm","value-format":"HH:mm",clearable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.startTime,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"startTime",t)},expression:"ruleForm.triggerParam.crontabParam.startTime"}})],1),e._v(" "),a("el-form-item",{key:"endTime",attrs:{label:"结束时间","label-width":"90px"}},[a("el-time-picker",{staticClass:"cron-input",attrs:{placeholder:"请选择结束时间","picker-options":e.endPicker,"default-value":e.endDefaultValue,disabled:e.isRange,format:"HH:mm","value-format":"HH:mm",clearable:""},on:{change:e.changeCron},model:{value:e.ruleForm.triggerParam.crontabParam.endTime,callback:function(t){e.$set(e.ruleForm.triggerParam.crontabParam,"endTime",t)},expression:"ruleForm.triggerParam.crontabParam.endTime"}})],1)],1)],1)],1):e._e()]:e._e()]:e._e(),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"cron表达式","label-width":"110px"}},[a("div",[e._v("\n                "+e._s(e.ruleForm.triggerParam.crontab)+"\n                "),a("el-button",{staticClass:"cron-btn",attrs:{type:"text",size:"mini",loading:e.btnLoad},on:{click:e.getUtc0}},[e._v("查看utc0转换时间")])],1)]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"26px"},attrs:{type:"text",size:"mini",loading:e.btnLoad2},on:{click:e.getTime}},[e._v("查看接下来7次执行时间")])]:e._e()],2)],1):e._e(),e._v(" "),a("el-tabs",[a("el-tab-pane",{attrs:{label:"前置依赖"}},[a("template",{slot:"label"},[e._v("\n            前置依赖\n            "),a("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"tag-popper"}},[e._v("\n              提示：如果设置了前置依赖，则只有当前置依赖就绪时，任务才会执行\n              "),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),e.isShowDependRefresh?a("i",{staticClass:"el-icon-refresh",staticStyle:{"margin-left":"4px"},on:{click:function(t){return e.$emit("dependReresh")}}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"依赖类型","label-width":"110px",prop:"dependTypes"}},[a("el-checkbox-group",{attrs:{disabled:!e.isShowDispatch},on:{change:e.changeDepend},model:{value:e.ruleForm.dependTypes,callback:function(t){e.$set(e.ruleForm,"dependTypes",t)},expression:"ruleForm.dependTypes"}},[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.isShowDispatch,expression:"isShowDispatch"}],attrs:{label:"event"}},[e._v("\n                内部依赖\n                "),a("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"tag-popper"}},[e._v("\n                  提示：当需要将本平台产出的任务/数据集作为前置依赖时，可选择此项；\n                  "),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),a("el-checkbox",{attrs:{label:"dataset"}},[e._v("\n                外部依赖\n                "),a("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"tag-popper"}},[e._v("\n                  提示：当需要将非本平台产出的数据集作为前置依赖时，可选择此项；\n                  "),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1)],1)],1),e._v(" "),e.ruleForm.dependTypes.includes("event")?a("div",{staticClass:"depend-wrap"},[a("div",{staticClass:"table-title"},[a("h4",{staticClass:"title"},[e._v("内部依赖设置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addEvent}},[e._v("+")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.eventLoading,expression:"eventLoading"}],staticClass:"table",attrs:{data:e.ruleForm.eventDepends,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务ID",prop:"taskId","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                    "+e._s(t.row.taskId)),a("span",{staticClass:"color-red"},[e._v(e._s(t.row.isDelete?"(已删除)":""))])])]}}],null,!1,3559581486)}),e._v(" "),a("el-table-column",{attrs:{label:"任务名称",prop:"dependId","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.dependId,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.dependId||"-"))])])]}}],null,!1,1083719517)}),e._v(" "),a("el-table-column",{attrs:{label:"任务周期",prop:"granularity","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatGranularty(t.row.granularity)))]}}],null,!1,2724126934)}),e._v(" "),a("el-table-column",{attrs:{label:"产出数据集",prop:"metadataId","min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.metadataId,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.metadataId||"-"))])])]}}],null,!1,1864441597)}),e._v(" "),a("el-table-column",{attrs:{label:"偏移量",prop:"dateCalculationParam","min-width":"180",align:"left","header-align":"center"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n                  偏移量\n                  "),a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handelInfo("offset_num","偏移量设置说明")}}})]},proxy:!0},{key:"default",fn:function(t){return[a("el-button",{style:t.row.useDateCalcuParam?"position:relative;top:-4px;":"",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.offsetConfig("eventDepends",t.row,t.$index)}}},[e._v("设置")]),e._v(" "),a("div",{staticClass:"popover-text",attrs:{slot:"reference"},slot:"reference"},[t.row.useDateCalcuParam?[a("el-tooltip",[e._l(t.row.dateCalculationParam,(function(t,r){return a("span",{key:r,attrs:{slot:"content"},slot:"content"},[e._v("\n                          "+e._s("range"===t.type&&0===t.range.length?"":e.dataMap[r]+":")+" "+e._s("offset"===t.type?"偏移"+t.unitOffset+";":t.range.length?"指定"+t.range.join(",")+";":"")+"\n                        ")])})),e._v(" "),a("div",{staticClass:"ellipsis"},e._l(t.row.dateCalculationParam,(function(t,r){return a("span",{key:r},[e._v("\n                            "+e._s("range"===t.type&&0===t.range.length?"":e.dataMap[r]+":")+" "+e._s("offset"===t.type?"偏移"+t.unitOffset+";":t.range.length?"指定"+t.range.join(",")+";":"")+"\n                          ")])})),0)],2)]:a("span",{staticClass:"i-block"},[e._v(e._s(t.row.unitOffset))])],2)]}}],null,!1,1750652631)}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.delEvent(t.$index)}}},[e._v("删除")])]}}],null,!1,571343444)})],1)],1):e._e(),e._v(" "),e.ruleForm.dependTypes.includes("dataset")?a("div",{staticClass:"depend-wrap"},[a("div",{staticClass:"table-title"},[a("h4",{staticClass:"title"},[e._v("外部依赖设置")]),e._v(" "),e.isShowInputBtn?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addData}},[e._v("+")]):e._e()],1),e._v(" "),a("el-table",{key:e.inputDatasetKey,staticClass:"table",attrs:{data:e.ruleForm.inputDataset,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),e._v(" "),e.isJar?[a("el-table-column",{attrs:{label:"数据集","min-width":"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"table-cell"},[a("el-button",{staticClass:"btn-check",attrs:{type:"text"},on:{click:function(a){return e.switchClick(t.row)}}},[e._v(e._s(t.row.isMetadataSel?"自定义数据集":"筛选数据集"))]),e._v(" "),!1===t.row.isMetadataSel?a("el-form-item",{attrs:{prop:"inputDataset."+t.$index+".id",rules:[{required:!0,message:"请输入自定义数据集",trigger:"change"}]}},[a("el-input",{attrs:{placeholder:"请输入数据集",title:t.row.id,clearable:""},on:{blur:function(a){return e.handleBlur(t.row.id,t.row)}},model:{value:t.row.id,callback:function(a){e.$set(t.row,"id",a)},expression:"scope.row.id"}})],1):a("el-form-item",{attrs:{prop:"inputDataset."+t.$index+".metadata.table",rules:[{required:!0,message:"请选择数据集",trigger:"change"}]}},[a("el-cascader",{ref:"inputDataset"+t.$index,attrs:{placeholder:"请选择数据集",title:t.row.metadata.table,"show-all-levels":!1,"owner-list":e.metadataOptions,props:e.props,filterable:"",clearable:""},on:{change:function(a){return e.handleChange(a,t.row)}},model:{value:t.row.completePath,callback:function(a){e.$set(t.row,"completePath",a)},expression:"scope.row.completePath"}})],1)],1)}}],null,!1,4102663107)})]:[e.isShowDb?a("el-table-column",{attrs:{label:"数据库","min-width":"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isInputEdit?a("el-form-item",{attrs:{prop:"inputDataset."+t.$index+".metadata.db",rules:[{required:!0,message:"请选择数据库",trigger:"change"}]}},[a("el-tooltip",{attrs:{disabled:!t.row.metadata.db,content:t.row.metadata.db}},[a("el-select",{attrs:{placeholder:"请选择数据库",filterable:"","allow-create":["Hive2Hive","PythonShell","Hive2Redis","Hive2Redshift","Hive2File","TfJob","DataMigration"].includes(e.ruleForm.templateCode),"default-first-option":"",clearable:""},on:{change:function(a){return e.changeDb(a,t.row)}},model:{value:t.row.metadata.db,callback:function(a){e.$set(t.row.metadata,"db",a)},expression:"scope.row.metadata.db"}},e._l(e.sourceDbList,(function(e){return a("el-option",{key:e.name,attrs:{value:e.name,label:e.name}},[a("ellipsis-tooltip",{attrs:{text:e.name}})],1)})),1)],1)],1):a("el-tooltip",{attrs:{content:t.row.metadata.db,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.metadata.db||"-"))])])]}}],null,!1,3084700075)}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"表名称","min-width":"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"table-cell"},[e.isInputEdit?a("el-form-item",{staticClass:"table-select",attrs:{prop:"inputDataset."+t.$index+".metadata.table",rules:[{required:!0,message:"请选择表名称",trigger:"change"}]}},[a("el-tooltip",{attrs:{disabled:!t.row.metadata.table,content:t.row.metadata.table}},[a("el-select",{attrs:{placeholder:"请选择表名称",filterable:"","allow-create":["Hive2Hive","PythonShell","Hive2Redis","Hive2Redshift","Hive2File","TfJob","DataMigration"].includes(e.ruleForm.templateCode),"default-first-option":"",clearable:"","loading-text":"加载中...","no-data-text":"加载中..."},on:{change:function(a){return e.changeTable(a,t.row,t.$index,e.ruleForm.inputDataset)}},model:{value:t.row.metadata.table,callback:function(a){e.$set(t.row.metadata,"table",a)},expression:"scope.row.metadata.table"}},e._l(t.row.sourceTableList,(function(e){return a("el-option",{key:e.name,attrs:{value:e.name,label:e.name}},[a("ellipsis-tooltip",{attrs:{text:e.name}})],1)})),1)],1)],1):a("el-tooltip",{attrs:{content:t.row.metadata.table,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.metadata.table||"-"))])])],1)}}],null,!1,554489730)})],e._v(" "),e.isShowDispatch?e._e():[a("el-table-column",{attrs:{label:"数据类型","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(1===t.row.isExternal?"外部数据":"内部数据")+"\n                  ")]}}],null,!1,1742047552)}),e._v(" "),a("el-table-column",{attrs:{label:"数据周期","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"inputDataset."+t.$index+".granularity",rules:[{required:!0,message:"请选择数据粒度",trigger:"change"}]}},[e.isShowInputCheck?a("el-select",{attrs:{placeholder:"请选择数据粒度",clearable:""},on:{change:function(a){return e.changeGranularity(a,t.row)}},model:{value:t.row.granularity,callback:function(a){e.$set(t.row,"granularity",a)},expression:"scope.row.granularity"}},e._l(t.row.granularityList,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1):a("el-select",{attrs:{placeholder:"请选择数据粒度",clearable:""},on:{change:function(a){return e.changeGranularity(a,t.row)}},model:{value:t.row.granularity,callback:function(a){e.$set(t.row,"granularity",a)},expression:"scope.row.granularity"}},e._l(e.granularityList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.englishName,label:e.englishName}})})),1),e._v(" "),a("Crontab",{ref:"crontab",staticStyle:{display:"none"},attrs:{"time-unit":t.row.granularity,"unit-disabled":!0},model:{value:t.row.ready_time,callback:function(a){e.$set(t.row,"ready_time",a)},expression:"scope.row.ready_time"}})],1)]}}],null,!1,3126252972)}),e._v(" "),a("el-table-column",{attrs:{label:"偏移量","min-width":"165",align:"center"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n                    偏移量\n                    "),a("el-tooltip",{attrs:{"popper-class":"custom-tip",effect:"light",content:"任务依赖多少个粒度之前的数据。负表示之前，正数表示之后",placement:"bottom"}},[a("i",{staticClass:"el-icon-info"})])]},proxy:!0},{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"bottom",width:"371",trigger:"click",tabindex:t.$index},on:{show:function(a){return e.showPoppver(t.row)}}},[a("div",[a("el-radio-group",{model:{value:e.isSingleOffset,callback:function(t){e.isSingleOffset=t},expression:"isSingleOffset"}},[a("el-radio",{attrs:{label:!0}},[e._v("单一偏移")]),e._v(" "),a("el-radio",{attrs:{label:!1}},[e._v("连续偏移")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("span",[e._v("偏移量：")]),e._v(" "),e.isSingleOffset?a("el-input-number",{attrs:{size:"mini",label:"描述文字"},model:{value:e.singleOffset,callback:function(t){e.singleOffset=t},expression:"singleOffset"}}):[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:-168,max:e.maxRangeValue},model:{value:e.minRangeValue,callback:function(t){e.minRangeValue=t},expression:"minRangeValue"}}),e._v(" ~\n                            "),a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:e.minRangeValue,max:168},model:{value:e.maxRangeValue,callback:function(t){e.maxRangeValue=t},expression:"maxRangeValue"}})]],2)],1),e._v(" "),a("div",{staticClass:"popover-footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.closePopover}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.savePopover(t.row)}}},[e._v("确定")])],1),e._v(" "),a("div",{staticClass:"popover-text",attrs:{slot:"reference"},slot:"reference"},[t.row.useDateCalcuParam?a("div",e._l(t.row.dateCalculationParam,(function(t,r){return a("span",{key:r},[e._v(" "+e._s(e.dataMap[r])+": "+e._s("offset"===t.type?"偏移"+t.unitOffset:"指定"+t.range.join(","))+"; ")])})),0):a("span",{staticClass:"i-block"},[e._v(e._s(t.row.unitOffset))])])]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.seniorConfig("inputDataset",t.row,t.$index)}}},[e._v("高级配置")])]}}],null,!1,3462229570)})],e._v(" "),e.isShowInputCheck?e._e():a("el-table-column",{attrs:{label:"完成时间","min-width":"120",align:"center"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n                  完成时间\n                  "),a("el-tooltip",{attrs:{"popper-class":"custom-tip",effect:"light",content:"当该数据的生产任务不在本平台，每个周期该完成时间默认该粒度的数据准备就绪",placement:"bottom"}},[a("i",{staticClass:"el-icon-question"})])]},proxy:!0},{key:"default",fn:function(t){return[a("Crontab",{ref:"crontab",attrs:{"time-unit":t.row.granularity,"unit-disabled":!0,"input-class":"crontab-class"},model:{value:t.row.ready_time,callback:function(a){e.$set(t.row,"ready_time",a)},expression:"scope.row.ready_time"}})]}}],null,!1,2488318472)}),e._v(" "),e.isShowInputCheck?a("el-table-column",{attrs:{label:"设置依赖就绪条件","min-width":"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{position:"relative",top:"-4px"},attrs:{type:"text",size:"mini"},on:{click:function(a){return e.set(t.$index,t.row)}}},[e._v("设置")]),e._v(" "),a("el-tooltip",{attrs:{disabled:!t.row.check_path,content:t.row.check_path,placement:"bottom"}},[t.row.check_path?a("div",{staticClass:"td-border ellipsis"},[e._v(e._s(t.row.check_path))]):t.row.success_time?a("div",{staticClass:"td-border ellipsis"},[e._v(e._s(t.row.success_time)+" "),-1===t.row.success_time.indexOf(":")?a("span",[e._v("分")]):e._e()]):e._e()])]}}],null,!1,2979518981)}):e._e(),e._v(" "),e.isShowInputBtn||e.isShowInputCheck?a("el-table-column",{attrs:{label:"操作","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isShowInputBtn?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.delData(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,3425397280)}):e._e()],2)],1):e._e()],2)],1),e._v(" "),e.isDataSet2?a("el-tabs",[a("el-tab-pane",{attrs:{label:"生成数据集信息"}},[a("template",{slot:"label"},[e._v("\n            生成数据集信息\n            "),a("span",{staticClass:"tips",on:{click:function(t){return e.handelInfo("data_info","生成数据集信息说明")}}},[e._v("说明")]),e._v(" "),e.isShowDependRefresh?a("i",{staticClass:"el-icon-refresh",staticStyle:{"margin-left":"4px"},on:{click:function(t){return e.$emit("dependReresh")}}}):e._e()]),e._v(" "),a("el-table",{key:e.outputDatasetKey,staticClass:"table",attrs:{data:e.ruleForm.outputDataset,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),e._v(" "),[a("el-table-column",{attrs:{label:"库名称","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.metadata.db||"-"))])]}}],null,!1,2627744110)}),e._v(" "),a("el-table-column",{attrs:{label:"表名称","min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"table-cell"},[a("div",[e._v(e._s(t.row.metadata.table))])])}}],null,!1,2310492917)})]],2),e._v(" "),"Mysql2Hive"!==e.ruleForm.templateCode?a("div",[a("GeneratePathFrom",{ref:"GeneratePathFrom",attrs:{name:e.ruleForm.name,"rule-form":e.ruleForm.outputDataset[0]}})],1):e._e()],2)],1):e._e(),e._v(" "),e.isDataSet1&&"Mysql2Hive"!==e.ruleForm.templateCode?a("el-tabs",[a("el-tab-pane",{attrs:{label:"生成标志"}},[a("GeneratePathFrom",{ref:"GeneratePathFrom",staticClass:"GeneratePathFrom",attrs:{name:e.ruleForm.name,"rule-form":e.ruleForm.outputDataset[0]}})],1)],1):e._e()],1),e._v(" "),["Hive2Hive","DataMigration","SPARKJAR","Hive2Clickhouse","Hive2Mysql","Hive2Doris","Hive2Redis","Hive2Redshift","Hive2Sharestore","PythonShell","Hive2File","File2Lakehouse"].includes(e.ruleForm.templateCode)||"Mysql2Hive"===e.ruleForm.templateCode&&!e.ruleForm.isLakeHouseReal?a("el-form",{key:"seniorForm",ref:"seniorFormDom",staticClass:"step-three",attrs:{model:e.seniorForm}},[a("el-tabs",[a("el-tab-pane",{attrs:{label:"告警策略"}},[a("el-form-item",{staticClass:"other-param",attrs:{label:"告警类型"}},[1===e.ruleForm.triggerParam.isIrregularSheduler&&"minutely"!==e.ruleForm.triggerParam.outputGranularity&&"workflow"!==e.source?a("span",{staticClass:"check-text"},[a("el-checkbox",{staticStyle:{"margin-right":"3px"},on:{change:function(t){return e.checkChange(e.seniorForm.regularAlert.isChecked,"timer")}},model:{value:e.seniorForm.regularAlert.isChecked,callback:function(t){e.$set(e.seniorForm.regularAlert,"isChecked",t)},expression:"seniorForm.regularAlert.isChecked"}}),e._v(" "),a("span",{staticClass:"tab",class:{activeText:"timer"===e.alertTypeValue},on:{click:function(t){return e.checkAlertType("timer")}}},[e._v("\n                定时告警\n                "),a("el-popover",{attrs:{trigger:"hover",placement:"top","popper-class":"tag-popper"}},[e._v("\n                  提示：在任务的每个调度周期内，当在指定的“检查时间”下“触发条件”被满足，将通过指定的“告警渠道”发送一条通知信息到任务owner（如果勾选了协作人，则同时发送）；反之，则不发送通知信息；\n                  "),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1)],1):e._e(),e._v(" "),a("span",{staticClass:"check-text"},[a("el-checkbox",{staticStyle:{"margin-right":"3px"},on:{change:function(t){return e.checkChange(e.seniorForm.alertModel["success"].isChecked,"success")}},model:{value:e.seniorForm.alertModel["success"].isChecked,callback:function(t){e.$set(e.seniorForm.alertModel["success"],"isChecked",t)},expression:"seniorForm.alertModel['success'].isChecked"}}),e._v(" "),a("span",{staticClass:"tab",class:{activeText:"success"===e.alertTypeValue},on:{click:function(t){return e.checkAlertType("success")}}},[e._v("任务成功时")])],1),e._v(" "),a("span",{staticClass:"check-text"},[a("el-checkbox",{staticStyle:{"margin-right":"3px"},on:{change:function(t){return e.checkChange(e.seniorForm.alertModel["failure"].isChecked,"failure")}},model:{value:e.seniorForm.alertModel["failure"].isChecked,callback:function(t){e.$set(e.seniorForm.alertModel["failure"],"isChecked",t)},expression:"seniorForm.alertModel['failure'].isChecked"}}),e._v(" "),a("span",{staticClass:"tab",class:{activeText:"failure"===e.alertTypeValue},on:{click:function(t){return e.checkAlertType("failure")}}},[e._v("任务失败时")])],1),e._v(" "),a("span",{staticClass:"check-text"},[a("el-checkbox",{staticStyle:{"margin-right":"3px"},on:{change:function(t){return e.checkChange(e.seniorForm.alertModel["retry"].isChecked,"retry")}},model:{value:e.seniorForm.alertModel["retry"].isChecked,callback:function(t){e.$set(e.seniorForm.alertModel["retry"],"isChecked",t)},expression:"seniorForm.alertModel['retry'].isChecked"}}),e._v(" "),a("span",{staticClass:"tab",class:{activeText:"retry"===e.alertTypeValue},on:{click:function(t){return e.checkAlertType("retry")}}},[e._v("任务重试时")])],1),e._v(" "),a("span",{staticClass:"check-text"},[a("el-checkbox",{staticStyle:{"margin-right":"3px"},on:{change:function(t){return e.checkChange(e.seniorForm.alertModel["start"].isChecked,"start")}},model:{value:e.seniorForm.alertModel["start"].isChecked,callback:function(t){e.$set(e.seniorForm.alertModel["start"],"isChecked",t)},expression:"seniorForm.alertModel['start'].isChecked"}}),e._v(" "),a("span",{staticClass:"tab",class:{activeText:"start"===e.alertTypeValue},on:{click:function(t){return e.checkAlertType("start")}}},[e._v("任务开始时")])],1)]),e._v(" "),e.showAlartModel?a("div",{staticClass:"alert-method-box",class:{noReg:!e.isAlertReg}},[e.alertList.length?a("el-form-item",{attrs:{label:"告警渠道","label-width":"110px",size:"mini",required:!0}},[a("el-checkbox-group",{on:{change:e.checkTypeChange},model:{value:e.seniorForm.alertModel[e.alertTypeValue].alertType,callback:function(t){e.$set(e.seniorForm.alertModel[e.alertTypeValue],"alertType",t)},expression:"seniorForm.alertModel[alertTypeValue].alertType"}},e._l(e.alertList,(function(t,r){return a("el-checkbox",{key:r,staticStyle:{"margin-right":"10px !important"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1):e._e(),e._v(" "),e.seniorForm.alertModel[e.alertTypeValue].alertType.length?a("div",[e.seniorForm.alertModel[e.alertTypeValue].alertType.includes("email")?a("div",{staticClass:"alert-method-box"},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"邮件接收人：","label-width":"130px",size:"mini",prop:"alertModel."+e.alertTypeValue+".emailReceivers",rules:[{required:!0,message:"请选择邮件接收人",trigger:["blur","change"]}]}},[a("el-select",{staticClass:"search-input",staticStyle:{"min-width":"300px"},attrs:{placeholder:"请选择邮件接收人",size:"small",clearable:"",filterable:"",remote:"",multiple:"","reserve-keyword":"","value-key":"shareId","remote-method":e.remoteMethod,loading:e.ownerLoading,"popper-class":"custom-popper"},on:{change:e.alertWayChange},model:{value:e.seniorForm.alertModel[e.alertTypeValue].emailReceivers,callback:function(t){e.$set(e.seniorForm.alertModel[e.alertTypeValue],"emailReceivers",t)},expression:"seniorForm.alertModel[alertTypeValue].emailReceivers"}},e._l(e.ownerList,(function(t){return a("el-option",{key:t.email+Math.random(),attrs:{value:t,label:t.email}},[a("div",{staticStyle:{"max-width":"420px","word-break":"break-all"}},[e._v(e._s(t.email))])])})),1)],1)],1):e._e(),e._v(" "),e.seniorForm.alertModel[e.alertTypeValue].alertType.includes("wechat")?a("div",{staticClass:"alert-method-box"},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"微信群token：","label-width":"130px",size:"mini",prop:"alertModel."+e.alertTypeValue+".wechatRobotKey",rules:[{required:!0,message:"请填写微信群token",trigger:["blur","change"]}]}},[a("el-select",{staticClass:"search-input",staticStyle:{"min-width":"300px"},attrs:{placeholder:"请选择Token",size:"small",clearable:"",filterable:"","popper-class":"custom-popper"},on:{change:e.alertWayChange},model:{value:e.seniorForm.alertModel[e.alertTypeValue].wechatRobotKey,callback:function(t){e.$set(e.seniorForm.alertModel[e.alertTypeValue],"wechatRobotKey",t)},expression:"seniorForm.alertModel[alertTypeValue].wechatRobotKey"}},e._l(e.tokenList,(function(e){return a("el-option",{key:e.id+Math.random(),attrs:{value:e.token,label:e.name}})})),1),e._v(" "),a("a",{staticClass:"token-tip",attrs:{target:"_blank",href:"https://shimo.im/docs/rp3OVQDlyKu99bAm"}},[e._v("怎么获取token?")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"此群需要@：","label-width":"130px",size:"mini",prop:"alertModel."+e.alertTypeValue+".wechatReceivers",rules:[{required:!0,message:"请选择微信群@对象",trigger:["blur","change"]}]}},[a("el-select",{staticClass:"search-input",staticStyle:{"min-width":"300px"},attrs:{placeholder:"请选择@对象",size:"small",clearable:"",filterable:"",remote:"",multiple:"","reserve-keyword":"","value-key":"shareId","remote-method":e.remoteMethod,loading:e.ownerLoading,"popper-class":"custom-popper"},on:{change:e.alertWayChange},model:{value:e.seniorForm.alertModel[e.alertTypeValue].wechatReceivers,callback:function(t){e.$set(e.seniorForm.alertModel[e.alertTypeValue],"wechatReceivers",t)},expression:"seniorForm.alertModel[alertTypeValue].wechatReceivers"}},e._l(e.ownerList,(function(t){return a("el-option",{key:t.shareId+Math.random(),attrs:{value:t,label:t.shareId}},[a("div",{staticStyle:{"max-width":"420px","word-break":"break-all"}},[e._v("("+e._s(t.staffId)+")-"+e._s(t.name)+e._s(t.deptFullPath?"-"+t.deptFullPath:""))])])})),1)],1)],1):e._e()]):e._e()],1):e._e(),e._v(" "),e.showRegularAlert?a("div",{staticClass:"alert-method-box",class:{noReg:!e.isAlertReg}},[a("el-form-item",{attrs:{label:"检查时间","label-width":"110px"}},[a("div",{staticClass:"check-time-box"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.checkTime,callback:function(t){e.checkTime=t},expression:"checkTime"}},e._l(e.checkTimeArr,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),a("div",{staticClass:"check-time-group"},["本周期后"===e.checkTime?a("span",[e._v(" 第"),a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},model:{value:e.seniorForm.regularAlert.offset,callback:function(t){e.$set(e.seniorForm.regularAlert,"offset",t)},expression:"seniorForm.regularAlert.offset"}}),e._v("个周期 ")],1):e._e(),e._v(" "),"weekly"===e.ruleForm.triggerParam.outputGranularity?a("span",{key:"weekly"},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.timeGroup.week,callback:function(t){e.$set(e.timeGroup,"week",t)},expression:"timeGroup.week"}},e._l(e.weekList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),"monthly"===e.ruleForm.triggerParam.outputGranularity?a("span",{key:"monthly"},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.timeGroup.date,callback:function(t){e.$set(e.timeGroup,"date",t)},expression:"timeGroup.date"}},e._l(e.dayList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v("\n                    号\n                  ")],1):e._e(),e._v(" "),["monthly","weekly","daily"].includes(e.ruleForm.triggerParam.outputGranularity)?a("span",{key:"daily"},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.timeGroup.hour,callback:function(t){e.$set(e.timeGroup,"hour",t)},expression:"timeGroup.hour"}},e._l(e.hourList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v("\n                    时\n                  ")],1):e._e(),e._v(" "),["monthly","weekly","daily","hourly"].includes(e.ruleForm.triggerParam.outputGranularity)?a("span",{key:"hourly"},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.timeGroup.minute,callback:function(t){e.$set(e.timeGroup,"minute",t)},expression:"timeGroup.minute"}},e._l(e.minuteList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v("\n                    分\n                  ")],1):e._e()])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"触发条件","label-width":"110px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.seniorForm.regularAlert.triggerCondition,callback:function(t){e.$set(e.seniorForm.regularAlert,"triggerCondition",t)},expression:"seniorForm.regularAlert.triggerCondition"}},e._l(e.triggerConditionArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),e.alertList.length?a("el-form-item",{attrs:{label:"告警渠道","label-width":"110px",size:"mini",rules:[{required:!0,message:"请选择告警渠道",trigger:["blur","change"]}]}},[a("el-checkbox-group",{on:{change:e.checkTypeChange},model:{value:e.seniorForm.regularAlert.alertType,callback:function(t){e.$set(e.seniorForm.regularAlert,"alertType",t)},expression:"seniorForm.regularAlert.alertType"}},e._l(e.alertList,(function(t,r){return a("el-checkbox",{key:r,staticStyle:{"margin-right":"10px !important"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1):e._e(),e._v(" "),e.seniorForm.regularAlert.alertType.length?a("div",[e.seniorForm.regularAlert.alertType.includes("email")?a("div",{staticClass:"alert-method-box"},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"邮件接收人：","label-width":"130px",size:"mini",prop:"regularAlert.emailReceivers",rules:[{required:!0,message:"请选择邮件接收人",trigger:["blur","change"]}]}},[a("el-select",{staticClass:"search-input",staticStyle:{"min-width":"300px"},attrs:{placeholder:"请选择邮件接收人",size:"small",clearable:"",filterable:"",remote:"","reserve-keyword":"",multiple:"","value-key":"shareId","remote-method":e.remoteMethod,loading:e.ownerLoading,"popper-class":"custom-popper"},on:{change:e.alertWayChange},model:{value:e.seniorForm.regularAlert.emailReceivers,callback:function(t){e.$set(e.seniorForm.regularAlert,"emailReceivers",t)},expression:"seniorForm.regularAlert.emailReceivers"}},e._l(e.ownerList,(function(t){return a("el-option",{key:t.email+Math.random(),attrs:{value:t,label:t.email}},[a("div",{staticStyle:{"max-width":"420px","word-break":"break-all"}},[e._v(e._s(t.email))])])})),1)],1)],1):e._e(),e._v(" "),e.seniorForm.regularAlert.alertType.includes("wechat")?a("div",{staticClass:"alert-method-box"},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"微信群token：","label-width":"130px",size:"mini",prop:"regularAlert.wechatRobotKey",rules:[{required:!0,message:"请填写微信群token",trigger:["blur","change"]}]}},[a("el-select",{staticClass:"search-input",staticStyle:{"min-width":"300px"},attrs:{placeholder:"请选择Token",size:"small",clearable:"",filterable:"","popper-class":"custom-popper"},on:{change:e.alertWayChange},model:{value:e.seniorForm.regularAlert.wechatRobotKey,callback:function(t){e.$set(e.seniorForm.regularAlert,"wechatRobotKey",t)},expression:"seniorForm.regularAlert.wechatRobotKey"}},e._l(e.tokenList,(function(e){return a("el-option",{key:e.id+Math.random(),attrs:{value:e.token,label:e.name}})})),1),e._v(" "),a("a",{staticClass:"token-tip",attrs:{target:"_blank",href:"https://shimo.im/docs/rp3OVQDlyKu99bAm"}},[e._v("怎么获取token?")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"此群需要@：","label-width":"130px",size:"mini",prop:"regularAlert.wechatReceivers",rules:[{required:!0,message:"请选择微信群@对象",trigger:["blur","change"]}]}},[a("el-select",{staticClass:"search-input",staticStyle:{"min-width":"300px"},attrs:{placeholder:"请选择@对象",size:"small",clearable:"",filterable:"",remote:"",multiple:"","reserve-keyword":"","value-key":"shareId","remote-method":e.remoteMethod,loading:e.ownerLoading,"popper-class":"custom-popper"},on:{change:e.alertWayChange},model:{value:e.seniorForm.regularAlert.wechatReceivers,callback:function(t){e.$set(e.seniorForm.regularAlert,"wechatReceivers",t)},expression:"seniorForm.regularAlert.wechatReceivers"}},e._l(e.ownerList,(function(t){return a("el-option",{key:t.shareId+Math.random(),attrs:{value:t,label:t.shareId}},[a("div",{staticStyle:{"max-width":"420px","word-break":"break-all"}},[e._v("("+e._s(t.staffId)+")-"+e._s(t.name)+e._s(t.deptFullPath?"-"+t.deptFullPath:""))])])})),1)],1)],1):e._e()]):e._e()],1):e._e(),e._v(" "),e.isAlertReg?e._e():a("div",{staticClass:"tip-text"},[e._v(e._s(e.tipType)+"的告警渠道未填写必填项")])],1)],1)],1):e._e(),e._v(" "),a("check-path",{ref:"checkPath",on:{save:e.savePath}}),e._v(" "),a("detail-set",{ref:"detailSet",on:{save:e.saveSet}}),e._v(" "),a("add-inside",{ref:"addInside",on:{save:e.saveInside}}),e._v(" "),a("senior-config",{ref:"seniorConfig",on:{save:e.saveConfig}}),e._v(" "),a("offset-config",{ref:"offsetConfig",on:{save:e.saveOffset}}),e._v(" "),a("preview-dialog",{ref:"previewDialog"}),e._v(" "),a("el-info",{attrs:{title:e.infoObj.title},model:{value:e.infoObj.type,callback:function(t){e.$set(e.infoObj,"type",t)},expression:"infoObj.type"}},["data_info"===e.infoObj.msgType?a("div",{staticClass:"create_data"},[a("div",{staticClass:"title1"},[e._v("生成数据集主要有以下几个作用：")]),e._v("\n        ①当下游任务需要依赖当前任务时，下游任务可以通过生成数据集信息来添加'前置依赖'；"),a("br"),e._v("\n        ②为当前任务指定一个产出的标志-success文件路径，当下游任务需要依赖当前任务时，只需要去依赖当前任务对应的_success文件路径即可；\n      ")]):"offset_num"===e.infoObj.msgType?a("div",{staticClass:"offset_num"},[a("offset-tips")],1):e._e()])],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{"popper-class":"crontab-popover",trigger:"click"}},[a("el-form",{staticClass:"crontab-form",attrs:{inline:!0},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},[a("el-form-item",{attrs:{label:"频率"}},[a("el-select",{staticClass:"time-unit-select",attrs:{filterable:"",placeholder:"请选择执行频率",disabled:e.unitDisabled},on:{change:e.changeTimeUnit},model:{value:e.data.timeUnit,callback:function(t){e.$set(e.data,"timeUnit",t)},expression:"data.timeUnit"}},e._l(e.$t("data.timeUnits"),(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),"weekly"===e.data.timeUnit?a("el-form-item",{attrs:{label:"星期"}},[a("el-select",{staticClass:"crontab-select",attrs:{filterable:"",placeholder:"请选择星期",disabled:"hourly"===e.data.timeUnit||"daily"===e.data.timeUnit},on:{change:e.change},model:{value:e.data.weekday,callback:function(t){e.$set(e.data,"weekday",t)},expression:"data.weekday"}},e._l(e.$t("data.weekdays"),(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),"monthly"===e.data.timeUnit?a("el-form-item",{attrs:{label:"日期"}},[a("el-select",{staticClass:"crontab-select",attrs:{filterable:"",placeholder:"请选择日期",disabled:"hourly"===e.data.timeUnit||"daily"===e.data.timeUnit},on:{change:e.change},model:{value:e.data.day,callback:function(t){e.$set(e.data,"day",t)},expression:"data.day"}},e._l(e.$t("data.days"),(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),"hourly"!==e.data.timeUnit?a("el-form-item",{attrs:{label:"小时"}},[a("el-select",{staticClass:"crontab-select",attrs:{filterable:"",placeholder:"请选择小时"},on:{change:e.change},model:{value:e.data.hour,callback:function(t){e.$set(e.data,"hour",t)},expression:"data.hour"}},e._l(e.$t("data.hours"),(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"分钟"}},[a("el-select",{staticClass:"crontab-select",attrs:{filterable:"",placeholder:"请选择分钟"},on:{change:e.change},model:{value:e.data.minute,callback:function(t){e.$set(e.data,"minute",t)},expression:"data.minute"}},e._l(e.$t("data.minutes"),(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-input",{class:e.inputClass,attrs:{slot:"reference",value:e.value},slot:"reference"})],1)},l=[],o={name:"Crontab",props:{timeUnit:{type:String,required:!0},value:{type:String,default:""},unitDisabled:{type:Boolean,default:!1},inputClass:{type:String,default:""}},data:function(){return{data:{timeUnit:this.$t("data.timeUnits")[0]["value"],minute:this.$t("data.minutes")[0]["value"],hour:this.$t("data.hours")[0]["value"],day:this.$t("data.days")[0]["value"],weekday:this.$t("data.weekdays")[0]["value"]}}},watch:{value:{immediate:!0,deep:!0,handler:function(){if(this.value){var e=this.value.split(" ");this.data.minute=e[0],this.data.hour=e[1],this.data.day=e[2],this.data.weekday=e[4]}}},timeUnit:{immediate:!0,deep:!0,handler:function(){this.data.timeUnit=this.timeUnit}}},methods:{changeTimeUnit:function(){"hourly"===this.data.timeUnit?(this.data.hour="*",this.data.day="*",this.data.weekday="*"):"daily"===this.data.timeUnit?(this.data.hour="00",this.data.day="*",this.data.weekday="*"):"weekly"===this.data.timeUnit?(this.data.hour="00",this.data.day="*",this.data.weekday="1"):"monthly"===this.data.timeUnit&&(this.data.hour="00",this.data.day="01",this.data.weekday="*"),this.change()},change:function(){this.$emit("input",[this.data.minute,this.data.hour,this.data.day,"*",this.data.weekday].join(" ")),this.$emit("unit",this.data.timeUnit)}}},s=o,u=(a("a7fb"),a("2877")),c=Object(u["a"])(s,n,l,!1,null,"79d41ad6",null),m=c.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"detail-set",attrs:{visible:e.dialogVisible,title:"设置数据路径",width:"650px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"检查依赖方式"}},[a("el-radio-group",{model:{value:e.ruleForm.checkType,callback:function(t){e.$set(e.ruleForm,"checkType",t)},expression:"ruleForm.checkType"}},[a("el-radio",{attrs:{label:1}},[e._v("检查路径")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("就绪时间")])],1)],1),e._v(" "),1===e.ruleForm.checkType?[a("el-form-item",{staticClass:"tip-wrap",attrs:{label:"路径:"}},[a("el-popover",{attrs:{placement:"left",width:"280",trigger:"hover"}},[a("div",[e._v("示例路径如下："),a("br"),e._v("s3://AAA/BBB/CCC/dt=[[%Y-%m-%d]]/_SUCCESS")]),e._v(" "),a("i",{staticClass:"el-icon-info tips-icon",staticStyle:{left:"-60px"},attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),a("el-input",{staticClass:"dialog-input",attrs:{type:"textarea",rows:"5",placeholder:"请输入当前数据所在路径",clearable:""},on:{change:e.changeCheckPath},model:{value:e.ruleForm.check_path,callback:function(t){e.$set(e.ruleForm,"check_path",t)},expression:"ruleForm.check_path"}}),e._v(" "),a("div",{staticClass:"senior-wrap"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.seniorConfig("detailSet",e.ruleForm)}}},[e._v("高级配置")]),e._v(" "),a("el-popover",{attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[e._v("\n            高级配置是对上述文件路径表达式进一步进行设置，以指定多个连续/离散的文件路径作为依赖；\n            "),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),a("div",{staticClass:"popover-text"},[e.ruleForm.useDateCalcuParam?a("div",e._l(e.ruleForm.dateCalculationParam,(function(t,r){return a("span",{key:r},[e._v(" "+e._s("range"===t.type&&0===t.range.length?"":e.dataMap[r]+":")+" "+e._s("offset"===t.type?"偏移"+t.unitOffset+";":t.range.length?"指定"+t.range.join(",")+";":"")+" ")])})),0):a("span",{staticClass:"i-block"},[e._v(e._s(e.ruleForm.unitOffset))])])],1),e._v(" "),e.checkPath&&e.checkPath.length?[a("div",[e._v("输入提示：可使用下方推荐值填充")]),e._v(" "),a("div",{staticClass:"path-wrap"},e._l(e.checkPath,(function(t){return a("div",{key:t,class:["path-item",t===e.ruleForm.check_path?"active":""],on:{click:function(a){return e.clickPath(t)}}},[e._v(e._s(t))])})),0)]:e._e()],2)]:e._e(),e._v(" "),2===e.ruleForm.checkType?a("el-form-item",{staticClass:"tip-wrap",attrs:{label:"就绪时间:"}},[e.isTimePicker?a("el-time-picker",{staticClass:"crontab-class",attrs:{placeholder:"请选择就绪时间",format:"HH:mm","value-format":"HH:mm",clearable:""},model:{value:e.ruleForm.success_time,callback:function(t){e.$set(e.ruleForm,"success_time",t)},expression:"ruleForm.success_time"}}):[a("el-select",{staticClass:"cron-input",attrs:{placeholder:"请选择就绪时间",clearable:""},model:{value:e.ruleForm.success_time,callback:function(t){e.$set(e.ruleForm,"success_time",t)},expression:"ruleForm.success_time"}},e._l(e.minuteList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1),e._v("\n        分\n      ")]],2):e._e()],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1),e._v(" "),a("offset-config",{ref:"offsetConfig",on:{save:e.saveOffset}})],1)},p=[],f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"custom-dialog",attrs:{title:"偏移量设置",visible:e.dialogVisible,width:"600px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[a("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,"label-width":"120px"}},["detailSet"===e.outKey?a("el-form-item",{attrs:{label:"数据周期"}},[a("el-select",{attrs:{placeholder:"请选择数据粒度"},on:{change:e.changeGranularity},model:{value:e.granularity,callback:function(t){e.granularity=t},expression:"granularity"}},e._l(e.granularityToText,(function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})})),1)],1):e._e(),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"偏移量设置"}},[a("el-radio-group",{on:{change:e.clickPreview},model:{value:e.ruleForm.offsetType,callback:function(t){e.$set(e.ruleForm,"offsetType",t)},expression:"ruleForm.offsetType"}},[a("el-radio",{attrs:{label:1}},[e._v("\n          单一偏移\n          "),a("el-popover",{attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[e._v('\n            它是针对依赖任务的“任务周期”而言，比如：依赖任务的"任务周期"为"天"，偏移量设为“0”，则表示依赖任务的当天实例；偏移量设为“-1”，则表示依赖任务的前1天实例；依此类推；\n            '),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("\n          连续偏移\n          "),a("el-popover",{attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[e._v('\n            它是针对依赖任务的“任务周期”而言，比如：依赖任务的"任务周期"为"天"，偏移量设为“-3~-1”，表示该依赖任务过去3天的全部实例，依此类推；\n            '),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),a("el-radio",{attrs:{label:3,disabled:["monthly","weekly"].includes(e.granularity)}},[e._v("\n          高级配置\n          "),a("el-popover",{attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[e._v("\n            当当前任务与依赖任务呈现非规律性的依赖，比如：当前任务周期与依赖任务周期不一致、依赖任务的间隔呈离散性，可勾选此方式。\n            "),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1)],1)],1),e._v(" "),a("el-divider",{staticClass:"divider"}),e._v(" "),a("el-form-item",[a("div",{staticStyle:{border:"1px solid #dcdfe6","padding-top":"20px","padding-left":"10px",width:"380px"}},[1===e.ruleForm.offsetType?a("el-form-item",{attrs:{label:"偏移量","label-width":"100px;"}},[a("el-input-number",{attrs:{min:e.minOffset,max:e.maxOffset,size:"mini",label:"描述文字"},on:{change:e.clickPreview},model:{value:e.ruleForm.singleOffset,callback:function(t){e.$set(e.ruleForm,"singleOffset",t)},expression:"ruleForm.singleOffset"}}),e._v(" "+e._s(e.granularityToText[e.granularity]||"")+"\n        ")],1):e._e(),e._v(" "),2===e.ruleForm.offsetType?a("el-form-item",{attrs:{label:"偏移量","label-width":"100px;"}},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:e.minOffset,max:e.ruleForm.maxRangeValue},on:{change:e.clickPreview},model:{value:e.ruleForm.minRangeValue,callback:function(t){e.$set(e.ruleForm,"minRangeValue",t)},expression:"ruleForm.minRangeValue"}}),e._v(" ~\n          "),a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:e.ruleForm.minRangeValue,max:e.maxOffset},on:{change:e.clickPreview},model:{value:e.ruleForm.maxRangeValue,callback:function(t){e.$set(e.ruleForm,"maxRangeValue",t)},expression:"ruleForm.maxRangeValue"}}),e._v(" "+e._s(e.granularityToText[e.granularity]||"")+"\n        ")],1):e._e(),e._v(" "),3===e.ruleForm.offsetType?[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"基础偏移量","label-width":"100px;"}}),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"}},e._l(e.offsetObj,(function(t,r){return a("el-form-item",{key:e.dataMap[r],attrs:{label:e.dataMap[r]+" 偏移"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                "+e._s(e.dataMap[r]+" 偏移")+"\n                "),a("el-popover",{attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[e._v("\n                  "+e._s(e.formatTip(r))+"\n                  "),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),a("el-input-number",{attrs:{min:e.min(r),max:e.max(r),disabled:e.isSetWeek&&"week"===r,size:"mini",label:"描述文字"},on:{change:e.clickPreview},model:{value:t.unitOffset,callback:function(a){e.$set(t,"unitOffset",a)},expression:"value.unitOffset"}}),e._v(" "),"week"===r?a("el-checkbox",{on:{change:e.clickPreview},model:{value:e.isSetWeek,callback:function(t){e.isSetWeek=t},expression:"isSetWeek"}},[e._v("不设置")]):e._e()],1)})),1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"指定依赖","label-width":"100px;"}}),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"}},e._l(e.rangeObj,(function(t,r){return a("el-form-item",{key:e.dataMap[r],attrs:{label:e.dataMap[r]+" 指定"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                "+e._s(e.dataMap[r]+" 指定")+"\n                "),a("el-popover",{attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[e._v("\n                  "+e._s(e.formatTip(r))+"\n                  "),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),a("el-select",{staticStyle:{width:"212px"},attrs:{placeholder:"请选择指定"+e.dataMap[r],multiple:"",filterable:""},on:{change:e.clickPreview},model:{value:t.range,callback:function(a){e.$set(t,"range",a)},expression:"value.range"}},e._l(e.rangeList[r],(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),a("div",[e._v("\n                L + "),a("el-input-number",{staticClass:"input-num",attrs:{size:"mini","controls-position":"right",min:e.rangeL[r].min,max:e.rangeL[r].max},model:{value:e.rangeL[r].value,callback:function(t){e.$set(e.rangeL[r],"value",t)},expression:"rangeL[key].value"}}),e._v(" "),a("el-popover",{attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[a("div",[e._v('L是"Last"的代指，当L是针对“小时”进行设置时，则代表1天中的最后一个小时，L-1代表1天中的第23个小时，L+1则代表第2天的第1个小时，依此类推；')]),e._v(" "),a("i",{staticClass:"el-icon-info global-color-ca",attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),a("i",{staticClass:"el-icon-circle-plus global-color-ca",on:{click:function(a){return e.addRange(t,r)}}})],1)],1)})),1)]:e._e()],2)])],1),e._v(" "),a("div",[[a("div",{staticClass:"preview-title"},[e._v("依赖预览"),a("span",{staticStyle:{"font-size":"12px",color:"#c0c4cc","margin-left":"15px"}},[e._v("以当前任务最近一次调度为例")])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.dependDate,border:!0,stripe:"","cell-style":{padding:"10px 0"},"max-height":"380px"}},[a("el-table-column",{attrs:{prop:"current_date",label:"当前时间","min-width":"160",align:"center",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"curExecutionDate",label:"当前任务入参时间","min-width":"160",align:"center",formatter:e.formatter}}),e._v(" "),"eventDepends"===e.outKey?a("el-table-column",{attrs:{prop:"executionDate",label:"前置任务("+e.taskId+")入参时间","min-width":"220",align:"center",formatter:e.formatter},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependDate.dependDate,(function(t){return a("div",{key:t},[e._v(e._s(t))])}))}}],null,!1,2623168571)}):a("el-table-column",{attrs:{prop:"checkPath",label:"检查路径","min-width":"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{disabled:e.isTipDisabled}},[a("div",{attrs:{slot:"content"},slot:"content"},e._l(t.row.dependDate.checkPath,(function(t){return a("div",{key:t},[e._v(e._s(t))])})),0),e._v(" "),a("div",e._l(t.row.dependDate.checkPath,(function(t){return a("span",{key:t,staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t))])})),0)])]}}])})],1)]],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)},h=[],g=a("b199"),E=a("b893");a("8975");function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){T(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e,t,a){return t=_(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _(e){var t=S(e,"string");return"symbol"===b(t)?t:String(t)}function S(e,t){if("object"!==b(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var R={name:"OffsetConfig",data:function(){return{dialogVisible:!1,index:null,outKey:"inputDataset",isSetWeek:!0,ruleForm:{offsetType:1,singleOffset:0,minRangeValue:-1,maxRangeValue:0,dateCalculationParam:{month:{type:"offset",unitOffset:0,range:[]},week:{type:"offset",unitOffset:0,range:[]},day:{type:"offset",unitOffset:0,range:[]},hour:{type:"offset",unitOffset:0,range:[]},minute:{type:"offset",unitOffset:0,range:[]}}},granularityToText:{hourly:"小时",daily:"天",weekly:"周",monthly:"月"},granularity:"daily",outputGranularity:"daily",dataMap:{minute:"分钟",hour:"小时",day:"日",week:"周",month:"月",year:"年"},rangeL:{month:{value:0,min:-11,max:11},day:{value:0,min:-27,max:27},hour:{value:0,min:-23,max:23},minute:{value:0,min:-59,max:59}},rangeList:{day:Array.from({length:31},(function(e,t){return t+1})),hour:Array.from({length:24},(function(e,t){return t})),minute:Array.from({length:60},(function(e,t){return t}))},dependDate:[],taskId:"",tableLoading:!1,isShowTable:!1,previewParams:{},isTipDisabled:!1}},computed:{offsetObj:function(){var e={};for(var t in this.ruleForm.dateCalculationParam)"offset"===this.ruleForm.dateCalculationParam[t].type&&(e[t]=this.ruleForm.dateCalculationParam[t]);return e},rangeObj:function(){var e={};for(var t in this.ruleForm.dateCalculationParam)"range"===this.ruleForm.dateCalculationParam[t].type&&(e[t]=this.ruleForm.dateCalculationParam[t]);return e},minOffset:function(){var e=0;switch(this.granularity){case"monthly":e=-12;break;case"weekly":e=-52;break;case"daily":e=-366;break;case"hourly":e=-1e3;break}return e},maxOffset:function(){var e=0;switch(this.granularity){case"monthly":e=12;break;case"weekly":e=52;break;case"daily":e=366;break;case"hourly":e=1e3;break}return e}},methods:{showWin:function(e,t,a,r,i){if(this.previewParams=y({},r),this.dialogVisible=!0,this.outKey=e,this.index=i,this.granularity=t.granularity,this.outputGranularity=a,this.taskId=t.taskId,this.getParam(t.granularity,a),t.useDateCalcuParam)for(var n in this.ruleForm.offsetType=3,t.dateCalculationParam)this.ruleForm.dateCalculationParam[n]=t.dateCalculationParam[n],"week"===n&&(this.isSetWeek=!1);else{var l=t.unitOffset+"";if(l.indexOf("~")>-1){this.ruleForm.offsetType=2;var o=l.split("~");this.ruleForm.minRangeValue=Number(o[0]),this.ruleForm.maxRangeValue=Number(o[1])}else this.ruleForm.offsetType=1,this.ruleForm.singleOffset=Number(l)}this.clickPreview()},getParam:function(e,t){"minutely"===e?this.ruleForm.dateCalculationParam={month:{type:"offset",unitOffset:0,range:[]},week:{type:"offset",unitOffset:0,range:[]},day:{type:"range",unitOffset:0,range:[]},hour:{type:"range",unitOffset:0,range:[]},minute:{type:"range",unitOffset:0,range:[]}}:"hourly"===e?(this.ruleForm.dateCalculationParam={month:{type:"offset",unitOffset:0,range:[]},week:{type:"offset",unitOffset:0,range:[]},day:{type:"range",unitOffset:0,range:[]},hour:{type:"range",unitOffset:0,range:[]}},"daily"!==t&&"hourly"!==t||(this.ruleForm.dateCalculationParam={month:{type:"offset",unitOffset:0,range:[]},week:{type:"offset",unitOffset:0,range:[]},day:{type:"offset",unitOffset:0,range:[]},hour:{type:"range",unitOffset:0,range:[]}})):"daily"===e?this.ruleForm.dateCalculationParam={month:{type:"offset",unitOffset:0,range:[]},week:{type:"offset",unitOffset:0,range:[]},day:{type:"range",unitOffset:0,range:[]}}:"weekly"===e?this.ruleForm.dateCalculationParam={month:{type:"offset",unitOffset:0,range:[]},week:{type:"offset",unitOffset:0,range:[]}}:"monthly"===e&&(this.ruleForm.dateCalculationParam={month:{type:"offset",unitOffset:0,range:[]}})},changeGranularity:function(e){this.getParam(e,this.outputGranularity),"weekly"!==e&&"monthly"!==e||(this.ruleForm.offsetType=1),this.clickPreview()},isShowTooltip:function(e){var t=e.target.clientWidth,a=e.target.scrollWidth;this.isTipDisabled=!(a>t)},formatTip:function(e){var t="";switch(e){case"month":t="自然月，0代表当前依赖任务本月份的实例；";break;case"week":t="自然周，大多数场景下无需设置此值，默认为0即可；只有当需要指定依赖任务的第几周的实例时才设置它；";break;case"day":t="自然日，需结合以上两个选项来理解，当月、周均为0时，这里的数值代表的是本月第X天的实例；如果月为-1、周为0则代表上月第X天的实例；";break;case"hour":t="1）大粒度依赖小粒度时，涉及跨多个周期依赖（比如：monthly任务依赖hourly任务）时，允许对该依赖任务的天、小时分别设置指定数值；依此类推；\n2）小粒度依赖大粒度时，比如：hourly任务依赖monthly任务,无需对该依赖任务的月设置指定数值；";break}return t},formatter:function(e,t,a,r){return""===a||null===a?"-":a},min:function(e){var t=0;return"month"===e?t=-12:"week"===e?t=-52:"day"===e?t=-366:"hour"===e&&(t=-1e3),t},max:function(e){var t=0;return"month"===e?t=12:"week"===e?t=52:"day"===e?t=366:"hour"===e&&(t=1e3),t},clickPreview:function(){var e=this;this.tableLoading=!0,this.isShowTable=!0;var t=y({},this.previewParams);if(t[t.key].granularity=this.granularity,3===this.ruleForm.offsetType){t[t.key].useDateCalcuParam=!0;var a=E["b"](this.ruleForm.dateCalculationParam);this.isSetWeek&&delete a.week,t[t.key].dateCalculationParam=a}else t[t.key].useDateCalcuParam=!1,1===this.ruleForm.offsetType?t[t.key].unitOffset=this.ruleForm.singleOffset:2===this.ruleForm.offsetType&&(t[t.key].unitOffset=this.ruleForm.minRangeValue+"~"+this.ruleForm.maxRangeValue);delete t.key,Object(g["cb"])(t).then((function(t){var a=t.data;e.dependDate=[a],e.tableLoading=!1}))},addRange:function(e,t){var a=this.rangeL[t].value,r=a<0?"L".concat(a):"L+".concat(a);e.range.includes(r)||(e.range.push(r),this.clickPreview())},resetForm:function(){this.ruleForm={offsetType:1,singleOffset:0,minRangeValue:-1,maxRangeValue:0,dateCalculationParam:{month:{type:"offset",unitOffset:0,range:[]},week:{type:"offset",unitOffset:0,range:[]},day:{type:"offset",unitOffset:0,range:[]},hour:{type:"offset",unitOffset:0,range:[]},minute:{type:"offset",unitOffset:0,range:[]}}},this.isShowTable=!1},save:function(){var e={};if(e.granularity=this.granularity,3===this.ruleForm.offsetType){e.useDateCalcuParam=!0;var t=E["b"](this.ruleForm.dateCalculationParam);this.isSetWeek&&delete t.week,e.key="dateCalculationParam",e.value=t}else e.useDateCalcuParam=!1,e.key="unitOffset",1===this.ruleForm.offsetType?e.value=this.ruleForm.singleOffset:2===this.ruleForm.offsetType&&(e.value=this.ruleForm.minRangeValue+"~"+this.ruleForm.maxRangeValue);this.$emit("save",this.outKey,e,this.index),this.dialogVisible=!1}}},C=R,O=(a("f70e"),Object(u["a"])(C,f,h,!1,null,"034fc408",null)),A=O.exports,k={name:"DetailSet",components:{OffsetConfig:A},data:function(){return{dialogVisible:!1,loading:!1,dataMap:{minute:"分钟",hour:"小时",day:"日",week:"周",month:"月",year:"年"},granularityList:[],ruleForm:{checkType:1,index:0,isExternal:1,check_path:"",detailed_gra:"",detailed_dependency:"",granularity:"daily",ready_time:"0 0 * * *",success_time:"",unitOffset:0,useDateCalcuParam:!1,dateCalculationParam:{}},isSingleOffset:!0,singleOffset:0,minRangeValue:-1,maxRangeValue:1,checkPath:[],isRange:!1,hoursList:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","L"],daysOfMonthList:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","L"],daysOfWeekList:["1","2","3","4","5","6","7","L"],weeksOfMonthList:["1","2","3","4","L"],optionDisabled:!1,outputGranularity:"daily",preViewParams:{},isShowSenior:!1,minuteList:[]}},computed:{dependList:function(){return"hourly"===this.ruleForm.detailed_gra?this.hoursList:"weekly"===this.ruleForm.detailed_gra?this.weeksOfMonthList:"weekly"===this.granularity?this.daysOfWeekList:this.daysOfMonthList},isTimePicker:function(){return"daily"===this.outputGranularity||"weekly"===this.outputGranularity||"monthly"===this.outputGranularity}},created:function(){for(var e=0;e<60;e++)this.minuteList.push({label:e<10?"0"+e:e,value:e})},methods:{showWin:function(e,t,a,r){if(this.resetForm(),this.dialogVisible=!0,this.outputGranularity=a,this.preViewParams=r,this.ruleForm.index=e,this.ruleForm.granularity=t.granularity||"daily",this.checkPath=t.checkPathList,this.ruleForm.unitOffset=t.unitOffset,this.ruleForm.useDateCalcuParam=t.useDateCalcuParam,this.ruleForm.dateCalculationParam=t.dateCalculationParam,t.success_time?(this.ruleForm.checkType=2,this.isTimePicker&&-1===t.success_time.indexOf(":")?this.ruleForm.success_time="00:"+t.success_time:this.ruleForm.success_time=t.success_time):(this.ruleForm.checkType=1,this.ruleForm.check_path=t.check_path,this.changeCheckPath(t.check_path),t.detailed_gra&&(this.ruleForm.detailed_gra=t.detailed_gra),this.ruleForm.detailed_dependency=t.detailed_dependency||""),"hourly"===this.ruleForm.detailed_gra&&this.ruleForm.detailed_dependency[0].indexOf("~")>-1){this.isRange=!0;var i=this.ruleForm.detailed_dependency[0].split("~");this.minRangeValue=Number(i[0].substring(1)),this.maxRangeValue=Number(i[1].substring(1)),this.ruleForm.detailed_dependency=""}},changeCheckPath:function(e){var t=new RegExp("\\[\\[.*?]]");t.test(e)?this.isShowSenior=!0:this.isShowSenior=!1,this.preViewParams.dataDepend.check_path=e},clickPath:function(e){e===this.ruleForm.check_path?this.ruleForm.check_path="":this.ruleForm.check_path=e,this.changeCheckPath(this.ruleForm.check_path)},changeCheck:function(e,t){e&&(this.ruleForm[t]=!1)},changeDep:function(e){e.length&&e.includes("All")&&(this.optionDisabled=!0,this.ruleForm.detailed_dependency=["All"])},radioChange:function(e){this.ruleForm.detailed_gra===e?this.ruleForm.detailed_gra="":this.ruleForm.detailed_gra=e},changeUnit:function(e){this.ruleForm.granularity=e},showPoppver:function(){if(!this.ruleForm.useDateCalcuParam){var e=this.ruleForm.unitOffset.toString();if(e.indexOf("~")>-1){var t=e.split("~");this.minRangeValue=Number(t[0]),this.maxRangeValue=Number(t[1]),this.isSingleOffset=!1}else this.singleOffset=Number(this.ruleForm.unitOffset),this.isSingleOffset=!0}},savePopover:function(){this.isSingleOffset?this.$set(this.ruleForm,"unitOffset",this.singleOffset):this.$set(this.ruleForm,"unitOffset","".concat(this.minRangeValue,"~").concat(this.maxRangeValue)),this.$set(this.ruleForm,"useDateCalcuParam",!1),this.closePopover()},closePopover:function(){document.body.click()},seniorConfig:function(e,t){this.$refs.offsetConfig.showWin(e,t,this.outputGranularity,this.preViewParams)},saveOffset:function(e,t){this.$set(this.ruleForm,"granularity",t.granularity),this.$set(this.ruleForm,t.key,t.value),this.$set(this.ruleForm,"useDateCalcuParam",t.useDateCalcuParam)},resetForm:function(){this.ruleForm={checkType:1,index:0,isExternal:1,check_path:"",detailed_gra:"",detailed_dependency:"",granularity:"daily",ready_time:"0 0 * * *",success_time:"",unitOffset:0,useDateCalcuParam:!1,dateCalculationParam:{}},this.isRange=!1,this.isShowSenior=!1},save:function(){if(this.isRange){var e=this.minRangeValue<0?"L".concat(this.minRangeValue):"L+".concat(this.minRangeValue),t=this.maxRangeValue<0?"L".concat(this.maxRangeValue):"L+".concat(this.maxRangeValue);this.ruleForm.detailed_dependency=["".concat(e,"~").concat(t)]}1!==this.ruleForm.checkType||this.isShowSenior||(this.ruleForm.granularity=""),this.$emit("save",this.ruleForm),this.dialogVisible=!1}}},I=k,N=(a("cf25"),Object(u["a"])(I,d,p,!1,null,"c170612e",null)),P=N.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"check-path",attrs:{visible:e.dialogVisible,width:"650px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[a("el-tabs",{model:{value:e.ruleForm.activeName,callback:function(t){e.$set(e.ruleForm,"activeName",t)},expression:"ruleForm.activeName"}},[e.showTab1?a("el-tab-pane",{attrs:{label:"检查路径",name:"first"}},[a("el-form-item",{attrs:{label:"是否检查路径:"}},[a("el-switch",{on:{change:function(t){return e.changeCheck(t,"checkCustom")}},model:{value:e.ruleForm.check,callback:function(t){e.$set(e.ruleForm,"check",t)},expression:"ruleForm.check"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"路径:"}},[e._v("\n          "+e._s(e.ruleForm.location)+"\n        ")]),e._v(" "),e._l(e.partitionKeys,(function(t,r){return a("el-form-item",{key:r,attrs:{label:"分区"+(r+1)+":"}},[e._v("\n          "+e._s(t.name)+" =\n          "),a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入时间格式",clearable:""},model:{value:e.ruleForm.times[r],callback:function(t){e.$set(e.ruleForm.times,r,t)},expression:"ruleForm.times[index]"}})],1)})),e._v(" "),a("el-form-item",{attrs:{label:"检查文件名:"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"请输入文件名",clearable:""},model:{value:e.ruleForm.fileName,callback:function(t){e.$set(e.ruleForm,"fileName",t)},expression:"ruleForm.fileName"}})],1)],2):e._e(),e._v(" "),a("el-tab-pane",{attrs:{label:"自定义路径",name:"second"}},[a("el-form-item",{attrs:{label:"是否检查路径:"}},[a("el-switch",{on:{change:function(t){return e.changeCheck(t,"check")}},model:{value:e.ruleForm.checkCustom,callback:function(t){e.$set(e.ruleForm,"checkCustom",t)},expression:"ruleForm.checkCustom"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"路径:"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"请输入路径",clearable:""},model:{value:e.ruleForm.check_path,callback:function(t){e.$set(e.ruleForm,"check_path",t)},expression:"ruleForm.check_path"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)},F=[],D={name:"CheckPath",data:function(){return{dialogVisible:!1,loading:!1,ruleForm:{activeName:"first",index:0,fileName:"_SUCCESS",check:!1,location:"",times:[],partitions:[],checkCustom:!1,check_path:""},partitionKeys:"",timeFormat:[{value:"%Y%m%d"},{value:"%Y-%m-%d"},{value:"%H"}],showTab1:!0}},methods:{getTableDetail:function(e){var t=this;this.loading=!0,Object(g["getDataSetColumns"])({guid:e}).then((function(e){var a=e.data;t.ruleForm.location=a.location,t.partitionKeys=a.partitionKeys||[],t.ruleForm.check||t.partitionKeys.forEach((function(e){t.ruleForm.partitions.push("%Y%m%d")})),t.loading=!1}))},showWin:function(e){var t=e.guid,a=e.index,r=e.location,i=e.partitions,n=e.fileName,l=e.check_path;this.dialogVisible=!0,this.ruleForm.index=a,this.ruleForm.fileName=void 0===n?"_SUCCESS":n,this.ruleForm.check_path=l,r&&(this.ruleForm.check=!0,this.ruleForm.checkCustom=!1,this.ruleForm.location=r,this.ruleForm.times=i.map((function(e){return e.split("=")[1]}))),l&&(this.ruleForm.checkCustom=!0,this.ruleForm.check=!1,this.ruleForm.activeName="second"),t?(this.getTableDetail(t),this.showTab1=!0):(this.showTab1=!1,this.ruleForm.activeName="second")},querySearch:function(e,t){var a=this.timeFormat;t(a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},changeCheck:function(e,t){e&&(this.ruleForm[t]=!1)},resetForm:function(){this.$refs.ruleForm.resetFields(),this.ruleForm.check=!1,this.ruleForm.partitions=[],this.ruleForm.times=[]},save:function(){var e=this;this.partitionKeys&&(this.ruleForm.partitions=this.partitionKeys.map((function(t,a){return"".concat(t.name,"=").concat(e.ruleForm.times[a])}))),this.$emit("save",this.ruleForm),this.dialogVisible=!1}}},w=D,M=(a("10a5"),Object(u["a"])(w,L,F,!1,null,"662ad74c",null)),x=M.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"100px",disabled:e.disabled}},[a("el-form-item",{attrs:{label:"是否生成标志:"}},[a("el-switch",{on:{change:e.checkChange},model:{value:e.ruleForm.check,callback:function(t){e.$set(e.ruleForm,"check",t)},expression:"ruleForm.check"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.check,expression:"ruleForm.check"}],attrs:{label:"标志路径:"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",rows:"3",placeholder:"请输入路径",disabled:!e.ruleForm.check,clearable:""},model:{value:e.ruleForm.location,callback:function(t){e.$set(e.ruleForm,"location",t)},expression:"ruleForm.location"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.check,expression:"ruleForm.check"}],attrs:{label:"检查文件名:"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入文件名",disabled:!e.ruleForm.check,clearable:""},model:{value:e.ruleForm.fileName,callback:function(t){e.$set(e.ruleForm,"fileName",t)},expression:"ruleForm.fileName"}})],1)],1)},G=[],H={name:"GeneratePathFrom",props:{ruleForm:{type:Object,default:function(){return{fileName:"_SUCCESS",check:!1,location:""}}},name:{type:String,default:"task_name"},disabled:{type:Boolean,default:!1}},data:function(){return{isCheck:!1}},watch:{name:function(e){this.isCheck&&this.$set(this.ruleForm,"location","")}},methods:{checkChange:function(e){if(this.isCheck=e,e&&!this.ruleForm.location&&this.$set(this.ruleForm,"location",""),e&&!this.ruleForm.fileName){var t=this.ruleForm.fileName?this.ruleForm.fileName:"_SUCCESS";this.$set(this.ruleForm,"fileName",t)}e||this.$set(this.ruleForm,"location",""),this.$forceUpdate()},checkPath:function(){var e=new FormData;return e.append("path",this.ruleForm.location),Object(g["i"])(e).then((function(e){return e.data}))}}},V=H,B=Object(u["a"])(V,U,G,!1,null,"1969830c",null),Y=B.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"custom-dialog",attrs:{title:"添加内部依赖设置",visible:e.dialogVisible,width:"500px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"前置任务",prop:"task"}},[a("el-select",{staticStyle:{width:"390px"},attrs:{placeholder:"支持按任务id/任务名称/产出数据集搜索任务","popper-class":"custom-popper",multiple:"",filterable:"",remote:"","remote-method":e.remoteMethod,loading:e.loading,"value-key":"id"},model:{value:e.ruleForm.task,callback:function(t){e.$set(e.ruleForm,"task",t)},expression:"ruleForm.task"}},e._l(e.options,(function(t){return a("el-option",{key:t.id,attrs:{label:t.id+" | "+t.name,value:t}},[a("el-tooltip",{attrs:{effect:"dark",placement:"left-end"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.id)+" | "+e._s(t.name)),a("br"),e._v(e._s(t.metadataId))]),e._v(" "),a("div",{staticClass:"ellipsis",staticStyle:{"max-width":"350px"}},[e._v("\n              "+e._s(t.id)+" | "+e._s(t.name)+"\n              "),a("div",{staticClass:"ellipsis",staticStyle:{"font-size":"12px",color:"#909399"}},[e._v(e._s(t.metadataId))])])])],1)})),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)},W=[],K={name:"AddInside",data:function(){return{dialogVisible:!1,ruleForm:{task:[]},rules:{task:[{required:!0,message:"请选择任务",trigger:["blur","change"]}]},loading:!1,options:[]}},methods:{showWin:function(){this.ruleForm.task=[],this.dialogVisible=!0},remoteMethod:function(e){var t=this;if(""!==e){this.loading=!0;var a=new FormData;a.append("name",e),Object(g["U"])(a).then((function(e){var a=e.data;t.loading=!1,t.options=a}))}},save:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.$emit("save",e.ruleForm.task),e.dialogVisible=!1)}))}}},j=K,X=Object(u["a"])(j,$,W,!1,null,"47c9bad6",null),q=X.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"custom-dialog",attrs:{title:"高级配置",visible:e.dialogVisible,width:"600px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,"label-width":"120px"}},[["weekly","monthly"].includes(e.granularity)?e._e():a("el-form-item",{attrs:{label:"是否配置周"}},[a("el-checkbox",{on:{change:e.changeWeek},model:{value:e.isConfigWeek,callback:function(t){e.isConfigWeek=t},expression:"isConfigWeek"}})],1),e._v(" "),e._l(e.ruleForm.dateCalculationParam,(function(t,r){return a("el-form-item",{key:e.dataMap[r],attrs:{label:e.dataMap[r]+" 设置",required:""}},[a("el-radio-group",{attrs:{disabled:["month","week"].includes(r)},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"value.type"}},[a("el-radio",{attrs:{label:"offset"}},[e._v("偏移模式")]),e._v(" "),a("el-radio",{attrs:{label:"range"}},[e._v("指定模式")])],1),e._v(" "),a("div",["offset"===t.type?a("el-popover",{attrs:{placement:"bottom",width:"371",trigger:"click"},on:{show:function(a){return e.showPoppver(t)}}},[a("div",[a("el-radio-group",{model:{value:e.isSingleOffset,callback:function(t){e.isSingleOffset=t},expression:"isSingleOffset"}},[a("el-radio",{attrs:{label:!0}},[e._v("单一偏移")]),e._v(" "),a("el-radio",{attrs:{label:!1}},[e._v("连续偏移")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("span",[e._v("偏移量：")]),e._v(" "),e.isSingleOffset?a("el-input-number",{attrs:{size:"mini",label:"描述文字"},model:{value:e.singleOffset,callback:function(t){e.singleOffset=t},expression:"singleOffset"}}):[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:-168,max:e.maxRangeValue},model:{value:e.minRangeValue,callback:function(t){e.minRangeValue=t},expression:"minRangeValue"}}),e._v(" ~\n                "),a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:e.minRangeValue,max:168},model:{value:e.maxRangeValue,callback:function(t){e.maxRangeValue=t},expression:"maxRangeValue"}})]],2)],1),e._v(" "),a("div",{staticClass:"popover-footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.closePopover}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.savePopover(t)}}},[e._v("确定")])],1),e._v(" "),a("span",{staticClass:"popover-text",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.unitOffset))])]):[a("el-select",{staticStyle:{width:"212px"},attrs:{placeholder:"请选择指定"+e.dataMap[r],multiple:"",filterable:""},model:{value:t.range,callback:function(a){e.$set(t,"range",a)},expression:"value.range"}},e._l(e.rangeList[r],(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),a("div",[e._v("\n            L + "),a("el-input-number",{staticClass:"input-num",attrs:{size:"mini","controls-position":"right",min:e.rangeL[r].min,max:e.rangeL[r].max},model:{value:e.rangeL[r].value,callback:function(t){e.$set(e.rangeL[r],"value",t)},expression:"rangeL[key].value"}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus",on:{click:function(a){return e.addRange(t,r)}}})],1)]],2)],1)}))],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.save}},[e._v("确 定")])],1)],1)},z=[],Q={name:"AddEvent",data:function(){return{dialogVisible:!1,loading:!1,btnDisabled:!1,index:null,outKey:"inputDataset",isConfigWeek:!1,granularity:"daliy",rangeL:{month:{value:0,min:-11,max:11},day:{value:0,min:-27,max:27},hour:{value:0,min:-23,max:23},minute:{value:0,min:-59,max:59}},defaultParam:{month:{type:"offset",unitOffset:0,range:[]},day:{type:"offset",unitOffset:0,range:[]},hour:{type:"offset",unitOffset:0,range:[]},minute:{type:"offset",unitOffset:0,range:[]}},defaultParamKey:[],ruleForm:{dateCalculationParam:{month:{type:"offset",unitOffset:0,range:[]},day:{type:"offset",unitOffset:0,range:[]},hour:{type:"offset",unitOffset:0,range:[]},minute:{type:"offset",unitOffset:0,range:[]}}},dataMap:{minute:"分钟",hour:"小时",day:"日",week:"周",month:"月",year:"年"},rangeList:{day:Array.from({length:31},(function(e,t){return t+1})),hour:Array.from({length:24},(function(e,t){return t})),minute:Array.from({length:60},(function(e,t){return t}))},isSingleOffset:!0,singleOffset:0,minRangeValue:-1,maxRangeValue:1}},methods:{showWin:function(e,t,a){this.dialogVisible=!0,this.outKey=e,this.index=a,this.granularity=t.granularity,this.isConfigWeek=!1,"minutely"===t.granularity?this.defaultParam={month:{type:"offset",unitOffset:0,range:[]},day:{type:"offset",unitOffset:0,range:[]},hour:{type:"offset",unitOffset:0,range:[]},minute:{type:"offset",unitOffset:0,range:[]}}:"hourly"===t.granularity?this.defaultParam={month:{type:"offset",unitOffset:0,range:[]},day:{type:"offset",unitOffset:0,range:[]},hour:{type:"offset",unitOffset:0,range:[]}}:"daily"===t.granularity?this.defaultParam={month:{type:"offset",unitOffset:0,range:[]},day:{type:"offset",unitOffset:0,range:[]}}:"weekly"===t.granularity?this.defaultParam={month:{type:"offset",unitOffset:0,range:[]},week:{type:"offset",unitOffset:0,range:[]}}:"monthly"===t.granularity&&(this.defaultParam={month:{type:"offset",unitOffset:0,range:[]}}),this.defaultParamKey=Object.keys(this.defaultParam),t.useDateCalcuParam?(this.ruleForm.dateCalculationParam=E["b"](t.dateCalculationParam),Object.keys(t.dateCalculationParam).includes("week")&&(this.isConfigWeek=!0),this.resetDateC(t.granularity)):this.ruleForm.dateCalculationParam=E["b"](this.defaultParam)},resetDateC:function(e){var t=Object.keys(this.ruleForm.dateCalculationParam);"hourly"===e?(t.includes("minute")&&delete this.ruleForm.dateCalculationParam.minute,t.includes("month")||this.$set(this.ruleForm.dateCalculationParam,"month",{type:"offset",unitOffset:0,range:[]}),t.includes("day")||this.$set(this.ruleForm.dateCalculationParam,"day",{type:"offset",unitOffset:0,range:[]}),t.includes("hour")||this.$set(this.ruleForm.dateCalculationParam,"hour",{type:"offset",unitOffset:0,range:[]})):"daily"===e?(t.includes("minute")&&delete this.ruleForm.dateCalculationParam.minute,t.includes("hour")&&delete this.ruleForm.dateCalculationParam.hour,t.includes("month")||this.$set(this.ruleForm.dateCalculationParam,"month",{type:"offset",unitOffset:0,range:[]}),t.includes("day")||this.$set(this.ruleForm.dateCalculationParam,"day",{type:"offset",unitOffset:0,range:[]})):"weekly"===e?(t.includes("minute")&&delete this.ruleForm.dateCalculationParam.minute,t.includes("hour")&&delete this.ruleForm.dateCalculationParam.hour,t.includes("day")&&delete this.ruleForm.dateCalculationParam.day,t.includes("month")||this.$set(this.ruleForm.dateCalculationParam,"month",{type:"offset",unitOffset:0,range:[]}),t.includes("week")||this.$set(this.ruleForm.dateCalculationParam,"week",{type:"offset",unitOffset:0,range:[]})):"monthly"===e&&(t.includes("minute")&&delete this.ruleForm.dateCalculationParam.minute,t.includes("hour")&&delete this.ruleForm.dateCalculationParam.hour,t.includes("day")&&delete this.ruleForm.dateCalculationParam.day,t.includes("week")&&(delete this.ruleForm.dateCalculationParam.week,this.isConfigWeek=!1),t.includes("month")||this.$set(this.ruleForm.dateCalculationParam,"month",{type:"offset",unitOffset:0,range:[]}))},insertKey:function(e,t,a,r){var i=Object.keys(a).reduce((function(i,n,l){return l===r&&(i[e]=t),i[n]=a[n],i}),{});return i},changeWeek:function(e){e?(this.ruleForm.dateCalculationParam.week||(this.ruleForm.dateCalculationParam=this.insertKey("week",{type:"offset",unitOffset:0,range:[]},this.ruleForm.dateCalculationParam,1)),this.rangeList.day=Array.from({length:7},(function(e,t){return t+1})),this.rangeL.day.min=-6,this.rangeL.day.max=6):(this.rangeList.day=Array.from({length:31},(function(e,t){return t+1})),this.rangeL.day.min=-27,this.rangeL.day.max=27,delete this.ruleForm.dateCalculationParam.week)},showPoppver:function(e){var t=e.unitOffset.toString();if(t.indexOf("~")>-1){var a=t.split("~");this.minRangeValue=Number(a[0]),this.maxRangeValue=Number(a[1]),this.isSingleOffset=!1}else this.singleOffset=Number(e.unitOffset),this.isSingleOffset=!0},savePopover:function(e){this.isSingleOffset?e.unitOffset=this.singleOffset:e.unitOffset="".concat(this.minRangeValue,"~").concat(this.maxRangeValue),this.closePopover()},closePopover:function(){document.body.click()},addRange:function(e,t){var a=this.rangeL[t].value,r=a<0?"L".concat(a):"L+".concat(a);e.range.push(r)},save:function(){var e=Object.values(this.ruleForm.dateCalculationParam);if(e.some((function(e){return"offset"===e.type&&void 0===e.unitOffset})))this.$message.warning("偏移模式设置不能为空");else if(e.some((function(e){return"range"===e.type&&0===e.range.length})))this.$message.warning("指定模式设置不能为空");else{var t=E["b"](this.ruleForm.dateCalculationParam);this.$emit("save",this.outKey,t,this.index),this.dialogVisible=!1}}}},Z=Q,ee=(a("f25f"),Object(u["a"])(Z,J,z,!1,null,"64654f89",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"check-path",attrs:{title:"预览",visible:e.dialogVisible,width:"650px","append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"title"},[e._v("最近一次调度日期："+e._s(e.data.lastExecutionDate))]),e._v(" "),a("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.data.dependDate,border:!0,stripe:"","cell-style":{padding:"10px 0"},"max-height":"380px"}},[a("el-table-column",{attrs:{prop:"executionDate",label:"实例日期","min-width":"160",align:"center",formatter:e.formatter},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n          实例日期\n          "),a("el-tooltip",{attrs:{"popper-class":"custom-tip",effect:"light",content:"外部数据没有实例日期",placement:"bottom"}},[a("i",{staticClass:"el-icon-info"})])]},proxy:!0}])}),e._v(" "),a("el-table-column",{attrs:{prop:"dataDate",label:"数据日期","min-width":"160",align:"center",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkPath",label:"检查路径","min-width":"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.checkPath,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.checkPath||"-"))])])]}}])})],1)],1)])},re=[],ie={name:"PreviewDialog",data:function(){return{dialogVisible:!1,loading:!1,isTipDisabled:!1,data:{}}},methods:{showWin:function(e){var t=this;this.dialogVisible=!0,Object(g["cb"])(e).then((function(e){var a=e.data;t.data=a,t.loading=!1}))},formatter:function(e,t,a,r){return""===a||null===a?"-":a},isShowTooltip:function(e){var t=e.target.clientWidth,a=e.target.scrollWidth;this.isTipDisabled=!(a>t)}}},ne=ie,le=(a("1037"),Object(u["a"])(ne,ae,re,!1,null,"039bda09",null)),oe=le.exports,se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"offset-tips"},[e._m(0),e._v(" "),r("img",{staticStyle:{width:"550px"},attrs:{src:a("3b59"),alt:"偏移量"}}),r("br"),e._v(" "),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.link}},[e._v("更多配置请参考")])],1)},ue=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"title1"},[e._v("偏移量设置说明：")]),e._v(" "),a("div",[e._v("1）含义：")]),e._v(" "),a("div",[e._v("当前任务的执行入参时间与上游任务(即下表每行的任务)的执行入参时间相差多少个周期(月/周/天/时)；")]),e._v(" "),a("div",[e._v("2）效果：")]),e._v(" "),a("div",[e._v("当前任务入参时间 + 偏移量 * 被依赖任务的周期 = 被依赖任务的入参时间。")]),e._v(" "),a("div",[e._v("3）举例（如下图）:")]),e._v(" "),a("div",[e._v("当前任务B依赖任务A，今天为 11月18日，入参时间为 11月18日，")]),e._v(" "),a("ul",{staticStyle:{"margin-left":"5px","list-style-type":"none"}},[a("li",[e._v("-- 如果偏移量为0，A 任务入参时间 = 11月18日 + 0 = 11月18日")]),e._v(" "),a("li",[e._v("-- 如果偏移量为-1，A任务入参时间 = 11月18日 -1 = 11月17日")])])])}],ce={name:"OffsetTips",data:function(){return{}},methods:{link:function(){window.open("https://shimo.im/docs/pmkxQmWOO4COMKAN#anchor-rUMI","_blank")}}},me=ce,de=(a("6a91"),Object(u["a"])(me,se,ue,!1,null,"6ec1170a",null)),pe=de.exports,fe=a("3941"),he=a("2f62");function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function Ee(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ee=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,i=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function c(e,t,a,r){var n=t&&t.prototype instanceof E?t:E,l=Object.create(n.prototype),o=new N(r||[]);return i(l,"_invoke",{value:O(e,a,o)}),l}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",g={};function E(){}function b(){}function v(){}var y={};u(y,l,(function(){return this}));var T=Object.getPrototypeOf,_=T&&T(T(P([])));_&&_!==a&&r.call(_,l)&&(y=_);var S=v.prototype=E.prototype=Object.create(y);function R(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function a(i,n,l,o){var s=m(e[i],e,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==ge(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){a("next",e,l,o)}),(function(e){a("throw",e,l,o)})):t.resolve(c).then((function(e){u.value=e,l(u)}),(function(e){return a("throw",e,l,o)}))}o(s.arg)}var n;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){a(e,r,t,i)}))}return n=n?n.then(i,i):i()}})}function O(t,a,r){var i=d;return function(n,l){if(i===f)throw new Error("Generator is already running");if(i===h){if("throw"===n)throw l;return{value:e,done:!0}}for(r.method=n,r.arg=l;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=m(t,a,r);if("normal"===u.type){if(i=r.done?h:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=h,r.method="throw",r.arg=u.arg)}}}function A(t,a){var r=a.method,i=t.iterator[r];if(i===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,A(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var n=m(i,t.iterator,a.arg);if("throw"===n.type)return a.method="throw",a.arg=n.arg,a.delegate=null,g;var l=n.arg;return l?l.done?(a[t.resultName]=l.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,g):l:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var a=t[l];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function a(){for(;++i<t.length;)if(r.call(t,i))return a.value=t[i],a.done=!1,a;return a.value=e,a.done=!0,a};return n.next=n}}throw new TypeError(ge(t)+" is not iterable")}return b.prototype=v,i(S,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=u(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},R(C.prototype),u(C.prototype,o,(function(){return this})),t.AsyncIterator=C,t.async=function(e,a,r,i,n){void 0===n&&(n=Promise);var l=new C(c(e,a,r,i),n);return t.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},R(S),u(S,s,"Generator"),u(S,l,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function i(r,i){return o.type="throw",o.arg=t,a.next=r,i&&(a.method="next",a.arg=e),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n],o=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var s=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(s&&u){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=e,l.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),I(a),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var i=r.arg;I(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:P(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function be(e,t,a,r,i,n,l){try{var o=e[n](l),s=o.value}catch(u){return void a(u)}o.done?t(s):Promise.resolve(s).then(r,i)}function ve(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function l(e){be(n,r,i,l,o,"next",e)}function o(e){be(n,r,i,l,o,"throw",e)}l(void 0)}))}}function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){_e(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _e(e,t,a){return t=Se(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Se(e){var t=Re(e,"string");return"symbol"===ge(t)?t:String(t)}function Re(e,t){if("object"!==ge(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Ce={name:"StepThree",components:{Crontab:m,CheckPath:x,DetailSet:P,AddInside:q,SeniorConfig:te,PreviewDialog:oe,OffsetTips:pe,OffsetConfig:A,EllipsisTooltip:fe["a"],GeneratePathFrom:Y},props:{isChangeTable:{type:Boolean,default:!1},nameDisabled:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},isShowDispatch:{type:Boolean,default:!0},isJar:{type:Boolean,default:!1},isShowInputBtn:{type:Boolean,default:!1},isShowOutputBtn:{type:Boolean,default:!1},isInputEdit:{type:Boolean,default:!1},isOutputEdit:{type:Boolean,default:!1},isShowDb:{type:Boolean,default:!0},isShowSource:{type:Boolean,default:!1},isShowOffset:{type:Boolean,default:!0},isShowInputCheck:{type:Boolean,default:!1},isShowOutputCheck:{type:Boolean,default:!1},region:{type:String,default:""},isWorkflow:{type:Boolean,default:!1},isShowDependRefresh:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},ruleForm:{type:Object,default:function(){return{}}},seniorForm:{type:Object,default:function(){return{}}},cost:{type:Array,default:function(){return[]}}},data:function(){var e;return e=["StreamingSQL","StreamingJAR","MysqlCDC2Hive","Metis2Hive","Db2Hive"].includes(this.ruleForm.templateCode)||this.ruleForm.isLakeHouseReal?function(e,t,a){var r=/^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?(\.[a-zA-Z0-9]([-a-zA-Z0-9]*[a-zA-Z0-9])?)*$/;!r.test(t)||t.length>45?a(new Error("名字只能包含a-z,A-Z,0-9或-；开始需为字符，最多45个字符")):a()}:function(e,t,a){var r=/^[a-zA-Z0-9][-_a-zA-Z0-9]*$/;!r.test(t)||t.length>60?a(new Error("名字只能包含a-z,A-Z,0-9或-或_；开始需为字符，最多60个字符")):a()},{infoObj:{type:!1,msgType:"",title:""},ownerList:[],tokenList:[],ownerLoading:!1,isDataSet1:!1,isDataSet2:!1,isExecuteMode:!1,validate:e,nameTips:"",initNameLimit:!0,isRange:!1,isTipDisabled:!1,cascaderProps:{},outputGranularityList:["hourly","daily","weekly","monthly"],alertList:[],dataMap:{minute:"分钟",hour:"小时",day:"日",week:"周",month:"月",year:"年"},cycleList:[{label:"分钟",value:"minutely"},{label:"小时",value:"hourly"},{label:"天",value:"daily"},{label:"周",value:"weekly"},{label:"月",value:"monthly"}],granularityList:[],sourceDbList:[],targetDbList:[],metadataOptions:[{value:"ue1",label:"AWS 美东",disabled:this.region&&"ue1"!==this.region,children:[{value:"mysql",label:"MySql"},{value:"hive",label:"Hive"},{value:"metis",label:"Metis"},{value:"clickhouse",label:"ClickHouse"}]},{value:"sg1",label:"AWS 新加坡",disabled:this.region&&"sg1"!==this.region,children:[{value:"mysql",label:"MySql"},{value:"hive",label:"Hive"},{value:"metis",label:"Metis"},{value:"clickhouse",label:"ClickHouse"}]},{value:"sg2",label:"华为 新加坡",disabled:this.region&&"sg2"!==this.region,children:[{value:"mysql",label:"MySql"},{value:"hive",label:"Hive"},{value:"metis",label:"Metis"},{value:"clickhouse",label:"ClickHouse"}]}],props:{lazy:!0,lazyLoad:this.getDataSetData},inputDatasetKey:0,outputDatasetKey:0,costList:[],btnLoading:!0,btnLoad:!1,btnLoad2:!1,isSingleOffset:!0,singleOffset:0,minRangeValue:-1,maxRangeValue:1,eventLoading:!1,source:"task",alertTypeValue:"",showAlartModel:!1,showRegularAlert:!1,isAlertReg:!0,weekList:[{label:"星期一",value:1},{label:"星期二",value:2},{label:"星期三",value:3},{label:"星期四",value:4},{label:"星期五",value:5},{label:"星期六",value:6},{label:"星期日",value:7}],tipType:"",dayList:[],hourList:[],minuteList:[],checkTimeArr:["本周期","本周期后"],checkTime:"本周期",triggerConditionArr:[{label:"任务未开始",value:"notStart"},{label:"任务未成功",value:"notSuccess"}],timeGroup:{date:1,week:1,hour:0,minute:0},rules:{name:[{required:!0,message:"请输入任务名称",trigger:["blur","change"]},{validator:"Mysql2Hive"===this.ruleForm.templateCode?"":e,trigger:["blur","change"]}],triggerParam:{outputGranularity:[{required:!0,message:"请选择数据产出粒度",trigger:["blur","change"]}],crontabParam:{cycle:[{required:!0,message:"请选择调度周期",trigger:["blur","change"]}],range:[{required:!0,message:"请选择指定时间",trigger:["blur","change"]}],startTime:[{required:!0,message:"请选择开始时间",trigger:["blur","change"]}],interval:[{required:!0,message:"请选择时间间隔",trigger:["blur","change"]}],endTime:[{required:!0,message:"请选择结束时间",trigger:["blur","change"]}],fixedTime:[{required:!0,message:"请选择定时调度时间",trigger:["blur","change"]}]}}},startDefaultValue:null,endDefaultValue:null}},computed:Te(Te({},Object(he["c"])(["userInfo"])),{},{namePlaceholder:function(){var e="名字只能包含a-z,A-Z,0-9或-或_；开始结尾需为字符，最多60个字符";return["StreamingSQL","StreamingJAR","MysqlCDC2Hive","Metis2Hive"].includes(this.ruleForm.templateCode)&&(e="名字只能包含a-z,A-Z,0-9或-；开始结尾需为字符，最多60个字符"),e},isOfflineTemp:function(){return!["StreamingSQL","StreamingJAR","MysqlCDC2Hive","Metis2Hive"].includes(this.ruleForm.templateCode)},intervalList:function(){var e=[],t=this.ruleForm.triggerParam.outputGranularity;return"minutely"===t?e=[5,10,15,20,30]:"hourly"===t&&(e=Array.from({length:12},(function(e,t){return t+1}))),e},rangeList:function(){var e=[],t=this.ruleForm.triggerParam.outputGranularity;return"hourly"===t?e=Array.from({length:24},(function(e,t){return t})):"weekly"===t?e=Array.from({length:7},(function(e,t){return t+1})):"monthly"===t&&(e=Array.from({length:31},(function(e,t){return t+1})),e.push("L")),e},isShowTime:function(){var e=this.ruleForm.triggerParam.outputGranularity;return"minutely"===e||"hourly"===e&&!this.isRange},isShowRange:function(){var e=this.ruleForm.triggerParam.outputGranularity;return!!["weekly","monthly"].includes(e)},isShowFixed:function(){return!!["daily","weekly","monthly"].includes(this.ruleForm.triggerParam.outputGranularity)},depGra:function(){var e="";return("data"===this.ruleForm.triggerParam.type||"cron"===this.ruleForm.triggerParam.type)&&(e=this.ruleForm.triggerParam.outputGranularity),e},startMinPicker:function(){var e=this.ruleForm.triggerParam.crontabParam.endTime||"23:59";return{selectableRange:"00:00:00-".concat(e,":00")}},endMinPicker:function(){var e=this.ruleForm.triggerParam.crontabParam.startTime||"00:00";return{selectableRange:"".concat(e,":00-23:59:00")}},startPicker:function(){var e=this.ruleForm.triggerParam.crontabParam.endTime,t=23;e&&(t=Number(e.split(":")[0]));for(var a=[],r=0;r<t+1;r++){var i=r<10?"0"+r:r;a.push("".concat(i,":00:00-").concat(i,":00:00"))}return{selectableRange:a}},endPicker:function(){var e=this.ruleForm.triggerParam.crontabParam.startTime,t=0;e&&(t=Number(e.split(":")[0]));for(var a=[],r=t;r<24;r++){var i=r<10?"0"+r:r;a.push("".concat(i,":59:00-").concat(i,":59:00"))}return{selectableRange:a}}}),created:function(){var e,t=this;if(null!=(e=this.ruleForm.oldAlertList)&&e.length&&!this.$route.query.copyId)this.alertList=this.ruleForm.oldAlertList;else{var a,r=this.$store.getters["user/systemConf"].config&&(null==(a=JSON.parse(this.$store.getters["user/systemConf"].config))?void 0:a.channel_info);r&&r.length?(r.map((function(e){switch(Object.keys(e)[0]){case"enterprise_wechat":t.alertList.push({label:"企业微信",value:"wechat"});break;case"email":t.alertList.push({label:"邮件",value:"email"});break}})),this.ruleForm.oldAlertList=this.alertList):this.alertList=[]}this.startDefaultValue=new Date,this.startDefaultValue.setHours(0),this.startDefaultValue.setMinutes(0),this.endDefaultValue=new Date,this.endDefaultValue.setHours(23),this.endDefaultValue.setMinutes(59),this.ruleForm.outputDataset.length&&(this.ruleForm.outputDataset=[this.ruleForm.outputDataset[this.ruleForm.outputDataset.length-1]]);for(var i=new Date((new Date).getFullYear(),(new Date).getMonth()+1,0).getDate(),n=1;n<Number(i)+1;n++)this.dayList.push({label:n<10?"0"+n:n,value:n});for(var l=0;l<24;l++)this.hourList.push({label:l<10?"0"+l:l,value:l});for(var o=0;o<60;o++)this.minuteList.push({label:o<10?"0"+o:o,value:o});this.source=this.$parent.source;var s=this.$parent.data,u=this.ruleForm.inputDataset.length&&this.ruleForm.inputDataset[0].metadata.table;if("workflow"!==this.source||0!==Object.keys(s).length||u||(this.ruleForm.dependTypes=this.ruleForm.dependTypes.filter((function(e){return"dataset"!==e}))),this.region&&this.ruleForm.inputDataset.forEach((function(e){e.metadata.region=t.region})),("DataMigration"===this.ruleForm.templateCode&&this.seniorForm.isTable||"Mysql2Hive"===this.ruleForm.templateCode||"Hive2Hive"===this.ruleForm.templateCode&&this.ruleForm.outputDataset[0].metadata&&this.ruleForm.outputDataset[0].metadata.db||"File2Lakehouse"===this.ruleForm.templateCode)&&(this.isDataSet2=!0,this.ruleForm.isDataSet2=!0,this.ruleForm.outputDataset[0].check=!!this.ruleForm.outputDataset[0].location),(["Hive2Mysql","Hive2Clickhouse","Hive2Redis","Hive2Redshift","Hive2Sharestore","Hive2File","SPARKJAR","PythonShell"].includes(this.ruleForm.templateCode)||"DataMigration"===this.ruleForm.templateCode&&!1===this.seniorForm.isTable||"Hive2Hive"===this.ruleForm.templateCode&&(!this.ruleForm.outputDataset[0].metadata||!this.ruleForm.outputDataset[0].metadata.db))&&(this.isDataSet1=!0,this.ruleForm.outputDataset[0]&&this.ruleForm.outputDataset[0].location?this.ruleForm.outputDataset[0].check=!0:this.$set(this.ruleForm,"outputDataset",[{fileName:"",check:!1,location:""}])),void 0===this.ruleForm.triggerParam.crontabParam.advancedSetting&&this.$set(this.ruleForm.triggerParam.crontabParam,"advancedSetting","cron"===this.ruleForm.triggerParam.type),this.ruleForm.triggerParam.crontabParam.startTime||this.$set(this.ruleForm.triggerParam.crontabParam,"startTime",""),this.ruleForm.triggerParam.crontabParam.endTime||this.$set(this.ruleForm.triggerParam.crontabParam,"endTime",""),!this.ruleForm.triggerParam.crontabParam.fixedTime){var c=this.ruleForm.triggerParam.crontabParam.startTime,m=c?c.split(":")[1]:"00";this.$set(this.ruleForm.triggerParam.crontabParam,"fixedTime","hourly"===this.ruleForm.triggerParam.outputGranularity?m:"00:00")}"data"===this.ruleForm.triggerParam.type&&(this.$set(this.ruleForm.triggerParam.crontabParam,"range",[1]),this.changeCron(),this.ruleForm.triggerParam.type="cron"),this.ruleForm.triggerParam.crontabParam.range&&this.ruleForm.triggerParam.crontabParam.range.length?this.isRange=!0:this.isRange=!1,this.init()},mounted:function(){var e=ve(Ee().mark((function e(){var t,a,r=this;return Ee().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((["Hive2Hive","DataMigration","SPARKJAR","Hive2Clickhouse","Hive2Mysql","Hive2Doris","Hive2Redis","Hive2Redshift","Hive2Sharestore","PythonShell","Hive2File"].includes(this.ruleForm.templateCode)||"Mysql2Hive"===this.ruleForm.templateCode&&!this.ruleForm.isLakeHouseReal)&&(this.autoCheck(),this.seniorForm.regularAlert.checkTime&&(t=this.seniorForm.regularAlert.checkTime.split(" "),2===t.length?("monthly"===this.seniorForm.regularAlert.graularity?this.timeGroup.date=Number(t[0]):this.timeGroup.week=Number(t[0]),this.timeGroup.hour=Number(t[1].split(":")[0]),this.timeGroup.minute=Number(t[1].split(":")[1])):(a=t[0].split(":"),2===a.length?(this.timeGroup.hour=Number(a[0]),this.timeGroup.minute=Number(a[1])):this.timeGroup.minute=Number(a[0]))),this.seniorForm.regularAlert.graularity=this.ruleForm.triggerParam.outputGranularity,this.expandTab()),(this.isJar||this.ruleForm.isLakeHouseMore)&&this.ruleForm.inputDataset.length&&this.ruleForm.inputDataset.forEach((function(e,t){r.$nextTick((function(){r.$refs["inputDataset"+t]&&(r.$refs["inputDataset"+t].inputValue=e.metadata.table)}))})),!["Hive2Hive","PythonShell","Hive2Redis","Hive2Redshift","Hive2File","TfJob","DataMigration"].includes(this.ruleForm.templateCode)){e.next=9;break}return e.next=5,this.getDbList();case 5:this.ruleForm.inputDataset.forEach((function(e){e.metadata&&e.metadata.db&&r.changeDb(e.metadata.db,e)})),this.ruleForm.outputDataset.forEach((function(e){e.metadata&&e.metadata.db&&r.changeDb(e.metadata.db,e)})),e.next=10;break;case 9:this.isShowSource&&(["Hive2Mysql","Hive2Doris","Hive2Clickhouse"].includes(this.ruleForm.templateCode)||this.getSourceList());case 10:this.isShowInputCheck&&this.ruleForm.inputDataset.forEach((function(e){})),this.ruleForm.triggerParam.crontab||this.changeCron(),this.ruleForm.triggerParam.crontabParam.range&&this.ruleForm.triggerParam.crontabParam.range.length&&(this.isRange=!0);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){if(["Hive2Hive","DataMigration","SPARKJAR","Hive2Clickhouse","Hive2Mysql","Hive2Doris","Hive2Redis","Hive2Redshift","Hive2Sharestore","PythonShell","Hive2File"].includes(this.ruleForm.templateCode)||"Mysql2Hive"===this.ruleForm.templateCode&&!this.ruleForm.isLakeHouseReal)switch(this.ruleForm.triggerParam.outputGranularity){case"monthly":this.seniorForm.regularAlert.checkTime="".concat(this.timeGroup.date," ").concat(this.timeGroup.hour,":").concat(this.timeGroup.minute);break;case"weekly":this.seniorForm.regularAlert.checkTime="".concat(this.timeGroup.week," ").concat(this.timeGroup.hour,":").concat(this.timeGroup.minute);break;case"daily":this.seniorForm.regularAlert.checkTime="".concat(this.timeGroup.hour,":").concat(this.timeGroup.minute);break;case"hourly":this.seniorForm.regularAlert.checkTime="".concat(this.timeGroup.minute);break}},methods:{init:function(){var e=this;this.remoteMethod(),this.getTokenSelect(),Object(g["E"])({componentCode:"UPDATE_FREQUENCY"}).then((function(t){var a=t.data;e.granularityList=a})),Object(g["u"])(this.userInfo.id).then((function(t){e.costList=t.data,e.changeCost()}))},remoteMethod:function(e){var t=this;this.ownerLoading=!0,e||(e=""),Object(g["Y"])(e).then((function(e){t.ownerLoading=!1;var a=e.data;t.ownerList=a;var r={};t.ownerList.forEach((function(e){e.shareId===t.seniorForm.owner&&(r=e)})),t.seniorForm.regularAlert.wechatReceivers&&t.seniorForm.regularAlert.wechatReceivers.length||(t.seniorForm.regularAlert.wechatReceivers=[r]),t.seniorForm.regularAlert.emailReceivers&&t.seniorForm.regularAlert.emailReceivers.length||(t.seniorForm.regularAlert.emailReceivers=[r]),Object.keys(t.seniorForm.alertModel).forEach((function(e){t.seniorForm.alertModel[e].wechatReceivers&&t.seniorForm.alertModel[e].wechatReceivers.length||(t.seniorForm.alertModel[e].wechatReceivers=[r]),t.seniorForm.alertModel[e].emailReceivers&&t.seniorForm.alertModel[e].emailReceivers.length||(t.seniorForm.alertModel[e].emailReceivers=[r])}))}))},getTokenSelect:function(){var e=this;Object(g["X"])(this.$store.getters["user/currentUserGroup"].id).then((function(t){e.tokenList=t.data}))},expandTab:function(){var e=this;this.seniorForm.regularAlert.isChecked?this.checkAlertType("timer"):Object.keys(this.seniorForm.alertModel).some((function(t){if(e.seniorForm.alertModel[t].isChecked)return e.checkAlertType(t),!0}))},checkChange:function(e,t){var a=this;this.alertList.length&&("timer"===t?this.seniorForm.regularAlert.alertType=e?[this.alertList[0].value]:[]:this.seniorForm.alertModel[t].alertType=e?[this.alertList[0].value]:[],this.$nextTick((function(){a.$refs.seniorFormDom.clearValidate()})),this.checkAlertType(t),this.isAlertReg||this.validateType())},checkTypeChange:function(){var e=this;0===this.seniorForm.regularAlert.alertType.length&&(this.seniorForm.regularAlert.isChecked=!1),Object.keys(this.seniorForm.alertModel).forEach((function(t){0===e.seniorForm.alertModel[t].alertType.length&&(e.seniorForm.alertModel[t].isChecked=!1)})),this.$nextTick((function(){e.$refs.seniorFormDom.clearValidate()})),this.autoCheck(),this.isAlertReg||this.validateType()},autoCheck:function(){this.seniorForm.regularAlert.alertType.length>0&&(this.seniorForm.regularAlert.isChecked=!0),this.seniorForm.alertModel.success.alertType.length>0&&(this.seniorForm.alertModel.success.isChecked=!0),this.seniorForm.alertModel.failure.alertType.length>0&&(this.seniorForm.alertModel.failure.isChecked=!0),this.seniorForm.alertModel.retry.alertType.length>0&&(this.seniorForm.alertModel.retry.isChecked=!0),this.seniorForm.alertModel.start.alertType.length>0&&(this.seniorForm.alertModel.start.isChecked=!0),this.$forceUpdate()},validateAlert:function(){var e=this;this.tipType="";var t=!0;return this.seniorForm.regularAlert.isChecked&&(this.seniorForm.regularAlert.alertType.length||(t=!1,this.tipType+="'定时告警'、")),Object.keys(this.seniorForm.alertModel).forEach((function(a){e.seniorForm.alertModel[a].isChecked&&0===e.seniorForm.alertModel[a].alertType.length&&(t=!1,"success"===a&&(e.tipType+="'任务成功时'、"),"failure"===a&&(e.tipType+="'任务失败时'、"),"retry"===a&&(e.tipType+="'任务重试时'、"),"start"===a&&(e.tipType+="'任务开始时'、"))})),this.tipType=this.tipType.slice(0,this.tipType.length-1),this.isAlertReg=t,t},alertWayChange:function(){this.$forceUpdate(),this.isAlertReg||this.validateType()},validateType:function(){var e=this;this.tipType="";var t=!0;return this.seniorForm.regularAlert.isChecked&&((!this.seniorForm.regularAlert.alertType.includes("email")||this.seniorForm.regularAlert.emailReceivers&&this.seniorForm.regularAlert.emailReceivers.length)&&(!this.seniorForm.regularAlert.alertType.includes("wechat")||this.seniorForm.regularAlert.wechatReceivers&&this.seniorForm.regularAlert.wechatReceivers.length&&this.seniorForm.regularAlert.wechatRobotKey)||(t=!1,this.tipType+="'定时告警'、")),Object.keys(this.seniorForm.alertModel).forEach((function(a){(!e.seniorForm.alertModel[a].alertType.includes("email")||e.seniorForm.alertModel[a].emailReceivers&&e.seniorForm.alertModel[a].emailReceivers.length)&&(!e.seniorForm.alertModel[a].alertType.includes("wechat")||e.seniorForm.alertModel[a].wechatReceivers&&e.seniorForm.alertModel[a].wechatReceivers.length&&e.seniorForm.alertModel[a].wechatRobotKey)||(t=!1,"success"===a&&(e.tipType+="'任务成功时'、"),"failure"===a&&(e.tipType+="'任务失败时'、"),"retry"===a&&(e.tipType+="'任务重试时'、"),"start"===a&&(e.tipType+="'任务开始时'、"))})),this.tipType=this.tipType.slice(0,this.tipType.length-1),this.isAlertReg=t,t},changeRegularSheduler:function(e){(["Hive2Hive","DataMigration","SPARKJAR","Hive2Clickhouse","Hive2Mysql","Hive2Doris","Hive2Redis","Hive2Redshift","Hive2Sharestore","PythonShell","Hive2File"].includes(this.ruleForm.templateCode)||"Mysql2Hive"===this.ruleForm.templateCode&&!this.ruleForm.isLakeHouseReal)&&2===e&&(this.seniorForm.regularAlert.isChecked=!1)},checkAlertType:function(e){this.alertTypeValue=e,"timer"===e?(this.showAlartModel=!1,this.showRegularAlert=!0):(this.showAlartModel=!0,this.showRegularAlert=!1)},handelInfo:function(e,t){this.infoObj.type=!0,this.infoObj.title=t,this.infoObj.msgType=e},isShowTooltip:function(e){var t=e.target.clientWidth,a=e.target.scrollWidth;this.isTipDisabled=!(a>t)},formatRangeLabel:function(e,t){var a=e;if("weekly"===t)switch(e){case 1:a="星期一";break;case 2:a="星期二";break;case 3:a="星期三";break;case 4:a="星期四";break;case 5:a="星期五";break;case 6:a="星期六";break;case 7:a="星期日";break}else"monthly"===t&&(a="L"===e?"每月最后1天":"每月"+e+"号");return a},formatGranularty:function(e){var t=this.cycleList.find((function(t){return t.value===e}));return t?t.label:"-"},getDataSetData:function(e,t){var a=e.level,r=e.children;if(e.children=[],1===a)t(r);else if(2===a){var i=e.parent.value,n={region:i,type:e.value};"hive"!==e.value&&"mysql"!==e.value&&"metis"!==e.value&&"clickhouse"!==e.value||(n.metaFlag="AIRBYTE",n.templateCode=this.ruleForm.templateCode),Object(g["y"])(n).then((function(a){var r=a.data,i=[];r&&(i=r.data.map((function(t){return{label:"metis"===e.value?t.qualifiedName:t.name,value:"metis"===e.value?t:"mysql"===e.value||"clickhouse"===e.value?t.actorId:t.name,leaf:"metis"===e.value}}))),t(i)}))}else if(3===a){var l=e.parent.value,o=e.parent.parent.value;if("mysql"===l||"clickhouse"===l){var s={region:o,type:l,actorId:e.value,metaFlag:"AIRBYTE",templateCode:this.ruleForm.templateCode};Object(g["y"])(s).then((function(e){var a=e.data,r=[];a&&(r=a.data.map((function(e){return{label:e.name,value:e.name}}))),t(r)}))}else{var u="db";"kafka"===l&&(u="datasource");var c=_e({region:o,type:l},u,e.value);"hive"!==l&&"mysql"!==l&&"metis"!==l.value&&"clickhouse"!==l.value||(c.metaFlag="AIRBYTE",c.templateCode=this.ruleForm.templateCode),Object(g["y"])(c).then((function(e){var a=e.data,r=[];a&&(r=a.data.map((function(e){return{label:e.name,value:e,leaf:!0}}))),t(r)}))}}else if(4===a){var m,d=e.parent.value,p=e.parent.parent.value,f=e.parent.parent.parent.value,h="db",E="datasource";"mysql"!==p&&"clickhouse"!==p||(E="actorId");var b=(m={region:f,type:p},_e(m,E,d),_e(m,h,e.value),m);"hive"!==p&&"mysql"!==p&&"metis"!==p&&"clickhouse"!==p||(b.metaFlag="AIRBYTE",b.templateCode=this.ruleForm.templateCode),Object(g["y"])(b).then((function(e){var a=e.data,r=[];a&&(r=a.data.map((function(e){return{label:e.name,value:e,leaf:!0}}))),t(r)}))}},getDbList:function(){var e=ve(Ee().mark((function e(){var t,a;return Ee().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["y"])({region:this.region,type:"hive",metaFlag:"AIRBYTE",templateCode:this.ruleForm.templateCode});case 2:t=e.sent,a=t.data,a&&a.data&&(this.sourceDbList=a.data,this.targetDbList=a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeDepend:function(e){e.includes("event")||(this.ruleForm.eventDepends=[])},nameKeyUp:function(e){["StreamingSQL","StreamingJAR","MysqlCDC2Hive","Metis2Hive","Db2Hive"].includes(this.ruleForm.templateCode)||this.ruleForm.isLakeHouseReal?(this.initNameLimit||(this.nameTips="最多只能输入45个字符"),45===this.ruleForm.name.length?this.initNameLimit=!1:(this.initNameLimit=!0,this.nameTips="")):(this.initNameLimit||(this.nameTips="最多只能输入60个字符"),60===this.ruleForm.name.length?this.initNameLimit=!1:(this.initNameLimit=!0,this.nameTips=""))},changeName:function(e){var t=this.ruleForm.templateCode;["Hive2Clickhouse","Hive2Mysql","Hive2Doris","PythonShell","Hive2Redis","Hive2Redshift"].includes(t)&&!this.ruleForm.outputDataset[0].metadata.table&&(this.ruleForm.outputDataset[0].metadata.table=e),this.isChangeTable&&"DataMigration"===t&&(this.ruleForm.outputDataset[0].metadata.table=e)},showPoppver:function(e){if(!e.useDateCalcuParam){var t=e.unitOffset.toString();if(t.indexOf("~")>-1){var a=t.split("~");this.minRangeValue=Number(a[0]),this.maxRangeValue=Number(a[1]),this.isSingleOffset=!1}else this.singleOffset=Number(e.unitOffset),this.isSingleOffset=!0}},savePopover:function(e){this.isSingleOffset?this.$set(e,"unitOffset",this.singleOffset):this.$set(e,"unitOffset","".concat(this.minRangeValue,"~").concat(this.maxRangeValue)),this.$set(e,"useDateCalcuParam",!1),this.closePopover()},closePopover:function(){document.body.click()},seniorConfig:function(e,t,a){this.$refs.seniorConfig.showWin(e,t,a)},saveConfig:function(e,t,a){this.$set(this.ruleForm[e][a],"dateCalculationParam",t),this.$set(this.ruleForm[e][a],"useDateCalcuParam",!0)},offsetConfig:function(e,t,a){var r={taskGra:this.ruleForm.triggerParam.outputGranularity};this.seniorChecked&&(r.taskCrontab=this.ruleForm.triggerParam.crontab),r.key="taskDepend",r.taskDepend=t,this.$refs.offsetConfig.showWin(e,t,this.ruleForm.triggerParam.outputGranularity,r,a)},saveOffset:function(e,t,a){this.$set(this.ruleForm[e][a],t.key,t.value),this.$set(this.ruleForm[e][a],"useDateCalcuParam",t.useDateCalcuParam)},changeDb:function(e,t){var a=this;if(["Hive2Hive","PythonShell","Hive2Redis","Hive2Redshift","Hive2File","TfJob","DataMigration"].includes(this.ruleForm.templateCode)){var r=this.sourceDbList.find((function(t){return t.name===e}));r?(this.$set(t,"sourceTableList",[]),Object(g["y"])({region:this.region,type:"hive",db:e,metaFlag:"AIRBYTE",templateCode:this.ruleForm.templateCode}).then((function(e){var r=e.data;r&&r.data&&a.$set(t,"sourceTableList",r.data)}))):this.$set(t,"sourceTableList",[])}},changeTable:function(e,t,a,r){var i=this,n=!0;if(r.length>1&&r.forEach((function(r,l){if(a!==l&&r.metadata.table===e&&r.metadata.db===t.metadata.db)return i.$message.error("库表名称不能重复"),t.metadata.table="",void(n=!1)})),n){void 0===t.sourceTableList&&(t.sourceTableList=[]);var l=t.sourceTableList.find((function(t){return t.name===e}));l?(t.id=l.qualifiedName,t.guid=l.guid):(t.id="",t.guid=""),t.tableGuid&&delete t.tableGuid,this.isShowInputCheck}},getDatasetInfoList:function(e,t){var a=this;this.btnLoading=!0;var r={taskName:this.ruleForm.name};e.isMetadataSel||(r.qualifyname=e.id),Object(g["z"])(r).then((function(r){var i=r.data;e.isExternal=i.isExternal,0===i.isExternal?(a.$set(e,"granularityList",[i.granularity]),e.granularity=i.granularity):(a.$set(e,"granularityList",i.allowDependGran),t&&!i.allowDependGran.includes(e.granularity)&&(e.granularity=i.allowDependGran[0])),a.$set(e,"checkPathList",i.checkPath),a.btnLoading=!1}))},handleChange:function(e,t){var a=e.slice(-1)[0],r=e[0],i=e[1],n="",l="";"mysql"===i||"clickhouse"===i||"kafka"===i?(n=e[2],l=e[3]):"hive"===i&&(l=e[2]);var o="metis"===i?a.qualifiedName:a.name;t.id=a.qualifiedName,t.guid=a.guid,t.metadata={region:r,type:i,source:n,db:l,table:o},this.isShowInputCheck},switchClick:function(e){e.isMetadataSel=!e.isMetadataSel,e.metadata.table="",e.completePath=""},handleBlur:function(e,t){t.id=e,t.guid="",t.metadata.type="hive",t.metadata.source="",t.metadata.db="",t.metadata.table="",this.isShowInputCheck},preview:function(e,t){if("dataDepend"!==t||e.metadata.db&&e.metadata.table||e.id)if("taskDepend"!==t||e.taskId&&e.dependId){var a={taskGra:this.ruleForm.triggerParam.outputGranularity};this.seniorChecked&&(a.taskCrontab=this.ruleForm.triggerParam.crontab),a[t]=e,this.$refs.previewDialog.showWin(a)}else this.$message.warning("请先选择查询对应ID");else this.$message.warning("请先选择库表")},check:function(e,t){var a=t.guid||t.tableGuid;if(!a&&t.sourceTableList){var r=t.sourceTableList.find((function(e){return e.name===t.metadata.table}));a=r?r.guid:""}this.$refs.checkPath.showWin({guid:a,index:e,location:t.location,partitions:t.partitions,fileName:t.fileName,check_path:t.check_path})},set:function(e,t){var a={taskGra:this.ruleForm.triggerParam.outputGranularity};this.seniorChecked&&(a.taskCrontab=this.ruleForm.triggerParam.crontab),a.key="dataDepend",a.dataDepend=t,this.$refs.detailSet.showWin(e,t,this.ruleForm.triggerParam.outputGranularity,a)},saveSet:function(e){1===e.isExternal?1===e.checkType?(this.ruleForm.inputDataset[e.index].check_path=e.check_path,this.ruleForm.inputDataset[e.index].detailed_gra=e.detailed_gra,this.ruleForm.inputDataset[e.index].detailed_dependency=e.detailed_dependency,delete this.ruleForm.inputDataset[e.index].ready_time,delete this.ruleForm.inputDataset[e.index].success_time,this.ruleForm.inputDataset[e.index].unitOffset=e.unitOffset,this.ruleForm.inputDataset[e.index].useDateCalcuParam=e.useDateCalcuParam,this.ruleForm.inputDataset[e.index].dateCalculationParam=e.dateCalculationParam,this.ruleForm.inputDataset[e.index].granularity=e.granularity):2===e.checkType?(this.ruleForm.inputDataset[e.index].ready_time=e.ready_time,this.$set(this.ruleForm.inputDataset[e.index],"success_time",e.success_time),delete this.ruleForm.inputDataset[e.index].check_path,delete this.ruleForm.inputDataset[e.index].detailed_gra,delete this.ruleForm.inputDataset[e.index].detailed_dependency,this.ruleForm.inputDataset[e.index].unitOffset=0,this.ruleForm.inputDataset[e.index].useDateCalcuParam=!1,this.ruleForm.inputDataset[e.index].dateCalculationParam={},this.ruleForm.inputDataset[e.index].granularity=e.granularity):(delete this.ruleForm.inputDataset[e.index].check_path,delete this.ruleForm.inputDataset[e.index].detailed_gra,delete this.ruleForm.inputDataset[e.index].detailed_dependency,delete this.ruleForm.inputDataset[e.index].ready_time,delete this.ruleForm.inputDataset[e.index].success_time):(this.ruleForm.inputDataset[e.index].detailed_gra=e.detailed_gra,this.ruleForm.inputDataset[e.index].detailed_dependency=e.detailed_dependency,delete this.ruleForm.inputDataset[e.index].check_path,delete this.ruleForm.inputDataset[e.index].ready_time,delete this.ruleForm.inputDataset[e.index].success_time),this.inputDatasetKey++},savePath:function(e){e.check?(this.ruleForm.inputDataset[e.index].location=e.location,this.ruleForm.inputDataset[e.index].partitions=e.partitions,this.ruleForm.inputDataset[e.index].fileName=e.fileName,delete this.ruleForm.inputDataset[e.index].check_path):e.checkCustom?(this.ruleForm.inputDataset[e.index].check_path=e.check_path,delete this.ruleForm.inputDataset[e.index].location,delete this.ruleForm.inputDataset[e.index].partitions,delete this.ruleForm.inputDataset[e.index].fileName):(delete this.ruleForm.inputDataset[e.index].location,delete this.ruleForm.inputDataset[e.index].partitions,delete this.ruleForm.inputDataset[e.index].fileName,delete this.ruleForm.inputDataset[e.index].check_path)},addEvent:function(){this.$refs.addInside.showWin()},saveInside:function(e){var t=this,a=this.ruleForm.eventDepends.map((function(e){return e.taskId+""}));e.forEach((function(e){a.includes(e.id+"")?t.$message.warning("任务ID=".concat(e.id,"已被添加")):t.ruleForm.eventDepends.push({dependId:e.name||"-",dependGra:"",dateCalculationParam:{},unitOffset:0,useDateCalcuParam:!1,granularity:e.granularity||"-",taskId:e.id||"-",metadataId:e.metadataId||"-",templateCode:e.templateCode||"-"})}))},delEvent:function(e){this.ruleForm.eventDepends.splice(e,1)},changeIsRange:function(e){e?(this.$set(this.ruleForm.triggerParam.crontabParam,"interval",""),this.$set(this.ruleForm.triggerParam.crontabParam,"startTime",""),this.$set(this.ruleForm.triggerParam.crontabParam,"endTime","")):this.$set(this.ruleForm.triggerParam.crontabParam,"range",[])},getUtc0:function(){var e=this,t=this.ruleForm.triggerParam.crontabParam;this.btnLoad=!0,Object(g["w"])({cycle:this.ruleForm.triggerParam.outputGranularity,range:t.range,interval:t.interval,startTime:t.startTime,endTime:t.endTime,fixedTime:t.fixedTime,convertUtc0:!0}).then((function(t){var a=t.data;e.$msgbox({title:"utc0时间",message:"cron表达式：".concat(a),showConfirmButton:!1})})).finally((function(){e.btnLoad=!1}))},getTime:function(){var e=this;this.btnLoad2=!0,Object(g["v"])({crontab:this.ruleForm.triggerParam.crontab,num:7}).then((function(t){var a=t.data,r="";a.forEach((function(e){r+=e+"<br/>"})),e.$msgbox({title:"接下来7次的执行时间",message:r,dangerouslyUseHTMLString:!0,showConfirmButton:!1}).catch((function(){}))})).finally((function(){e.btnLoad2=!1}))},changeOutputGranularity:function(e){var t=this.ruleForm.triggerParam.crontabParam.fixedTime+"";"hourly"===e&&t.indexOf(":")>-1&&(this.ruleForm.triggerParam.crontabParam.fixedTime=t.split(":")[1]),"daily"!==e&&"weekly"!==e&&"monthly"!==e||!t||-1!==t.indexOf(":")||(this.ruleForm.triggerParam.crontabParam.fixedTime="00:"+t),this.$set(this.ruleForm.triggerParam.crontabParam,"range",[1]),this.$set(this.ruleForm.triggerParam.crontabParam,"interval","minutely"===e?5:""),this.$set(this.ruleForm.triggerParam.crontabParam,"startTime",""),this.$set(this.ruleForm.triggerParam.crontabParam,"endTime",""),this.isRange=!0,this.ruleForm.triggerParam.crontabParam.advancedSetting=!1,this.changeCron()},changeCron:function(){var e=this,t=this.ruleForm.triggerParam.crontabParam;t.startTime||(this.ruleForm.triggerParam.crontabParam.startTime=""),t.endTime||(this.ruleForm.triggerParam.crontabParam.endTime=""),(["Hive2Hive","DataMigration","SPARKJAR","Hive2Clickhouse","Hive2Mysql","Hive2Doris","Hive2Redis","Hive2Redshift","Hive2Sharestore","PythonShell","Hive2File"].includes(this.ruleForm.templateCode)||"Mysql2Hive"===this.ruleForm.templateCode&&!this.ruleForm.isLakeHouseReal)&&(this.seniorForm.regularAlert.graularity=this.ruleForm.triggerParam.outputGranularity,"minutely"===this.ruleForm.triggerParam.outputGranularity&&(this.seniorForm.regularAlert.isChecked=!1,this.expandTab())),Object(g["w"])({cycle:this.ruleForm.triggerParam.outputGranularity,range:t.range,interval:t.interval,startTime:t.startTime,endTime:t.endTime,fixedTime:t.fixedTime,advancedSetting:this.ruleForm.triggerParam.crontabParam.advancedSetting}).then((function(t){var a=t.data;e.ruleForm.triggerParam.crontab=a||""}))},addData:function(){var e={id:"",guid:"",completePath:"",metadata:{region:this.region,type:"hive",source:"",db:"",table:""},granularity:"daily",unitOffset:0,ready_time:"0 0 * * *",useDateCalcuParam:!1,dateCalculationParam:{},sourceTableList:[]};this.isJar&&(e.isMetadataSel=!0),this.ruleForm.inputDataset.push(e)},delData:function(e){var t=this;this.ruleForm.inputDataset.splice(e,1),this.isJar&&this.ruleForm.inputDataset.length&&(this.inputDatasetKey++,this.ruleForm.inputDataset.forEach((function(e,a){t.$nextTick((function(){t.$refs["inputDataset"+a]&&(t.$refs["inputDataset"+a].inputValue=e.metadata.table)}))})))},addCost:function(){this.ruleForm.cost.length<4?this.ruleForm.cost.push({key:"",value:""}):this.$message({type:"warning",message:"成本分摊最多支持4个部门哦"})},delCost:function(e){this.ruleForm.cost.length>1?this.ruleForm.cost.splice(e,1):this.$message({type:"warning",message:"至少保留一条任务归属成本哦"})},changeCost:function(e){var t=this;this.costList.forEach((function(e){var a=t.ruleForm.cost.find((function(t){return t.key===e.id}));a?t.$set(e,"disabled",!0):t.$set(e,"disabled",!1)}))},changeGranularity:function(e,t){var a=this;this.$nextTick((function(){a.$refs.crontab.changeTimeUnit()})),t.unitOffset=0,t.useDateCalcuParam=!1}}},Oe=Ce,Ae=(a("f566"),a("f87d"),Object(u["a"])(Oe,r,i,!1,null,"89246f34",null));t["a"]=Ae.exports},1037:function(e,t,a){"use strict";a("d7bc")},"10a5":function(e,t,a){"use strict";a("dd30")},"19a2":function(e,t,a){},"1c89":function(e,t,a){},"1db8":function(e,t,a){"use strict";a("bdae")},"205a":function(e,t,a){"use strict";a("3623")},"23ca":function(e,t,a){},"287c":function(e,t,a){"use strict";a("9879")},"2dfe":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-steps",{class:["steps-head",e.source],attrs:{active:"workflow"===e.source?e.active-1:e.active,"process-status":"finish","finish-status":"success",direction:e.direction}},["workflow"===e.source?[a("el-step",{attrs:{title:"设置任务信息"}}),e._v(" "),a("el-step",{attrs:{title:"设置依赖信息"}})]:[a("el-step",{class:[e.active>=0?"success_type":""],attrs:{title:e.title1,description:e.description1},nativeOn:{click:function(t){return e.handelStep(0)}}}),e._v(" "),a("el-step",{class:[e.active>=1?"success_type":""],attrs:{title:e.title2,description:e.description2},nativeOn:{click:function(t){return e.handelStep(1)}}}),e._v(" "),a("el-step",{class:[e.active>=2?"success_type":""],attrs:{title:e.title3,description:e.description3},nativeOn:{click:function(t){return e.handelStep(2)}}}),e._v(" "),e.title4?a("el-step",{class:[e.active>=3?"success_type":""],attrs:{title:e.title4,description:e.description4},nativeOn:{click:function(t){return e.handelStep(3)}}}):e._e()]],2)},i=[],n={name:"StepsHead",props:{active:{type:Number,default:0},page:{type:String,default:"task"},source:{type:String,default:"task"},direction:{type:String,default:"horizontal"}},data:function(){return{}},computed:{title1:function(){var e="选模板";return"dataset"===this.page&&(e="选择数据源"),e},description1:function(){var e="选择所需模板";return"dataset"===this.page&&(e="定义数据源的基本信息"),e},title2:function(){var e="配置任务";return"dataset"===this.page&&(e="创建表"),e},description2:function(){var e="源与目标信息配置、字段映射、加工逻辑等";return"dataset"===this.page&&(e="填写表信息"),e},title3:function(){var e="配置调度";return"dataset"===this.page&&(e="设置表信息"),e},description3:function(){var e="调度Cron、前置依赖、生成数据集等";return"dataset"===this.page&&(e="添加表维护信息"),e},title4:function(){var e="";return"task"===this.page&&(e="预览"),e},description4:function(){var e="";return"task"===this.page&&(e="预览结果和校验"),e}},methods:{handelStep:function(e){e>=this.active||this.$emit("handelStep",e)}}},l=n,o=(a("a216"),a("2877")),s=Object(o["a"])(l,r,i,!1,null,"4488e623",null);t["a"]=s.exports},"353e":function(e,t,a){},3623:function(e,t,a){},3941:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tooltip",{attrs:{content:e.text,placement:e.placement,disabled:e.isTipDisabled}},[a("div",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(e.text))])])},i=[],n={name:"EllipsisTooltip",props:{text:{type:String,default:""},placement:{type:String,default:"top"}},data:function(){return{isTipDisabled:!1}},methods:{isShowTooltip:function(e){var t=e.target.clientWidth,a=e.target.scrollWidth;this.isTipDisabled=!(a>t)}}},l=n,o=a("2877"),s=Object(o["a"])(l,r,i,!1,null,null,null);t["a"]=s.exports},3970:function(e,t,a){},"3dc0":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"保存校验",visible:e.visible,width:"40%","append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.close},on:{"update:visible":function(t){e.visible=t}}},[a("el-timeline",e._l(e.validList,(function(t,r){return a("el-timeline-item",{key:r.validType,staticClass:"valid-item",attrs:{type:e.statusType(t.state.status),size:"large","hide-timestamp":!0}},[a("div",{staticClass:"valid-item-title"},[e._v("\n        "+e._s("校验Step"+t.step+": "+t.description)+"\n        "),["warn","forbid"].includes(t.state.status)?a("el-tooltip",{attrs:{effect:"dark",content:t.state.isUnfold?"收起":"展开",placement:"top"}},[a("i",{class:[t.state.isUnfold?"el-icon-arrow-up":"el-icon-arrow-down"],staticStyle:{cursor:"pointer",color:"#409eff"},on:{click:function(e){t.state.isUnfold=!t.state.isUnfold}}})]):e._e(),e._v(" "),a("span",{staticStyle:{float:"right"}},["pass"===t.state.status?a("el-tooltip",{attrs:{effect:"dark",content:"通过",placement:"top"}},[a("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a"}})]):"forbid"===t.state.status?a("el-tooltip",{attrs:{effect:"dark",content:"提醒",placement:"top"}},[a("i",{staticClass:"el-icon-error",staticStyle:{color:"#f56c6c"}})]):"warn"===t.state.status?a("el-tooltip",{attrs:{effect:"dark",content:"提醒",placement:"top"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"#e6a23c"}})]):"checking"===t.state.status?a("el-tooltip",{attrs:{effect:"dark",content:"校验中",placement:"top"}},[a("i",{staticClass:"el-icon-loading",staticStyle:{color:"#409eff"}})]):e._e(),e._v(" "),"warn"===t.state.status?a("el-popover",{attrs:{disabled:["HIVE_READ_PRI","HIVE_WRITE_PRI","HIVE_CREATE_PRI"].includes(t.validType),placement:"top",trigger:"hover",width:"310"}},[a("div",[a("div",{staticStyle:{"margin-bottom":"10px","font-size":"14px"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"#e6a23c","margin-right":"4px"}}),e._v("提醒信息")]),e._v(" "),a("div",{staticStyle:{"font-size":"13px"}},[e._v("请联系当前租户的管理员（xuebotao）去申请")])]),e._v(" "),a("el-link",{staticStyle:{width:"36px","font-size":"12px",transform:"scale(0.9)"},attrs:{slot:"reference",type:"primary",target:"_blank",href:["HIVE_READ_PRI","HIVE_WRITE_PRI","HIVE_CREATE_PRI"].includes(t.validType)?e.getUrl(t):null},slot:"reference"},[e._v("去申请")])],1):a("span",{staticStyle:{display:"inline-block",width:"36px"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.state.isUnfold,expression:"item.state.isUnfold"}],staticClass:"valid-item-result"},[t.state.message?a("div",{style:{color:"warn"===t.state.status?"#E6A23C":"#F56C6C",paddingLeft:"10px",fontSize:"12px"}},[e._v(e._s(t.state.message))]):e._e(),e._v(" "),e._l(t.state.itemList,(function(t){return[["warn","forbid"].includes(t.itemStatus)?a("div",{key:t.itemName,style:{color:"warn"===t.itemStatus?"#E6A23C":"#F56C6C",paddingLeft:"10px",fontSize:"12px"}},[e._v(e._s(t.itemName)+"：不通过"+e._s(t.errorMessage?"，"+t.errorMessage:""))]):e._e()]}))],2)])})),1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["pass"===e.statusText||"checking"===e.statusText?a("el-button",{on:{click:e.close}},[e._v("取消")]):a("el-button",{on:{click:e.cancel}},[e._v("去修改")]),e._v(" "),"warn"===e.statusText?a("el-tooltip",{attrs:{effect:"dark",content:"请在'上线'前确保上述警告项已被处理",placement:"top"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1):a("el-button",{attrs:{type:"primary",disabled:"pass"!==e.statusText},on:{click:e.save}},[e._v("保存")])],1)],1)},i=[],n=a("b207");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t=c(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e){var t=m(e,"string");return"symbol"===l(t)?t:String(t)}function m(e,t){if("object"!==l(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,i=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,a){return e[t]=a}}function m(e,t,a,r){var n=t&&t.prototype instanceof v?t:v,l=Object.create(n.prototype),o=new L(r||[]);return i(l,"_invoke",{value:k(e,a,o)}),l}function p(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=m;var f="suspendedStart",h="suspendedYield",g="executing",E="completed",b={};function v(){}function y(){}function T(){}var _={};c(_,o,(function(){return this}));var S=Object.getPrototypeOf,R=S&&S(S(F([])));R&&R!==a&&r.call(R,o)&&(_=R);var C=T.prototype=v.prototype=Object.create(_);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function a(i,n,o,s){var u=p(e[i],e,n);if("throw"!==u.type){var c=u.arg,m=c.value;return m&&"object"==l(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(m).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,s)}))}s(u.arg)}var n;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){a(e,r,t,i)}))}return n=n?n.then(i,i):i()}})}function k(t,a,r){var i=f;return function(n,l){if(i===g)throw new Error("Generator is already running");if(i===E){if("throw"===n)throw l;return{value:e,done:!0}}for(r.method=n,r.arg=l;;){var o=r.delegate;if(o){var s=I(o,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var u=p(t,a,r);if("normal"===u.type){if(i=r.done?E:h,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=E,r.method="throw",r.arg=u.arg)}}}function I(t,a){var r=a.method,i=t.iterator[r];if(i===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,I(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var n=p(i,t.iterator,a.arg);if("throw"===n.type)return a.method="throw",a.arg=n.arg,a.delegate=null,b;var l=n.arg;return l?l.done?(a[t.resultName]=l.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,b):l:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,b)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function F(t){if(t||""===t){var a=t[o];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function a(){for(;++i<t.length;)if(r.call(t,i))return a.value=t[i],a.done=!1,a;return a.value=e,a.done=!0,a};return n.next=n}}throw new TypeError(l(t)+" is not iterable")}return y.prototype=T,i(C,"constructor",{value:T,configurable:!0}),i(T,"constructor",{value:y,configurable:!0}),y.displayName=c(T,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,c(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},O(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,a,r,i,n){void 0===n&&(n=Promise);var l=new A(m(e,a,r,i),n);return t.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},O(C),c(C,u,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=F,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function i(r,i){return o.type="throw",o.arg=t,a.next=r,i&&(a.method="next",a.arg=e),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n],o=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var s=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(s&&u){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=e,l.arg=t,n?(this.method="next",this.next=n.finallyLoc,b):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),P(a),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var i=r.arg;P(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:F(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function p(e,t,a,r,i,n,l){try{var o=e[n](l),s=o.value}catch(u){return void a(u)}o.done?t(s):Promise.resolve(s).then(r,i)}function f(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function l(e){p(n,r,i,l,o,"next",e)}function o(e){p(n,r,i,l,o,"throw",e)}l(void 0)}))}}var h={props:{code:{type:String,required:!0}},data:function(){return{visible:!1,data:null,validList:[]}},computed:{statusText:function(){for(var e="pass",t=0;t<this.validList.length;t++){var a=this.validList[t];if("checking"===a.state.status){e="checking";break}if("forbid"===a.state.status){e="forbid";break}"warn"===a.state.status&&(e="warn")}return e}},methods:{getUrl:function(e){var t=e.state.message.split(":")[1],a="".concat(this.$locationOrigin,"/meta/list");return t&&(a+="?tableName=".concat(t)),a},initValidList:function(){var e=f(d().mark((function e(){var t;return d().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.validList.length<=0)){e.next=6;break}return e.next=3,Object(n["a"])(this.code);case 3:t=e.sent,t.data&&t.data.forEach((function(e){e.state={status:"",step:e.step,message:"",isUnfold:!1,itemList:[]}})),this.validList=t.data;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),show:function(){var e=f(d().mark((function e(t){return d().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.data=t,!(["Metis2Hive","StreamingJAR","StreamingSQL","MergeSmallFiles","Hive2File","TrainingModel"].includes(this.code)||"Mysql2Hive"===this.code&&2===this.data.runtimeConfig.syncType)){e.next=4;break}return this.save(),e.abrupt("return");case 4:return e.next=6,this.initValidList();case 6:this.visible=!0,this.validRun();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),validRun:function(){for(var e=this,t=function(){var t=e.validList[a];t.state.status="checking";var r=JSON.parse(JSON.stringify(e.data));r.id&&String(r.id).includes("addTask")&&delete r.id,Object(n["b"])(e.code,{validType:t.validType,task:r}).then((function(e){var a=e.data;t.state=s(s({},t.state),a),["warn","forbid"].includes(a.status)&&(t.state.isUnfold=!0)})).catch((function(e){console.log("校验出错:",e),t.state.status="forbid",t.state.step=t.step,t.state.isUnfold=!0,t.state.message=e.message}))},a=0;a<this.validList.length;a++)t()},statusType:function(e){var t="";switch(e){case"pass":t="success";break;case"warn":t="warning";break;case"forbid":t="danger";break;case"checking":t="primary";break}return t},save:function(){this.$emit("save",this.data),this.visible=!1},cancel:function(){var e=this.validList.find((function(e){return"forbid"===e.state.status})),t=e&&e.state.step?e.state.step:2;this.data=null,this.validList.forEach((function(e){e.state={status:"",step:e.step,message:"",isUnfold:!1,itemList:[]}})),this.visible=!1,this.$parent.currentStep=t-1},close:function(){this.data=null,this.validList.forEach((function(e){e.state={status:"",step:e.step,message:"",isUnfold:!1,itemList:[]}})),this.visible=!1}}},g=h,E=(a("287c"),a("2877")),b=Object(E["a"])(g,r,i,!1,null,"05f34f52",null);t["a"]=b.exports},"3fc0":function(e,t,a){"use strict";a("7890")},"460e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{attrs:{span:e.span}},[a("div",{staticClass:"search-item"},[a("span",{staticClass:"label",style:{width:e.width}},[e._v(e._s(e.label))]),e._v(" "),e._t("default")],2)])},i=[],n={name:"SearchItem",props:{span:{type:Number,default:24},label:{type:String,default:""},width:{type:String,default:"100px"}},data:function(){return{}}},l=n,o=(a("c58c"),a("2877")),s=Object(o["a"])(l,r,i,!1,null,"e67fa306",null);t["a"]=s.exports},"46c4":function(e,t,a){"use strict";a("23ca")},"4c07":function(e,t,a){"use strict";a("1c89")},"4fb9":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:13}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.inputColumnsLoading,expression:"inputColumnsLoading"}],ref:"inputColumnsTable",staticStyle:{"font-size":"13px"},attrs:{data:e.inputColumns,stripe:"","cell-style":{height:"45px",padding:"0px"}}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"字段名称","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.name,disabled:e.isTipDisabled}},[a("div",{staticClass:"name-box"},[a("span",{staticClass:"ellipsis block name-item",on:{mouseenter:e.isShowTooltip}},[e._v("\n                  "+e._s(t.row.name||"-")+"\n                ")]),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.isPK?"(PK)":""))]),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.isNameChange?"(变更)":""))]),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.isDel?"(删除)":""))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"data_type",label:"字段类型","min-width":"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.data_type,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},["mongodb"===e.configForm.sourceType?[e._v(e._s(t.row.data_type||"-"))]:[a("el-select",{attrs:{placeholder:"请选择目标字段类型",size:"mini",clearable:""},on:{change:function(a){return e.changeType(t.$index,t.row.columnType)}},model:{value:t.row.data_type,callback:function(a){e.$set(t.row,"data_type",a)},expression:"scope.row.data_type"}},e._l(e.mongoDbTypes,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.isTypeChange?"(变更)":""))])],2)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"字段描述","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.comment,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.comment||"-"))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"映射&转换",prop:"funcs","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index<e.columns.length&&t.$index<e.inputColumns.length?a("el-popover",{attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper",disabled:e.disabled}},[t.row.funcs&&t.row.funcs.length>0?a("div",[a("span",{staticClass:"func-span"},[e._v("函数名")]),e._v(" "),a("span",{staticClass:"func-span"},[e._v("参数")]),e._v(" "),e._l(t.row.funcs,(function(t,r){return a("div",{key:r},[a("span",{staticClass:"func-span"},[e._v(e._s(t.funcName))]),e._v(" "),a("span",{staticClass:"func-span"},[e._v(e._s(t.funcParams.join(",")))])])}))],2):a("div",[e._v("添加转换函数")]),e._v(" "),a("template",{slot:"reference"},[a("func-icon",{nativeOn:{click:function(a){return e.clickFunc(t.row,t.$index)}}}),e._v(" "),t.row.funcs&&t.row.funcs.length>0?a("div",{staticClass:"func-num"},[e._v(e._s(t.row.funcs.length))]):e._e(),e._v(" "),"success"===t.row.state?a("span",{staticClass:"state state-success"},[e._v("成功")]):"fail"===t.row.state?a("span",{staticClass:"state state-fail"},[e._v("失败")]):e._e()],1)],2):e._e()]}}])})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.columnsLoading,expression:"columnsLoading"}],ref:"columnsTable",staticStyle:{"font-size":"13px"},attrs:{data:e.columns,stripe:"","cell-style":{height:"45px",padding:"0px"}}},[a("el-table-column",{attrs:{prop:"columnName",label:"字段名称","min-width":"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.columnName,disabled:e.isTipDisabled}},[e.disabled?a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v("\n                "+e._s(t.row.columnName||"-")+"\n              ")]):a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[a("el-input",{attrs:{placeholder:"字段名称",size:"mini",clearable:""},model:{value:t.row.columnName,callback:function(a){e.$set(t.row,"columnName",a)},expression:"scope.row.columnName"}}),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.isPK?"(PK)":""))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"columnType",label:"字段类型","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.disabled?[e._v(e._s(t.row.columnType||"-"))]:[a("el-select",{attrs:{placeholder:"请选择目标字段类型",size:"mini",clearable:""},on:{change:function(a){return e.changeType(t.$index,t.row.columnType)}},model:{value:t.row.columnType,callback:function(a){e.$set(t.row,"columnType",a)},expression:"scope.row.columnType"}},e._l(e.typeList,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)]]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"columnType",label:"安全级别","min-width":"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.disabled?[e._v(e._s(t.row.securityLevel||"-"))]:[a("el-select",{attrs:{size:"mini"},on:{change:function(a){return e.changeType(t.$index,t.row.columnType)}},model:{value:t.row.securityLevel,callback:function(a){e.$set(t.row,"securityLevel",a)},expression:"scope.row.securityLevel"}},e._l(e.securityList,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)]]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"字段描述","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e.disabled?[a("span",[e._v(e._s(t.row.columnComment||"-"))])]:[a("el-input",{attrs:{placeholder:"字段描述",size:"mini",clearable:""},model:{value:t.row.columnComment,callback:function(a){e.$set(t.row,"columnComment",a)},expression:"scope.row.columnComment"}})]]}}])}),e._v(" "),e.isSingle?a("el-table-column",{attrs:{label:"操作","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[[a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){return e.addItem(t)}},slot:"reference"},[e._v("复制")]),e._v(" "),a("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info",title:"确定删除此字段？"},on:{confirm:function(a){return e.deleteTableItem(t.$index)}}},[a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1)]]}}],null,!1,3243552222)}):e._e()],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"decimal类型自定义",visible:e.dialogVisible,width:"420px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[a("div",{staticClass:"tip"},[e._v("decimal类型支持让用户自定义精度和小数位数")]),e._v(" "),a("el-form",{ref:"decimalForm",attrs:{model:e.decimalForm,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"精度",prop:"accuracy",rules:[{required:!0,message:"请输入精度",trigger:"change"}]}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:38},model:{value:e.decimalForm.accuracy,callback:function(t){e.$set(e.decimalForm,"accuracy",t)},expression:"decimalForm.accuracy"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小数位数",prop:"decimal",rules:[{required:!0,message:"请输入小数位数",trigger:"change"}]}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:e.decimalForm.accuracy},model:{value:e.decimalForm.decimal,callback:function(t){e.$set(e.decimalForm,"decimal",t)},expression:"decimalForm.decimal"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveDecimal}},[e._v("确 定")])],1)],1),e._v(" "),a("convert-func",{ref:"convertFunc",on:{save:e.save}})],1)},i=[],n=a("f4b1"),l=a("be0b"),o=a("b199"),s={components:{ConvertFunc:l["a"],FuncIcon:n["a"]},props:{isSingle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},inputColumns:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},typeList:{type:Array,default:function(){return[]}},configForm:{type:Object,default:function(){return{}}},inputColumnsLoading:{type:Boolean,default:!1},columnsLoading:{type:Boolean,default:!1}},data:function(){return{isTipDisabled:!1,dialogVisible:!1,currentIndex:0,decimalForm:{accuracy:22,decimal:6},securityList:["1级","2级","3级","4级"],mongoDbTypes:["int","long","double","string","array","date","boolean","bytes"]}},computed:{canDelete:function(){return this.configForm.targetDb&&this.configForm.table_type}},methods:{deleteTableItem:function(e){var t=this;Object(o["y"])({db:this.configForm.targetDb,table:this.configForm.targetTable,metaFlag:"AIRBYTE",region:this.configForm.sourceRegion,type:"hive",templateCode:"Mysql2Hive",judgeTable:!0}).then((function(a){var r=a.data,i=!0;if(r.isTalbeExist){var n=JSON.parse(JSON.stringify(t.inputColumns));n.splice(e,1),r.columns.forEach((function(e){var t=n.findIndex((function(t){return t.name===e.name}));t<0&&(i=!1)}))}i?t.$emit("deleteTableItem",e):t.$confirm("删除该同步字段后，同步的字段schema与目标表schema不一致，将导致任务运行失败，因此不允许删除该字段。如若需要删除，请先到目标表中进行字段删除操作。","删除提示",{confirmButtonText:"关闭",showCancelButton:!1,type:"warning",center:!0,customClass:"deleteConfirm"})}))},addItem:function(e){var t=JSON.parse(JSON.stringify(this.inputColumns)).slice(e.$index,e.$index+1)[0],a=JSON.parse(JSON.stringify(this.columns)).slice(e.$index,e.$index+1)[0];this.inputColumns.splice(e.$index+1,0,t),this.columns.splice(e.$index+1,0,a)},isShowTooltip:function(e){var t=e.target.clientWidth,a=e.target.scrollWidth;this.isTipDisabled=!(a>t)},changeType:function(e,t){this.currentIndex=e,"DECIMAL(自定义)"===t&&(this.dialogVisible=!0)},saveDecimal:function(){var e=this;this.dialogVisible=!1,setTimeout((function(){e.columns[e.currentIndex].columnType="DECIMAL(".concat(e.decimalForm.accuracy,",").concat(e.decimalForm.decimal,")")}),100)},resetForm:function(){this.columns[this.currentIndex].columnType="DECIMAL(22,6)"},clickFunc:function(e,t){this.disabled||this.$refs.convertFunc.showWin(e,t)},save:function(e,t){this.$set(this.inputColumns[t],"funcs",e)}}},u=s,c=(a("ddba"),a("ec8a"),a("2877")),m=Object(c["a"])(u,r,i,!1,null,"1f371f42",null);t["a"]=m.exports},5163:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"drawer-btn",attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),e._v(" "),a("el-form",{ref:"seniorForm",staticClass:"sql-form",attrs:{model:e.seniorForm,rules:e.rules,"label-width":"195px"}},[a("el-tabs",{attrs:{type:"card"}},[a("el-tab-pane",{staticClass:"senior-set",attrs:{label:"参数设置"}},[a("el-form-item",{attrs:{label:"Checkpoint"}},[a("el-switch",{attrs:{"active-color":"#409EFF","active-value":1,"inactive-value":0},model:{value:e.seniorForm.runtimeConfig.checkpoint,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"checkpoint",t)},expression:"seniorForm.runtimeConfig.checkpoint"}})],1),e._v(" "),1==e.seniorForm.runtimeConfig.checkpoint?[a("el-form-item",{attrs:{label:"时间间隔",prop:"runtimeConfig.checkpointInterval"}},[a("el-input-number",{attrs:{min:1,max:3600,step:1},model:{value:e.seniorForm.runtimeConfig.checkpointInterval,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"checkpointInterval",t)},expression:"seniorForm.runtimeConfig.checkpointInterval"}}),e._v(" 秒 ")],1),e._v(" "),a("el-form-item",{attrs:{label:"超时时间",prop:"runtimeConfig.checkpointTimeout"}},[a("el-input-number",{model:{value:e.seniorForm.runtimeConfig.checkpointTimeout,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"checkpointTimeout",t)},expression:"seniorForm.runtimeConfig.checkpointTimeout"}}),e._v(" 秒 ")],1),e._v(" "),a("el-form-item",{attrs:{label:"Checkpoint模式",prop:"runtimeConfig.checkpointMode"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.seniorForm.runtimeConfig.checkpointMode,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"checkpointMode",t)},expression:"seniorForm.runtimeConfig.checkpointMode"}},e._l(e.checkpointTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),e._v(" "),e.isShowModel?a("el-form-item",{attrs:{label:"自动伸缩模式",prop:"runtimeConfig.isAutoScaleMode"}},[a("el-radio-group",{on:{change:e.changeModel},model:{value:e.seniorForm.runtimeConfig.isAutoScaleMode,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"isAutoScaleMode",t)},expression:"seniorForm.runtimeConfig.isAutoScaleMode"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"Cluster",prop:"flinkClusterId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.seniorForm.flinkClusterId,callback:function(t){e.$set(e.seniorForm,"flinkClusterId",t)},expression:"seniorForm.flinkClusterId"}},e._l(e.clusterList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),e.noCluster?a("div",{staticStyle:{color:"red"}},[e._v("没找到?"),a("router-link",{attrs:{to:"/config/cluster"}},[e._v("去创建")])],1):e._e()],1),e._v(" "),e.seniorForm.isLakeHouseReal?a("el-form-item",{staticClass:"other-param",attrs:{"label-width":"195px",label:"指定MySQL CDC启动模式"}},[a("el-popover",{attrs:{placement:"left",width:"400",trigger:"hover"}},[a("div",{staticClass:"mode-box"},[a("h3",[e._v("启动模式")]),e._v(" "),a("div",[e._v("配置选项 "),a("span",[e._v("scan.startup.mode")]),e._v(" 指定MySQL CDC使用者的启动模式。有效枚举包括：")]),e._v(" "),a("ul",[a("li",[a("span",[e._v("initial")]),e._v(" (默认)：在第一次启动时对受监视的数据库表执行初始快照，并继续读取最新的binlog。")]),e._v(" "),a("li",[a("span",[e._v("earliest-offset")]),e._v("：跳过快照阶段，从可读取的最早binlog位点开始读取")]),e._v(" "),a("li",[a("span",[e._v("latest-offset")]),e._v("：首次启动时，从不对受监视的数据库表执行快照，连接器仅从binlog的结尾处开始读取，这意味 着连接器只能读取在连接器启动之后的数据更改。")])])]),e._v(" "),a("i",{staticClass:"el-icon-info primary",staticStyle:{cursor:"pointer",left:"-105px",position:"relative"},attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),a("el-select",{staticClass:"area-select",attrs:{placeholder:"请选择启动模式",clearable:""},model:{value:e.seniorForm.runtimeConfig.mysqlCdcType,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"mysqlCdcType",t)},expression:"seniorForm.runtimeConfig.mysqlCdcType"}},e._l(e.typeList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e()],2),e._v(" "),a("el-tab-pane",{staticClass:"senior-set",attrs:{label:"高级"}},[e.isShowBatch?a("el-form-item",{attrs:{label:"flink job类型",required:""}},[a("el-radio-group",{model:{value:e.seniorForm.runtimeConfig.isBatchTask,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"isBatchTask",t)},expression:"seniorForm.runtimeConfig.isBatchTask"}},[a("el-radio",{attrs:{label:!0}},[e._v("批")]),e._v(" "),a("el-radio",{attrs:{label:!1}},[e._v("流")])],1)],1):e._e(),e._v(" "),e.isShowBatch&&e.seniorForm.runtimeConfig.isBatchTask?a("el-form-item",{attrs:{label:"邮箱",prop:"runtimeConfig.emails"}},[a("el-input",{staticClass:"senior-input",attrs:{placeholder:"输入告警邮件发送邮箱",clearable:""},model:{value:e.seniorForm.runtimeConfig.emails,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"emails",t)},expression:"seniorForm.runtimeConfig.emails"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"runtimeConfig.owner","label-width":"100px"}},[a("el-select",{staticClass:"senior-input",attrs:{placeholder:"请输入负责人",clearable:"",filterable:"",remote:"","remote-method":function(t){e.remoteMethod(t,"ownerList")},loading:e.loading,"popper-class":"custom-popper"},model:{value:e.seniorForm.runtimeConfig.owner,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"owner",t)},expression:"seniorForm.runtimeConfig.owner"}},e._l(e.ownerList,(function(t){return a("el-option",{key:t.shareId,attrs:{value:t.shareId,label:t.name}},[a("div",{staticStyle:{"max-width":"250px","word-break":"break-all"}},[e._v("("+e._s(t.staffId)+")-"+e._s(t.name)+e._s(t.deptFullPath?"-"+t.deptFullPath:""))])])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组",prop:"runtimeConfig.dsGroups","label-width":"100px"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择用户组",multiple:"",filterable:""},model:{value:e.seniorForm.runtimeConfig.dsGroups,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"dsGroups",t)},expression:"seniorForm.runtimeConfig.dsGroups"}},e._l(e.userGroupList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px",color:"#e6a23c"}},[a("i",{staticClass:"el-icon-info"}),e._v(" 以下参数只对Per-Job生效")]),e._v(" "),a("el-form-item",{attrs:{label:"Parallelism",prop:"parallelism","label-width":"100px"}},[a("el-input-number",{attrs:{min:1,max:3600,step:1},model:{value:e.seniorForm.runtimeConfig.parallelism,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"parallelism",t)},expression:"seniorForm.runtimeConfig.parallelism"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"TM CPU","label-width":"100px"}},[a("el-input-number",{attrs:{min:.1,precision:1,step:1},model:{value:e.seniorForm.runtimeConfig.tmCpu,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"tmCpu",t)},expression:"seniorForm.runtimeConfig.tmCpu"}}),e._v(" 核\n          "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"kubernetes.taskmanager.cpu",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"TM Memory","label-width":"100px"}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.seniorForm.runtimeConfig.tmMemory,callback:function(t){e.$set(e.seniorForm.runtimeConfig,"tmMemory",t)},expression:"seniorForm.runtimeConfig.tmMemory"}}),e._v(" G\n          "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"taskmanager.memory.process.size",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{staticClass:"other-param",attrs:{label:"报警类型","label-width":"100px"}},[a("el-popover",{attrs:{placement:"left",width:"320",trigger:"hover"}},[a("div",[e._v('指定当任务实例处于“成功”、“失败”、“重试”、“开始”状态时，以怎样的报警方式进行通知。注："失败"指实例最终运行失败，“重试”则指实例在指定重试次数内每次重启时。')]),e._v(" "),a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer",color:"#409eff"},attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),a("el-checkbox",{class:{"active-checkbox":"failure"===e.alertTypeValue},staticStyle:{"margin-right":"16px"},attrs:{value:e.seniorForm.runtimeConfig.alertModel.failure.alertType.length>0},on:{change:function(t){return e.checkAlertType("failure")}}},[e._v("失败")]),e._v(" "),e.alertTypeValue?a("div",{staticClass:"alert-method-box"},[a("el-form-item",{attrs:{label:"报警方式","label-width":"70px",size:"mini"}},[a("el-checkbox-group",{model:{value:e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue].alertType,callback:function(t){e.$set(e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue],"alertType",t)},expression:"seniorForm.runtimeConfig.alertModel[alertTypeValue].alertType"}},e._l(e.alertList,(function(t,r){return a("el-checkbox",{key:r,staticStyle:{"margin-right":"10px !important"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),e._v(" "),a("div",[e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue].alertType.includes("enterprise_wechat")?a("div",[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"微信群token：","label-width":"130px",size:"mini",prop:"runtimeConfig.alertModel."+e.alertTypeValue+".wechatRobotKey",rules:[{required:!0,message:"请填写微信群token",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue].wechatRobotKey,callback:function(t){e.$set(e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue],"wechatRobotKey",t)},expression:"seniorForm.runtimeConfig.alertModel[alertTypeValue].wechatRobotKey"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"此群需要@：","label-width":"130px",size:"mini",prop:"runtimeConfig.alertModel."+e.alertTypeValue+".wechatReceivers",rules:[{required:!0,message:"请选择微信群@对象",trigger:["blur","change"]}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择@对象",size:"small",clearable:"",filterable:"",remote:"",multiple:"","reserve-keyword":"","value-key":"shareId","remote-method":function(t){e.remoteMethod(t,"sendList")},loading:e.loading,"popper-class":"custom-popper"},model:{value:e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue].wechatReceivers,callback:function(t){e.$set(e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue],"wechatReceivers",t)},expression:"seniorForm.runtimeConfig.alertModel[alertTypeValue].wechatReceivers"}},e._l(e.sendList,(function(t){return a("el-option",{key:t.shareId,attrs:{value:t,label:t.shareId}},[a("div",{staticStyle:{"max-width":"420px","word-break":"break-all"}},[e._v("("+e._s(t.staffId)+")-"+e._s(t.name)+e._s(t.deptFullPath?"-"+t.deptFullPath:""))])])})),1)],1)],1):e._e(),e._v(" "),e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue].alertType.includes("email")?a("div",[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"邮件接收人：","label-width":"130px",size:"mini",prop:"runtimeConfig.alertModel."+e.alertTypeValue+".emailReceivers",rules:[{required:!0,message:"请选择邮件接收人",trigger:["blur","change"]}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择邮件接收人",size:"small",clearable:"",filterable:"",remote:"","reserve-keyword":"",multiple:"","value-key":"shareId","remote-method":function(t){e.remoteMethod(t,"sendList")},loading:e.loading,"popper-class":"custom-popper"},model:{value:e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue].emailReceivers,callback:function(t){e.$set(e.seniorForm.runtimeConfig.alertModel[e.alertTypeValue],"emailReceivers",t)},expression:"seniorForm.runtimeConfig.alertModel[alertTypeValue].emailReceivers"}},e._l(e.sendList,(function(t){return a("el-option",{key:t.shareId,attrs:{value:t,label:t.shareId}},[a("div",{staticStyle:{"max-width":"420px","word-break":"break-all"}},[e._v("("+e._s(t.staffId)+")-"+e._s(t.name)+e._s(t.deptFullPath?"-"+t.deptFullPath:""))])])})),1)],1)],1):e._e()])],1):e._e()],1),e._v(" "),a("el-divider"),e._v(" "),a("el-form-item",{attrs:{label:"其他参数","label-width":"100px"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addParam}})],1),e._v(" "),a("div",{staticClass:"param-wrap"},e._l(e.seniorForm.runtimeConfig.params,(function(t,r){return a("div",{key:r,staticClass:"param-item"},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"key"},model:{value:t.key,callback:function(a){e.$set(t,"key",a)},expression:"item.key"}}),e._v(" :\n            "),a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"value"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.deleteParam(r)}}})],1)})),0)],1),e._v(" "),a("el-tab-pane",{staticClass:"senior-set",attrs:{label:"UDF"}},[e._l(e.seniorForm.displayDependJars,(function(t,r){return a("div",{key:r,staticClass:"sqlapp-main-set-udf"},[a("el-form-item",{attrs:{label:"Jar文件","label-width":"70px"}},[a("el-select",{attrs:{filterable:"",clearable:""},on:{change:function(a){return e.artifactChange(a,r,t)}},model:{value:t.artifactId,callback:function(a){e.$set(t,"artifactId",a)},expression:"item.artifactId"}},e._l(e.artifactListMap[r],(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),e.region?a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.deleteUdf(r)}}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"Jar版本","label-width":"70px"}},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"item.id"}},e._l(e.versionList[r],(function(e){return a("el-option",{key:e.id,attrs:{label:e.displayVersion,value:e.id}})})),1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:r==e.seniorForm.displayDependJars.length-1,expression:"index == seniorForm.displayDependJars.length - 1"}],attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addUdf}})],1)],1)})),e._v(" "),0==e.seniorForm.displayDependJars.length?a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addUdf}})],1):e._e()],2)],1)],1)],1)},i=[],n=a("b199"),l=a("7e3c"),o=a("b893");function s(e){return d(e)||m(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function m(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var f={name:"SeniorSqlForm",props:{noCluster:{type:Boolean,default:!1},region:{type:String,default:""},seniorForm:{type:Object,default:function(){return{flinkClusterId:"",runtimeConfig:{checkpoint:1,checkpointInterval:30,checkpointTimeout:100,checkpointMode:"AT_LEAST_ONCE",owner:"",collaborators:[],parallelism:1,huaweiIam:"",awsIam:"",tmCpu:1,tmMemory:4,params:[]},displayDependJars:[{artifactId:"",id:""}]}}},isShowModel:{type:Boolean,default:!1},isShowBatch:{type:Boolean,default:!1}},data:function(){return{jarIndex:0,regionList:o["l"],typeList:["initial","earliest-offset","latest-offset"],alertList:[],sendList:[],rules:{isAutoScaleMode:[{required:!0,message:"请选择自动伸缩模式",trigger:["blur","change"]}],flinkClusterId:[{required:!0,message:"请选择cluster",trigger:["blur","change"]}],runtimeConfig:{emails:[{required:!0,message:"请输入邮箱",trigger:["blur","change"]}],checkpointMode:[{required:!0,message:"请选择checkpoint模式",trigger:["blur","change"]}],checkpointInterval:[{required:!0,message:"请输入时间间隔",trigger:["blur","change"]}],checkpointTimeout:[{required:!0,message:"请输入超时时间",trigger:["blur","change"]}],isAutoScaleMode:[{required:!0,message:"请选择自动伸缩模式",trigger:["blur","change"]}]}},checkpointTypeList:[{label:"At Least Once",value:"AT_LEAST_ONCE"},{label:"Exactly Once",value:"EXACTLY_ONCE"}],clusterList:[],autoClusterList:[],notautoClusterList:[],artifactListMap:{},versionList:[],ownerList:[],collaboratorsList:[],huaweiList:[],awsList:[],userGroupList:[],loading:!1,checkList:[],regionObj:{},scaleMode:{operator:{name:"OPERATOR_PROCESS_STRATEGY",topic:"",kafkaCluster:"",coolingTime:120,minimumPercentage:1.5,minPar:1,maxPar:512},kafka:{name:"KAFKA_LAG_STRATEGY",topic:"",kafkaCluster:"",consumer_group:"",delayTime:1800,expandProportion:1.5,minDelayCount:1e3,maxDelayCount:2e5,coolingTime:120,minPar:1,maxPar:512},periodic:{name:"PERIODIC_STRATEGY",periodicList:[{startTime:0,endTime:24,par:1}]}},modeRules:{operator:{topic:[{required:!0,message:"请输入topic名称",trigger:["blur","change"]}],kafkaCluster:[{required:!0,message:"请输入KAFKA集群",trigger:["blur","change"]}],coolingTime:[{required:!0,message:"请输入冷却时间",trigger:["blur","change"]}],minimumPercentage:[{required:!0,message:"请输入扩缩容忍度",trigger:["blur","change"]}],minPar:[{required:!0,message:"请输入最小并行度",trigger:["blur","change"]}],maxPar:[{required:!0,message:"请输入最大并行度",trigger:["blur","change"]}]},kafka:{topic:[{required:!0,message:"请输入topic名称",trigger:["blur","change"]}],kafkaCluster:[{required:!0,message:"请输入KAFKA集群",trigger:["blur","change"]}],consumer_group:[{required:!0,message:"请输入消费者组",trigger:["blur","change"]}],delayTime:[{required:!0,message:"请输入延迟时间",trigger:["blur","change"]}],expandProportion:[{required:!0,message:"请输入扩缩比例",trigger:["blur","change"]}],minDelayCount:[{required:!0,message:"请输入最小延迟条数",trigger:["blur","change"]}],maxDelayCount:[{required:!0,message:"请输入最大延迟条数",trigger:["blur","change"]}],coolingTime:[{required:!0,message:"请输入冷却时间",trigger:["blur","change"]}],minPar:[{required:!0,message:"请输入最小并行度",trigger:["blur","change"]}],maxPar:[{required:!0,message:"请输入最大并行度",trigger:["blur","change"]}]}},alertTypeValue:""}},watch:{region:function(e){this.seniorForm.displayDependJars=[{artifactId:"",id:""}],this.regionChange(e,0,this.seniorForm.displayDependJars[0]),this.seniorForm.flinkClusterId="",this.getCluster()}},created:function(){var e,t=this;if(o["l"].then((function(e){t.regionList=e})),null!=(e=this.seniorForm.oldAlertList)&&e.length&&!this.$route.query.copyId)this.alertList=this.seniorForm.oldAlertList;else{var a,r=null==(a=JSON.parse(this.$store.getters["user/systemConf"].config))?void 0:a.alarm_channel;r.map((function(e){switch(e){case"enterprise_wechat":t.alertList.push({label:"企业微信",value:"enterprise_wechat"});break;case"email":t.alertList.push({label:"邮件",value:"email"});break}})),this.seniorForm.oldAlertList=this.alertList}this.init(),this.seniorForm.runtimeConfig.owner||(this.seniorForm.runtimeConfig.owner=this.$store.getters.userInfo.userId),this.remoteMethod(this.seniorForm.runtimeConfig.owner,"ownerList"),this.remoteMethod("","sendList"),this.seniorForm.runtimeConfig.collaborators.length&&this.seniorForm.runtimeConfig.collaborators.map((function(e){Object(n["Y"])(e).then((function(e){var a,r=e.data;(a=t.collaboratorsList).push.apply(a,s(r))}))})),this.seniorForm.runtimeConfig.strategyList&&(this.checkList=this.seniorForm.runtimeConfig.strategyList.map((function(e){var a=e.name.split("_")[0].toLowerCase();return t.scaleMode[a]=e,e.name})))},methods:{getArtifactList:function(e,t){var a=this;Object(n["p"])(e).then((function(e){var r=e.data||[];a.$set(a.artifactListMap,t,r)}))},init:function(){var e=this;this.getCluster(),this.seniorForm.displayDependJars.forEach((function(t,a){t.artifactId&&e.artifactChange(t.artifactId,a,t),e.region&&e.getArtifactList({typeCode:"JAR",region:e.region},a)})),this.jarIndex=this.seniorForm.displayDependJars.length-1,Object(n["F"])().then((function(t){var a=t.data;a&&(e.huaweiList=a.huawei,e.awsList=a.aws)})),Object(l["j"])().then((function(t){e.userGroupList=e.$store.getters["user/userGroupList"]}))},getCluster:function(){var e=this;if(this.isShowModel){var t={region:this.region};Object(n["r"])(t).then((function(t){var a=t.data;e.autoClusterList=a,e.seniorForm.runtimeConfig.isAutoScaleMode&&(e.clusterList=e.autoClusterList,e.seniorForm.flinkClusterId||(e.seniorForm.flinkClusterId=e.clusterList[0].id))})),Object(n["t"])(t).then((function(t){var a=t.data;e.notautoClusterList=a,e.seniorForm.runtimeConfig.isAutoScaleMode||(e.clusterList=e.notautoClusterList,e.seniorForm.flinkClusterId||(e.seniorForm.flinkClusterId=e.clusterList[0].id))}))}else{var a={region:this.region};Object(n["s"])(a).then((function(t){var a=t.data;e.clusterList=a,e.seniorForm.flinkClusterId||(e.seniorForm.flinkClusterId=e.clusterList[0].id)}))}},changeModel:function(e){this.seniorForm.flinkClusterId="",this.clusterList=e?this.autoClusterList:this.notautoClusterList},remoteMethod:function(e,t){var a=this;this.loading=!0,Object(n["Y"])(e).then((function(e){a.loading=!1;var r=e.data;a[t]=r}))},addParam:function(){var e=this.seniorForm.runtimeConfig.params.length;e>0&&!this.seniorForm.runtimeConfig.params[e-1].key?this.$message({type:"error",message:"请先输入当前参数的key！"}):this.seniorForm.runtimeConfig.params.push({key:"",value:""})},deleteParam:function(e){this.seniorForm.runtimeConfig.params.splice(e,1)},regionChange:function(e,t,a){this.regionObj[t]=e,a.artifactId=null,a.id=null,this.getArtifactList({typeCode:"JAR",region:this.region},t)},artifactChange:function(e,t,a){var r=this;Object(n["ab"])({artifactId:e,region:this.region}).then((function(e){var a=e.data;r.$set(r.versionList,t,a)}))},deleteUdf:function(e){this.$delete(this.seniorForm.displayDependJars,e),this.$delete(this.artifactListMap,e),this.$delete(this.versionList,e),this.jarIndex--},addUdf:function(){var e=this.seniorForm.displayDependJars.length;if(e>0&&!this.seniorForm.displayDependJars[e-1].id)this.$message({type:"error",message:"请先选择当前的Version！"});else{var t={artifactId:"",id:""};this.jarIndex++,this.seniorForm.displayDependJars.push(t),this.regionChange(this.region,this.jarIndex,t)}},addPeriod:function(e){this.scaleMode.periodic.periodicList.push({startTime:e+1,endTime:24,par:1})},removePeriod:function(){this.scaleMode.periodic.periodicList.pop()},checkForm:function(e){var t=this;return new Promise((function(a,r){t.$refs[e].validate((function(e){e?a():r()}))}))},confirm:function(){var e=this,t=[this.checkForm("seniorForm")];this.checkList.length&&t.push(this.checkForm("scaleMode")),Promise.all(t).then((function(){if(e.seniorForm.runtimeConfig.strategyList=[],e.seniorForm.runtimeConfig.isAutoScaleMode&&e.checkList.length>0&&(e.checkList.includes("OPERATOR_PROCESS_STRATEGY")&&e.seniorForm.runtimeConfig.strategyList.push(e.scaleMode.operator),e.checkList.includes("KAFKA_LAG_STRATEGY")&&e.seniorForm.runtimeConfig.strategyList.push(e.scaleMode.kafka),e.checkList.includes("PERIODIC_STRATEGY"))){var t=e.scaleMode.periodic.periodicList.at(-1);if(24!==t.endTime)return void e.$message.warning("周期性策略 时间区间结束时间必须为24");e.seniorForm.runtimeConfig.strategyList.push(e.scaleMode.periodic)}e.$emit("close")})).catch((function(){e.$message.warning("高级设置中有必填项未填写哦～")}))},checkAlertType:function(e){this.alertTypeValue!==e?this.alertTypeValue=e:this.alertTypeValue=""}}},h=f,g=(a("4c07"),a("2877")),E=Object(g["a"])(h,r,i,!1,null,"86ffdf4a",null);t["a"]=E.exports},"59f6":function(e,t,a){"use strict";a("b464")},"5d6d":function(e,t,a){"use strict";a("623c")},6041:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-page"},[a("el-table",{key:e.tableKey,staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0,stripe:"","cell-style":{padding:"10px 0"},height:e.tableHeight}},[e.isShowIndex?a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"70",align:"center"}}):e._e(),e._v(" "),e._l(e.columnData,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,"min-width":t.width,sortable:t.sortable},scopedSlots:e._u([{key:"default",fn:function(r){return[t.tooltip?a("el-tooltip",{attrs:{content:t.format?t.format(r.row):r.row[t.prop],disabled:e.isTipDisabled}},[t.format?a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.format(r.row)))]):t.link?a("a",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip,click:function(a){return e.gotoDetail(r.row,t.link)}}},[e._v(e._s(r.row[t.prop]))]):a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(r.row[t.prop]||"-"))])]):[t.format?[e._v(e._s(t.format(r.row)))]:t.link?a("router-link",{attrs:{to:t.link(r.row)}},[e._v(e._s(r.row[t.prop]))]):t.longData?a("div",{staticClass:"ellipsis pointer",on:{click:function(a){return e.showAll(r.row[t.prop])}}},[e._v(e._s(r.row[t.prop]||"-"))]):t.attach?[0===r.row[t.prop].length?a("span",[e._v(" - ")]):e._l(r.row[t.prop],(function(t){return a("el-tooltip",{key:t.id,attrs:{content:t.fileName,disabled:e.isTipDisabled}},[a("a",{staticClass:"attachment ellipsis block",on:{mouseenter:e.isShowTooltip,click:function(a){return e.downloadAttach(t.id)}}},[e._v(e._s(t.fileName))])])}))]:[e._v(e._s(r.row[t.prop]||"-"))]]]}}],null,!0)})})),e._v(" "),e._t("default")],2),e._v(" "),a("el-pagination",{attrs:{background:"",total:e.total,"current-page":e.newPageNum,"page-sizes":[10,20,30,50,100],"page-size":e.newPageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},i=[],n={name:"TablePage",props:{tableData:{type:Array,default:function(){return[]}},columnData:{type:Array,default:function(){return[]}},isShowIndex:{type:Boolean,default:!0},tableHeight:{type:String,default:"100%"},total:{type:Number,default:0},pageNum:{type:Number,default:1},pageSize:{type:Number,default:10}},data:function(){return{newPageNum:this.pageNum,newPageSize:this.pageSize,isTipDisabled:!1,tableKey:0}},watch:{"columnData.length":function(e,t){this.tableKey++}},methods:{indexMethod:function(e){return(this.newPageNum-1)*this.newPageSize+e+1},handleCurrentChange:function(e){this.newPageNum=e,this.$emit("changePage",{pageNum:this.newPageNum,pageSize:this.newPageSize})},handleSizeChange:function(e){this.newPageSize=e,this.newPageNum=1,this.$emit("changePage",{pageNum:this.newPageNum,pageSize:this.newPageSize})},gotoDetail:function(e,t){this.$router.push(t(e))},showAll:function(e){e&&this.$alert(e,"data",{showConfirmButton:!1,customClass:"template-alert",callback:function(){}})},isShowTooltip:function(e){var t=e.target.clientWidth,a=e.target.scrollWidth;this.isTipDisabled=!(a>t)},downloadAttach:function(e){var t="/api-gateway/"+"ds_task/attachment/download?id=".concat(e);window.location.href=t}}},l=n,o=(a("205a"),a("2877")),s=Object(o["a"])(l,r,i,!1,null,"2141e9b5",null);t["a"]=s.exports},"61ee":function(e,t,a){},"623c":function(e,t,a){},"67db":function(e,t,a){"use strict";a("db32")},"6a91":function(e,t,a){"use strict";a("73a9")},"73a9":function(e,t,a){},7890:function(e,t,a){},"846a":function(e,t,a){"use strict";var r=["ABORT_AFTER_WAIT","ABSENT","ABSOLUTE","ACCENT_SENSITIVITY","ACTION","ACTIVATION","ACTIVE","ADD","ADDRESS","ADMIN","AES","AES_128","AES_192","AES_256","AFFINITY","AFTER","AGGREGATE","ALGORITHM","ALL_CONSTRAINTS","ALL_ERRORMSGS","ALL_INDEXES","ALL_LEVELS","ALL_SPARSE_COLUMNS","ALLOW_CONNECTIONS","ALLOW_MULTIPLE_EVENT_LOSS","ALLOW_PAGE_LOCKS","ALLOW_ROW_LOCKS","ALLOW_SINGLE_EVENT_LOSS","ALLOW_SNAPSHOT_ISOLATION","ALLOWED","ALTER","ANONYMOUS","ANSI_DEFAULTS","ANSI_NULL_DEFAULT","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_NULLS","ANSI_PADDING","ANSI_WARNINGS","APPEND","APPLICATION","APPLICATION_LOG","ARITHABORT","ARITHIGNORE","AS","ASC","ASSEMBLY","ASYMMETRIC","ASYNCHRONOUS_COMMIT","AT","ATOMIC","ATTACH","ATTACH_REBUILD_LOG","AUDIT","AUDIT_GUID","AUTHENTICATION","AUTHORIZATION","AUTO","AUTO_CLEANUP","AUTO_CLOSE","AUTO_CREATE_STATISTICS","AUTO_SHRINK","AUTO_UPDATE_STATISTICS","AUTO_UPDATE_STATISTICS_ASYNC","AUTOMATED_BACKUP_PREFERENCE","AUTOMATIC","AVAILABILITY","AVAILABILITY_MODE","BACKUP","BACKUP_PRIORITY","BASE64","BATCHSIZE","BEGIN","BEGIN_DIALOG","BIGINT","BINARY","BINDING","BIT","BLOCKERS","BLOCKSIZE","BOUNDING_BOX","BREAK","BROKER","BROKER_INSTANCE","BROWSE","BUCKET_COUNT","BUFFER","BUFFERCOUNT","BULK","BULK_LOGGED","BY","CACHE","CALL","CALLED","CALLER","CAP_CPU_PERCENT","CASCADE","CASE","CATALOG","CATCH","CELLS_PER_OBJECT","CERTIFICATE","CHANGE_RETENTION","CHANGE_TRACKING","CHANGES","CHAR","CHARACTER","CHECK","CHECK_CONSTRAINTS","CHECK_EXPIRATION","CHECK_POLICY","CHECKALLOC","CHECKCATALOG","CHECKCONSTRAINTS","CHECKDB","CHECKFILEGROUP","CHECKIDENT","CHECKPOINT","CHECKTABLE","CLASSIFIER_FUNCTION","CLEANTABLE","CLEANUP","CLEAR","CLOSE","CLUSTER","CLUSTERED","CODEPAGE","COLLATE","COLLECTION","COLUMN","COLUMN_SET","COLUMNS","COLUMNSTORE","COLUMNSTORE_ARCHIVE","COMMIT","COMMITTED","COMPATIBILITY_LEVEL","COMPRESSION","COMPUTE","CONCAT","CONCAT_NULL_YIELDS_NULL","CONFIGURATION","CONNECT","CONSTRAINT","CONTAINMENT","CONTENT","CONTEXT","CONTINUE","CONTINUE_AFTER_ERROR","CONTRACT","CONTRACT_NAME","CONTROL","CONVERSATION","COOKIE","COPY_ONLY","COUNTER","CPU","CREATE","CREATE_NEW","CREATION_DISPOSITION","CREDENTIAL","CRYPTOGRAPHIC","CUBE","CURRENT","CURRENT_DATE","CURSOR","CURSOR_CLOSE_ON_COMMIT","CURSOR_DEFAULT","CYCLE","DATA","DATA_COMPRESSION","DATA_PURITY","DATABASE","DATABASE_DEFAULT","DATABASE_MIRRORING","DATABASE_SNAPSHOT","DATAFILETYPE","DATE","DATE_CORRELATION_OPTIMIZATION","DATEFIRST","DATEFORMAT","DATETIME","DATETIME2","DATETIMEOFFSET","DAY","DAYOFYEAR","DAYS","DB_CHAINING","DBCC","DBREINDEX","DDL_DATABASE_LEVEL_EVENTS","DEADLOCK_PRIORITY","DEALLOCATE","DEC","DECIMAL","DECLARE","DECRYPTION","DEFAULT","DEFAULT_DATABASE","DEFAULT_FULLTEXT_LANGUAGE","DEFAULT_LANGUAGE","DEFAULT_SCHEMA","DEFINITION","DELAY","DELAYED_DURABILITY","DELETE","DELETED","DENSITY_VECTOR","DENY","DEPENDENTS","DES","DESC","DESCRIPTION","DESX","DHCP","DIAGNOSTICS","DIALOG","DIFFERENTIAL","DIRECTORY_NAME","DISABLE","DISABLE_BROKER","DISABLED","DISK","DISTINCT","DISTRIBUTED","DOCUMENT","DOUBLE","DROP","DROP_EXISTING","DROPCLEANBUFFERS","DUMP","DURABILITY","DYNAMIC","EDITION","ELEMENTS","ELSE","EMERGENCY","EMPTY","EMPTYFILE","ENABLE","ENABLE_BROKER","ENABLED","ENCRYPTION","END","ENDPOINT","ENDPOINT_URL","ERRLVL","ERROR","ERROR_BROKER_CONVERSATIONS","ERRORFILE","ESCAPE","ESTIMATEONLY","EVENT","EVENT_RETENTION_MODE","EXEC","EXECUTABLE","EXECUTE","EXIT","EXPAND","EXPIREDATE","EXPIRY_DATE","EXPLICIT","EXTENDED_LOGICAL_CHECKS","EXTENSION","EXTERNAL","EXTERNAL_ACCESS","FAIL_OPERATION","FAILOVER","FAILOVER_MODE","FAILURE_CONDITION_LEVEL","FALSE","FAN_IN","FAST","FAST_FORWARD","FETCH","FIELDTERMINATOR","FILE","FILEGROUP","FILEGROWTH","FILELISTONLY","FILENAME","FILEPATH","FILESTREAM","FILESTREAM_ON","FILETABLE_COLLATE_FILENAME","FILETABLE_DIRECTORY","FILETABLE_FULLPATH_UNIQUE_CONSTRAINT_NAME","FILETABLE_NAMESPACE","FILETABLE_PRIMARY_KEY_CONSTRAINT_NAME","FILETABLE_STREAMID_UNIQUE_CONSTRAINT_NAME","FILLFACTOR","FILTERING","FIRE_TRIGGERS","FIRST","FIRSTROW","FLOAT","FMTONLY","FOLLOWING","FOR","FORCE","FORCE_FAILOVER_ALLOW_DATA_LOSS","FORCE_SERVICE_ALLOW_DATA_LOSS","FORCED","FORCEPLAN","FORCESCAN","FORCESEEK","FOREIGN","FORMATFILE","FORMSOF","FORWARD_ONLY","FREE","FREEPROCCACHE","FREESESSIONCACHE","FREESYSTEMCACHE","FROM","FULL","FULLSCAN","FULLTEXT","FUNCTION","GB","GEOGRAPHY_AUTO_GRID","GEOGRAPHY_GRID","GEOMETRY_AUTO_GRID","GEOMETRY_GRID","GET","GLOBAL","GO","GOTO","GOVERNOR","GRANT","GRIDS","GROUP","GROUP_MAX_REQUESTS","HADR","HASH","HASHED","HAVING","HEADERONLY","HEALTH_CHECK_TIMEOUT","HELP","HIERARCHYID","HIGH","HINT","HISTOGRAM","HOLDLOCK","HONOR_BROKER_PRIORITY","HOUR","HOURS","IDENTITY","IDENTITY_INSERT","IDENTITY_VALUE","IDENTITYCOL","IF","IGNORE_CONSTRAINTS","IGNORE_DUP_KEY","IGNORE_NONCLUSTERED_COLUMNSTORE_INDEX","IGNORE_TRIGGERS","IMAGE","IMMEDIATE","IMPERSONATE","IMPLICIT_TRANSACTIONS","IMPORTANCE","INCLUDE","INCREMENT","INCREMENTAL","INDEX","INDEXDEFRAG","INFINITE","INFLECTIONAL","INIT","INITIATOR","INPUT","INPUTBUFFER","INSENSITIVE","INSERT","INSERTED","INSTEAD","INT","INTEGER","INTO","IO","IP","ISABOUT","ISOLATION","JOB","KB","KEEP","KEEP_CDC","KEEP_NULLS","KEEP_REPLICATION","KEEPDEFAULTS","KEEPFIXED","KEEPIDENTITY","KEEPNULLS","KERBEROS","KEY","KEY_SOURCE","KEYS","KEYSET","KILL","KILOBYTES_PER_BATCH","LABELONLY","LANGUAGE","LAST","LASTROW","LEVEL","LEVEL_1","LEVEL_2","LEVEL_3","LEVEL_4","LIFETIME","LIMIT","LINENO","LIST","LISTENER","LISTENER_IP","LISTENER_PORT","LOAD","LOADHISTORY","LOB_COMPACTION","LOCAL","LOCAL_SERVICE_NAME","LOCK_ESCALATION","LOCK_TIMEOUT","LOGIN","LOGSPACE","LOOP","LOW","MANUAL","MARK","MARK_IN_USE_FOR_REMOVAL","MASTER","MAX_CPU_PERCENT","MAX_DISPATCH_LATENCY","MAX_DOP","MAX_DURATION","MAX_EVENT_SIZE","MAX_FILES","MAX_IOPS_PER_VOLUME","MAX_MEMORY","MAX_MEMORY_PERCENT","MAX_QUEUE_READERS","MAX_ROLLOVER_FILES","MAX_SIZE","MAXDOP","MAXERRORS","MAXLENGTH","MAXRECURSION","MAXSIZE","MAXTRANSFERSIZE","MAXVALUE","MB","MEDIADESCRIPTION","MEDIANAME","MEDIAPASSWORD","MEDIUM","MEMBER","MEMORY_OPTIMIZED","MEMORY_OPTIMIZED_DATA","MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT","MEMORY_PARTITION_MODE","MERGE","MESSAGE","MESSAGE_FORWARD_SIZE","MESSAGE_FORWARDING","MICROSECOND","MILLISECOND","MIN_CPU_PERCENT","MIN_IOPS_PER_VOLUME","MIN_MEMORY_PERCENT","MINUTE","MINUTES","MINVALUE","MIRROR","MIRROR_ADDRESS","MODIFY","MONEY","MONTH","MOVE","MULTI_USER","MUST_CHANGE","NAME","NANOSECOND","NATIONAL","NATIVE_COMPILATION","NCHAR","NEGOTIATE","NESTED_TRIGGERS","NEW_ACCOUNT","NEW_BROKER","NEW_PASSWORD","NEWNAME","NEXT","NO","NO_BROWSETABLE","NO_CHECKSUM","NO_COMPRESSION","NO_EVENT_LOSS","NO_INFOMSGS","NO_TRUNCATE","NO_WAIT","NOCHECK","NOCOUNT","NOEXEC","NOEXPAND","NOFORMAT","NOINDEX","NOINIT","NOLOCK","NON","NON_TRANSACTED_ACCESS","NONCLUSTERED","NONE","NORECOMPUTE","NORECOVERY","NORESEED","NORESET","NOREWIND","NORMAL","NOSKIP","NOTIFICATION","NOTRUNCATE","NOUNLOAD","NOWAIT","NTEXT","NTLM","NUMANODE","NUMERIC","NUMERIC_ROUNDABORT","NVARCHAR","OBJECT","OF","OFF","OFFLINE","OFFSET","OFFSETS","OLD_ACCOUNT","OLD_PASSWORD","ON","ON_FAILURE","ONLINE","ONLY","OPEN","OPEN_EXISTING","OPENTRAN","OPTIMISTIC","OPTIMIZE","OPTION","ORDER","OUT","OUTPUT","OUTPUTBUFFER","OVER","OVERRIDE","OWNER","OWNERSHIP","PAD_INDEX","PAGE","PAGE_VERIFY","PAGECOUNT","PAGLOCK","PARAMETERIZATION","PARSEONLY","PARTIAL","PARTITION","PARTITIONS","PARTNER","PASSWORD","PATH","PER_CPU","PER_NODE","PERCENT","PERMISSION_SET","PERSISTED","PHYSICAL_ONLY","PLAN","POISON_MESSAGE_HANDLING","POOL","POPULATION","PORT","PRECEDING","PRECISION","PRIMARY","PRIMARY_ROLE","PRINT","PRIOR","PRIORITY","PRIORITY_LEVEL","PRIVATE","PRIVILEGES","PROC","PROCCACHE","PROCEDURE","PROCEDURE_NAME","PROCESS","PROFILE","PROPERTY","PROPERTY_DESCRIPTION","PROPERTY_INT_ID","PROPERTY_SET_GUID","PROVIDER","PROVIDER_KEY_NAME","PUBLIC","PUT","QUARTER","QUERY","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUEUE_DELAY","QUOTED_IDENTIFIER","RAISERROR","RANGE","RAW","RC2","RC4","RC4_128","READ","READ_COMMITTED_SNAPSHOT","READ_ONLY","READ_ONLY_ROUTING_LIST","READ_ONLY_ROUTING_URL","READ_WRITE","READ_WRITE_FILEGROUPS","READCOMMITTED","READCOMMITTEDLOCK","READONLY","READPAST","READTEXT","READUNCOMMITTED","READWRITE","REAL","REBUILD","RECEIVE","RECOMPILE","RECONFIGURE","RECOVERY","RECURSIVE","RECURSIVE_TRIGGERS","REFERENCES","REGENERATE","RELATED_CONVERSATION","RELATED_CONVERSATION_GROUP","RELATIVE","REMOTE","REMOTE_PROC_TRANSACTIONS","REMOTE_SERVICE_NAME","REMOVE","REORGANIZE","REPAIR_ALLOW_DATA_LOSS","REPAIR_FAST","REPAIR_REBUILD","REPEATABLE","REPEATABLEREAD","REPLICA","REPLICATION","REQUEST_MAX_CPU_TIME_SEC","REQUEST_MAX_MEMORY_GRANT_PERCENT","REQUEST_MEMORY_GRANT_TIMEOUT_SEC","REQUIRED","RESAMPLE","RESEED","RESERVE_DISK_SPACE","RESET","RESOURCE","RESTART","RESTORE","RESTRICT","RESTRICTED_USER","RESULT","RESUME","RETAINDAYS","RETENTION","RETURN","RETURNS","REVERT","REVOKE","REWIND","REWINDONLY","ROBUST","ROLE","ROLLBACK","ROLLUP","ROOT","ROUTE","ROW","ROWCOUNT","ROWGUIDCOL","ROWLOCK","ROWS","ROWS_PER_BATCH","ROWTERMINATOR","ROWVERSION","RSA_1024","RSA_2048","RSA_512","RULE","SAFE","SAFETY","SAMPLE","SAVE","SCHEDULER","SCHEMA","SCHEMA_AND_DATA","SCHEMA_ONLY","SCHEMABINDING","SCHEME","SCROLL","SCROLL_LOCKS","SEARCH","SECOND","SECONDARY","SECONDARY_ONLY","SECONDARY_ROLE","SECONDS","SECRET","SECURITY_LOG","SECURITYAUDIT","SELECT","SELECTIVE","SELF","SEND","SENT","SEQUENCE","SERIALIZABLE","SERVER","SERVICE","SERVICE_BROKER","SERVICE_NAME","SESSION","SESSION_TIMEOUT","SET","SETS","SETUSER","SHOW_STATISTICS","SHOWCONTIG","SHOWPLAN","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SHRINKDATABASE","SHRINKFILE","SHUTDOWN","SID","SIGNATURE","SIMPLE","SINGLE_BLOB","SINGLE_CLOB","SINGLE_NCLOB","SINGLE_USER","SINGLETON","SIZE","SKIP","SMALLDATETIME","SMALLINT","SMALLMONEY","SNAPSHOT","SORT_IN_TEMPDB","SOURCE","SPARSE","SPATIAL","SPATIAL_WINDOW_MAX_CELLS","SPECIFICATION","SPLIT","SQL","SQL_VARIANT","SQLPERF","STANDBY","START","START_DATE","STARTED","STARTUP_STATE","STAT_HEADER","STATE","STATEMENT","STATIC","STATISTICAL_SEMANTICS","STATISTICS","STATISTICS_INCREMENTAL","STATISTICS_NORECOMPUTE","STATS","STATS_STREAM","STATUS","STATUSONLY","STOP","STOP_ON_ERROR","STOPAT","STOPATMARK","STOPBEFOREMARK","STOPLIST","STOPPED","SUBJECT","SUBSCRIPTION","SUPPORTED","SUSPEND","SWITCH","SYMMETRIC","SYNCHRONOUS_COMMIT","SYNONYM","SYSNAME","SYSTEM","TABLE","TABLERESULTS","TABLESAMPLE","TABLOCK","TABLOCKX","TAKE","TAPE","TARGET","TARGET_RECOVERY_TIME","TB","TCP","TEXT","TEXTIMAGE_ON","TEXTSIZE","THEN","THESAURUS","THROW","TIES","TIME","TIMEOUT","TIMER","TIMESTAMP","TINYINT","TO","TOP","TORN_PAGE_DETECTION","TRACEOFF","TRACEON","TRACESTATUS","TRACK_CAUSALITY","TRACK_COLUMNS_UPDATED","TRAN","TRANSACTION","TRANSFER","TRANSFORM_NOISE_WORDS","TRIGGER","TRIPLE_DES","TRIPLE_DES_3KEY","TRUE","TRUNCATE","TRUNCATEONLY","TRUSTWORTHY","TRY","TSQL","TWO_DIGIT_YEAR_CUTOFF","TYPE","TYPE_WARNING","UNBOUNDED","UNCHECKED","UNCOMMITTED","UNDEFINED","UNIQUE","UNIQUEIDENTIFIER","UNKNOWN","UNLIMITED","UNLOAD","UNSAFE","UPDATE","UPDATETEXT","UPDATEUSAGE","UPDLOCK","URL","USE","USED","USER","USEROPTIONS","USING","VALID_XML","VALIDATION","VALUE","VALUES","VARBINARY","VARCHAR","VARYING","VERIFYONLY","VERSION","VIEW","VIEW_METADATA","VIEWS","VISIBILITY","WAIT_AT_LOW_PRIORITY","WAITFOR","WEEK","WEIGHT","WELL_FORMED_XML","WHEN","WHERE","WHILE","WINDOWS","WITH","WITHIN","WITHOUT","WITNESS","WORK","WORKLOAD","WRITETEXT","XACT_ABORT","XLOCK","XMAX","XMIN","XML","XMLDATA","XMLNAMESPACES","XMLSCHEMA","XQUERY","XSINIL","YEAR","YMAX","YMIN","ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME","EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED","AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","SUM","STDEV","STDEVP","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","COLLATE","COLLATIONPROPERTY","TERTIARY_WEIGHTS","FEDERATION_FILTERING_VALUE","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","CURRENT_TIMESTAMP","DATEADD","DATEDIFF","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","CHOOSE","COALESCE","IIF","NULLIF","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASE_PRINCIPAL_ID","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHAR","CHARINDEX","CONCAT","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","NCHAR","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STUFF","SUBSTRING","UNICODE","UPPER","BINARY_CHECKSUM","CHECKSUM","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","ERROR_LINE","ERROR_NUMBER","ERROR_MESSAGE","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GETANSINULL","GET_FILESTREAM_TRANSACTION_CONTEXT","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","XACT_STATE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","CHANGETABLE","CHANGE_TRACKING_CONTEXT","CHANGE_TRACKING_CURRENT_VERSION","CHANGE_TRACKING_IS_COLUMN_IN_MASK","CHANGE_TRACKING_MIN_VALID_VERSION","CONTAINSTABLE","FREETEXTTABLE","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","FILETABLEROOTPATH","GETFILENAMESPACEPATH","GETPATHLOCATOR","PATHNAME","GET_TRANSMISSION_STATUS"],i=["asInstanceOf","catch","class","classOf","def","do","else","extends","finally","for","foreach","forSome","if","import","isInstanceOf","macro","match","new","object","package","return","throw","trait","try","type","until","val","var","while","with","yield","given","enum","then"],n=["abstract","continue","for","new","switch","assert","default","goto","package","synchronized","boolean","do","if","private","this","break","double","implements","protected","throw","byte","else","import","public","throws","case","enum","instanceof","return","transient","catch","extends","int","short","try","char","final","interface","static","void","class","finally","long","strictfp","volatile","const","float","native","super","while","true","false"];t["a"]={sql:r,java:n,scala:i}},"88c9":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-condition"},[a("span",{class:["label",e.labelClass,e.justify?"justify":""]},[e._v(e._s(e.label))]),e._v(" "),e._t("default")],2)},i=[],n={name:"SearchCondition",props:{label:{type:String,default:""},justify:{type:Boolean,default:!1},labelClass:{type:String,default:""}}},l=n,o=(a("3fc0"),a("2877")),s=Object(o["a"])(l,r,i,!1,null,"26880c7d",null);t["a"]=s.exports},"8eff":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sql-smaple"},[r("el-popover",{staticClass:"sql-tips",attrs:{placement:"bottom",width:"900",trigger:"click"}},["metis_sql"===e.name?r("img",{attrs:{src:a("005e"),alt:"sql样例"}}):r("div",{staticClass:"monaco-editor-wrap"},[r("monaco-editor",{ref:"monaco",attrs:{"read-only":!0},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),r("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)},i=[],n=a("b03b"),l={name:"SqlSmaple",components:{MonacoEditor:n["a"]},props:{name:{type:String,default:"flink_sql"}},computed:{text:function(){var e="在下方填写SQL，包含insert，overwrite等，还有一些别的Tips";return"redshift_sql"===this.name?e="在下方填写要执行的sql语句，可参考示例":"redis_sql"===this.name&&(e="在下方填写要执行sql语句，只支持写sql查询语句，示例"),e},content:function(){var e,t="${db}",a="${table_name}";return["clickhouse_sql","mysql_sql"].includes(this.name)?e='--注意时间变量和as转换，具体可查看"提示"\nSELECT\n  beyla_id as ${destination_field_name} ---${destination_field_name}代表目标表对应字段名称，下同\n  user_id as ${destination_field_name}，\n  device_id as ${destination_field_name}，\nFROM\n '.concat(t,".").concat(a,"\nWHERE\n  dt = '{{ yesterday_ds_nodash }}'"):"flink_sql"===this.name?e="# 1.添加依赖(如果有)\nset flink.execution.packages=org.apache.flink:flink-connector-jdbc_2.11:1.11.0,mysql:mysql-connector-java:5.1.6,org.apache.flink:flink-connector-kafka_2.11:1.11.0;\n# 2.注册UDF(如果有)\n# 3.source DDL\nDROP TABLE IF EXISTS read_from_kafka;\nCreate table read_from_kafka(\n`AnrMsg` String,\n`AnrCpuStatus` String,\n`AnrMsgQueue` String,\n`AnrTrace` String,\n`AnrDecodedTrace` String,\n`AnrTraceId` String,\n`ProblemPos` String\n)  WITH (\n   'connector' = 'kafka',\n   'topic' = 'bdp_medusa_crash',\n   'properties.bootstrap.servers' = 'prod.crash.medusa.bdp.sg2.mq:9092',\n   'properties.group.id' = 'bdp_medusa_crash',\n--    'scan.startup.mode' = 'latest-offset',\n   'format' = 'json'\n);\n# 4.sink DDL\nCreate table sink_to_mysql(\n)with();\n# 5.写入sink逻辑\ninsert into sink_to_mysql select * from read_from_kafka; ":"hive_sql"===this.name?e="/* =====DEMO-针对目标表不存在，支持创建iceberg表===== */\n---先建表,此步骤为可选\nCREATE TABLE IF NOT EXISTS test.zptest4(\n  name STRING ,\n  age STRING ,\n  dt STRING\n) \nPARTITIONED BY (dt) \n---写入逻辑\nINSERT\n  OVERWRITE TABLE test.zptest4 PARTITION(dt = '{{ yesterday_ds_nodash }}')\nSELECT pageid, age, count(1) \nFROM source_database.source_table_name\nWHERE dt = '{{ yesterday_ds_nodash }}'\nGROUP BY pageid, age":"redshift_sql"===this.name?e="---示例\n---创建临时表\nCREATE temp TABLE XXXXX (day varchar(64), hour varchar(64),\ncountry varchar(200),... ) WITH OIDS ;\n---指定S3路径、iam_role信息及存储格式\ncopy XXXXX from 's3://XXXX/XXXX/dt=2022032904'\niam_role 'arn:aws:iam::848318613114:role/XXXXXX'\nFORMAT AS PARQUET statupdate on;\n---写入redshift下游表\ndelete from db.tableXXXX where dt='2022032904';\ninsert into db.tableXXXX (day,hour,country,...) select .... from XXXXX;\ndrop table XXXXX;\ncommit;":"redis_sql"===this.name&&(e="/* =====示例DEMO===== */\nselect\n  Name,\n  age,\n  score\nfrom\n  student\nwhere\n  dt = '{{ yesterday_ds_nodash }}'"),e}}},o=l,s=(a("5d6d"),a("2877")),u=Object(s["a"])(o,r,i,!1,null,"e93b0f14",null);t["a"]=u.exports},9879:function(e,t,a){},"9caf":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"drawer-btn",attrs:{type:"primary"},on:{click:function(t){return e.$emit("close")}}},[e._v("确认")]),e._v(" "),a("el-tabs",{attrs:{type:"card"}},[a("el-tab-pane",{staticClass:"senior-set",attrs:{label:"高级设置"}},[a("el-form",{ref:"seniorForm",attrs:{model:e.seniorForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"负责人",prop:"owner"}},[a("el-select",{attrs:{placeholder:"请输入负责人",clearable:"",filterable:"",remote:"","remote-method":function(t){e.remoteMethod(t,"ownerList")},loading:e.loading,"popper-class":"custom-popper"},model:{value:e.seniorForm.owner,callback:function(t){e.$set(e.seniorForm,"owner",t)},expression:"seniorForm.owner"}},e._l(e.ownerList,(function(t){return a("el-option",{key:t.shareId,attrs:{value:t.shareId,label:t.name}},[a("div",{staticStyle:{"max-width":"250px","word-break":"break-all"}},[e._v("("+e._s(t.staffId)+")-"+e._s(t.name)+e._s(t.deptFullPath?"-"+t.deptFullPath:""))])])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组",prop:"dsGroups"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择用户组",multiple:"",filterable:""},model:{value:e.seniorForm.dsGroups,callback:function(t){e.$set(e.seniorForm,"dsGroups",t)},expression:"seniorForm.dsGroups"}},e._l(e.userGroupList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1),e._v(" "),a("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"5px"},attrs:{effect:"dark",content:"您可以在用户管理模块中创建新的用户组",placement:"top"}},[a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer"}})])],1),e._v(" "),a("el-form-item",{staticClass:"other-param",attrs:{label:"超时Kill时长"}},[a("el-popover",{attrs:{placement:"left",width:"340",trigger:"hover"}},[a("div",[e._v("如果设置了此值且不为0，任务运行时长超过此值时，将会 kill任务并自动重试 。如果默认设置为0，后台将根据 该任务历史5次执行时长自动设定一个运行超时告警时间---当任务运行时长超过此值时会触发钉钉告警通知，同时此种情况下任务不会被kill；")]),e._v(" "),a("i",{staticClass:"el-icon-info primary",staticStyle:{cursor:"pointer",left:"-24px",position:"relative"},attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),a("el-input-number",{attrs:{min:0,max:86400,label:"超时重试时长"},model:{value:e.seniorForm.executionTimeout,callback:function(t){e.$set(e.seniorForm,"executionTimeout",t)},expression:"seniorForm.executionTimeout"}}),e._v(" 秒\n          ")],1),e._v(" "),a("el-form-item",{staticClass:"other-param",attrs:{label:"任务重试次数"}},[a("el-popover",{attrs:{placement:"left",width:"170",trigger:"hover"}},[a("div",[e._v("输入值范围：0~100")]),e._v(" "),a("i",{staticClass:"el-icon-info primary",staticStyle:{cursor:"pointer",left:"-24px",position:"relative"},attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),a("el-input-number",{attrs:{min:0,max:100,label:"任务重试次数"},model:{value:e.seniorForm.retries,callback:function(t){e.$set(e.seniorForm,"retries",t)},expression:"seniorForm.retries"}})],1),e._v(" "),a("el-form-item",{staticClass:"other-param",attrs:{label:"任务并行度"}},[a("el-popover",{attrs:{placement:"left",width:"200",trigger:"hover"}},[a("div",[e._v("指定实例并行运行的数量(最小值1)")]),e._v(" "),a("i",{staticClass:"el-icon-info primary",staticStyle:{cursor:"pointer",left:"-10px",position:"relative"},attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),a("el-input-number",{attrs:{min:1,max:50,label:"任务并行度"},model:{value:e.seniorForm.maxActiveRuns,callback:function(t){e.$set(e.seniorForm,"maxActiveRuns",t)},expression:"seniorForm.maxActiveRuns"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.seniorForm.maxActiveRuns>5,expression:"seniorForm.maxActiveRuns > 5"}],staticStyle:{color:"#e6a23c","font-size":"10px","margin-top":"2px","line-height":"14px"}},[e._v("注：当并行度超过5时，可能会造成集群占满，请谨慎修改")])],1),e._v(" "),a("el-form-item",{attrs:{label:"任务开始日期"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择任务开始日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"00:00:00","picker-options":e.pickerOptions},model:{value:e.seniorForm.startDate,callback:function(t){e.$set(e.seniorForm,"startDate",t)},expression:"seniorForm.startDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务结束日期"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择任务结束日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"23:59:59","picker-options":e.pickerOptions2},model:{value:e.seniorForm.endDate,callback:function(t){e.$set(e.seniorForm,"endDate",t)},expression:"seniorForm.endDate"}})],1),e._v(" "),a("el-divider"),e._v(" "),a("div",{staticStyle:{"margin-left":"30px"}},[a("el-popover",{attrs:{placement:"right",width:"550",trigger:"hover"}},[a("div",[[e._v("\n                { "),a("br"),e._v('\n                    "errorLimit":{ "record":1, "percentage":0.02 }'),a("br"),e._v('\n                    "speed":{ "channel":2 } '),a("br"),e._v('\n                    "jvm":"-Xms1G -Xmx1G" '),a("br"),e._v("\n                } "),a("br"),e._v("\n                // speed : 传输速度配置 "),a("br"),e._v("\n                // channel : 并发数 "),a("br"),e._v("\n                // errorLimit : 容错比例配置 "),a("br"),e._v("\n                // record : 错误条数上限,超出则任务失败 "),a("br"),e._v("\n                // percentage : 错误比例上限,超出则任务失败 "),a("br")]],2),e._v(" "),a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer",color:"#409eff"},attrs:{slot:"reference"},slot:"reference"})]),e._v(" "),a("label",{staticClass:"label"},[e._v("其他参数")]),e._v(" "),a("el-input",{staticClass:"batch-params",attrs:{type:"textarea",rows:12,placeholder:"请输入其他参数",clearable:""},model:{value:e.seniorForm.batchParams,callback:function(t){e.$set(e.seniorForm,"batchParams",t)},expression:"seniorForm.batchParams"}})],1)],1)],1)],1)],1)},i=[],n=a("b199"),l=void 0;function o(e){return m(e)||c(e)||u(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"===typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var p={name:"SeniorForm",props:{seniorForm:{type:Object,default:function(){return{group:l.$store.getters.userInfo.group.split(",")[0],resourceLevel:"standard",retries:1,emails:"",clusterSla:"normal",batchParams:""}}},runModeShow:{type:Boolean,default:!0},isShowCloud:{type:Boolean,default:!1},isShowMode:{type:Boolean,default:!0},code:{type:String,default:""}},data:function(){return{props:{multiple:!0,value:"id",label:"name"},groupOptions:[],loading:!1,ownerList:[],collaboratorsList:[],userGroupList:[],resourceData:[{model:"standard",type:"spot",cost:"0.028"},{model:"standard",type:"ondemand",cost:"0.055"},{model:"middle",type:"spot",cost:"0.064"},{model:"middle",type:"ondemand",cost:"0.128"},{model:"large",type:"spot",cost:"0.096"},{model:"large",type:"ondemand",cost:"0.192"},{model:"extra large",type:"spot",cost:"0.192"},{model:"extra large",type:"ondemand",cost:"0.384"}],pickerOptions:{disabledDate:function(e){return e.getTime()<=new Date(new Date((new Date).toLocaleDateString()).getTime()-864e5)}},pickerOptions2:{disabledDate:function(e){return e.getTime()<=new Date(new Date((new Date).toLocaleDateString()).getTime()-864e5)}},alertTypeValue:""}},computed:{groupList:function(){var e=this.$store.getters.userInfo;return e&&e.group?e.group.split(","):[]},cloudList:function(){var e=["common","gpu"];return"sg2"===this.seniorForm.sourceRegion&&(e=["common","migration","gpu"]),e}},watch:{"seniorForm.alertType":function(e){0===e.length&&(this.seniorForm.emails="")},"seniorForm.startDate":function(e){e&&(this.pickerOptions2={disabledDate:function(t){return t.getTime()<new Date(e).getTime()}})}},created:function(){var e=this;this.getUserGroup(),this.seniorForm.owner||(this.seniorForm.owner=this.$store.getters.userInfo.userId),this.remoteMethod(this.seniorForm.owner,"ownerList"),this.seniorForm.collaborators&&this.seniorForm.collaborators.length&&this.seniorForm.collaborators.map((function(t){Object(n["Y"])(t).then((function(t){var a,r=t.data;(a=e.collaboratorsList).push.apply(a,o(r))}))}))},methods:{solveEmptyChildren:function(e){var t=this;e.forEach((function(e){e.children.length?t.solveEmptyChildren(e.children):delete e.children}))},getUserGroup:function(){this.userGroupList=this.$store.getters["user/userGroupList"]},remoteMethod:function(e,t){var a=this;""!==e?(this.loading=!0,Object(n["Y"])(e).then((function(e){a.loading=!1;var r=e.data;a[t]=r}))):this[t]=[]},addParam:function(){var e=this.seniorForm.params.length;e>0&&!this.seniorForm.params[e-1].key?this.$message({type:"warning",message:"请先输入当前参数的key！"}):this.seniorForm.params.push({key:"",value:""})},deleteParam:function(e){this.seniorForm.params.splice(e,1)},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===a)return t%2===0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},checkAlertType:function(e){this.alertTypeValue!==e?this.alertTypeValue=e:this.alertTypeValue=""}}},f=p,h=(a("59f6"),a("2877")),g=Object(h["a"])(f,r,i,!1,null,"041db9a4",null);t["a"]=g.exports},a10d:function(e,t,a){"use strict";a("d76f")},a216:function(e,t,a){"use strict";a("a3c0")},a29d:function(e,t,a){},a29e:function(e,t,a){},a3c0:function(e,t,a){},a739:function(e,t,a){"use strict";var r=a("8a30"),i=a.n(r),n=a("f942"),l=a.n(n),o={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOPLEVEL:"reserved-toplevel",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"},s=a("8448"),u=a.n(s),c=a("4416"),m=a.n(c);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function h(e,t,a){return t&&f(e.prototype,t),a&&f(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=E(e,"string");return"symbol"===d(t)?t:String(t)}function E(e,t){if("object"!==d(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var b="top-level",v="block-level",y=function(){function e(t){p(this,e),this.indent=t||"  ",this.indentTypes=[]}return h(e,[{key:"getIndent",value:function(){return u()(this.indent,this.indentTypes.length)}},{key:"increaseToplevel",value:function(){this.indentTypes.push(b)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(v)}},{key:"decreaseTopLevel",value:function(){m()(this.indentTypes)===b&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){while(this.indentTypes.length>0){var e=this.indentTypes.pop();if(e!==b)break}}}]),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function R(e,t,a){return t&&S(e.prototype,t),a&&S(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e){var t=O(e,"string");return"symbol"===T(t)?t:String(t)}function O(e,t){if("object"!==T(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var A=50,k=function(){function e(){_(this,e),this.level=0}return R(e,[{key:"beginIfPossible",value:function(e,t){0===this.level&&this.isInlineBlock(e,t)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(e,t){for(var a=0,r=0,i=t;i<e.length;i++){var n=e[i];if(a+=n.value.length,a>A)return!1;if(n.type===o.OPEN_PAREN)r++;else if(n.type===o.CLOSE_PAREN&&(r--,0===r))return!0;if(this.isForbiddenToken(n))return!1}return!1}},{key:"isForbiddenToken",value:function(e){var t=e.type,a=e.value;return t===o.RESERVED_TOPLEVEL||t===o.RESERVED_NEWLINE||t===o.COMMENT||t===o.BLOCK_COMMENT||";"===a}}]),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function L(e,t,a){return t&&P(e.prototype,t),a&&P(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function F(e){var t=D(e,"string");return"symbol"===I(t)?t:String(t)}function D(e,t){if("object"!==I(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var w=function(){function e(t){N(this,e),this.params=t,this.index=0}return L(e,[{key:"get",value:function(e){var t=e.key,a=e.value;return this.params?t?this.params[t]:this.params[this.index++]:a}}]),e}();function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function G(e,t,a){return t&&U(e.prototype,t),a&&U(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function H(e){var t=V(e,"string");return"symbol"===M(t)?t:String(t)}function V(e,t){if("object"!==M(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var B=function(){function e(t,a){x(this,e),this.cfg=t||{},this.indentation=new y(this.cfg.indent),this.inlineBlock=new k,this.params=new w(this.cfg.params),this.tokenizer=a,this.previousReservedWord={},this.tokens=[],this.index=0}return G(e,[{key:"format",value:function(e){this.tokens=this.tokenizer.tokenize(e);var t=this.getFormattedQueryFromTokens();return t.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var e=this,t="";return this.tokens.forEach((function(a,r){e.index=r,a.type===o.WHITESPACE||(a.type===o.LINE_COMMENT?t=e.formatLineComment(a,t):a.type===o.BLOCK_COMMENT?t=e.formatBlockComment(a,t):a.type===o.RESERVED_TOPLEVEL?(t=e.formatToplevelReservedWord(a,t),e.previousReservedWord=a):a.type===o.RESERVED_NEWLINE?(t=e.formatNewlineReservedWord(a,t),e.previousReservedWord=a):a.type===o.RESERVED?(t=e.formatWithSpaces(a,t),e.previousReservedWord=a):t=a.type===o.OPEN_PAREN?e.formatOpeningParentheses(a,t):a.type===o.CLOSE_PAREN?e.formatClosingParentheses(a,t):a.type===o.PLACEHOLDER?e.formatPlaceholder(a,t):","===a.value?e.formatComma(a,t):":"===a.value?e.formatWithSpaceAfter(a,t):"."===a.value?e.formatWithoutSpaces(a,t):";"===a.value?e.formatQuerySeparator(a,t):e.formatWithSpaces(a,t))})),t}},{key:"formatLineComment",value:function(e,t){return this.addNewline(t+e.value)}},{key:"formatBlockComment",value:function(e,t){return this.addNewline(this.addNewline(t)+this.indentComment(e.value))}},{key:"indentComment",value:function(e){return e.replace(/\n/g,"\n"+this.indentation.getIndent())}},{key:"formatToplevelReservedWord",value:function(e,t){return this.indentation.decreaseTopLevel(),t=this.addNewline(t),this.indentation.increaseToplevel(),t+=this.equalizeWhitespace(e.value),this.addNewline(t)}},{key:"formatNewlineReservedWord",value:function(e,t){return this.addNewline(t)+this.equalizeWhitespace(e.value)+" "}},{key:"equalizeWhitespace",value:function(e){return e.replace(/\s+/g," ")}},{key:"formatOpeningParentheses",value:function(e,t){var a=[o.WHITESPACE,o.OPEN_PAREN,o.LINE_COMMENT];return i()(a,this.previousToken().type)||(t=l()(t)),t+=e.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),t=this.addNewline(t)),t}},{key:"formatClosingParentheses",value:function(e,t){return this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(e,t)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(e,this.addNewline(t)))}},{key:"formatPlaceholder",value:function(e,t){return t+this.params.get(e)+" "}},{key:"formatComma",value:function(e,t){return t=this.trimTrailingWhitespace(t)+e.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?t:this.addNewline(t)}},{key:"formatWithSpaceAfter",value:function(e,t){return this.trimTrailingWhitespace(t)+e.value+" "}},{key:"formatWithoutSpaces",value:function(e,t){return this.trimTrailingWhitespace(t)+e.value}},{key:"formatWithSpaces",value:function(e,t){return t+e.value+" "}},{key:"formatQuerySeparator",value:function(e,t){return this.trimTrailingWhitespace(t)+e.value+"\n"}},{key:"addNewline",value:function(e){return l()(e)+"\n"+this.indentation.getIndent()}},{key:"trimTrailingWhitespace",value:function(e){return this.previousNonWhitespaceToken().type===o.LINE_COMMENT?l()(e)+"\n":l()(e)}},{key:"previousNonWhitespaceToken",value:function(){var e=1;while(this.previousToken(e).type===o.WHITESPACE)e++;return this.previousToken(e)}},{key:"previousToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.tokens[this.index-e]||{}}}]),e}(),Y=a("13ea"),$=a.n(Y),W=a("9062"),K=a.n(W);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function J(e,t,a){return t&&q(e.prototype,t),a&&q(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function z(e){var t=Q(e,"string");return"symbol"===j(t)?t:String(t)}function Q(e,t){if("object"!==j(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Z=function(){function e(t){X(this,e),this.WHITESPACE_REGEX=/^(\s+)/,this.NUMBER_REGEX=/^((-\s*)?[0-9]+(\.[0-9]+)?|0x[0-9a-fA-F]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|->>|->|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|.)/,this.BLOCK_COMMENT_REGEX=/^(\/\*[^]*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(t.lineCommentTypes),this.RESERVED_TOPLEVEL_REGEX=this.createReservedWordRegex(t.reservedToplevelWords),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(t.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(t.reservedWords),this.WORD_REGEX=this.createWordRegex(t.specialWordChars),this.STRING_REGEX=this.createStringRegex(t.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(t.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(t.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.namedPlaceholderTypes,this.createStringPattern(t.stringTypes))}return J(e,[{key:"createLineCommentRegex",value:function(e){return new RegExp("^((?:".concat(e.map((function(e){return K()(e)})).join("|"),").*?(?:\n|$))"))}},{key:"createReservedWordRegex",value:function(e){var t=e.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(t,")\\b"),"i")}},{key:"createWordRegex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new RegExp("^([\\w".concat(e.join(""),"]+)"))}},{key:"createStringRegex",value:function(e){return new RegExp("^("+this.createStringPattern(e)+")")}},{key:"createStringPattern",value:function(e){var t={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)","''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)','N""':'((N"[^N"\\\\]*(?:\\\\.[^N"\\\\]*)*("|$))+)'};return e.map((function(e){return t[e]})).join("|")}},{key:"createParenRegex",value:function(e){var t=this;return new RegExp("^("+e.map((function(e){return t.escapeParen(e)})).join("|")+")","i")}},{key:"escapeParen",value:function(e){return 1===e.length?K()(e):"\\b"+e+"\\b"}},{key:"createPlaceholderRegex",value:function(e,t){if($()(e))return!1;var a=e.map(K.a).join("|");return new RegExp("^((?:".concat(a,")(?:").concat(t,"))"))}},{key:"tokenize",value:function(e){var t,a=[];while(e.length)t=this.getNextToken(e,t),e=e.substring(t.value.length),a.push(t);return a}},{key:"getNextToken",value:function(e,t){return this.getWhitespaceToken(e)||this.getCommentToken(e)||this.getStringToken(e)||this.getOpenParenToken(e)||this.getCloseParenToken(e)||this.getPlaceholderToken(e)||this.getNumberToken(e)||this.getReservedWordToken(e,t)||this.getWordToken(e)||this.getOperatorToken(e)}},{key:"getWhitespaceToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(e){return this.getLineCommentToken(e)||this.getBlockCommentToken(e)}},{key:"getLineCommentToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(e){return this.getIdentNamedPlaceholderToken(e)||this.getStringNamedPlaceholderToken(e)||this.getIndexedPlaceholderToken(e)}},{key:"getIdentNamedPlaceholderToken",value:function(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(e){return e.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(e){var t=this;return this.getPlaceholderTokenWithKey({input:e,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(e){return t.getEscapedPlaceholderKey({key:e.slice(2,-1),quoteChar:e.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(e){return e.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(e){var t=e.input,a=e.regex,r=e.parseKey,i=this.getTokenOnFirstMatch({input:t,regex:a,type:o.PLACEHOLDER});return i&&(i.key=r(i.value)),i}},{key:"getEscapedPlaceholderKey",value:function(e){var t=e.key,a=e.quoteChar;return t.replace(new RegExp(K()("\\")+a,"g"),a)}},{key:"getNumberToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(e,t){if(!t||!t.value||"."!==t.value)return this.getToplevelReservedToken(e)||this.getNewlineReservedToken(e)||this.getPlainReservedToken(e)}},{key:"getToplevelReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.RESERVED_TOPLEVEL,regex:this.RESERVED_TOPLEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getPlainReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:o.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(e){var t=e.input,a=e.type,r=e.regex,i=t.match(r);if(i)return{type:a,value:i[1]}}}]),e}();function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function re(e,t,a){return t&&ae(e.prototype,t),a&&ae(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function ie(e){var t=ne(e,"string");return"symbol"===ee(t)?t:String(t)}function ne(e,t){if("object"!==ee(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var le,oe=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],se=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UPDATE","VALUES","WHERE"],ue=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],ce=function(){function e(t){te(this,e),this.cfg=t}return re(e,[{key:"format",value:function(e){return le||(le=new Z({reservedWords:oe,reservedToplevelWords:se,reservedNewlineWords:ue,stringTypes:["''",'""',"``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new B(this.cfg,le).format(e)}}]),e}();function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,he(r.key),r)}}function fe(e,t,a){return t&&pe(e.prototype,t),a&&pe(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function he(e){var t=ge(e,"string");return"symbol"===me(t)?t:String(t)}function ge(e,t){if("object"!==me(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Ee,be=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],ve=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","INTERSECT ALL","INTERSECT","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],ye=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],Te=function(){function e(t){de(this,e),this.cfg=t}return fe(e,[{key:"format",value:function(e){return Ee||(Ee=new Z({reservedWords:be,reservedToplevelWords:ve,reservedNewlineWords:ye,stringTypes:["''",'""',"``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new B(this.cfg,Ee).format(e)}}]),e}();function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oe(r.key),r)}}function Ce(e,t,a){return t&&Re(e.prototype,t),a&&Re(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oe(e){var t=Ae(e,"string");return"symbol"===_e(t)?t:String(t)}function Ae(e,t){if("object"!==_e(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var ke,Ie=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],Ne=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UNION ALL","UNION","UPDATE","VALUES","WHERE"],Pe=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],Le=function(){function e(t){Se(this,e),this.cfg=t}return Ce(e,[{key:"format",value:function(e){return ke||(ke=new Z({reservedWords:Ie,reservedToplevelWords:Ne,reservedNewlineWords:Pe,stringTypes:["''",'N""','""',"``"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new B(this.cfg,ke).format(e)}}]),e}();function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xe(r.key),r)}}function Me(e,t,a){return t&&we(e.prototype,t),a&&we(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function xe(e){var t=Ue(e,"string");return"symbol"===Fe(t)?t:String(t)}function Ue(e,t){if("object"!==Fe(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Ge,He=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],Ve=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UPDATE","VALUES","WHERE"],Be=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],Ye=function(){function e(t){De(this,e),this.cfg=t}return Me(e,[{key:"format",value:function(e){return Ge||(Ge=new Z({reservedWords:He,reservedToplevelWords:Ve,reservedNewlineWords:Be,stringTypes:["''",'N""','""',"``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?","{{","}}","${"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--","SET","set"]})),new B(this.cfg,Ge).format(e)}}]),e}();t["a"]={format:function(e,t){switch(t=t||{},t.language){case"db2":return new ce(t).format(e);case"n1ql":return new Te(t).format(e);case"pl/sql":return new Le(t).format(e);case"sql":case void 0:return new Ye(t).format(e);default:throw Error("Unsupported SQL dialect: ".concat(t.language))}}}},a7fb:function(e,t,a){"use strict";a("f737")},b03b:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"monaco",staticClass:"monaco-editor"})},i=[],n=a("33f9"),l=a("846a"),o=a("a739");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e){return p(e)||d(e)||m(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"===typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){E(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e,t,a){return t=b(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e){var t=v(e,"string");return"symbol"===s(t)?t:String(t)}function v(e,t){if("object"!==s(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var y={name:"MonacoEditor",props:{readOnly:{type:Boolean,default:!1},value:{type:String,default:""},theme:{type:String,default:"vs"},language:{type:String,default:"sql"},minimap:{type:Boolean,default:!1},scrollBeyondLastLine:{type:Boolean,default:!0},renderLineHighlight:{type:String,default:"line"},lineNumbers:{type:String,default:"on"},customTheme:{type:Object,default:function(){return{rules:[{token:"string.sql",foreground:"b81515"},{token:"operator.sql",foreground:"0000ff"},{token:"predefined.sql",foreground:"925e26"}],colors:{"editor.lineHighlightBackground":"#e8f2ff","sideBar.background":"#330000"}}},wordWrap:{type:String,default:""}}},data:function(){return{editorOptions:{lineNumbers:this.lineNumbers,selectOnLineNumbers:!0,roundedSelection:!1,readOnly:this.readOnly,cursorStyle:"line",automaticLayout:!0,useTabStops:!1,fontSize:14,autoIndent:!1,folding:!0,scrollBeyondLastLine:this.scrollBeyondLastLine,renderLineHighlight:this.renderLineHighlight,foldingStrategy:"indentation",wordWrap:this.wordWrap,minimap:{enabled:this.minimap},scrollbar:{alwaysConsumeMouseWheel:!1}}}},mounted:function(){var e=this,t=this;n["languages"].registerCompletionItemProvider(this.language,{provideCompletionItems:function(e,a){var r=e.getWordUntilPosition(a),i={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:r.startColumn,endColumn:r.endColumn};return{suggestions:t.initSqlKeyWords(i)}}}),n["editor"].defineTheme("customTheme",{base:this.theme,inherit:!0,rules:this.customTheme.rules,colors:this.customTheme.colors}),this.monacoEditor=n["editor"].create(this.$refs.monaco,g({value:this.value,language:this.language,theme:"customTheme"},this.editorOptions)),this.monacoEditor.onDidChangeModelContent((function(t){var a=e.monacoEditor.getValue();e.updateCode(a)})),this.monacoEditor.addCommand(n["KeyMod"].CtrlCmd|n["KeyCode"].KEY_S,(function(){e.$emit("save")})),this.monacoEditor.addCommand(n["KeyMod"].CtrlCmd|n["KeyMod"].Alt|n["KeyCode"].KEY_L,(function(){e.formatSql()})),this.monacoEditor.addCommand(n["KeyMod"].CtrlCmd|n["KeyCode"].Enter,(function(){e.$emit("exec")}))},destroyed:function(){this.monacoEditor.dispose()},methods:{initSqlKeyWords:function(e){var t=u(l["a"][this.language]),a=t.map((function(t){return{label:t,insertText:t,sortText:"A".concat(name),detail:" ",range:e}}));return a},formatSql:function(){var e="";e=this.monacoEditor.getValue(),e&&(e=o["a"].format(e),this.monacoEditor.setValue(e),this.updateCode(e))},updateCode:function(e){this.$emit("input",e)},setCode:function(e){this.monacoEditor.setValue(e)},insertContent:function(e){var t=this.monacoEditor.getSelection(),a=new n["Range"](t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn),r={major:1,minor:1},i={identifier:r,range:a,text:e,forceMoveMarkers:!0};this.monacoEditor.executeEdits(this.root,[i]),this.monacoEditor.focus()},getSelection:function(){var e=this.monacoEditor.getSelection();return this.monacoEditor.getModel().getValueInRange(e)}}},T=y,_=(a("1db8"),a("a10d"),a("2877")),S=Object(_["a"])(T,r,i,!1,null,"5506d550",null);t["a"]=S.exports},b464:function(e,t,a){},b81f:function(e,t,a){},bdae:function(e,t,a){},be0b:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"输入字段"+e.name+"转换函数管理",visible:e.dialogVisible,width:"650px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetFunc}},[a("div",{staticClass:"dialog-body"},[a("div",{staticClass:"tag-wrap"},[a("label",{staticClass:"tag-label"},[e._v("已添加的函数")]),e._v(" "),a("div",{staticClass:"tag-group"},e._l(e.funcs,(function(t,r){return a("el-popover",{key:r,attrs:{trigger:"hover",placement:"bottom","popper-class":"tag-popper"}},[a("div",[e._v("函数名："+e._s(t.funcName))]),e._v(" "),a("div",[e._v("参数："+e._s(t.funcParams.join(",")))]),e._v(" "),a("el-tag",{staticClass:"tag-item",attrs:{slot:"reference",closable:""},on:{close:function(t){return e.removeTag(r)}},slot:"reference"},[e._v(e._s(t.funcName))])],1)})),1)]),e._v(" "),a("el-divider"),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新增函数"}},[a("el-select",{attrs:{placeholder:"请选择新增函数"},model:{value:e.ruleForm.funcName,callback:function(t){e.$set(e.ruleForm,"funcName",t)},expression:"ruleForm.funcName"}},e._l(e.funcList,(function(e,t){return a("el-option",{key:t,attrs:{value:t,label:t}})})),1),e._v(" "),a("a",{staticClass:"link",on:{click:e.clickDoc}},[e._v("查看详细说明文档")]),e._v(" "),a("div",{staticClass:"desc"},[e._v(e._s(e.ruleForm.funcName&&e.funcList[e.ruleForm.funcName].description))])],1),e._v(" "),e.ruleForm.funcName?e._l(e.funcList[e.ruleForm.funcName].params,(function(t,r){return a("el-form-item",{key:r,attrs:{label:"参数"+(r+1)}},[t.valueList?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},e._l(t.valueList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1):t.radioList?a("el-radio-group",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},e._l(t.radioList,(function(t,r){return a("el-radio",{key:r,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1):a("el-input",{attrs:{placeholder:"请输入",disabled:t.disabled},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),e._v(" "),a("div",{staticClass:"desc"},[e._v(e._s(t.comment))])],1)})):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.funcName,expression:"ruleForm.funcName"}]},[a("el-button",{attrs:{type:"primary"},on:{click:e.addFunc}},[e._v("添加")])],1)],2)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("关闭")])],1)])},i=[],n=a("c32b"),l={name:"ConvertFunc",data:function(){return{dialogVisible:!1,index:"",name:"",funcs:[],ruleForm:{funcName:""},funcList:{dx_digest:{description:"",params:[{value:"md5",disabled:!0,comment:""},{value:"toUpperCase",disabled:!0,comment:""}]},dx_substr:{description:"从字符串的指定位置（包含）截取指定长度的字符串。如果开始位置非法抛出异常。如果字段为空值，直接返回（即不参与本transformer）",params:[{value:"",comment:"字段值的开始位置"},{value:"",comment:"目标字段长度"}]},dx_pad:{description:"如果源字符串长度小于目标字段长度，按照位置添加pad字符后返回。如果长于，直接截断（都截右边）。如果字段为空值，转换为空字符串进行pad，即最后的字符串全是需要pad的字符",params:[{value:"",valueList:["l","r"],comment:'可输入："l","r", "l"是在头进行pad，"r"是尾进行pad'},{value:"",comment:"目标字段长度"},{value:"",comment:"需要pad的字符"}]},dx_replace:{description:"从字符串的指定位置（包含）替换指定长度的字符串。如果开始位置非法抛出异常。如果字段为空值，直接返回（即不参与本transformer）",params:[{type:n["b"],value:"",comment:"字段值的开始位置"},{type:n["b"],value:"",comment:"需要替换的字段长度"},{value:"",comment:"需要替换的字符串"}]},dx_filter:{description:"如果匹配正则表达式，返回Null，表示过滤该行。不匹配表达式时，表示保留该行。（注意是该行）。对于>=<都是对字段直接compare的结果.",params:[{value:"",valueList:["like","not like",">","=","<",">=","!=","<="],comment:"运算符，支持以下运算符：like, not like, >, =, <, >=, !=, <="},{value:"",comment:"正则表达式（java正则表达式）、值"}]},dx_ede:{description:"",params:[{value:!0,radioList:[{name:"加密",value:!0},{name:"解密",value:!1}],comment:""},{value:"",comment:""}]}}}},methods:{showWin:function(e,t){this.dialogVisible=!0,this.index=t,this.name=e.name,this.funcs=e.funcs||[]},addFunc:function(){this.funcs.push({funcName:this.ruleForm.funcName,funcParams:this.funcList[this.ruleForm.funcName].params.map((function(e){return e.value}))}),this.resetFunc()},resetFunc:function(){this.ruleForm.funcName&&(this.funcList[this.ruleForm.funcName].params.forEach((function(e){e.value=""})),this.ruleForm.funcName="")},removeTag:function(e){this.funcs.splice(e,1)},clickDoc:function(){window.open("https://shimo.im/docs/pmkxQmWOO4COMKAN#anchor-RnHU","_blank")},save:function(){this.$emit("save",this.funcs,this.index),this.dialogVisible=!1}}},o=l,s=(a("67db"),a("2877")),u=Object(s["a"])(o,r,i,!1,null,"5d5ab3d0",null);t["a"]=u.exports},beb1:function(e,t,a){},c58c:function(e,t,a){"use strict";a("61ee")},c785:function(e,t,a){},cecc:function(e,t,a){"use strict";a("a29d")},cf25:function(e,t,a){"use strict";a("b81f")},d76f:function(e,t,a){e.exports={globalFont:"Helvetica Neue,Helvetica,PingFang SC,Avenir,Segoe UI,Arial,sans-serif,Hiragino Sans GB,Microsoft YaHei",navbarHeight:"45px",menuText:"#445782",menuActiveText:"#3782ff",subMenuActiveText:"#3782ff",menuBg:"#f7f9ff",menuHover:"#dfebff",subMenuBg:"#1f2d3d",subMenuHover:"#dfebff",sideBarWidth:"244px"}},d7bc:function(e,t,a){},db32:function(e,t,a){},dc2d:function(e,t,a){"use strict";a("0357")},dd30:function(e,t,a){},ddba:function(e,t,a){"use strict";a("c785")},dea8:function(e,t,a){},deac:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sql-tips"},[a("div",{staticClass:"title1",staticStyle:{"margin-bottom":"5px"}},[e._v("表达式中的tomorrow、yesterday等都是基于平台（入参时间execution_date）计算")]),e._v(" "),a("el-table",{attrs:{data:e.gridData,size:"mini","cell-style":{padding:"4px 0"}}},[a("el-table-column",{attrs:{property:"expression",label:"参数"}}),e._v(" "),a("el-table-column",{attrs:{property:"mean",label:"含义"}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[e._v("其他情况请参考：")]),e._v(" "),e._m(0)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a",{attrs:{href:"https://shimo.im/docs/pmkxQmWOO4COMKAN#anchor-vxmb",target:"_blank"}},[e._v("https://shimo.im/docs/pmkxQmWOO4COMKAN#anchor-vxmb")])])}],n={name:"SqlTips",data:function(){return{text:"{{ (execution_date - macros.timedelta(days=1)).strftime('%Y%m%d') }}",gridData:[{expression:"{{ ds }}",mean:"the execution date as YYYY-MM-DD"},{expression:"{{ ds_nodash }}",mean:"the execution date as YYYYMMDD"},{expression:"{{ yesterday_ds }}",mean:"yesterday’s date as YYYY-MM-DD"},{expression:'{{ yesterday_ds.strftime("%Y-%m-%d %H:%M:%S") }} ',mean:"yesterday’s date as YYYY-MM-DD HH:mm:ss"},{expression:"{{ yesterday_ds_nodash }}",mean:"yesterday’s date as YYYYMMDD"},{expression:"{{ tomorrow_ds }}",mean:"tomorrow’s date as YYYY-MM-DD"},{expression:"{{ tomorrow_ds_nodash }}",mean:"tomorrow’s date as YYYYMMDD"},{expression:'{{ execution_date.strftime("%Y-%m-%d %H:%M:%S") }}',mean:"yesterday’s date as YYYY-MM-DD HH:MM:SS"}]}}},l=n,o=(a("dc2d"),a("2877")),s=Object(o["a"])(l,r,i,!1,null,"80756af0",null);t["a"]=s.exports},ec8a:function(e,t,a){"use strict";a("a29e")},f121:function(e,t,a){"use strict";a("beb1")},f25f:function(e,t,a){"use strict";a("19a2")},f4b1:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"func-icon"},[e.showicon?a("div",{staticClass:"func-icon-code"},[e._v("</>")]):e._e(),e._v(" "),e._m(0)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"func-icon-line"},[a("div",{staticClass:"circle left"}),e._v(" "),a("div",{staticClass:"circle right"})])}],n={name:"FuncIcon",props:{showicon:{type:Boolean,default:!0}}},l=n,o=(a("46c4"),a("2877")),s=Object(o["a"])(l,r,i,!1,null,"ad60278c",null);t["a"]=s.exports},f566:function(e,t,a){"use strict";a("3970")},f70e:function(e,t,a){"use strict";a("353e")},f737:function(e,t,a){},f87d:function(e,t,a){"use strict";a("dea8")},ff91:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[e.isFilter?a("el-input",{attrs:{placeholder:"输入关键字",size:"mini"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}):e._e(),e._v(" "),a("div",{staticClass:"folder_content"},[a("el-tree",e._b({ref:"fileTree",staticClass:"folderData",attrs:{data:e.comTreeData,"node-key":"id",props:e.defaultProps,"default-expand-all":"","allow-drop":e.allowDrop,"allow-drag":e.allowDrag,"filter-node-method":e.filterNode},on:{"node-drop":e.handleDrop,"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,i=t.data;return[e._t("default",[e.isContextmenu?a("div",{staticClass:"custom-tree-node",class:[i.id===e.selectNode.id&&e.isLocked?"selected-node":"",i[e.defaultProps.children]?"custom-tree-node-children":"",e.nodeId===r.id?"currentClass":""],on:{contextmenu:function(t){return t.preventDefault(),e.onContextmenu(t,r,i)},dblclick:function(t){return e.dbClickNOde(i)}}},[a("div",{staticClass:"node_left"},[i[e.defaultProps.children]?a("span",{staticClass:"node_icon"},[r.expanded&&i[e.defaultProps.children].length>0?a("svg-icon",{attrs:{"icon-class":"folder_open"}}):a("svg-icon",{attrs:{"icon-class":"folder"}})],1):e._e(),e._v(" "),i[e.nodeOptions.key]&&i[e.nodeOptions.key]===e.nodeOptions.value?a("svg-icon",{attrs:{"icon-class":e.nodeOptions.icon}}):e._e(),e._v(" "),i.inputType?a("el-input",{directives:[{name:"autoFous",rawName:"v-autoFous",value:"input",expression:"'input'"}],attrs:{placeholder:"请输入名称",size:"mini"},on:{input:function(t){i[e.defaultProps.label]=e.handelInput(i[e.defaultProps.label])},blur:function(t){return e.nodeBlur(i)}},nativeOn:{keyup:function(t){return e.dataNameInput(t,i)}},model:{value:i[e.defaultProps.label],callback:function(t){e.$set(i,e.defaultProps.label,t)},expression:"data[defaultProps.label]"}}):a("el-tooltip",{attrs:{effect:"dark",disabled:e.isTipDisabled,content:i[e.defaultProps.label],placement:"right"}},[a("span",{staticClass:"node_text ellipsis",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(i[e.defaultProps.label]))])])],1),e._v(" "),a("div",{staticClass:"node_right"},[e.isMenuIcon?a("svg-icon",{staticClass:"svg_extendedMenu",attrs:{"icon-class":"extendedMenu"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onContextmenu(t,r,i)}}}):e._e()],1)]):a("div",{staticClass:"custom-tree-node",class:[i.id===e.selectNode.id&&e.isLocked?"selected-node":"",i[e.defaultProps.children]?"custom-tree-node-children":""]},[a("div",{staticClass:"node_left"},[i[e.defaultProps.children]?a("span",{staticClass:"node_icon"},[r.expanded&&i[e.defaultProps.children].length>0?a("svg-icon",{attrs:{"icon-class":"folder_open"}}):a("svg-icon",{attrs:{"icon-class":"folder"}})],1):e._e(),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",disabled:e.isTipDisabled,content:i[e.defaultProps.label],placement:"right"}},[a("span",{staticClass:"node_text ellipsis",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(i[e.defaultProps.label]))])])],1),e._v(" "),a("div",{staticClass:"node_right"},[e.isMenuIcon?a("svg-icon",{staticClass:"svg_extendedMenu",attrs:{"icon-class":"extendedMenu"},on:{click:function(t){return t.stopPropagation(),e.onContextmenu(t,r,i)}}}):e._e()],1)])],{node:r,data:i})]}}],null,!0)},"el-tree",e.options,!1))],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"文件移动",visible:e.moveFileDialType,"append-to-body":!0},on:{"update:visible":function(t){e.moveFileDialType=t},close:e.moveClose}},[a("el-form",{ref:"moveFileForm",attrs:{"label-width":"80px",model:e.moveForm}},[a("el-form-item",{attrs:{label:"移动到 :",prop:"moveFileName",rules:[{required:!0,message:"请选择文件夹",trigger:"change"}]}},[a("el-select",{ref:"moveSelectTree",staticStyle:{width:"100%"},attrs:{placeholder:"请选择文件夹"},model:{value:e.moveForm.moveFileName,callback:function(t){e.$set(e.moveForm,"moveFileName",t)},expression:"moveForm.moveFileName"}},[a("el-option",{attrs:{hidden:"",value:""}}),e._v(" "),a("CustomTree",{attrs:{"tree-data":e.moveTree,"default-props":e.defaultProps,"is-menu-icon":!1},on:{"node-click":e.handelClickMove}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.moveFileDialType=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.moveFilebtn}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"添加文件夹",visible:e.addFolderDialType,"append-to-body":!0},on:{"update:visible":function(t){e.addFolderDialType=t},close:e.addClose}},[a("el-form",{ref:"addFileForm",attrs:{"label-width":"100px",model:e.addForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"文件夹名称 :",prop:"addFileName",rules:[{required:!0,message:"请输入文件夹名称",trigger:"blur"}]}},[a("el-input",{on:{input:function(t){e.addForm.addFileName=e.handelInput(e.addForm.addFileName)}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addFilebtn(t)}},model:{value:e.addForm.addFileName,callback:function(t){e.$set(e.addForm,"addFileName","string"===typeof t?t.trim():t)},expression:"addForm.addFileName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFolderDialType=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addFilebtn}},[e._v("确 定")])],1)],1)],1)},i=[],n=a("ed08"),l={name:"CustomTree",props:{isLocked:{type:Boolean,default:!1},treeData:{type:Array,default:function(){return[]}},defaultProps:{type:Object,default:function(){return{children:"children",label:"label"}}},nodeOptions:{type:Object,default:function(){return{}}},noDrag:{type:Array,default:function(){return[]}},isMenuIcon:{type:Boolean,default:!0},isContextmenu:{type:Boolean,default:!1},isFilter:{type:Boolean,default:!1},options:{type:Object,default:function(){return{"expand-on-click-node":!1,draggable:!1}}},contextMenuOption:{type:Object,default:function(){return{menuList:[],setMenu:function(){}}}},depth:{type:Number,default:4},setNoDrag:{type:Function,default:function(){return!0}}},data:function(){return{isTipDisabled:!1,filterText:"",oldNodeName:"",moveFileDialType:!1,moveForm:{moveFileName:""},addForm:{addFileName:""},addFolderDialType:!1,moveFileObj:{},moveToFileObject:{},oldAddFileObj:{},nodeId:null,selectNode:{}}},computed:{comTreeData:function(){var e=JSON.parse(JSON.stringify(this.treeData));function t(e,a){return e.forEach((function(e){e[a]&&t(e[a],a),e.inputType=!1})),e}return t(e,this.defaultProps.children)},moveTree:function(){var e=JSON.parse(JSON.stringify(this.treeData)),t=JSON.parse(JSON.stringify(this.defaultProps));return this.$utils.dataChildrenTree(e,t.children)}},watch:{filterText:function(e){this.$refs.fileTree.filter(e)}},methods:{isShowTooltip:function(e){var t=e.target.clientWidth,a=e.target.scrollWidth;this.isTipDisabled=!(a>t)},handelInput:function(e){return Object(n["getStrByte"])(e,30)},nodeClick:function(e,t,a){e[this.defaultProps.children]?this.nodeId=null:this.nodeId=t.id,this.selectNode=e,this.isLocked?this.$emit("node-click",this.selectNode,t,a):this.$emit("node-click",e,t,a)},dbClickNOde:function(e){this.treeData[0][this.defaultProps.label]!==e[this.defaultProps.label]&&(e.inputType=!0,this.oldNodeName=e[this.defaultProps.label])},addClose:function(){this.$refs.addFileForm.resetFields()},moveClose:function(){this.$refs.moveFileForm.resetFields()},handelClickMove:function(e){this.moveForm.moveFileName=e[this.defaultProps.label],this.moveToFileObject=e,this.$refs.moveSelectTree.blur()},addFilebtn:function(){var e=this;this.$refs.addFileForm.validate((function(t){t&&(e.addFolderDialType=!1,e.$emit("addFile",JSON.parse(JSON.stringify(e.addForm)),e.oldAddFileObj))}))},moveFilebtn:function(){var e=this;this.$refs.moveFileForm.validate((function(t){t&&(e.moveFileDialType=!1,e.$emit("moveFile",e.moveFileObj,e.moveToFileObject))}))},delFile:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("delFile",e)})).catch((function(){}))},moveFile:function(e){this.moveFileObj=e,this.moveFileDialType=!0},dataNameInput:function(e,t){13===e.keyCode&&(t.inputType=!1)},addFolder:function(e){this.addFolderDialType=!0,this.oldAddFileObj=e},nodeBlur:function(e){e[this.defaultProps.label]?(e.inputType=!1,e[this.defaultProps.label]!==this.oldNodeName&&this.$emit("resetFolderName",e)):this.$message({type:"warning",message:"请输入文件名"})},resetName:function(e){this.oldNodeName=e[this.defaultProps.label],e.inputType=!0},filterNode:function(e,t){return!e||-1!==t[this.defaultProps.label].indexOf(e)},onContextmenu:function(e,t,a){var r,i,n,l=this,o=[{label:"新建文件夹",disabled:!(a[this.defaultProps.children]&&t.level<this.depth),onClick:function(){l.addFolder(a)}},{label:"重命名",disabled:(null==(r=this.treeData[0])?void 0:r.id)===a.id,onClick:function(){l.resetName(a)}},{label:"移 动",disabled:(null==(i=this.treeData[0])?void 0:i.id)===a.id,onClick:function(){l.moveFile(a)}},{label:"删 除",disabled:(null==(n=this.treeData[0])?void 0:n.id)===a.id||a[this.defaultProps.children]&&a[this.defaultProps.children].length>0,onClick:function(){l.delFile(a)}}];this.contextMenuOption.menuList.length>0&&(this.contextMenuOption.menuList.forEach((function(r){var i={};i.label=r.label,i.disabled=r.disabledFn(e,t,a),i.onClick=function(){r.onClick(e,t,a)},o.push(i)})),o=this.contextMenuOption.setMenu(o,e,t,a)),this.$contextmenu({items:o,event:e,zIndex:4200,minWidth:50}),e.preventDefault(),this.$nextTick((function(){document.documentElement.querySelector(".contextmenu_menu.menu").onmouseup=function(e){e.stopPropagation()}}))},handleDrop:function(e,t,a){if("inner"===a)this.$emit("moveFile",e.data,t.data);else{var r={};0!==t.parent.level&&(r=t.parent.data),this.$emit("moveFile",e.data,r)}},allowDrop:function(e,t,a){var r=this.$utils.getMaxFloor([e],"childNodes"),i=t.level;return!!this.setNoDrag(e,t,a)&&(!(r+i>this.depth)&&(1===t.level||e.parent.data.id===t.parent.data.id?"inner"===a:!!t.data[this.defaultProps.children]||"inner"!==a))},allowDrag:function(e){return!this.noDrag.includes(e.data[this.defaultProps.label])}}},o=l,s=(a("f121"),a("2877")),u=Object(s["a"])(o,r,i,!1,null,"aa29b778",null);t["a"]=u.exports},ffe0:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:"1"},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{staticClass:"title_label",on:{click:function(e){e.stopPropagation()}}},[a("span",[e._v("step2")])])]},proxy:!0}])},[e._v(" "),a("el-descriptions",{staticClass:"box",attrs:{column:2,"content-class-name":"des-content"}},e._l(e.menu["task_info"],(function(t,r){return a("el-descriptions-item",{key:r,attrs:{label:t.label}},[a("el-tooltip",{attrs:{"popper-class":"des-tooltip",effect:"dark",content:e.formatData(t)}},[a("span",[e._v(e._s(e.formatData(t)))])])],1)})),1),e._v(" "),e.menu["field_map"]?a("el-row",{staticClass:"depend-wrap"},[a("h4",{staticClass:"title"},[e._v("字段映射")]),e._v(" "),a("el-col",{attrs:{span:13}},[a("el-table",{staticClass:"table_left trans_table",staticStyle:{"font-size":"13px"},attrs:{data:e.info.source_columns,stripe:"","row-style":{height:"42px"},"cell-style":{height:"42px",padding:"0px"},"row-key":"name"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 序号 ")]},proxy:!0},{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}],null,!1,1059784874)}),e._v(" "),a("el-table-column",{attrs:{prop:e.menu["field_map"]["source_columns"]["name"],label:"源表字段",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row[e.menu["field_map"]["source_columns"]["name"]]||"-"))])]}}],null,!1,230247639)}),e._v(" "),a("el-table-column",{attrs:{prop:e.menu["field_map"]["source_columns"]["data_type"],label:"字段类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row[e.menu["field_map"]["source_columns"]["data_type"]]||"-"))])]}}],null,!1,544700551)}),e._v(" "),a("el-table-column",{attrs:{label:"字段描述","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row[e.menu["field_map"]["source_columns"]["comment"]]||"-"))])]}}],null,!1,2476015779)}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",align:"center","class-name":"table-func",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index<e.info.source_columns.length&&t.$index<e.info.target_columns.length?a("el-popover",{attrs:{trigger:"hover",disabled:!["Mysql2Hive","File2Lakehouse"].includes(e.info.templateCode)||!t.row.funcs||t.row.funcs.length<=0,placement:"bottom","popper-class":"tag-popper"}},[t.row.funcs&&t.row.funcs.length>0?a("div",[a("span",{staticClass:"func-span"},[e._v("函数名")]),e._v(" "),a("span",{staticClass:"func-span"},[e._v("参数")]),e._v(" "),e._l(t.row.funcs,(function(t,r){return a("div",{key:r},[a("span",{staticClass:"func-span"},[e._v(e._s(t.funcName))]),e._v(" "),a("span",{staticClass:"func-span"},[e._v(e._s(t.funcParams.join(",")))])])}))],2):e._e(),e._v(" "),a("template",{slot:"reference"},[a("func-icon",{attrs:{showicon:["Mysql2Hive","File2Lakehouse"].includes(e.info.templateCode)}}),e._v(" "),["Mysql2Hive","File2Lakehouse"].includes(e.info.templateCode)?[t.row.funcs&&t.row.funcs.length>0?a("div",{staticClass:"func-num"},[e._v(e._s(t.row.funcs.length))]):e._e(),e._v(" "),"success"===t.row.state?a("span",{staticClass:"state state-success"},[e._v("成功")]):"fail"===t.row.state?a("span",{staticClass:"state state-fail"},[e._v("失败")]):e._e()]:e._e()],2)],2):e._e()]}}],null,!1,1471156202)})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-table",{staticClass:"table_right trans_table",staticStyle:{"font-size":"13px"},attrs:{data:e.info.target_columns,"row-key":"name",stripe:"","row-style":{height:"42px"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 序号 ")]},proxy:!0},{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}],null,!1,1059784874)}),e._v(" "),a("el-table-column",{attrs:{prop:e.menu["field_map"]["target_columns"]["name"],label:"目标表字段",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row[e.menu["field_map"]["target_columns"]["name"]]||"-"))])]}}],null,!1,194320283)}),e._v(" "),a("el-table-column",{attrs:{prop:e.menu["field_map"]["target_columns"]["data_type"],label:"字段类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row[e.menu["field_map"]["target_columns"]["data_type"]]||"-"))])]}}],null,!1,1820893515)}),e._v(" "),e.menu["field_map"]["target_columns"]["security_level"]?a("el-table-column",{attrs:{prop:e.menu["field_map"]["target_columns"]["security_level"],label:"安全级别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row[e.menu["field_map"]["target_columns"]["security_level"]]||"-"))])]}}],null,!1,3221142051)}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"字段描述","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row[e.menu["field_map"]["target_columns"]["comment"]]||"-"))])]}}],null,!1,1050637167)})],1)],1)],1):e._e(),e._v(" "),e.menu["mysql2hive_field_map"]?a("el-row",{staticClass:"depend-wrap"},[a("h4",{staticClass:"title"},[e._v("字段映射")]),e._v(" "),"single"===e.info.table_type?a("div",[a("ipt-c-table",{attrs:{"input-columns":e.info["source_columns"],columns:e.info["target_columns"],disabled:!0}})],1):a("div",[a("el-row",[a("el-table",{ref:"moreInputColumns",attrs:{height:"300px",data:e.info["moreTableList"],stripe:"","cell-style":{height:"42px",padding:"0px"}}},[a("el-table-column",{attrs:{type:"expand",width:"30"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{staticClass:"more-table"},[a("ipt-c-table",{key:e.$index,attrs:{"input-columns":e.row.inputColumns,columns:e.row.columns,disabled:!0}})],1)]}}],null,!1,505681852)}),e._v(" "),a("el-table-column",{attrs:{label:"库名",align:"center"}},[[a("el-tooltip",{attrs:{content:e.info.sourceDb,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(e.info.sourceDb||"-"))])])]],2),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"表名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.name,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.name||"-"))])])]}}],null,!1,807828829)}),e._v(" "),a("el-table-column",{attrs:{label:"映射&转换",align:"center","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"库名","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.lakeHouseDbName,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.lakeHouseDbName||"-"))])])]}}],null,!1,3004486973)}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"表名","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.name,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.preMoreTableName||"-"))])])]}}],null,!1,2413848689)})],1)],1)],1)]):e._e(),e._v(" "),e.menu["cloumns"]?a("div",{staticClass:"depend-wrap"},[a("div",{staticClass:"table-title"},[a("h4",{staticClass:"title"},[e._v("字段信息")])]),e._v(" "),a("el-table",{staticClass:"table_right",staticStyle:{"font-size":"13px"},attrs:{data:e.info.columns,"row-key":"name",stripe:"","row-style":{height:"42px"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 序号 ")]},proxy:!0},{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}],null,!1,1059784874)}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"字段名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}],null,!1,2020036417)}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"字段类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.type))])]}}],null,!1,1406222782)}),e._v(" "),a("el-table-column",{attrs:{label:"字段描述","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.comment))])]}}],null,!1,3513446261)})],1)],1):e._e(),e._v(" "),e.content?a("div",{staticClass:"depend-wrap sql_edit"},[a("div",{staticClass:"table-title"},[a("h4",{staticClass:"title"},[e._v("加工逻辑")])]),e._v(" "),a("monaco-editor",{key:"work_code",ref:"monaco",attrs:{"read-only":!0,language:"text","custom-theme":e.customTheme,"line-numbers":"off","render-line-highlight":"none"}})],1):e._e()],1),e._v(" "),a("el-collapse-item",{attrs:{name:"2"},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{staticClass:"title_label",on:{click:function(e){e.stopPropagation()}}},[a("span",[e._v("step3")])])]},proxy:!0}])},[e._v(" "),a("el-descriptions",{staticClass:"box",attrs:{column:2}},e._l(e.menu["config_info"],(function(t,r){return a("el-descriptions-item",{key:r,attrs:{label:t.label}},[e._v(e._s(e.formatData(t)))])})),1),e._v(" "),e.info.dependTypes.includes("event")?a("div",{staticClass:"depend-wrap"},[a("div",{staticClass:"table-title"},[a("span",{staticClass:"title"},[e._v("内部依赖设置")])]),e._v(" "),a("el-table",{staticClass:"table",staticStyle:{"font-size":"13px"},attrs:{data:e.info.eventDepends,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务ID",prop:"taskId",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务名称",prop:"dependId","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.dependId,disabled:e.isTipDisabled}},[a("span",{staticClass:"ellipsis block",on:{mouseenter:e.isShowTooltip}},[e._v(e._s(t.row.dependId||"-"))])])]}}],null,!1,1083719517)}),e._v(" "),a("el-table-column",{attrs:{label:"任务周期",prop:"granularity","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatGranularty(t.row.granularity)))]}}],null,!1,2724126934)}),e._v(" "),a("el-table-column",{attrs:{label:"产出数据集",prop:"metadataId","min-width":"200",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"偏移量",prop:"unitOffset","min-width":"130",align:"center","header-align":"center"}})],1)],1):e._e(),e._v(" "),e.info.dependTypes.includes("dataset")?a("div",{staticClass:"depend-wrap"},[a("div",{staticClass:"table-title"},[a("span",{staticClass:"title"},[e._v("外部依赖设置")])]),e._v(" "),a("el-table",{staticClass:"table",staticStyle:{"font-size":"13px"},attrs:{data:e.info.inputDataset,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),e._v(" "),e.isJar?[a("el-table-column",{attrs:{label:"数据集","min-width":"180",align:"center",prop:"metadata.table"}})]:[e.isShowDb?a("el-table-column",{attrs:{label:"数据库","min-width":"150",align:"center",prop:"metadata.db"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"表名称","min-width":"180",align:"center",prop:"metadata.table"}})],e._v(" "),e.isShowDispatch?e._e():[a("el-table-column",{attrs:{label:"数据类型","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(1===t.row.isExternal?"外部数据":"内部数据")+"\n              ")]}}],null,!1,319088192)}),e._v(" "),a("el-table-column",{attrs:{label:"数据周期","min-width":"120",align:"center",prop:"granularity"}}),e._v(" "),a("el-table-column",{attrs:{label:"偏移量","min-width":"165",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.useDateCalcuParam?a("div",e._l(t.row.dateCalculationParam,(function(t,r){return a("span",{key:r},[e._v(" "+e._s(e.dataMap[r])+": "+e._s("offset"===t.type?"偏移"+t.unitOffset:"指定"+t.range.join(","))+"; ")])})),0):a("span",{staticClass:"i-block"},[e._v(e._s(t.row.unitOffset))])]}}],null,!1,3978947629)})],e._v(" "),e.isShowInputCheck?a("el-table-column",{attrs:{label:"数据依赖","min-width":"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"td-border ellipsis"},[e._v(e._s(t.row.check_path))])]}}],null,!1,469104359)}):e._e()],2)],1):e._e(),e._v(" "),e.menu["flag"]&&e.info.outputDataset["0"].check?a("div",{staticClass:"depend-wrap"},[a("div",{staticClass:"table-title"},[a("h4",{staticClass:"title"},[e._v("生成标志")])]),e._v(" "),a("el-descriptions",{attrs:{column:2}},e._l(e.menu["flag"].slice(1),(function(t,r){return a("el-descriptions-item",{key:r,attrs:{label:t.label}},[e._v(e._s(e.formatData(t)))])})),1)],1):e._e(),e._v(" "),e.info.isDataSet2?a("div",{staticClass:"depend-wrap"},[a("div",{staticClass:"table-title"},[a("h4",{staticClass:"title"},[e._v("生成数据集信息")])]),e._v(" "),a("el-table",{staticClass:"table",staticStyle:{"font-size":"13px"},attrs:{data:e.info.outputDataset,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),e._v(" "),e.isJar?[a("el-table-column",{attrs:{label:"生成数据集","min-width":"200",align:"center",prop:"id"}})]:[e.isShowSource?a("el-table-column",{attrs:{label:"数据源","min-width":"120",align:"center",prop:"metadata.source"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"库名称","min-width":"120",align:"center",prop:"metadata.db"}}),e._v(" "),a("el-table-column",{attrs:{label:"表名称","min-width":"200",align:"center",prop:"metadata.table"}})]],2)],1):e._e(),e._v(" "),e.isAlertTemplate?a("div",{staticClass:"depend-wrap"},[a("div",{staticClass:"table-title"},[a("h4",{staticClass:"title"},[e._v("告警策略")])]),e._v(" "),a("el-descriptions",{attrs:{column:2}},[a("el-descriptions-item",{attrs:{label:"告警类型"}},[e._v(e._s(e.formatData({key:"alert"})))])],1)],1):e._e()],1)],1)],1)},i=[],n={DataMigration:{task_info:{file:[{key:"isTable",label:"同步类型"},{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"sourcePath",label:"源路径"},{key:"filtersFile",label:"过滤该目录下的文件"},{key:"targetRegion",aliasKey:"targetRegion",label:"目标数据区域"},{key:"targetPath",label:"目标路径"},{key:"deleteMode",label:"删除目标文件"}],table:[{key:"isTable",label:"同步类型"},{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"sourceDb",label:"源数据库名称"},{key:"sourceTable",label:"源表名称"},{key:"partitions",label:"分区信息"},{key:"targetRegion",aliasKey:"targetRegion",label:"目标数据区域"},{key:"targetDb",label:"目标数据库名称"},{key:"targetTable",label:"目标表名称"}]},config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},Db2Hive:{},Hive2Clickhouse:{task_info:[{key:"runtimeConfig.sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"inputDataset.0.metadata.db",label:"源数据库名称"},{key:"inputDataset.0.metadata.table",label:"源表名称"},{key:"partitions",label:"分区信息"},{key:"targetSource",aliasKey:"targetSource",label:"ClickHouse数据源"},{key:"targetDB",label:"ClickHouse数据库"},{key:"targetTable",label:"ClickHouse表名称"}],field_map:{source_columns:{name:"name",data_type:"data_type",comment:"columnComment"},target_columns:{name:"name",data_type:"data_type",comment:"columnComment"}},config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},Hive2Hive:{task_info:[{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"}],config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},Hive2Mysql:{task_info:[{key:"runtimeConfig.sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"inputDataset.0.metadata.db",label:"源数据库名称"},{key:"inputDataset.0.metadata.table",label:"源表名称"},{key:"partitions",label:"分区信息"},{key:"targetSource",aliasKey:"targetSource",label:"Mysql数据源"},{key:"targetDB",label:"Mysql数据库"},{key:"targetTable",label:"Mysql表名称"}],field_map:{source_columns:{name:"name",data_type:"data_type",comment:"columnComment"},target_columns:{name:"name",data_type:"data_type",comment:"comment"}},config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},Hive2Doris:{task_info:[{key:"runtimeConfig.sourceRegion",aliasKey:"sourceRegion",label:"源数据区域"},{key:"inputDataset.0.metadata.db",label:"源数据库名称"},{key:"inputDataset.0.metadata.table",label:"源表名称"},{key:"partitions",label:"分区信息"},{key:"targetSource",aliasKey:"targetSource",label:"Doris数据源"},{key:"targetDB",label:"Doris数据库"},{key:"targetTable",label:"Doris表名称"},{key:"executeMode",label:"运行模式"}],field_map:{source_columns:{name:"name",data_type:"data_type",comment:"columnComment"},target_columns:{name:"name",data_type:"data_type",comment:"comment"}},config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},Hive2Redis:{task_info:[{key:"inputDataset.0.metadata.region",aliasKey:"sourceRegion",label:"区域"},{key:"inputDataset.0.metadata.db",label:"源数据库名称"},{key:"inputDataset.0.metadata.table",label:"源表名称"},{key:"redisAddr",label:"Redis服务器"},{key:"redisPort",label:"端口号"},{key:"interval",label:"过期时间"}],config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},Hive2Redshift:{task_info:[{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"redshiftAddr",label:"Redshift服务器"},{key:"redshiftPort",label:"端口号"},{key:"redshiftUser",label:"User"},{key:"redshiftDatabase",label:"库名"}],flag:[{key:"outputDataset.0.check",label:"是否生成标志"},{key:"outputDataset.0.location",label:"标志路径"},{key:"outputDataset.0.fileName",label:"检查文件名"}],config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},Hive2Sharestore:{task_info:{ShareStore:[{key:"isSharestore",label:"输出数据类型"},{key:"isHive",label:"源数据类型"},{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"sourceDb",label:"源数据库名称"},{key:"s3ObsPath",label:"S3/Obs路径"},{key:"sourceTable",label:"源表名称"},{key:"partitions",label:"分区信息"},{key:"restEndpoint",label:"sharestore连接地址"},{key:"clusterLoad",label:"sharestore集群名称"},{key:"zkStr",label:"sharestore的zookeeper地址"},{key:"segmentLoad",label:"目标表名(segment)"}],TiKV:[{key:"isSharestore",label:"输出数据类型"},{key:"isHive",label:"源数据类型"},{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"sourceDb",label:"源数据库名称"},{key:"s3ObsPath",label:"S3/Obs路径"},{key:"sourceTable",label:"源表名称"},{key:"partitions",label:"分区信息"},{key:"pdaddr",label:"tikv连接地址"},{key:"segment",label:"目标表名"},{key:"kvType",label:"tikv类型"}]},config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},Metis2Hive:{task_info:[{key:"region",aliasKey:"sourceRegion",label:"区域"},{key:"inputDataset.0.metadata.region",aliasKey:"sourceRegion",label:"源数据区域"},{key:"runtimeConfig.sourceType",label:"源种类"},{key:"inputDataset.0.metadata.table",label:"源表名称"},{key:"runtimeConfig.topic",label:"topic"},{key:"runtimeConfig.bootstrapServerUri",label:"Kafka服务器地址"},{key:"createType",label:"显示元数据方式"},{key:"partitionKeys",label:"分区键"},{key:"outputDataset.0.metadata.region",aliasKey:"sourceRegion",label:"Iceberg区域"},{key:"outputDataset.0.metadata.db",label:"Iceberg数据库"},{key:"outputDataset.0.metadata.table",label:"Iceberg表名称"}],cloumns:{key:"columns",label:"字段信息"},config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"}]},Mysql2Hive:{task_info:{single:[{key:"table_type",label:"表类型选择"},{key:"syncType",label:"数据同步方式"},{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"connectionName",aliasKey:"targetSource",label:"MySQL数据源名称"},{key:"sourceDb",label:"MySQL库名"},{key:"sourceTable",label:"MySQL表名"},{key:"targetDb",label:"LakeHouse库名"},{key:"targetTable",label:"LakeHouse表名"},{key:"partitions",label:"分区标识"},{key:"filterStr",label:"过滤条件"},{key:"executeMode",label:"运行模式"}],more:[{key:"table_type",label:"表类型选择"},{key:"syncType",label:"数据同步方式"},{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"connectionName",aliasKey:"targetSource",label:"MySQL数据源名称"},{key:"sourceDb",label:"MySQL库名"},{key:"targetDb",label:"LakeHouse库名"},{key:"targetTablePart",label:"LakeHouse表名前缀(可选)"},{key:"partitions",label:"分区标识"},{key:"executeMode",label:"运行模式"}]},mysql2hive_field_map:{source_columns:{name:"name",data_type:"data_type",comment:"comment"},target_columns:{name:"columnName",data_type:"columnType",comment:"columnComment"},moreInputColumns:{tableName:"name",dbName:"dbName",columns:"columns"}},config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"},{key:"executeMode",label:"运行模式设置"}]},Mysql2Hudi:{task_info:[{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"connectionName",aliasKey:"targetSource",label:"源数据源名称"},{key:"sourceDb",label:"源数据库名称"},{key:"sourceTable",label:"源表名称"},{key:"partitions",label:"分区信息"},{key:"targetDb",label:"数据库名称"},{key:"targetTable",label:"目标表名称"},{key:"syncType",label:"数据同步方式"}],field_map:{source_columns:{name:"name",data_type:"data_type",comment:"comment"},target_columns:{name:"name",data_type:"data_type",comment:"comment"}},config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"}]},PythonShell:{task_info:[{key:"commandType",label:"脚本类型"},{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"image",label:"镜像地址"},{key:"displayDependJars",label:"依赖工件"},{key:"executeMode",label:"运行模式"}],config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},SPARKJAR:{task_info:[{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"displayDependJars.0.artifactId",aliasKey:"displayDependJarsJob",label:"文件"},{key:"displayDependJars.0.id",aliasKey:"displayDependJarsVersion",label:"版本"},{key:"jarUrl",label:"文件地址"},{key:"type",label:"文件类型"},{key:"mainClass",label:"Main Class"}],config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},Hive2File:{task_info:[{key:"runtimeConfig.sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"runtimeConfig.targetType",label:"目标类型"},{key:"runtimeConfig.subject",label:"主题"},{key:"runtimeConfig.text",label:"正文"},{key:"runtimeConfig.email",label:"邮箱"},{key:"runtimeConfig.format",label:"附件格式"}],config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"},{key:"alert",label:"报警类型"}]},TfJob:{task_info:[{key:"runtimeConfig.sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"runtimeConfig.codeAddr",label:"代码位置"},{key:"runtimeConfig.paramFile",label:"训练参数文件"},{key:"runtimeConfig.cpu",label:"CPU资源"},{key:"runtimeConfig.memory",label:"内存资源"},{key:"runtimeConfig.gpu",label:"GPU资源"}],config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"}]},StreamingJAR:{task_info:[{key:"region",aliasKey:"sourceRegion",label:"区域"},{key:"displayDependJars.0.artifactId",aliasKey:"displayDependJarsJob",label:"Jar文件"},{key:"displayDependJars.0.id",aliasKey:"displayDependJarsVersion",label:"Jar版本"},{key:"jarUrl",label:"Jar地址"},{key:"mainClass",label:"Main Class"},{key:"flinkClusterId",label:"Cluster"}],config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"}]},StreamingSQL:{task_info:[{key:"region",aliasKey:"sourceRegion",label:"区域"},{key:"inputDataset.0.completePath",aliasKey:"completePath",label:"输入数据集"},{key:"outputDataset.0.completePath",aliasKey:"completePath",label:"输出数据集"}],config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"}]},File2Lakehouse:{task_info:[{key:"sourceRegion",aliasKey:"sourceRegion",label:"区域"},{key:"sourceType",label:"数据源类型"},{key:"sourceParam.provider.path",label:"文件路径"},{key:"sourceParam.provider.fileType",label:"文件类型"},{key:"sourceParam.provider.fieldDelimiter",label:"字段分隔符"},{key:"targetDb",label:"LakeHouse库名"},{key:"targetTable",label:"LakeHouse表名"},{key:"partitions",label:"分区标识"},{key:"taskParam.tableComment",label:"表描述"},{key:"taskParam.tableLevel",label:"安全级别"},{key:"taskParam.location",label:"Location"}],field_map:{source_columns:{name:"name",data_type:"data_type",comment:"comment"},target_columns:{name:"columnName",data_type:"columnType",security_level:"securityLevel",comment:"columnComment"}},config_info:[{key:"name",label:"任务名称"},{key:"description",label:"任务描述"},{key:"triggerParam.isIrregularSheduler",label:"调度方式"},{key:"triggerParam.outputGranularity",label:"调度周期"},{key:"triggerParam.crontabParam.range",label:"指定时间"},{key:"triggerParam.crontabParam.startTime",label:"开始时间"},{key:"triggerParam.crontabParam.interval",label:"时间间隔"},{key:"triggerParam.crontabParam.endTime",label:"结束时间"},{key:"triggerParam.crontabParam.fixedTime",label:"定时调度时间"},{key:"triggerParam.crontab",label:"cron表达式"}]}},l=a("2f62"),o=a("b199"),s=a("b03b"),u=a("f4b1"),c=a("b893"),m=a("4fb9");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t=g(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e){var t=E(e,"string");return"symbol"===d(t)?t:String(t)}function E(e,t){if("object"!==d(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var b={components:{MonacoEditor:s["a"],FuncIcon:u["a"],IptCTable:m["a"]},props:{info:{type:Object,default:function(){return{}}},regionList:{type:Array,default:function(){return[]}},targetSourceList:{type:Array,default:function(){return[]}},connectionNameList:{type:Array,default:function(){return[]}},versionList:{type:Array,default:function(){return[]}},artifactList:{type:Array,default:function(){return[]}},clusterList:{type:Array,default:function(){return[]}},isChangeTable:{type:Boolean,default:!1},nameDisabled:{type:Boolean,default:!1},isShowDispatch:{type:Boolean,default:!0},isJar:{type:Boolean,default:!1},isShowInputBtn:{type:Boolean,default:!1},isShowOutputBtn:{type:Boolean,default:!1},isInputEdit:{type:Boolean,default:!1},isOutputEdit:{type:Boolean,default:!1},isShowDb:{type:Boolean,default:!0},isShowSource:{type:Boolean,default:!1},isShowOffset:{type:Boolean,default:!0},isShowInputCheck:{type:Boolean,default:!1},isShowOutputCheck:{type:Boolean,default:!1},region:{type:String,default:""},content:{type:String,default:""},isWorkflow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isShowDependRefresh:{type:Boolean,default:!1}},data:function(){return{isAlertTemplate:!1,isExecuteMode:!1,activeNames:["1","2"],cycleList:[{label:"分钟",value:"minutely"},{label:"小时",value:"hourly"},{label:"天",value:"daily"},{label:"周",value:"weekly"},{label:"月",value:"monthly"}],costList:[],isTipDisabled:!1,customTheme:{rules:[],colors:{"editor.background":"#f7f9ff"}}}},computed:f(f({},Object(l["c"])(["userInfo"])),{},{noDispatch:function(){var e,t=!1;return"Metis2Hive"===this.info.templateCode&&(t=!0),"StreamingSQL"===this.info.templateCode&&!1===(null==(e=this.info.runtimeConfig)?void 0:e.isBatchTask)&&(t=!0),"StreamingJAR"!==this.info.templateCode||this.info.isBatchTask||(t=!0),"Mysql2Hive"===this.info.templateCode&&2===this.info.syncType&&(t=!0),t},menu:function(){var e,t=this,a=Object.assign({},n[this.info.templateCode]);if("DataMigration"===this.info.templateCode&&(this.info.isTable?a["task_info"]=a["task_info"].table:a["task_info"]=a["task_info"].file),"Mysql2Hive"===this.info.templateCode&&("single"===this.info.table_type?a["task_info"]=a["task_info"].single:a["task_info"]=a["task_info"].more),"Hive2Sharestore"===this.info.templateCode){var r=this.info.isHive,i=["sourceTable","sourceDb"],l=["s3ObsPath"];this.info.isSharestore?a["task_info"]=a["task_info"].ShareStore.filter((function(e){return r?!l.includes(e.key):!i.includes(e.key)})):a["task_info"]=a["task_info"].TiKV.filter((function(e){return r?!l.includes(e.key):!i.includes(e.key)}))}if("Metis2Hive"===this.info.templateCode){"1"===this.info.createType&&delete a.cloumns;var o=["inputDataset.0.metadata.table"],s=["runtimeConfig.topic","runtimeConfig.bootstrapServerUri"];a["task_info"]=a["task_info"].filter((function(e){return"metis"===t.info.runtimeConfig.sourceType?!s.includes(e.key):!o.includes(e.key)}))}return"SPARKJAR"!==this.info.templateCode&&"StreamingJAR"!==this.info.templateCode||("ARTIFACT"===this.info.typeCode?a["task_info"]=a["task_info"].filter((function(e){return"jarUrl"!==e.key})):"ONLINE"===this.info.typeCode&&(a["task_info"]=a["task_info"].filter((function(e){return!["displayDependJars.0.id","displayDependJars.0.artifactId"].includes(e.key)}))),"SPARKJAR"===this.info.templateCode&&"python"===this.info.type&&(a["task_info"]=a["task_info"].filter((function(e){return"mainClass"!==e.key})))),2===this.info.triggerParam.isIrregularSheduler||this.noDispatch?e=["name","description"]:"cron"===this.info.triggerParam.type?("daily"===this.info.triggerParam.outputGranularity?e=["name","description","triggerParam.outputGranularity","triggerParam.isIrregularSheduler","triggerParam.crontabParam.fixedTime"]:"weekly"===this.info.triggerParam.outputGranularity||"monthly"===this.info.triggerParam.outputGranularity?e=["name","description","triggerParam.outputGranularity","triggerParam.isIrregularSheduler","triggerParam.crontabParam.fixedTime","triggerParam.crontabParam.range"]:"hourly"===this.info.triggerParam.outputGranularity?e=this.info.triggerParam.crontabParam.range&&this.info.triggerParam.crontabParam.range.length>0?["name","description","triggerParam.outputGranularity","triggerParam.isIrregularSheduler","triggerParam.crontabParam.range"]:e=["name","description","triggerParam.outputGranularity","triggerParam.isIrregularSheduler","triggerParam.crontabParam.startTime","triggerParam.crontabParam.interval","triggerParam.crontabParam.endTime"]:"minutely"===this.info.triggerParam.outputGranularity&&(e=["name","description","triggerParam.outputGranularity","triggerParam.isIrregularSheduler","triggerParam.crontabParam.startTime","triggerParam.crontabParam.interval","triggerParam.crontabParam.endTime"]),e.push("triggerParam.crontab")):e=["name","description","triggerParam.outputGranularity","triggerParam.isIrregularSheduler"],(["Hive2Hive","DataMigration","SPARKJAR","Hive2Clickhouse","Hive2Mysql","Hive2Redis","Hive2Redshift","Hive2Sharestore","PythonShell","Hive2File"].includes(this.info.templateCode)||"Mysql2Hive"===this.info.templateCode&&!this.info.isLakeHouseReal)&&e.push("alert"),a["config_info"]=a["config_info"].filter((function(t){return e.includes(t.key)})),a}}),created:function(){var e=this;(["Hive2Hive","DataMigration","SPARKJAR","Hive2Clickhouse","Hive2Mysql","Hive2Redis","Hive2Redshift","Hive2Sharestore","PythonShell","Hive2File"].includes(this.info.templateCode)||"Mysql2Hive"===this.info.templateCode&&!this.info.isLakeHouseReal)&&(this.isAlertTemplate=!0),["Mysql2Hive","PythonShell","Hive2Doris"].includes(this.info.templateCode)&&(this.isExecuteMode=!0),this.getCostList(),this.content&&this.$nextTick((function(){e.setCode(e.content)}))},methods:{isShowTooltip:function(e){var t=e.target.clientWidth,a=e.target.scrollWidth;this.isTipDisabled=!(a>t)},setCode:function(e){var t;null==(t=this.$refs.monaco)||t.setCode(e)},getCostList:function(){var e=this;Object(o["u"])(this.userInfo.id).then((function(t){e.costList=t.data||[]}))},formatLabel:function(e,t,a,r){var i;return(null==(i=this[r].find((function(a){return a[t]===e})))?void 0:i[a])||e},formatGranularty:function(e){var t=this.cycleList.find((function(t){return t.value===e}));return t?t.label:"-"},handelStep:function(e){this.$emit("jumpStep",e)},formatData:function(e){var t,a,r,i=this,n=e.key,l=e.label,o=e.aliasKey,s=n.split("."),u="";if(s.length>1){var m=s.reduce((function(e,t){return t+="",e[t]||{}}),c["b"](this.info));u=Object.keys(m).length?m:"","调度方式"===l&&(u=1===u?"固定周期":"手动调度")}else u=c["b"](this.info)[n];"sourceRegion"!==o&&"targetRegion"!==o||(u=(null==(t=this.regionList.find((function(e){return e.value===u})))?void 0:t.label)||"-");"targetSource"===o&&(u=(null==(a=this.targetSourceList.find((function(e){return e.actorId===u})))?void 0:a.name)||"-");("partitions"===n&&Array.isArray(u)&&(u=u.map((function(e){return e.name||e.value?(e.name?e.name:"-")+"="+(e.value?e.value:"-"):"-"})).join(" , ")),"DataMigration"===this.info.templateCode&&("isTable"===n&&(u=u?"表":"文件"),"deleteMode"===n&&(u=u?"是":"否")),"Hive2Redis"===this.info.templateCode&&"interval"===n&&(u=u+" "+this.info.timeCategory),"Mysql2Hive"===this.info.templateCode&&("syncType"===n&&(u=1===u?"全量":"一键实时"),"table_type"===n&&(u="single"===u?"单表":"整库/多表")),"Metis2Hive"===this.info.templateCode&&"createType"===n&&(u="0"===u?"可视化模式":"SQL模式"),"StreamingSQL"===this.info.templateCode&&"completePath"===o)&&(u=(null==(r=u[u.length-1])?void 0:r.name)||"-");if("Hive2Sharestore"===this.info.templateCode&&("isSharestore"===n&&(u=u?"ShareStore":"TiKV"),"isHive"===n&&(u=u?"hive表":"S3/Obs文件")),"SPARKJAR"===this.info.templateCode||"StreamingJAR"===this.info.templateCode){var d,p,f,h,g;if("displayDependJarsJob"===o)u=null==(d=this.artifactList.find((function(e){return e.id===u})))?void 0:d.name;if("displayDependJarsVersion"===o)u=null==(p=this.versionList)||null==(f=p.find((function(e){return e.id===u})))?void 0:f.displayVersion;if("flinkClusterId"===n)u=null==(h=this.clusterList)||null==(g=h.find((function(e){return e.id===u})))?void 0:g.name}return"PythonShell"===this.info.templateCode&&"displayDependJars"===n&&(u.forEach((function(e,t){var a,r,n;e["工件"]=null==(a=i.artifactList.find((function(t){return t.id===e.artifactId})))?void 0:a.name,e["版本"]=null==(r=i.versionList[t])||null==(n=r.find((function(t){return t.id===e.id})))?void 0:n.displayVersion,delete e.id,delete e.artifactId})),u.some((function(e){return Object.values(e).some((function(e){return e}))}))||(u="-")),"alert"===n&&(u="",this.info.regularAlert.isChecked&&(u+="定时告警;"),this.info.alertModel.success.isChecked&&(u+="任务成功时;"),this.info.alertModel.failure.isChecked&&(u+="任务失败时;"),this.info.alertModel.retry.isChecked&&(u+="任务重试时;"),this.info.alertModel.start.isChecked&&(u+="任务开始时;")),"executeMode"===n&&(u="local"===this.info.executeMode?"本地模式":"分布式模式"),u||"-"},handleChange:function(e){this.activeNames=e}}},v=b,y=(a("cecc"),a("2877")),T=Object(y["a"])(v,r,i,!1,null,"3d58001e",null);t["a"]=T.exports}}]);