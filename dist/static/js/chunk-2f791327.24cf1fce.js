(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-2f791327"],{1562:function(e,t,a){"use strict";a("60b3")},"60b3":function(e,t,a){},a211:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"l",(function(){return f})),a.d(t,"j",(function(){return h})),a.d(t,"i",(function(){return g})),a.d(t,"k",(function(){return b}));var r=a("7258"),n="/sla-service/metric",i="/sla-service/template";function s(e){return r["b"].post("".concat(n,"/add"),e)}function l(e){return r["b"].post("".concat(n,"/update"),e)}function c(e){return r["b"].get("".concat(n,"/info"),{params:e})}function o(e){return r["b"].get("".concat(n,"/report"),{params:e})}function u(e){return r["b"].get("".concat(n,"/active"),{params:e})}function p(e){return r["b"].get("".concat(n,"/delete"),{params:e})}function d(e){return r["b"].get("".concat(n,"/pages"),{params:e})}function m(e){return r["b"].post("".concat(i,"/addItem"),e)}function f(e){return r["b"].post("".concat(i,"/updateItem"),e)}function h(e){return r["b"].get("".concat(i,"/info"),{params:e})}function g(e){return r["b"].get("".concat(i,"/delete"),{params:e})}function b(e){return r["b"].get("".concat(i,"/pages"),{params:e})}},c29a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card-container"},[a("el-page-header",{attrs:{content:"配置规则模板"},on:{back:e.goBack}}),e._v(" "),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticClass:"form",attrs:{model:e.params,rules:e.rules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{prop:"name",label:"模板名称"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"支持中英文字符，长度不超过30个字符",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"ruleType",label:"模板规则"}},[a("el-radio-group",{model:{value:e.params.ruleType,callback:function(t){e.$set(e.params,"ruleType",t)},expression:"params.ruleType"}},[e._l(e.ruleTypeList,(function(t,r){return[a("el-radio",{key:r,attrs:{label:t.value}},[e._v(e._s(t.name))])]}))],2)],1),e._v(" "),e._l(e.params.fieldList,(function(t,r){return[a("el-form-item",{key:r,attrs:{label:0===r?"参数定义":""}},[a("el-input",{staticStyle:{width:"55%"},attrs:{placeholder:"请输入参数名",clearable:"",disabled:""},model:{value:t.filedName,callback:function(a){e.$set(t,"filedName",a)},expression:"item.filedName"}}),e._v(" "),a("el-select",{staticStyle:{width:"24.5%"},attrs:{clearable:!0,placeholder:"请选择参数类型"},model:{value:t.fieldType,callback:function(a){e.$set(t,"fieldType",a)},expression:"item.fieldType"}},[e._l(e.fieldTypeList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e,value:e}})]}))],2)],1)]})),e._v(" "),a("el-form-item",{attrs:{prop:"sqlStatement",label:"Sql表达式"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",placeholder:"请输入Sql表达式",clearable:""},model:{value:e.params.sqlStatement,callback:function(t){e.$set(e.params,"sqlStatement",t)},expression:"params.sqlStatement"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"sqlCondition",label:"过滤条件"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",placeholder:"请输入过滤条件",clearable:""},model:{value:e.params.sqlCondition,callback:function(t){e.$set(e.params,"sqlCondition",t)},expression:"params.sqlCondition"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"checkType",label:"校验类型"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择校验类型",clearable:""},model:{value:e.params.checkType,callback:function(t){e.$set(e.params,"checkType",t)},expression:"params.checkType"}},[e._l(e.checkTypeList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.value}})]}))],2)],1),e._v(" "),a("el-form-item",{attrs:{prop:"checkAction",label:"校验方式"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{clearable:"",placeholder:"请选择校验方式"},model:{value:e.params.checkAction,callback:function(t){e.$set(e.params,"checkAction",t)},expression:"params.checkAction"}},[e._l(e.checkActionList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.value}})]}))],2)],1),e._v(" "),a("el-form-item",{attrs:{prop:"description",label:"描述"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",placeholder:"请输入描述",clearable:""},model:{value:e.params.description,callback:function(t){e.$set(e.params,"description",t)},expression:"params.description"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.goBack}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{loading:e.saveLoading,disabled:e.saveLoading,type:"primary"},on:{click:e.handleSave}},[e._v("确定")])],1)],2)],1)},n=[],i=a("a211"),s={nam:"DqcRuleModelConfig",data:function(){return{id:this.$route.query.id,loading:!1,saveLoading:!1,params:{checkAction:"",checkType:"NUMBER",description:"",fieldList:[{filedName:"field",fieldType:""}],name:"",ruleType:"",sqlCondition:"",sqlStatement:""},ruleTypeList:this.$t("dqc.ruleTypeList"),fieldTypeList:this.$t("dqc.fieldTypeList"),checkTypeList:this.$t("dqc.checkTypeList"),rules:{name:[{required:!0,message:"请输入模板名称",trigger:["blur","change"]}],ruleType:[{required:!0,message:"请选择模板规则",trigger:["blur","change"]}],sqlStatement:[{required:!0,message:"请输入Sql表达式",trigger:["blur","change"]}],checkType:[{required:!0,message:"请选择校验类型",trigger:["blur","change"]}],checkAction:[{required:!0,message:"请选择校验方式",trigger:["blur","change"]}],description:[{required:!0,message:"请输入描述",trigger:["blur","change"]}]}}},computed:{checkActionList:function(){var e=this.$t("dqc.checkActionList");return e[this.params.checkType]}},watch:{"params.ruleType":function(e){if("TABLE"===e)this.params.fieldList=[];else{var t=this.params.fieldList.filter((function(e){return e.fieldType.length}));t.length||(this.params.fieldList=[{filedName:"field",fieldType:""}])}},"params.checkType":function(e){}},created:function(){this.id&&this.templateInfo()},methods:{templateInfo:function(){var e=this;this.loading=!0,Object(i["j"])({id:this.id}).then((function(t){if(e.loading=!1,0===t.resultCode){var a=t.data;e.params=Object.assign({},e.params,a)}else e.$message({type:"error",message:t.msg||"服务端错误"})}))},goBack:function(){this.$router.push({name:"DqcRuleList"})},handleSave:function(){var e=this,t=Object.assign({},this.params);this.$refs["form"].validate((function(a){a&&(e.saveLoading=!0,e.id?Object(i["l"])(t).then((function(t){e.saveLoading=!1,0===t.resultCode?(e.$message({type:"success",message:"配置模板成功"}),e.goBack()):e.$message({type:"error",message:t.msg||"服务端错误"})})):Object(i["h"])(t).then((function(t){e.saveLoading=!1,0===t.resultCode?(e.$message({type:"success",message:"配置模板成功"}),e.goBack()):e.$message({type:"error",message:t.msg||"服务端错误"})})))}))}}},l=s,c=(a("1562"),a("2877")),o=Object(c["a"])(l,r,n,!1,null,"5bf420bf",null);t["default"]=o.exports}}]);