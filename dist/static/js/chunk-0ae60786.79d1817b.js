(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-0ae60786"],{"0bbd":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}],staticClass:"box-card-container"},[a("el-page-header",{staticClass:"header",attrs:{content:"配置DQC"},on:{back:e.goBack}}),e._v(" "),a("el-form",{ref:"form",staticClass:"form-content",attrs:{model:e.params,rules:e.rules,"label-width":"120px"}},[a("el-tabs",{staticClass:"box-tab",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"规则配置"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入监控名称，60个字符",clearable:"",maxlength:"60","show-word-limit":""},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"project",label:"选择业务"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择业务",clearable:""},model:{value:e.params.project,callback:function(t){e.$set(e.params,"project",t)},expression:"params.project"}},[e._l(e.projectList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e,value:e}})]}))],2)],1),e._v(" "),a("el-form-item",{attrs:{prop:"sourceType",label:"数据源类型"}},[a("el-radio-group",{model:{value:e.params.sourceType,callback:function(t){e.$set(e.params,"sourceType",t)},expression:"params.sourceType"}},[e._l(e.dataSourceList,(function(t,r){return[a("el-radio",{key:r,attrs:{label:t.value}},[e._v(e._s(t.name))])]}))],2)],1),e._v(" "),"hive"===e.params.sourceType?a("el-form-item",{attrs:{label:"关联SLA"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.slaList,"value-key":"name",placeholder:"输入关联SLA，支持输入词模糊搜索，只能添加一个","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelectSla,change:e.handleClearSla},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.params.slaName,callback:function(t){e.$set(e.params,"slaName","string"===typeof t?t.trim():t)},expression:"params.slaName"}})],1):e._e(),e._v(" "),"clickhouse"===e.params.sourceType?a("el-form-item",{attrs:{label:"选择数据集",rules:{required:!0}}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"dataRegion"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择区域",clearable:"",filterable:"","allow-create":""},on:{change:e.changeDataSource},model:{value:e.params.dataRegion,callback:function(t){e.$set(e.params,"dataRegion",t)},expression:"params.dataRegion"}},e._l(e.dataRegionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"dataSource"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据源名称",clearable:"",filterable:"","allow-create":"",disabled:!e.params.dataRegion},on:{change:e.changeDataRegion,clear:e.handleClearRegion},model:{value:e.params.dataSource,callback:function(t){e.$set(e.params,"dataSource",t)},expression:"params.dataSource"}},e._l(e.dataSourceNameList,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.actorId}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"dataSet"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据库",clearable:"",filterable:"","allow-create":"",disabled:!e.params.dataSource},on:{change:e.changeDataSet},model:{value:e.params.dataSet,callback:function(t){e.$set(e.params,"dataSet",t)},expression:"params.dataSet"}},e._l(e.dataSetList,(function(e){return a("el-option",{key:e.name,attrs:{value:e.name,label:e.name}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"dataTable"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据表",clearable:"",filterable:"","allow-create":"",disabled:!e.params.dataSet},model:{value:e.params.dataTable,callback:function(t){e.$set(e.params,"dataTable",t)},expression:"params.dataTable"}},e._l(e.tableList,(function(e){return a("el-option",{key:e.name,attrs:{value:e.name,label:e.name}})})),1)],1)],1)],1)],1):e._e(),e._v(" "),"hive"===e.params.sourceType?a("el-form-item",{attrs:{label:"选择数据集",rules:{required:!0}}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"dataRegion"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择区域",clearable:"",filterable:"","allow-create":""},on:{change:e.changeDataRegion,clear:e.handleClearRegion},model:{value:e.params.dataRegion,callback:function(t){e.$set(e.params,"dataRegion",t)},expression:"params.dataRegion"}},e._l(e.dataRegionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"dataSet"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据库",clearable:"",filterable:"","allow-create":"",disabled:e.searchSlaStatus||!e.params.dataRegion},on:{change:e.changeDataSet},model:{value:e.params.dataSet,callback:function(t){e.$set(e.params,"dataSet",t)},expression:"params.dataSet"}},e._l(e.dataSetList,(function(e){return a("el-option",{key:e.name,attrs:{value:e.name,label:e.name}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"dataTable"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据表",clearable:"",filterable:"","allow-create":"",disabled:e.searchSlaStatus||!e.params.dataSet},model:{value:e.params.dataTable,callback:function(t){e.$set(e.params,"dataTable",t)},expression:"params.dataTable"}},e._l(e.tableList,(function(e){return a("el-option",{key:e.name,attrs:{value:e.name,label:e.name}})})),1)],1)],1)],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"监控周期",prop:"checkInterval"}},[a("el-radio-group",{model:{value:e.params.checkInterval,callback:function(t){e.$set(e.params,"checkInterval",t)},expression:"params.checkInterval"}},[a("el-radio",{attrs:{label:0}},[e._v("天")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("小时")])],1),e._v(" "),a("div",{staticClass:"tips"},[e._v("提示：目前仅支持天级别、小时级别周期的数据集。")])],1),e._v(" "),a("el-form-item",{attrs:{label:"基线时间",prop:"checkTime"}},[0===e.params.checkInterval?[a("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:23},model:{value:e.params.checkHourTime,callback:function(t){e.$set(e.params,"checkHourTime",t)},expression:"params.checkHourTime"}}),e._v(" 时 ")]:e._e(),e._v(" "),a("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:60},model:{value:e.params.checkMinuteTime,callback:function(t){e.$set(e.params,"checkMinuteTime",t)},expression:"params.checkMinuteTime"}}),e._v(" 分\n          "),a("div",{staticClass:"tips"},[e._v("提示：监控开始的时间。")])],2)],1)],1),e._v(" "),a("div",{staticClass:"rule-module"},[a("div",{staticClass:"add-rules",on:{click:e.handleAddRule}},[a("i",{staticClass:"el-icon-circle-plus"})]),e._v(" "),a("el-tabs",{staticClass:"rules-tab box-tab",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"设置条件"}},[e._l(e.params.rules.ruleList,(function(t,r){return[a("el-card",{key:"rules_"+r,staticClass:"rule-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s("条件"+(r+1)))]),e._v(" "),0!==r?a("div",{staticClass:"minus-rules",on:{click:function(t){return e.handleMinusRule(r)}}},[a("i",{staticClass:"el-icon-remove"})]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"规则模板",rules:{required:!0}}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"rules.ruleList."+r+".ruleType",rules:{required:!0,message:"请选择规则类型",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"请选择规则类型",clearable:""},on:{change:function(t){return e.handleChangeRuleType(t,r)}},model:{value:t.ruleType,callback:function(a){e.$set(t,"ruleType",a)},expression:"item.ruleType"}},[e._l(e.ruleTypeList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.value}})]}))],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"rules.ruleList."+r+".ruleFrom",rules:{required:!0,message:"请选择模板",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"请选择规则来源",disabled:"",clearable:""},model:{value:t.ruleFrom,callback:function(a){e.$set(t,"ruleFrom",a)},expression:"item.ruleFrom"}},[e._l(e.ruleFromList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.value}})]}))],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:15}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"rules.ruleList."+r+".templateId",rules:{required:!0,message:"请选择模板",trigger:"change"}}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请选择规则类型后请求模板列表",placement:"top-start"}},[a("el-select",{attrs:{placeholder:"请选择模板",clearable:""},on:{change:function(t){return e.handleChangeTemplate(t,r)}},model:{value:t.templateId,callback:function(a){e.$set(t,"templateId",a)},expression:"item.templateId"}},[e._l(t.templateList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.id}})]}))],2)],1),e._v(" "),a("span",[e._v("没找到模板？"),a("a",{attrs:{href:"javascript:;"},on:{click:e.handleCreate}},[e._v("去新建")])])],1)],1)],1)],1),e._v(" "),e._l(t.fieldList,(function(t,n){return[a("el-form-item",{key:n,attrs:{label:"参数定义",rules:{required:!0}}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"}},[a("el-input",{attrs:{disabled:"",placeholder:"请输入参数名",clearable:""},model:{value:t.templateField,callback:function(a){e.$set(t,"templateField",a)},expression:"subItem.templateField"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"rules.ruleList."+r+".fieldList."+n+".tableField",rules:{required:!0,message:"请选择参数",trigger:"change"}}},[a("el-select",{attrs:{clearable:!0,filterable:"","allow-create":"",placeholder:"请选择参数"},model:{value:t.tableField,callback:function(a){e.$set(t,"tableField",a)},expression:"subItem.tableField"}},[e._l(e.tableFieldList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.name}})]}))],2)],1)],1)],1)],1)]})),e._v(" "),t.templateId?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.ruleLoading,expression:"item.ruleLoading"}]},[a("el-form-item",{attrs:{label:"Sql表达式",prop:"rules.ruleList."+r+".sqlStatement",rules:{required:!0,message:"请输入Sql表达式",trigger:"change"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入Sql表达式",clearable:""},model:{value:t.sqlStatement,callback:function(a){e.$set(t,"sqlStatement",a)},expression:"item.sqlStatement"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"过滤条件"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入过滤条件",clearable:""},model:{value:t.sqlCondition,callback:function(a){e.$set(t,"sqlCondition",a)},expression:"item.sqlCondition"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"校验类型",prop:"rules.ruleList."+r+".checkType",rules:{required:!0,message:"请选择校验类型",trigger:"change"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择校验类型",clearable:""},on:{change:function(t){return e.handleCheckType(t,r)}},model:{value:t.checkType,callback:function(a){e.$set(t,"checkType",a)},expression:"item.checkType"}},[e._l(e.checkTypeList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.value}})]}))],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"校验方式",prop:"rules.ruleList."+r+".checkAction",rules:{required:!0,message:"请选择校验方式",trigger:"change"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择校验方式",disabled:!t.checkType},model:{value:t.checkAction,callback:function(a){e.$set(t,"checkAction",a)},expression:"item.checkAction"}},[e._l(t.checkActionList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.value}})]}))],2)],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"比较方式",prop:"rules.ruleList."+r+".checkOperator",rules:{required:!0,message:"请选择比较方式",trigger:"change"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择比较方式",disabled:!t.checkType},model:{value:t.checkOperator,callback:function(a){e.$set(t,"checkOperator",a)},expression:"item.checkOperator"}},[e._l(t.checkOperatorList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.value}})]}))],2)],1),e._v(" "),"NUMBER"===t.checkType?a("el-form-item",{attrs:{label:"阈值",prop:"rules.ruleList."+r+".checkValue.fixedValue",rules:{required:!0,message:"请选择阈值",trigger:"change"}}},[a("el-input",{model:{value:t.checkValue.fixedValue,callback:function(a){e.$set(t.checkValue,"fixedValue",a)},expression:"item.checkValue.fixedValue"}})],1):e._e(),e._v(" "),"RATIO"===t.checkType?a("el-form-item",{attrs:{label:"波动值比较",prop:"rules.ruleList."+r+".slideValue",rules:{required:!0,message:"请滑动波动值比较",trigger:"change"}}},[a("el-slider",{attrs:{range:"","show-tooltip":!0,marks:e.marks},on:{change:function(t){return e.handleSlideValue(t,r)}},model:{value:t.slideValue,callback:function(a){e.$set(t,"slideValue",a)},expression:"item.slideValue"}})],1):e._e(),e._v(" "),"RATIO"===t.checkType?a("el-form-item"):e._e(),e._v(" "),"RATIO"===t.checkType?a("el-form-item",{attrs:{label:"橙色阈值"}},[a("el-input",{staticStyle:{width:"25%"},attrs:{disabled:""},model:{value:t.checkValue.min,callback:function(a){e.$set(t.checkValue,"min",a)},expression:"item.checkValue.min"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),a("el-input",{staticStyle:{width:"25%"},attrs:{disabled:""},model:{value:t.checkValue.max,callback:function(a){e.$set(t.checkValue,"max",a)},expression:"item.checkValue.max"}},[a("template",{slot:"append"},[e._v("%")])],2)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"强弱规则",prop:"rules.ruleList."+r+".ruleMandatory"}},[a("el-radio-group",{model:{value:t.ruleMandatory,callback:function(a){e.$set(t,"ruleMandatory",a)},expression:"item.ruleMandatory"}},[e._l(e.ruleMandatoryList,(function(t,r){return[a("el-radio",{key:r,attrs:{label:t.value}},[e._v(e._s(t.name))])]}))],2)],1)],2),e._v(" "),r<e.params.rules.ruleList.length-1?a("el-form-item",{key:"operator_"+r},[a("el-select",{staticStyle:{width:"70px",position:"relative",left:"-170px"},model:{value:t.operators,callback:function(a){e.$set(t,"operators",a)},expression:"item.operators"}},[e._l(e.ruleOperatorsList,(function(e,t){return[a("el-option",{key:t,attrs:{label:e.name,value:e.value}})]}))],2)],1):e._e()]})),e._v(" "),a("el-form-item",{attrs:{prop:"description",label:"描述"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入描述",clearable:""},model:{value:e.params.description,callback:function(t){e.$set(e.params,"description",t)},expression:"params.description"}})],1)],2)],1)],1),e._v(" "),a("el-tabs",{staticClass:"box-tab",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"告警配置"}},[a("el-form-item",{attrs:{label:"钉钉群token",prop:"alertGroupIds"}},[a("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入钉钉群token"},model:{value:e.params.alertGroupIds,callback:function(t){e.$set(e.params,"alertGroupIds",t)},expression:"params.alertGroupIds"}}),e._v(" "),a("a",{staticClass:"link",attrs:{href:"https://shimo.im/docs/rp3OVQDlyKu99bAm",target:"blank"}},[e._v("怎么获取token？")]),e._v(" "),a("div",{staticClass:"tips"},[e._v("示例：b597305058dcf7f566e05b63f350bb82cbe079ee54d2ec09f3a61631587b3b4c")])],1),e._v(" "),a("el-form-item",{attrs:{label:"此群需要@"}},[a("el-select",{attrs:{placeholder:"请输入用户ID",clearable:"",filterable:"",remote:"","remote-method":e.remoteMethod,loading:e.ownerLoading,"popper-class":"custom-popper"},on:{change:e.handleChangeOwner},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}},e._l(e.ownerList,(function(t){return a("el-option",{key:t.shareId,attrs:{value:t.mobile,label:t.name}},[a("div",{staticStyle:{"max-width":"420px","word-break":"break-all"}},[e._v("("+e._s(t.name)+")-"+e._s(t.mobile)+e._s(t.deptFullPath?"-"+t.deptFullPath:""))])])})),1)],1)],1)],1),e._v(" "),a("el-tabs",{staticClass:"box-tab",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"任务关联"}},[a("el-form-item",{attrs:{label:"添加关联任务",prop:"taskName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,"value-key":"name",placeholder:"输入关联任务，支持下拉联想，模糊搜索","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect,change:e.handleClear},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.params.taskName,callback:function(t){e.$set(e.params,"taskName","string"===typeof t?t.trim():t)},expression:"params.taskName"}}),e._v(" "),e.taskTable.length?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.taskLoading,expression:"taskLoading"}],staticStyle:{"margin-top":"20px"},attrs:{data:e.taskTable,"highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{label:"任务ID",align:"center",prop:"id",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务名称",align:"center",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"责任人",align:"center",prop:"createBy"}})],1):e._e()],1)],1)],1),e._v(" "),a("el-tabs",{staticClass:"box-tab",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"启停状态"}},[a("el-form-item",{attrs:{label:"启停状态",prop:"active"}},[a("el-radio-group",{model:{value:e.params.active,callback:function(t){e.$set(e.params,"active",t)},expression:"params.active"}},[e._l(e.activeList,(function(t,r){return[a("el-radio",{key:r,attrs:{label:t.value}},[e._v(e._s(t.name))])]}))],2)],1)],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{on:{click:e.goBack}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.btnDisabled,disabled:e.btnDisabled},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},n=[],s=a("b199"),i=a("61fe"),l=a("a211"),o=a("b893"),c={name:"DqcConfigInfo",data:function(){return{ownerLoading:!1,taskLoading:!1,detailLoading:!1,ruleLoading:!1,id:this.$route.query.id,ruleId:this.$route.query.ruleId,mobile:"",guid:"",rules:{name:[{required:!0,message:"请输入监控名称",trigger:["blur","change"]}],project:[{required:!0,message:"请选择业务",trigger:["blur","change"]}],sourceType:[{required:!0,message:"请选择数据源类型",trigger:["blur","change"]}],dataRegion:[{required:!0,message:"请选择区域",trigger:"change"}],dataSource:[{required:!0,message:"请选择数据源名称",trigger:"change"}],dataSet:[{required:!0,message:"请选择数据库",trigger:"change"}],dataTable:[{required:!0,message:"请选择数据表",trigger:"change"}],checkInterval:[{required:!0,message:"请选择监控周期",trigger:"change"}],checkTime:[{required:!0,message:"请选择基线时间",trigger:"change"}],description:[{required:!0,message:"请输入描述",trigger:"change"}],alertGroupIds:[{required:!0,message:"请输入钉钉群token",trigger:["blur","change"]}]},searchSlaStatus:!1,projectList:this.$t("dqc.projectList"),dataSourceList:this.$t("dqc.dataSourceList"),ruleTypeList:this.$t("dqc.ruleTypeList"),ruleFromList:this.$t("dqc.ruleFromList"),checkTypeList:this.$t("dqc.checkTypeList"),checkActionLists:this.$t("dqc.checkActionList"),checkOperatorLists:this.$t("dqc.checkOperatorList"),ruleMandatoryList:this.$t("dqc.ruleMandatoryList"),activeList:this.$t("dqc.activeList"),ruleOperatorsList:this.$t("dqc.ruleOperatorsList"),slaLists:[],templateList:[],tableFieldList:[],taskTable:[],marks:{0:"0%",100:{style:{fontSize:"12px",width:"150px",textAlign:"center"},label:this.$createElement("span","100%")}},dataRegionList:[],dataSourceNameList:[],dataSetList:[],tableList:[],ownerList:[],btnDisabled:!1,params:{name:"",project:"",sourceType:"clickhouse",slaName:null,slaId:null,taskId:null,taskName:null,active:1,alertGroupIds:"",alertLevel:1,checkHourTime:null,checkInterval:0,checkMinuteTime:null,checkTime:"",dataSource:"",dataRegion:"",dataSet:"",dataTable:"",dataGuid:"",owner:"",ownerName:"",rules:{ruleOperators:[],ruleList:[{ruleType:"",templateId:null,ruleFrom:"PLATFORM",checkType:"",checkOperator:"",checkAction:"",ruleMandatory:"WEAK",sqlStatement:"",sqlCondition:"",operators:"AND",ruleLoading:!1,fieldList:[{templateField:"",tableField:""}],checkValue:{fixedValue:"",min:"",max:""},slideValue:[0,100],checkActionList:[],checkOperatorList:[],templateList:[]}]}},ruleItem:{ruleType:"",templateId:null,ruleFrom:"PLATFORM",checkType:"",checkOperator:"",checkAction:"",ruleMandatory:"WEAK",sqlStatement:"",sqlCondition:"",operators:"AND",ruleLoading:!1,fieldList:[{templateField:"",tableField:""}],checkValue:{fixedValue:"",min:"",max:""},slideValue:[0,100],checkActionList:[],checkOperatorList:[],templateList:[]}}},watch:{"params.sourceType":function(e){this.id||(this.params.dataRegion="",this.params.dataSource="",this.params.dataSet="",this.params.dataTable="")},"params.dataTable":function(e){e&&(this.searchSlaStatus||this.getDataSetColumns())},"params.checkInterval":function(e){this.params.checkTime="",1===e&&(this.params.checkHourTime=null,this.params.checkMinuteTime=null)},"params.checkHourTime":function(e){var t=null;t=void 0===e?0:e,this.params.checkTime="".concat(parseInt(t)<10?"0"+t:t,":").concat(this.params.checkMinuteTime?this.params.checkMinuteTime<10?"0"+this.params.checkMinuteTime:this.params.checkMinuteTime:"00")},"params.checkMinuteTime":function(e){var t=null;t=void 0===e?0:e,this.params.checkTime="".concat(this.params.checkHourTime?this.params.checkHourTime<10?"0"+this.params.checkHourTime:this.params.checkHourTime:"00",":").concat(parseInt(t)<10?"0"+t:t)}},created:function(){var e=this;o["l"].then((function(t){e.dataRegionList=t})),this.ruleId&&this.templateInfo(),this.id&&this.metricInfo()},methods:{templateInfo:function(){var e=this;this.params.rules.ruleList[0].ruleLoading=!0,Object(l["j"])({id:this.ruleId}).then((function(t){if(e.params.rules.ruleList[0].ruleLoading=!1,0===t.resultCode){var a=t.data,r=Object.assign({},e.params.rules.ruleList[0],a);r.checkActionList=e.checkActionLists[r.checkType],r.checkOperatorList=e.checkOperatorLists[r.checkType],"FIELD"===r.ruleType&&(r.fieldList[0].templateField=r.ruleType),r.templateId=r.id,r.id=null,r.checkValue.min&&r.checkValue.max&&(r.slideValue=[r.checkValue.min,r.checkValue.max]),Object(l["k"])({id:null,ruleType:r.ruleType,pageNo:1,pageSize:1e8}).then((function(t){if(0===t.resultCode){var a=t.data;r.templateList=a.list,e.$set(e.params.rules.ruleList,[0],r)}else e.$message({type:"error",message:t.msg||"服务端错误"})}))}else e.$message({type:"error",message:t.msg||"服务端错误"})}))},metricInfo:function(){var e=this;this.detailLoading=!0,Object(l["d"])({id:this.id}).then((function(t){if(e.detailLoading=!1,0===t.resultCode){var a=t.data,r=a.checkTime.split(":"),n=r[0],s=r[1];a.slaName=null,a.sourceType=a.sourceType.toLowerCase(),a.rules.ruleList.forEach((function(t,r){t.checkActionList=e.checkActionLists[t.checkType],t.checkOperatorList=e.checkOperatorLists[t.checkType],"number"===typeof t.checkValue.min&&"number"===typeof t.checkValue.max&&(t.slideValue=[t.checkValue.min,t.checkValue.max]),r<a.rules.ruleList.length-1&&(t.operators=e.ruleOperatorsList.find((function(e){return e.value===a.rules.ruleOperators[r]}))["value"])})),a.slaId&&e.getSlaInfo(a.slaId),e.params=Object.assign({},e.params,a),e.params.checkHourTime=parseInt(n),e.params.checkMinuteTime=parseInt(s),e.mobile=a.ownerName,e.params.taskId&&e.getTaskInfo(e.params.taskId);var i=[];e.params.rules.ruleList.forEach((function(e,t){var a=Object(l["k"])({id:e.templateId,ruleType:e.ruleType,pageNo:1,pageSize:1e8});i.push(a)})),Promise.all(i).then((function(t){t.forEach((function(a,r){if(0===a.resultCode){var n=a.data.list;e.$set(e.params.rules.ruleList[r],"templateList",n)}else e.$message({type:"error",message:t.msg||"服务器错误"})}))}))}else e.$message({type:"error",message:t.msg||"服务端错误"})}))},getSlaInfo:function(e){var t=this;Object(i["i"])({id:e}).then((function(e){if(0===e.resultCode){var a=e.data;t.params.slaName=a.name,t.params.dataGuid=a.dataGuid}else t.$message({type:"error",message:e.msg||"服务端错误"})}))},templatePages:function(){var e=this;Object(l["k"])({pageNo:1,pageSize:1e8}).then((function(t){if(0===t.resultCode){var a=t.data;e.templateList=a.list}else e.$message({type:"error",message:t.msg||"服务端错误"})}))},getDataSetColumns:function(){var e=this,t={region:this.params.dataRegion,type:this.params.sourceType,db:this.params.dataSet,table:this.params.dataTable,metaFlag:"AIRBYTE"};"clickhouse"===this.params.sourceType&&(t.actorId=this.params.dataSource),Object(s["y"])(t).then((function(t){var a=t.data;e.tableFieldList=a.columns}))},slaList:function(e,t){var a=this;Object(i["j"])({name:e}).then((function(e){if(0===e.resultCode){var r=e.data||[];t(r)}else a.$message({type:"error",message:e.msg||"服务端错误"})}))},handleSelectSla:function(e){this.params.dataRegion=e.dataRegion,this.params.dataSet=e.dataSet,this.params.dataTable=e.dataTable,this.params.slaId=e.id,this.params.dataRegion||this.params.dataSet||this.params.dataTable?this.searchSlaStatus=!0:this.searchSlaStatus=!1,this.getDataSetColumns();var t=e.checkTime.split(":");this.params.checkHourTime=t[0],this.params.checkMinuteTime=t[1]},handleClearSla:function(){this.searchSlaStatus=!1,this.params.dataRegion="",this.params.dataSet="",this.params.dataTable=""},querySearch:function(e,t){var a=this;Object(s["db"])(e).then((function(e){var r=e.data,n=[];r?(n=r,a.slaLists=n):n=[],t(n)}))},getTaskInfo:function(e){var t=this;this.taskLoading=!0,Object(s["Q"])({id:e}).then((function(e){t.taskLoading=!1;e.data;var a=[];a.push(e),t.taskTable=a}))},handleSelect:function(e){this.getTaskInfo(e.id),this.params.taskId=e.id},handleClear:function(){this.taskTable=[]},goBack:function(){this.ruleId?this.$router.push({name:"DqcRuleList"}):this.$router.push({name:"DqcList"})},handleCheckType:function(e,t){this.params.rules.ruleList[t].checkActionList=this.checkActionLists[e],this.params.rules.ruleList[t].checkAction="",this.params.rules.ruleList[t].checkOperator="",this.params.rules.ruleList[t].checkOperatorList=this.checkOperatorLists[e]},handleAddRule:function(){if(this.params.rules.ruleList.length>2)this.$message({type:"warning",message:"最多添加3个条件"});else{var e=JSON.parse(JSON.stringify(this.ruleItem));this.params.rules.ruleList.push(e)}},handleMinusRule:function(e){this.params.rules.ruleList.splice(e,1)},handleSlideValue:function(e,t){this.params.rules.ruleList[t].checkValue.min=e[0],this.params.rules.ruleList[t].checkValue.max=e[1]},changeDataSource:function(e){var t=this;this.dataSourceNameList=[],e&&Object(s["y"])({region:this.params.dataRegion,type:this.params.sourceType,metaFlag:"AIRBYTE"}).then((function(e){e.data&&(t.dataSourceNameList=e.data.data)}))},changeDataRegion:function(e){var t=this;if(this.dataSetList=[],"clickhouse"===this.params.sourceType){if(e){var a=this.dataSourceNameList.find((function(t){return t.actorId===e}));a&&(this.dataSetList=[{name:a.db}],this.params.dataSet=a.db),Object(s["y"])({region:this.params.dataRegion,type:this.params.sourceType,actorId:e,db:this.params.dataSet,metaFlag:"AIRBYTE"}).then((function(e){e.data&&(t.tableList=e.data.data)}))}}else e&&(this.searchSlaStatus=!1,Object(s["y"])({region:e,type:this.params.sourceType,metaFlag:"AIRBYTE"}).then((function(e){e.data&&(t.dataSetList=e.data.data)})))},changeDataSet:function(e){var t=this;this.tableList=[],"clickhouse"===this.params.sourceType||e&&Object(s["y"])({region:this.params.dataRegion,type:this.params.sourceType,db:e,metaFlag:"AIRBYTE"}).then((function(e){e.data&&(t.tableList=e.data.data)}))},handleClearRegion:function(){this.params.sourceType,this.params.dataSet="",this.params.dataTable=""},handleChangeRuleType:function(e,t){var a=this,r=e.toLowerCase();this.params.rules.ruleList[t].fieldList.forEach((function(e){e.templateField=r})),this.params.rules.ruleList[t].templateId=null,Object(l["k"])({id:null,ruleType:e,pageNo:1,pageSize:1e8}).then((function(e){if(0===e.resultCode){var r=e.data;a.params.rules.ruleList[t].templateList=r.list}else a.$message({type:"error",message:e.msg||"服务端错误"})}))},handleChangeTemplate:function(e,t){var a=this;this.params.rules.ruleList[t].ruleLoading=!0,Object(l["j"])({id:e}).then((function(e){if(a.params.rules.ruleList[t].ruleLoading=!1,0===e.resultCode){var r=e.data,n=Object.assign({},a.params.rules.ruleList[t],r);"FIELD"===n.ruleType&&(n.fieldList[0].templateField=n.ruleType),n.templateId=n.id,n.checkOperatorList=a.checkOperatorLists[n.checkType],n.checkActionList=a.checkActionLists[n.checkType],n.id=null,a.$set(a.params.rules.ruleList,[t],n)}else a.$message({type:"error",message:e.msg||"服务端错误"})}))},handleCreate:function(){this.$router.push({name:"DqcRuleModelConfig"})},remoteMethod:function(e,t){var a=this;""!==e?(this.ownerLoading=!0,Object(s["Y"])(e).then((function(e){a.ownerLoading=!1;var r=e.data;if(a.ownerList=r,t){var n=a.ownerList.find((function(e){return e.shareId===t}));a.params.ownerPhone=n?n.Mobile:""}}))):this.ownerList=[]},handleChangeOwner:function(e){this.params.owner=e,this.params.ownerName=this.ownerList.find((function(t){return t.mobile===e}))["name"]},save:function(){var e=this,t=JSON.parse(JSON.stringify(this.params));t.rules.ruleOperators=[],t.rules.ruleList.forEach((function(e,a){a!==t.rules.ruleList.length-1&&t.rules.ruleOperators.push(e.operators)})),t.sourceType=t.sourceType.toUpperCase(),this.$refs.form.validate((function(a){a&&(e.btnDisabled=!0,e.id?Object(l["g"])(t).then((function(t){0===t.resultCode?(e.$message({type:"success",message:"编辑监控配置成功"}),e.$router.push({name:"DqcList"})):e.$message({type:"error",message:t.msg||"服务端错误"})})).finally((function(){e.btnDisabled=!1})):Object(l["b"])(t).then((function(t){0===t.resultCode?(e.$message({type:"success",message:"新增监控成功"}),e.$router.push({name:"DqcList"})):e.$message({type:"error",message:t.msg||"服务端错误"})})).finally((function(){e.btnDisabled=!1})))}))}}},u=c,p=(a("f665"),a("2877")),d=Object(p["a"])(u,r,n,!1,null,"72fedad9",null);t["default"]=d.exports},"61fe":function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"g",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"e",(function(){return p})),a.d(t,"k",(function(){return d})),a.d(t,"j",(function(){return m})),a.d(t,"i",(function(){return f})),a.d(t,"b",(function(){return h})),a.d(t,"l",(function(){return g}));var r=a("7258"),n="/sla-service/sla";function s(e){return r["b"].get("".concat(n,"/getSummary"),{params:e})}function i(e){return r["b"].get("".concat(n,"/activeItem"),{params:e})}function l(e){return r["b"].post("".concat(n,"/failedButUnrecovered"),e)}function o(e){return r["b"].get("".concat(n,"/dataOverview"),{params:e})}function c(e){return r["b"].get("".concat(n,"/logList"),{params:e})}function u(e){return r["b"].get("".concat(n,"/monitorStatistic"),{params:e})}function p(e){return r["b"].get("".concat(n,"/failedMonitorTop"),{params:e})}function d(e){return r["b"].get("".concat(n,"/pages"),{params:e})}function m(e){return r["b"].get("".concat(n,"/list"),{params:e})}function f(e){return r["b"].get("".concat(n,"/info"),{params:e})}function h(e){return r["b"].post("".concat(n,"/addItem"),e)}function g(e){return r["b"].post("".concat(n,"/updateItem"),e)}},"7ea2":function(e,t,a){"use strict";a.d(t,"m",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"t",(function(){return l})),a.d(t,"l",(function(){return o})),a.d(t,"g",(function(){return c})),a.d(t,"o",(function(){return u})),a.d(t,"p",(function(){return p})),a.d(t,"q",(function(){return d})),a.d(t,"r",(function(){return m})),a.d(t,"s",(function(){return f})),a.d(t,"n",(function(){return h})),a.d(t,"b",(function(){return g})),a.d(t,"f",(function(){return b})),a.d(t,"c",(function(){return k})),a.d(t,"d",(function(){return v})),a.d(t,"e",(function(){return y})),a.d(t,"i",(function(){return L})),a.d(t,"k",(function(){return S})),a.d(t,"j",(function(){return _})),a.d(t,"h",(function(){return T}));var r=a("7258"),n="/ds_task/flinkcluster";function s(e){return r["b"].get("".concat(n,"/page?"),{params:e})}function i(e){return r["b"].post("".concat(n,"/add"),e)}function l(e){return r["b"].put("".concat(n,"/update"),e)}function o(e){return r["b"].get("".concat(n,"/get?id=").concat(e))}function c(e){return r["b"].delete("".concat(n,"/delete"),{params:{id:e}})}function u(e){return r["b"].post("/cluster-service/cloud/resource/add",e,{timeout:6e5})}function p(e){return r["b"].delete("/cluster-service/cloud/resource/delete/".concat(e))}function d(e){return r["b"].get("/cluster-service/cloud/resource/getOne",{params:e})}function m(e){return r["b"].get("/cluster-service/cloud/resource/search",{params:e})}function f(e){return r["b"].post("/cluster-service/cloud/resource/update",e,{timeout:6e5})}function h(e){return r["b"].get("/cluster-service/cloud/resource/getRegion",{params:e})}function g(e){return r["b"].post("/cluster-service/cloud/data/add",e,{timeout:6e5})}function b(e){return r["b"].post("/cluster-service/cloud/data/update",e,{timeout:6e5})}function k(e){return r["b"].delete("/cluster-service/cloud/data/delete",{params:e})}function v(e){return r["b"].get("/cluster-service/cloud/data/getOne",{params:e})}function y(e){return r["b"].get("/cluster-service/cloud/data/search",{params:e})}function L(e){return r["b"].get("/cluster-service/cluster/service/roles",{params:e})}function S(e){return r["b"].get("/cluster-service/cluster/vpcs",{params:e})}function _(e){return r["b"].get("/cluster-service/cluster/subnets",{params:e})}function T(e){return r["b"].get("/cluster-service/cluster/security/groups",{params:e})}},a211:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"l",(function(){return f})),a.d(t,"j",(function(){return h})),a.d(t,"i",(function(){return g})),a.d(t,"k",(function(){return b}));var r=a("7258"),n="/sla-service/metric",s="/sla-service/template";function i(e){return r["b"].post("".concat(n,"/add"),e)}function l(e){return r["b"].post("".concat(n,"/update"),e)}function o(e){return r["b"].get("".concat(n,"/info"),{params:e})}function c(e){return r["b"].get("".concat(n,"/report"),{params:e})}function u(e){return r["b"].get("".concat(n,"/active"),{params:e})}function p(e){return r["b"].get("".concat(n,"/delete"),{params:e})}function d(e){return r["b"].get("".concat(n,"/pages"),{params:e})}function m(e){return r["b"].post("".concat(s,"/addItem"),e)}function f(e){return r["b"].post("".concat(s,"/updateItem"),e)}function h(e){return r["b"].get("".concat(s,"/info"),{params:e})}function g(e){return r["b"].get("".concat(s,"/delete"),{params:e})}function b(e){return r["b"].get("".concat(s,"/pages"),{params:e})}},b199:function(e,t,a){"use strict";a.d(t,"y",(function(){return s})),a.d(t,"W",(function(){return i})),a.d(t,"E",(function(){return l})),a.d(t,"p",(function(){return o})),a.d(t,"ab",(function(){return c})),a.d(t,"s",(function(){return u})),a.d(t,"r",(function(){return p})),a.d(t,"t",(function(){return d})),a.d(t,"Q",(function(){return m})),a.d(t,"T",(function(){return f})),a.d(t,"A",(function(){return h})),a.d(t,"O",(function(){return g})),a.d(t,"B",(function(){return b})),a.d(t,"q",(function(){return k})),a.d(t,"e",(function(){return v})),a.d(t,"g",(function(){return y})),a.d(t,"d",(function(){return L})),a.d(t,"ib",(function(){return S})),a.d(t,"n",(function(){return _})),a.d(t,"Y",(function(){return T})),a.d(t,"I",(function(){return w})),a.d(t,"H",(function(){return I})),a.d(t,"c",(function(){return C})),a.d(t,"hb",(function(){return x})),a.d(t,"m",(function(){return E})),a.d(t,"j",(function(){return F})),a.d(t,"f",(function(){return O})),a.d(t,"bb",(function(){return A})),a.d(t,"J",(function(){return N})),a.d(t,"F",(function(){return D})),a.d(t,"h",(function(){return R})),a.d(t,"db",(function(){return q})),a.d(t,"z",(function(){return $})),a.d(t,"R",(function(){return j})),a.d(t,"u",(function(){return H})),a.d(t,"D",(function(){return M})),a.d(t,"P",(function(){return G})),a.d(t,"w",(function(){return V})),a.d(t,"Z",(function(){return P})),a.d(t,"C",(function(){return B})),a.d(t,"eb",(function(){return J})),a.d(t,"a",(function(){return Q})),a.d(t,"fb",(function(){return U})),a.d(t,"cb",(function(){return K})),a.d(t,"G",(function(){return Y})),a.d(t,"U",(function(){return z})),a.d(t,"i",(function(){return W})),a.d(t,"k",(function(){return Z})),a.d(t,"K",(function(){return X})),a.d(t,"L",(function(){return ee})),a.d(t,"N",(function(){return te})),a.d(t,"M",(function(){return ae})),a.d(t,"b",(function(){return re})),a.d(t,"l",(function(){return ne})),a.d(t,"o",(function(){return se})),a.d(t,"S",(function(){return ie})),a.d(t,"gb",(function(){return le})),a.d(t,"X",(function(){return oe})),a.d(t,"v",(function(){return ce})),a.d(t,"V",(function(){return ue}));var r=a("7258"),n="/ds_task/task";function s(e){return r["b"].post("/ds_task/metadata/search",e,{timeout:12e4})}function i(){return r["b"].get("/ds_task/sysdict/getTemplateList")}function l(e){return r["b"].get("/ds_task/dict/list",{params:e})}function o(e){return r["b"].get("/ds_task/artifact/list",{params:e})}function c(e){return r["b"].get("/ds_task/artifactversion/list",{params:e})}function u(e){return r["b"].get("/ds_task/flinkcluster/list",{params:e})}function p(e){return r["b"].get("/ds_task/flinkcluster/auto",{params:e})}function d(e){return r["b"].get("/ds_task/flinkcluster/noauto",{params:e})}function m(e){return r["b"].get("".concat(n,"/get"),{params:e})}function f(e){return r["b"].get("".concat(n,"/page"),{params:e,timeout:6e4})}function h(e){return r["b"].post("/ds_task/metadata/getddl",e)}function g(e){return r["b"].get("".concat(n,"/getInsertSql"),{params:e,timeout:6e5})}function b(e){return r["b"].post("/ds_task/metadata/getdispalyddl",e)}function k(e){return r["b"].get("".concat(n,"/getChildDependencies"),{params:{id:e}})}function v(e){return r["b"].get("".concat(n,"/backfill"),{params:e})}function y(e){return r["b"].put("".concat(n,"/onlineAndOffline"),null,{params:e})}function L(e){return r["b"].post("".concat(n,"/add"),e)}function S(e){return r["b"].put("".concat(n,"/update"),e)}function _(e){return r["b"].delete("".concat(n,"/new/delete"),{params:e})}function T(e){return r["b"].get("/ds_task/user/list",{params:{name:e}})}function w(e){return r["b"].get("/ds_task/label/list",{params:{name:e}})}function I(e){return r["b"].get("/ds_task/label/get",{params:{id:e}})}function C(e){return r["b"].post("/ds_task/label/add",e)}function x(e){return r["b"].put("/ds_task/label/update",e)}function E(e){return r["b"].delete("/ds_task/label/delete",{params:{id:e}})}function F(e){return r["b"].patch("/ds_task/collect/add",null,{params:e})}function O(e){return r["b"].get("/ds_task/collect/cancel",{params:e})}function A(e){return r["b"].get("/ds_task/collect/my",{params:e})}function N(e){return r["b"].get("/ds_task/task/listforlabel",{params:{name:e}})}function D(e){return r["b"].get("/ds_task/task/iam",{params:e})}function R(e){return r["b"].post("/ds_task/task/check",e,{timeout:18e4})}function q(e){return r["b"].get("/ds_task/task/name/search",{params:{name:e}})}function $(e){return r["b"].get("/ds_task/task/backfillDateDetail",{params:e})}function j(e){return r["b"].get("/ds_task/task/last7",{params:e})}function H(e){return r["b"].get("/ds_task/user/getEffectiveCostList",{params:{name:e}})}function M(e){return r["b"].get("/ds_task/task/getGitSqlFile",{params:e})}function G(e){return r["b"].post("/ds_task/task/sqlTbls",e,{headers:{"Content-Type":"multipart/form-data"}})}function V(e){return r["b"].post("/ds_task/task/getCrontab",e)}function P(e){return r["b"].get("/ds_task/taskversion/pages",{params:e})}function B(){return r["b"].get("/ds_task/auditlog/type?module=task")}function J(e){return r["b"].get("/ds_task/taskversion/verionSwitch",{params:e})}function Q(e){return r["b"].post("/ds_task/task/addAndStart",e)}function U(e){return r["b"].post("/ds_task/task/updateAndStart",e)}function K(e){return r["b"].post("/ds_task/task/date/preview",e)}function Y(e){return r["b"].post("/ds_task/task/mergeSmallFiles/jars",e)}function z(e){return r["b"].post("/ds_task/task/getTasks",e)}function W(e){return r["b"].post("/ds_task/task/checkPath",e,{headers:{"Content-Type":"multipart/form-data"}})}function Z(e){return r["b"].post("/ds_task/task/fastBackfill?taskId="+e.taskId,e)}function X(e){return r["b"].get("/ds_task/task/renderContent",{params:e})}function ee(e){return r["b"].post("/ds_task/metadata/preview",e)}function te(e){return r["b"].get("/ds_task/actor/sources/page",{params:e})}function ae(e){return r["b"].get("/ds_task/taskfolder/listFolder",{params:e})}function re(e){return r["b"].post("/ds_task/taskfolder/saveFolder",e)}function ne(e){return r["b"].get("/ds_task/taskfolder/deleteFolder",{params:e})}function se(e){return r["b"].post("/ds_task/taskfolder/editFolder",e)}function ie(e){return r["b"].get("/ds_task/taskfolder/listTask",{params:e})}function le(e){return r["b"].post("/ds_task/taskfolder/updateTask",e)}function oe(e){return r["b"].get("/ds_task/wechatAlert/listById?id=".concat(e))}function ce(e){return r["b"].post("/pipeline/cron/get",e)}function ue(e){return r["b"].get("/ds_task/task/templateRendering",{params:e})}},b893:function(e,t,a){"use strict";a.d(t,"n",(function(){return c})),a.d(t,"c",(function(){return p})),a.d(t,"j",(function(){return d})),a.d(t,"m",(function(){return m})),a.d(t,"o",(function(){return f})),a.d(t,"a",(function(){return h})),a.d(t,"i",(function(){return g})),a.d(t,"k",(function(){return b})),a.d(t,"l",(function(){return y})),a.d(t,"h",(function(){return L})),a.d(t,"e",(function(){return S})),a.d(t,"d",(function(){return _})),a.d(t,"b",(function(){return T})),a.d(t,"g",(function(){return w})),a.d(t,"f",(function(){return I}));var r=a("7ea2"),n=a("4360");function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},o=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function p(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,a){return e[t]=a}}function d(e,t,a,r){var s=t&&t.prototype instanceof v?t:v,i=Object.create(s.prototype),l=new A(r||[]);return n(i,"_invoke",{value:x(e,a,l)}),i}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",h="suspendedYield",g="executing",b="completed",k={};function v(){}function y(){}function L(){}var S={};p(S,o,(function(){return this}));var _=Object.getPrototypeOf,T=_&&_(_(N([])));T&&T!==a&&r.call(T,o)&&(S=T);var w=L.prototype=v.prototype=Object.create(S);function I(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function a(n,s,l,o){var c=m(e[n],e,s);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==i(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,l,o)}),(function(e){a("throw",e,l,o)})):t.resolve(p).then((function(e){u.value=e,l(u)}),(function(e){return a("throw",e,l,o)}))}o(c.arg)}var s;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return s=s?s.then(n,n):n()}})}function x(t,a,r){var n=f;return function(s,i){if(n===g)throw new Error("Generator is already running");if(n===b){if("throw"===s)throw i;return{value:e,done:!0}}for(r.method=s,r.arg=i;;){var l=r.delegate;if(l){var o=E(l,r);if(o){if(o===k)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=g;var c=m(t,a,r);if("normal"===c.type){if(n=r.done?b:h,c.arg===k)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=b,r.method="throw",r.arg=c.arg)}}}function E(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,E(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),k;var s=m(n,t.iterator,a.arg);if("throw"===s.type)return a.method="throw",a.arg=s.arg,a.delegate=null,k;var i=s.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,k):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,k)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function N(t){if(t||""===t){var a=t[o];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return s.next=s}}throw new TypeError(i(t)+" is not iterable")}return y.prototype=L,n(w,"constructor",{value:L,configurable:!0}),n(L,"constructor",{value:y,configurable:!0}),y.displayName=p(L,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,L):(e.__proto__=L,p(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},I(C.prototype),p(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,a,r,n,s){void 0===s&&(s=Promise);var i=new C(d(e,a,r,n),s);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(w),p(w,u,"Generator"),p(w,o,(function(){return this})),p(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return l.type="throw",l.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],l=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(o&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,k):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),k},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),k}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;O(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:N(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),k}},t}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t,a,r,n,s,i){try{var l=e[s](i),o=l.value}catch(c){return void a(c)}l.done?t(o):Promise.resolve(o).then(r,n)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function i(e){l(s,r,n,i,o,"next",e)}function o(e){l(s,r,n,i,o,"throw",e)}i(void 0)}))}}var c={StreamingSQL:"step2FlinkSQL",StreamingJAR:"step2FlinkJar",Metis2Hive:"step2Metis",MysqlCDC2Hive:"step2CDC",Mysql2Lakehouse:"step2Hive",Mysql2Hive:"step2Hive",File2Lakehouse:"step2File",Mysql2Hudi:"step2Hudi",Hive2Hive:"step2HiveSQL",DataMigration:"step2HCCloud",SPARKJAR:"step2SparkJar",Hive2Sharestore:"step2ShareStore",Hive2Clickhouse:"step2ClickHouse",Hive2Mysql:"step2MySql",Hive2Doris:"step2Doris",PythonShell:"step2Shell",Db2Hive:"step2DB",Hive2Redis:"step2Redis",Hive2Redshift:"step2Redshift",MergeSmallFiles:"step2FileMerge",Hive2File:"step2Hive2File",TfJob:"step2TrainingModel"},u=n["a"].getters["isCloud"],p=[{title:"数据接入 Data Ingestion",list:[{label:"DB -> Lakehouse",templateCode:"step2Hive",path:"step2Hive",content:"该模板适用于拉取各类关系型DataBase数据到Lakehouse湖仓，提供离线全量和实时增量同步方案。"},{label:"File -> Lakehouse",templateCode:"File2Lakehouse",path:"step2File",content:"该模板适用于将对象存储(如AWS S3、OBS、KS3等)或分布式文件存储(如HDFS等)中存储的各种格式(如csv、json、paruet、orc等)的文件数据同步到Lakehouse湖仓中。"},{label:"Kafka -> Lakehouse",templateCode:"Metis2Hive",path:"step2Metis",content:"Kafka2Lakehouse统一模板，对接Kafka/Metis，透传至Lakehouse表。",isGray:!0}]},{title:"湖仓处理 Data Transformation",list:[{label:"Lakehouse -> Lakehouse",templateCode:"Hive2Hive",path:"step2HiveSQL",content:"基于Hive SQL/Spark SQL数据处理，不同的执行引擎语法略有差异，请参考官方语法。"}]},{title:"数据导出 Data Digestion",list:[{label:"Lakehouse -> Doris",templateCode:"Hive2Doris",path:"step2Doris",content:"用于数据的导出处理，可将数据从Lakehouse导出到Doris中。"},{label:"Lakehouse -> File",templateCode:"Hive2File",path:"step2Hive2File",content:"用于Lakehouse数据导出到文件的任务，可以支持以邮件的方式将文件发送给用户。"},{label:"Lakehouse -> MySQL",templateCode:"Hive2Mysql",path:"step2MySql",content:"用于数据的导出处理，可将数据从Lakehouse导出到MySQL中。"},{label:"Lakehouse -> ClickHouse",content:"用于数据的导出处理，可将数据从Lakehouse导出到ClickHouse中。",isGray:!0},{label:"Lakehouse -> Redshift",content:"适用于将S3文件中结构化数据映射到Aws Redshift表中的业务场景。",isGray:!0}]}],d=[{title:"数据接入 Data Ingestion",list:[{label:"Spark Jar",templateCode:"SPARKJAR",path:"step2SparkJar",content:"用于湖仓数据的基于Jar包的数据处理，一般用于更加复杂的数据处理逻辑。"},{label:"Shell/Python脚本",templateCode:"PythonShell",path:"step2Shell",content:"用于python和shell脚本任务的执行。"}]},{title:"湖仓处理 Lakehouse ETL",list:[{label:"Flink Jar",templateCode:"StreamingJAR",path:"step2FlinkJar",content:"通过上传Flink Jar包的方式，进行流式数据处理。",isGray:!0},{label:"Flink SQL",templateCode:"StreamingSQL",path:"step2FlinkSQL",content:"流式任务的统一模板，基于SQL查询的方式（Flink SQL）进行数据处理。Metis日志处理，统一归集到此处通过SQL的方式进行处理。",isGray:!0}]}],m={CREATED:"#8896B3",INITIALIZING:"rgba(146, 112, 202, 0.8)",SCHEDULED:"rgba(146, 112, 202, 0.8)",RUNNING:"#409EFF",RESTARTING:"#C6E2FF",RECONCILING:"#41F3D8",SUSPENDED:"#67C23A",CANCELED:"#E6A23C",CANCELLING:"#E6A23C",FAILED:"#FF5656",SUCCESS:"#67C23A",FINISHED:"#67C23A",FAILLING:"#FCE2E2"},f={CREATED:"#8896B3",INITIALIZING:"rgba(146, 112, 202, 0.8)",SCHEDULED:"rgba(146, 112, 202, 0.8)",RUNNING:"#409EFF",CANCELED:"#E6A23C",FAILED:"#FF5656",SUCCESS:"#67C23A",SUSPENDED:"#67C23A",FINISHED:"#67C23A",OFFLINE:"#dcdfe6"},h={CREATED:"已创建",INITIALIZING:"已上线",SCHEDULED:"已上线",RUNNING:"执行中",CANCELED:"已取消",FAILED:"失败",SUCCESS:"成功",SUSPENDED:"成功",FINISHED:"成功",OFFLINE:"已下线"},g={waiting:"检查上游",termination:"终止检查上游",waiting_queue:"排队中",running:"运行中",up_for_retry:"等待重试",failed:"失败",success:"成功"},b={INITIALIZING:"初始化中",CREATED:"已创建",RUNNING:"运行中",FAILING:"失败中",CANCELLING:"取消中",RESTARTING:"重启中",RECONCILING:"调度中",FAILED:"已失败",CANCELED:"已下线",FINISHED:"已完成",SUSPENDED:"已停止"};function k(){return v.apply(this,arguments)}function v(){return v=o(s().mark((function e(){var t,a;return s().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["r"])();case 2:return t=e.sent,a=t.data,e.abrupt("return",a.list.map((function(e){return{label:e.description,value:e.regionAlias}})));case 5:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}var y=u?k():new Promise((function(e,t){e([{label:"AWS 美东",value:"ue1"},{label:"AWS 新加坡",value:"sg1"},{label:"华为 新加坡",value:"sg2"}])})),L=[{label:"P0",value:0},{label:"P1",value:1},{label:"P2",value:2},{label:"P3",value:3}],S={GENERAL:"一般",SENIOR:"紧急"};function _(e,t){var a="";return function(r){a&&clearTimeout(a),a=setTimeout((function(){e(r)}),t)}}function T(e){if(null==e)return null;var t=Array.isArray(e)?[]:{};for(var a in e)e.hasOwnProperty(a)&&("object"===i(e[a])?t[a]=T(e[a]):t[a]=e[a]);return t}var w=[{package:"awscli",version:"1.16.263"},{package:"backports.ssl-match-hostname",version:"3.5.0.1"},{package:"boto",version:"2.49.0"},{package:"boto3",version:"1.9.220"},{package:"botocore",version:"1.12.253"},{package:"certifi",version:"2020.12.5"},{package:"chardet",version:"3.0.4"},{package:"colorama",version:"0.4.1"},{package:"docutils",version:"0.15.2"},{package:"futures",version:"3.3.0"},{package:"idna",version:"2.10"},{package:"iniparse",version:"0.4"},{package:"ipaddress",version:"1.0.16"},{package:"jmespath",version:"0.9.5"},{package:"kitchen",version:"1.1.1"},{package:"pip",version:"20.3.3"},{package:"pyasn1",version:"0.4.8"},{package:"pycurl",version:"7.19.0"},{package:"pygobject",version:"3.22.0"},{package:"pygpgme",version:"0.3"},{package:"pyliblzma",version:"0.5.3"},{package:"python-dateutil",version:"2.8.1"},{package:"pyxattr",version:"0.5.1"},{package:"PyYAML",version:"5.1.2"},{package:"requests",version:"2.24.0"},{package:"rsa",version:"3.4.2"},{package:"s3transfer",version:"0.2.1"},{package:"setuptools",version:"0.9.8"},{package:"six",version:"1.15.0"},{package:"urlgrabber",version:"3.10"},{package:"urllib3",version:"1.25.11"},{package:"yum-metadata-parser",version:"1.1.4"}],I={sg2:"swr.ap-southeast-3.myhuaweicloud.com/shareit-bdp/airflow-business:script_task",ue1:"848318613114.dkr.ecr.us-east-1.amazonaws.com/bdp/airflow:script_task",sg1:"848318613114.dkr.ecr.ap-southeast-1.amazonaws.com/bdp/workflow:script_task"}},f2dc:function(e,t,a){},f665:function(e,t,a){"use strict";a("f2dc")}}]);