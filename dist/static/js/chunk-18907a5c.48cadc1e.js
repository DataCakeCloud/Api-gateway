(window["webpackJsonp_datastudio-web"]=window["webpackJsonp_datastudio-web"]||[]).push([["chunk-18907a5c"],{"0e59":function(t,e,n){"use strict";n("5f99")},"17bc":function(t,e,n){},"2e35":function(t,e,n){},"411b":function(t,e,n){"use strict";n("80fb")},"4d2c":function(t,e,n){"use strict";n("2e35")},"5f99":function(t,e,n){},"6d5e":function(t,e,n){"use strict";n.d(e,"n",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"t",(function(){return o})),n.d(e,"o",(function(){return s})),n.d(e,"i",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"l",(function(){return c})),n.d(e,"p",(function(){return d})),n.d(e,"m",(function(){return p})),n.d(e,"r",(function(){return f})),n.d(e,"s",(function(){return h})),n.d(e,"d",(function(){return m})),n.d(e,"a",(function(){return b})),n.d(e,"f",(function(){return v})),n.d(e,"q",(function(){return g})),n.d(e,"g",(function(){return y})),n.d(e,"k",(function(){return k})),n.d(e,"j",(function(){return _})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return S}));var r=n("7258");function a(t){return r["b"].get("/ds_task/taskinstance/page",{params:t})}function i(t){return r["b"].post("/ds_task/taskinstance/clear",null,{params:t})}function o(t){return r["b"].patch("/ds_task/taskinstance/stop",null,{params:t})}function s(t){return r["b"].get("/ds_task/tasksnapshot/page",{params:t})}function l(t){return r["b"].get("/ds_task/task/metricsui",{params:t})}function u(t){return r["b"].get("/ds_task/task/logsui",{params:t})}function c(t){return r["b"].get("/ds_task/task/serviceui",{params:t})}function d(t){return r["b"].get("/ds_task/taskversion/list",{params:t})}function p(t){return r["b"].get("/ds_task/tasksnapshot/list",{params:t})}function f(t){return r["b"].patch("/ds_task/task/start",null,{params:t,timeout:3e5})}function h(t){return r["b"].patch("/ds_task/task/stop",null,{params:t})}function m(t){return r["b"].patch("/ds_task/task/cancel",null,{params:t})}function b(t){return r["b"].post("/ds_task/tasksnapshot/trigger",t)}function v(t){return r["b"].get("/ds_task/taskinstance/diagnose",{params:t})}function g(t){return r["b"].post("/ds_task/dashboard/permission",t)}function y(t){return r["b"].get("/ds_task/taskinstance/exeSql/get",{params:t})}function k(t){return r["b"].post("/pipeline/taskinstance/record",t)}function _(t){return r["b"].get("/ds_task/taskinstance/offline_pages",{params:t})}function w(t){return r["b"].post("/ds_task/taskinstance/batch_clear",t)}function S(t){return r["b"].post("/ds_task/taskinstance/batch_stop",t)}},7809:function(t,e,n){"use strict";n("ae01")},"7ea2":function(t,e,n){"use strict";n.d(e,"m",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"t",(function(){return s})),n.d(e,"l",(function(){return l})),n.d(e,"g",(function(){return u})),n.d(e,"o",(function(){return c})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return p})),n.d(e,"r",(function(){return f})),n.d(e,"s",(function(){return h})),n.d(e,"n",(function(){return m})),n.d(e,"b",(function(){return b})),n.d(e,"f",(function(){return v})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return k})),n.d(e,"i",(function(){return _})),n.d(e,"k",(function(){return w})),n.d(e,"j",(function(){return S})),n.d(e,"h",(function(){return C}));var r=n("7258"),a="/ds_task/flinkcluster";function i(t){return r["b"].get("".concat(a,"/page?"),{params:t})}function o(t){return r["b"].post("".concat(a,"/add"),t)}function s(t){return r["b"].put("".concat(a,"/update"),t)}function l(t){return r["b"].get("".concat(a,"/get?id=").concat(t))}function u(t){return r["b"].delete("".concat(a,"/delete"),{params:{id:t}})}function c(t){return r["b"].post("/cluster-service/cloud/resource/add",t,{timeout:6e5})}function d(t){return r["b"].delete("/cluster-service/cloud/resource/delete/".concat(t))}function p(t){return r["b"].get("/cluster-service/cloud/resource/getOne",{params:t})}function f(t){return r["b"].get("/cluster-service/cloud/resource/search",{params:t})}function h(t){return r["b"].post("/cluster-service/cloud/resource/update",t,{timeout:6e5})}function m(t){return r["b"].get("/cluster-service/cloud/resource/getRegion",{params:t})}function b(t){return r["b"].post("/cluster-service/cloud/data/add",t,{timeout:6e5})}function v(t){return r["b"].post("/cluster-service/cloud/data/update",t,{timeout:6e5})}function g(t){return r["b"].delete("/cluster-service/cloud/data/delete",{params:t})}function y(t){return r["b"].get("/cluster-service/cloud/data/getOne",{params:t})}function k(t){return r["b"].get("/cluster-service/cloud/data/search",{params:t})}function _(t){return r["b"].get("/cluster-service/cluster/service/roles",{params:t})}function w(t){return r["b"].get("/cluster-service/cluster/vpcs",{params:t})}function S(t){return r["b"].get("/cluster-service/cluster/subnets",{params:t})}function C(t){return r["b"].get("/cluster-service/cluster/security/groups",{params:t})}},"80fb":function(t,e,n){t.exports={globalFont:"Helvetica Neue,Helvetica,PingFang SC,Avenir,Segoe UI,Arial,sans-serif,Hiragino Sans GB,Microsoft YaHei",navbarHeight:"45px",menuText:"#445782",menuActiveText:"#3782ff",subMenuActiveText:"#3782ff",menuBg:"#f7f9ff",menuHover:"#dfebff",subMenuBg:"#1f2d3d",subMenuHover:"#dfebff",sideBarWidth:"244px"}},"8a67":function(t,e,n){"use strict";n("ad88")},"8e2b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"task-detail box-card-container"},[n("div",{attrs:{name:"instance",label:"实例信息"}},[n("div",{staticClass:"search-condition-wrap"},[n("div",{staticClass:"search-group"},[n("search-item",{staticClass:"custom-search",attrs:{width:"120px",span:8,label:"任务名称"}},[n("el-autocomplete",{staticClass:"search-input",attrs:{size:"small","popper-class":"suggest-input","fetch-suggestions":t.querySearch,"value-key":"name",placeholder:"任务名称","trigger-on-focus":!1,clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item;return[n("el-tooltip",{attrs:{effect:"dark",content:r.name,placement:"left-end"}},[n("div",[t._v(t._s(r.name))])])]}}]),model:{value:t.params.name,callback:function(e){t.$set(t.params,"name","string"===typeof e?e.trim():e)},expression:"params.name"}})],1),t._v(" "),n("search-item",{staticClass:"custom-search",attrs:{width:"120px",label:"执行入参时间",span:8}},[n("el-date-picker",{staticClass:"search-input",staticStyle:{width:"350px"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},on:{change:t.changeTime},model:{value:t.timeRange,callback:function(e){t.timeRange=e},expression:"timeRange"}})],1),t._v(" "),n("search-item",{staticClass:"custom-search",attrs:{width:"120px",label:"运行状态",span:8}},[n("el-select",{staticClass:"search-input",attrs:{placeholder:"请选择运行状态",clearable:""},model:{value:t.params.state,callback:function(e){t.$set(t.params,"state",e)},expression:"params.state"}},t._l(t.statusCodeList,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1),t._v(" "),n("search-item",{staticClass:"custom-search",attrs:{width:"120px",span:8,label:"任务类型"}},[n("el-select",{staticClass:"search-input",attrs:{size:"small",placeholder:"任务类型",clearable:""},on:{change:t.search},model:{value:t.params.template_code,callback:function(e){t.$set(t.params,"template_code",e)},expression:"params.template_code"}},t._l(t.templateCodeList,(function(e,r){return n("el-option-group",{key:r,attrs:{label:r}},t._l(e,(function(t){return n("el-option",{key:t.code,attrs:{label:t.value,value:t.code}})})),1)})),1)],1),t._v(" "),n("search-item",{staticClass:"custom-search",attrs:{width:"120px",label:"调度类型",span:8}},[n("el-select",{staticClass:"search-input",attrs:{placeholder:"请选择调度类型",clearable:""},model:{value:t.params.schedule_type,callback:function(e){t.$set(t.params,"schedule_type",e)},expression:"params.schedule_type"}},t._l(t.dispatchTypeList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("search-item",{staticClass:"custom-search",attrs:{width:"120px",label:"调度周期",span:8}},[n("el-select",{staticClass:"search-input",attrs:{placeholder:"请选择调度周期",clearable:""},model:{value:t.params.cycle,callback:function(e){t.$set(t.params,"cycle",e)},expression:"params.cycle"}},t._l(t.dispatchTimeList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),n("div",{staticClass:"btns"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.search}})],1)]),t._v(" "),n("div",{staticClass:"right-opertate"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.batchClear}},[t._v("批量重算")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.batchStop}},[t._v("批量停止")])],1),t._v(" "),n("div",{staticClass:"table-wrap"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:!0,stripe:"","cell-style":{padding:"0",height:"36px"},height:"calc(100vh - 300px)"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"40",selectable:t.selectableFn}}),t._v(" "),n("el-table-column",{attrs:{type:"index",label:"序号",index:t.indexMethod,width:"50",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"任务名称","min-width":"220",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{content:e.row.name,placement:"top",disabled:t.isTipDisabled}},[n("a",{staticClass:"ellipsis block",on:{mouseenter:t.isShowTooltip,click:function(n){return t.gotoDetail(e.row)}}},[t._v(t._s(e.row.name))])])]}}])}),t._v(" "),t.showId?n("el-table-column",{attrs:{prop:"genie_job_id",label:"实例ID","min-width":"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.genie_job_id?n("el-tooltip",{attrs:{content:e.row.genie_job_id,disabled:t.isTipDisabled}},[n("span",{staticClass:"ellipsis block jump",on:{click:function(n){return t.jumpLog(e.row)},mouseenter:t.isShowTooltip}},[t._v(t._s(e.row.genie_job_id))])]):[t._v(" - ")]]}}],null,!1,3227739721)}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"execution_date",label:"执行入参时间","min-width":"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.execution_date?t.$utils.parseTime(Number(e.row.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}"):"-")+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"state",label:"运行状态","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{color:t.stateColorFn(t.statusCodeList[e.row.state]),effect:"dark"}},[t._v(t._s(t.statusCodeList[e.row.state]||e.row.state))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"任务类型","min-width":"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.formatTemplateCode(e.row.template_code))+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"state",label:"运行次数","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.try_number?n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.openRecord(e.row)}}},[t._v(t._s(e.row.try_number)+"次")]):n("span",[t._v("-")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"task_type",label:"调度类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.formatTaskType(e.row.task_type))+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"granularity",label:"调度周期",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.formatGranularity(e.row.granularity))+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"start_date",label:"任务开始时间","min-width":"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.start_date?t.$utils.parseTime(Number(e.row.start_date)):"-")+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"end_date",label:"任务结束时间","min-width":"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.end_date?t.$utils.parseTime(Number(e.row.end_date)):"-")+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"duration",label:"任务耗时","min-width":"140",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"230",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{style:{color:t.isAdmin||e.row.isOwnerOrCollaborator?"#e6a23c":"#d1d7e6"},attrs:{type:"text",size:"mini",disabled:!(t.isAdmin||e.row.isOwnerOrCollaborator)},on:{click:function(n){return t.checkError(e.row)}}},[t._v("检查上游")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini",disabled:"waiting"===e.row.state||!((t.isAdmin||e.row.isOwnerOrCollaborator)&&e.row.online)},on:{click:function(n){return t.repeatCalc(e.row)}}},[t._v(t._s("termination"===e.row.state?"重新启动检查":"重算"))]),t._v(" "),n("el-button",{style:{color:(t.isAdmin||e.row.isOwnerOrCollaborator)&&e.row.online?"#FF5656":"#d1d7e6"},attrs:{type:"text",size:"mini",disabled:"termination"===e.row.state||!((t.isAdmin||e.row.isOwnerOrCollaborator)&&e.row.online)},on:{click:function(n){return t.stop(e.row)}}},[t._v("停止")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini",disabled:!e.row.isScanSparkUI||"waiting"===e.row.state||"termination"===e.row.state||!(t.isAdmin||e.row.isOwnerOrCollaborator)||!e.row.spark_ui},on:{click:function(n){return t.getUI(e.row)}}},[t._v("Spark UI")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini",disabled:!e.row.isScanSqlCmd},on:{click:function(n){return t.getSql(e.row)}}},[t._v(t._s("PythonShell"===e.row.templateCode?"脚本预览":"SQL预览"))])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{background:"",total:t.total,"current-page":t.params.pageNum,"page-sizes":[10,20,30,50,100],"page-size":t.params.pageSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)]),t._v(" "),n("el-dialog",{attrs:{title:"停止",visible:t.dialogVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{attrs:{model:t.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"状态"}},[n("el-select",{attrs:{placeholder:"请选择状态",disabled:t.statusDisabled},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[n("el-option",{attrs:{label:"成功",value:1}}),t._v(" "),n("el-option",{attrs:{label:"失败",value:0}})],1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:("PythonShell"===t.templateCode?"脚本预览":"SQL预览")+"-"+(0===t.version?"最新":"V"+t.version),visible:t.dialogVisibleSql,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.dialogVisibleSql=e}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.sqlLoading,expression:"sqlLoading"}],staticClass:"monaco-editor-wrap"},[n("monaco-editor",{directives:[{name:"show",rawName:"v-show",value:t.content,expression:"content"}],ref:"monaco",attrs:{"read-only":!0},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("el-empty",{directives:[{name:"show",rawName:"v-show",value:!t.content,expression:"!content"}],attrs:{"image-size":100}})],1)]),t._v(" "),n("el-dialog",{staticClass:"error-dialog",attrs:{title:"检查上游",visible:t.dialogVisibleCheck,width:"70%"},on:{"update:visible":function(e){t.dialogVisibleCheck=e}}},[n("div",{staticStyle:{"font-size":"$global-font-size-16"},attrs:{slot:"title"},slot:"title"},[t._v("\n      检查上游\n      "),n("el-tooltip",{attrs:{effect:"dark",content:"边框实线与虚线用以区分内部or外部数据；背景灰色代表任务下线；边框颜色用以区分当前实例状态",placement:"bottom"}},[n("i",{staticClass:"el-icon-info",staticStyle:{color:"#409eff"}})])],1),t._v(" "),n("div",{staticClass:"text-center mb10"},[t._v("当前实例："+t._s(t.currentCase.name)+"    "+t._s(t.currentCase.executionDate))]),t._v(" "),n("div",{staticClass:"legend"},[n("div",{staticStyle:{position:"absolute"}},[n("span",{staticClass:"inside-color"},[t._v("内部数据")]),t._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"代表非本平台产出的数据",placement:"bottom"}},[n("span",{staticClass:"outside-color"},[t._v("外部数据")])]),t._v(" "),n("span",{staticClass:"outline-color"},[t._v("下线")])],1),t._v(" "),n("span",{staticClass:"waiting-color"},[t._v("检查上游")]),t._v(" "),n("span",{staticClass:"waiting-queue"},[t._v("排队中")]),t._v(" "),n("span",{staticClass:"running-color"},[t._v("运行中")]),t._v(" "),n("span",{staticClass:"success-color"},[t._v("成功")]),t._v(" "),n("span",{staticClass:"failed-color"},[t._v("失败")]),t._v(" "),n("div",{staticStyle:{position:"absolute",right:"0",bottom:"0"}},[n("div",{staticClass:"dashed"}),t._v(" "),n("i",{staticClass:"el-icon-caret-right dash-caret"}),t._v("\n        中间有省略节点\n      ")])]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}]},[t.errorData.instance&&t.errorData.instance.length&&t.errorData.relation&&t.errorData.relation.length?n("DAG",{staticClass:"dag",attrs:{shapes:t.errorData.instance,relations:t.errorData.relation,options:{idKey:"nodeId",sourceKey:"source",targetKey:"target",titleKey:t.titleKey,jumpUrl:function(t){return t.recursion||t.external?"":"/task/detail"}},"node-class":t.nodeClass},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return[n("el-tooltip",{attrs:{effect:"dark",placement:"bottom"}},[n("div",{staticClass:"data-tooltip",attrs:{slot:"content"},slot:"content"},[r.recursion?n("div",[t._v("该节点代表该依赖链路上被省略的中间实例")]):[r.external?t._e():n("div",[t._v("任务名称："+t._s(r.dagId))]),t._v(" "),n("div",[t._v(t._s(r.external?"数据":"实例")+"日期："+t._s(r.executionDate))]),t._v(" "),n("div",[t._v("数据集类型："+t._s(r.external?"外部":"内部"))]),t._v(" "),n("div",[t._v("数据集名称："+t._s(r.metadataId))]),t._v(" "),r.external?[n("div",[t._v("检查路径："+t._s(r.checkPath||"-"))]),t._v(" "),n("div",[t._v("完成时间："+t._s(r.successDate||"-"))])]:[n("div",[t._v("任务负责人："+t._s(r.owner||"-"))]),t._v(" "),n("div",[t._v("任务开始时间："+t._s(r.start_date||"-"))]),t._v(" "),n("div",[t._v("任务结束时间："+t._s(r.end_date||"-"))])]]],2),t._v(" "),n("i",{staticClass:"el-icon-info"})])]}}],null,!1,2326802157)}):n("div",{staticClass:"no-data"},[t._v("未检查到上游实例")])],1)]),t._v(" "),n("el-dialog",{attrs:{title:"运行记录",visible:t.dialogVisibleRecord,width:"1120px"},on:{"update:visible":function(e){t.dialogVisibleRecord=e}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.recordLoading,expression:"recordLoading"}],staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:t.recordList,border:!0,stripe:"","cell-style":{padding:"10px 0"},"max-height":"380px"}},[n("el-table-column",{attrs:{type:"index",label:"运行次数",width:"85",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"genie_job_id",label:"实例ID","min-width":"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.genie_job_id?n("el-tooltip",{attrs:{content:e.row.genie_job_id,disabled:t.isTipDisabled}},[n("span",{staticClass:"ellipsis block jump",on:{click:function(n){return t.jumpLog(e.row)},mouseenter:t.isShowTooltip}},[t._v(t._s(e.row.genie_job_id))])]):[t._v(" - ")]]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"execution_date",label:"执行入参时间","min-width":"175",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.execution_date?t.$utils.parseTime(Number(e.row.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}"):"-")+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"state",label:"运行状态","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{color:t.stateColorFn(t.statusCodeList[e.row.state]),effect:"dark"}},[t._v(t._s(t.statusCodeList[e.row.state]||e.row.state))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"start_date",label:"任务开始时间","min-width":"135",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.start_date?t.$utils.parseTime(Number(e.row.start_date)):"-")+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"end_date",label:"任务结束时间","min-width":"135",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.end_date?t.$utils.parseTime(Number(e.row.end_date)):"-")+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"duration",label:"任务耗时","min-width":"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"task_type",label:"调度类型","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["backCalculation"===e.row.task_type?n("span",[t._v("补数")]):"clear_backCalculation"===e.row.task_type?n("span",[t._v("重算")]):"pipeline"===e.row.task_type?n("span",[t._v("正常调度")]):n("span",[t._v("-")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"owner",label:"操作","min-width":"190",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini",disabled:!e.row.isScanSparkUI||"waiting"===e.row.state||"termination"===e.row.state||!(t.isAdmin||e.row.isOwnerOrCollaborator)||!e.row.spark_ui},on:{click:function(n){return t.getUI(e.row)}}},[t._v("Spark UI")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini",disabled:"waiting"===e.row.state||"termination"===e.row.state||!(t.isAdmin||e.row.isOwnerOrCollaborator)||!e.row.isScanKibana},on:{click:function(n){return t.getLogs(e.row)}}},[t._v("Kibana日志")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini",disabled:!e.row.isScanSqlCmd},on:{click:function(n){return t.getSql(e.row)}}},[t._v(t._s("PythonShell"===e.row.templateCode?"脚本预览":"SQL预览"))])]}}])})],1)],1)],1)},a=[],i=n("460e"),o=n("b199"),s=n("6d5e"),l=n("b03b"),u=n("a8c0"),c=n("b893"),d=n("2f62");function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e=b(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){var e=v(t,"string");return"symbol"===p(e)?e:String(e)}function v(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var g={components:{SearchItem:i["a"],MonacoEditor:l["a"],DAG:u["a"]},data:function(){return{tabItem:"instance",timeRange:[],templateCode:"",params:{pageNum:1,pageSize:10,name:"",state:"",start_date:"",end_date:"",cycle:"",schedule_type:"",template_code:"",userId:JSON.parse(sessionStorage.getItem("userInfo")).id},total:0,loading:!1,tableData:[],statusCodeList:c["i"],templateCodeList:{},dispatchTypeList:[{label:"正常调度",value:"pipeline"},{label:"重跑",value:"clear_backCalculation"},{label:"补数",value:"backCalculation"}],dispatchTimeList:[{label:"月",value:"monthly"},{label:"周",value:"weekly"},{label:"天",value:"daily"},{label:"小时",value:"hourly"},{label:"分钟",value:"minutely"}],dialogVisible:!1,form:{name:"",executionDate:"",flinkUrl:"",status:1},statusDisabled:!1,multipleSelection:[],keyWordResults:[],dialogVisibleCheck:!1,dialogLoading:!1,errorData:{},isTipDisabled:!1,costLoading:!1,costUrl:"",isShow:!1,isCheckUpstream:!0,execution_date:"",showId:!0,dialogVisibleSql:!1,content:"",version:1,currentCase:{name:this.$route.query.name,executionDate:""},sqlLoading:!1,dialogVisibleRecord:!1,recordLoading:!1,recordList:[],isBatchStop:!1}},computed:h({},Object(d["c"])(["isAdmin","userInfo"])),created:function(){var t=this;clearTimeout(this.initTimer),this.loading=!0,this.params.instanceId=this.$route.query.instanceId,this.getList(),this.initTimer=setInterval((function(){t.getList()}),2e4),this.$nextTick((function(){document.addEventListener("visibilitychange",t.handelGetList)})),this.getTemplateList()},destroyed:function(){document.removeEventListener("visibilitychange",this.handelGetList),clearTimeout(this.initTimer),this.REMOVE_TASKPAGEOPTIONS()},methods:h(h({},Object(d["d"])(["REMOVE_TASKPAGEOPTIONS"])),{},{stateColorFn:function(t){var e;switch(t){case"检查上游":e="rgb(215, 189, 242)";break;case"排队中":e="rgb(135, 224, 240)";break;case"运行中":e="rgb(55, 130, 255)";break;case"成功":e="rgb(103, 194, 58)";break;case"失败":e="rgb(241, 13, 21)";break;case"终止检查上游":e="rgb(241, 13, 21)";break;case"等待重试":e="#e6a23c";break;default:break}return e},formatTaskType:function(t){var e;switch(t){case"pipeline":e="正常调度";break;case"clear_backCalculation":e="重跑";break;case"backCalculation":e="补数";break}return e},formatGranularity:function(t){var e;switch(t){case"monthly":e="月";break;case"weekly":e="周";break;case"daily":e="天";break;case"hourly":e="小时";break;case"minutely":e="分钟";break}return e},formatTemplateCode:function(t){var e,n=this;return Object.keys(this.templateCodeList).some((function(r){return n.templateCodeList[r].some((function(n){return e=n.value,n.code===t}))})),e},selectableFn:function(t,e){return(this.isAdmin||t.isOwnerOrCollaborator)&&t.online},querySearch:function(t,e){var n=this;Object(o["db"])(t).then((function(t){var r=t.data;n.keyWordResults=r||[],e(n.keyWordResults)}))},getTemplateList:function(){var t=this;Object(o["W"])().then((function(e){var n=e.data;n.sort.forEach((function(e){t.templateCodeList[e.code]=n[e.code]})),t.$forceUpdate()}))},jumpLog:function(t){if(t.genie_job_url){var e=t.genie_job_url,n=e.startsWith("ks3://"),r=e.startsWith("s3://");n?window.open("/api-gateway/ds_task/task/instanceLog?url="+e,"_blank","_blank"):r?window.open("https://joblog.datacake.cloud/"+e.split("pipeline_log/")[1],"_blank"):window.open(e,"_blank")}},handelGetList:function(){var t=this;document.hidden?clearTimeout(this.initTimer):(clearTimeout(this.initTimer),this.getList(),this.initTimer=setInterval((function(){t.getList()}),2e4))},titleKey:function(t){var e=t.recursion?"... ...":t.dagId+"<br/>"+t.executionDate;return t.nodeId===this.errorData.coreTaskId&&(e+="(当前实例)"),t.taskId&&(e=t.taskId+"<br/>"+e),e},nodeClass:function(t){var e;return"waiting"===t.state||"waiting_queue"===t.state?e="waiting-color":"waiting_queue"===t.state?e="waiting-queue":"running"===t.state||"up_for_retry"===t.state?e="running-color":"success"===t.state?e="success-color":"failed"!==t.state&&"termination"!==t.state||(e="failed-color"),!1===t.online&&(e+=" outline-color"),t.nodeId===this.errorData.coreTaskId&&(e+=" bold"),t.recursion&&(e+=" width100"),t.external&&(e+=" dash-border"),e},gotoDetail:function(t){if(t.isStreamingTemplateCode){var e=this.$router.resolve({path:"/task/info",query:{id:t.id}});window.open(e.href,"_blank")}else{var n=this.$router.resolve({path:"/task/detail",query:{id:t.id,name:t.name}});window.open(n.href,"_blank")}},clickPermission:function(){var t=this;Object(s["q"])().then((function(e){t.isShow=!0,localStorage.setItem("permission","1")}))},getList:function(){var t=this;Object.keys(this.params).forEach((function(e){t.params[e]||delete t.params[e]})),Object(s["j"])(h({},this.params)).then((function(e){var n=e.data;t.loading=!1,t.total=n.total,t.tableData=n.list,t.tableData&&t.tableData[0]&&t.tableData[0].flink_url?t.showId=!1:t.showId=!0}))},indexMethod:function(t){return(this.params.pageNum-1)*this.params.pageSize+t+1},handleSelectionChange:function(t){this.multipleSelection=t},reset:function(){this.timeRange=[],this.params={start_date:"",end_date:"",state:"",pageNum:1,pageSize:10},this.getList()},search:function(){this.params.pageNum=1,this.loading=!0,this.getList()},handleCurrentChange:function(t){this.params.pageNum=t,this.loading=!0,this.getList()},handleSizeChange:function(t){this.params.pageSize=t,this.params.pageNum=1,this.loading=!0,this.getList()},changeTime:function(t){t?(this.params.start_date=t[0],this.params.end_date=t[1]):(this.params.start_date="",this.params.end_date="")},isShowTooltip:function(t){var e=t.target.clientWidth,n=t.target.scrollWidth;this.isTipDisabled=!(n>e)},openRecord:function(t){var e=this;this.dialogVisibleRecord=!0,this.recordLoading=!0,Object(s["k"])({taskName:t.name,executionDate:this.$utils.parseTime(Number(t.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}")}).then((function(t){var n=t.data;e.recordList=n,e.recordLoading=!1}))},getSql:function(t){var e=this;this.templateCode=t.templateCode,this.dialogVisibleSql=!0,this.getList(),this.version=t.version,this.sqlLoading=!0,Object(s["g"])({taskId:t.taskId,executionDate:this.$utils.parseTime(Number(t.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}"),version:t.version}).then((function(t){var n=t.data;e.content=n,e.$refs.monaco.setCode(e.content),e.sqlLoading=!1}))},getUI:function(t){this.$report({userId:this.userInfo&&this.userInfo.userId,time:Date.now(),event:{type:"查看SparkUI"}}),this.getList(),window.open(t.spark_ui)},getLogs:function(t){this.$report({userId:this.userInfo&&this.userInfo.userId,time:Date.now(),event:{type:"查看日志"}}),this.getList(),Object(s["h"])({id:t.taskId,executionDate:this.$utils.parseTime(Number(t.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}")}).then((function(t){var e=t.data,n=e;window.open(n)}))},batchClear:function(){var t=this;this.multipleSelection.length?this.$confirm("确定批量重算?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.multipleSelection.map((function(e){return{name:e.name,execution_date:t.$utils.parseTime(Number(e.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}"),isCheckUpstream:t.isCheckUpstream}}));Object(s["b"])(e).then((function(e){t.$message({type:"success",message:"执行成功"}),t.loading=!0,t.$refs.multipleTable.clearSelection(),t.getList()}))})).catch((function(){})):this.$message({type:"warning",message:"请至少选择一个任务实例"})},batchStop:function(){this.multipleSelection.length?(this.isBatchStop=!0,this.dialogVisible=!0):this.$message({type:"warning",message:"请至少选择一个任务实例"})},repeatCalc:function(t){var e=this;this.execution_date=this.$utils.parseTime(Number(t.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}"),this.$confirm("确定重算?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.saveClear(t)})).catch((function(){}))},saveClear:function(t){var e=this;Object(s["e"])({name:t.name,executionDate:this.execution_date,isCheckUpstream:this.isCheckUpstream}).then((function(t){e.$message({type:"success",message:"执行成功"}),e.loading=!0,e.$refs.multipleTable.clearSelection(),e.getList()}))},checkError:function(t){var e=this;this.getList(),this.dialogVisibleCheck=!0,this.dialogLoading=!0,this.currentCase={name:t.name,executionDate:this.$utils.parseTime(Number(t.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}")},Object(s["f"])({name:t.name,executionDate:this.$utils.parseTime(Number(t.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}"),state:t.state}).then((function(t){var n=t.data;e.errorData=n,e.dialogLoading=!1}))},gotoOrder:function(){var t=this.$router.resolve({path:"/admin/order/create"}),e=t.href;window.open(e,"_blank")},stop:function(t){t.flink_url?this.form.flinkUrl=t.flink_url:this.form.flinkUrl="",this.form.name=t.name,this.form.executionDate=this.$utils.parseTime(Number(t.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}"),this.isBatchStop=!1,this.dialogVisible=!0},save:function(){var t=this;if(this.isBatchStop){var e=this.multipleSelection.map((function(e){return{name:e.name,execution_date:t.$utils.parseTime(Number(e.execution_date),"{y}/{m}/{d} {h}:{i}:{s}.{b}"),flinkUrl:e.flinkUrl||"",status:t.form.status}}));Object(s["c"])(e).then((function(e){t.dialogVisible=!1,t.$message({type:"success",message:"执行成功"}),t.loading=!0,t.$refs.multipleTable.clearSelection(),t.getList()}))}else Object(s["t"])(this.form).then((function(e){t.dialogVisible=!1,t.$message({type:"success",message:"执行成功"}),t.loading=!0,t.$refs.multipleTable.clearSelection(),t.getList()}))}})},y=g,k=(n("8a67"),n("411b"),n("2877")),_=Object(k["a"])(y,r,a,!1,null,"27fb0bbd",null);e["default"]=_.exports},"8f46":function(t,e,n){"use strict";n("c834")},a8c0:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.shapes&&t.relations?n("div",{ref:"middleCanvas",staticClass:"middleCanvas",on:{dragover:function(t){return t.preventDefault()},pointermove:t.moveLine,pointerup:function(e){return t.endLine()}}},[n("div",{staticClass:"tools"},[n("el-button",{staticClass:"tool",attrs:{size:"mini",type:"primary"},on:{click:t.format}},[t._v("复原")]),t._v(" "),n("el-input-number",{staticClass:"tool",attrs:{size:"mini",placeholder:"缩放",min:10,max:300,step:10},model:{value:t.layerPos.z,callback:function(e){t.$set(t.layerPos,"z",e)},expression:"layerPos.z"}})],1),t._v(" "),n("Layer",{attrs:{x:t.layerPos.x,y:t.layerPos.y,z:t.layerPos.z},on:{"update:x":function(e){return t.$set(t.layerPos,"x",e)},"update:y":function(e){return t.$set(t.layerPos,"y",e)},"update:z":function(e){return t.$set(t.layerPos,"z",e)}}},[t._l(t.depTree,(function(e,r){return n("Shape",{key:r,staticClass:"shape",attrs:{x:e.x,y:e.y},on:{"update:x":function(n){return t.$set(e,"x",n)},"update:y":function(n){return t.$set(e,"y",n)},endonshape:function(n){return t.endLine(e)}}},[n("Task",{class:t.nodeClass(e),attrs:{id:"string"===typeof t.options.titleKey?e[t.options.titleKey]:"function"===typeof t.options.titleKey?t.options.titleKey(e):e[t.options.idKey],url:t.options.jumpUrl(e)}}),t._v(" "),n("div",{staticClass:"port"}),t._v(" "),n("div",{staticClass:"shape-actions",on:{pointerdown:function(t){t.stopPropagation(),t.preventDefault()}}},[t._t("default",null,{data:e,dep:t.depTree})],2)],1)})),t._v(" "),t._l(t.lines,(function(t,e){return n("VLine",{key:"line-"+e,attrs:{start:t.start,end:t.end,dashed:t.dashed}})}))],2)],1):t._e()},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("path",{attrs:{d:t.d,"marker-end":"url(#normalTriangle)",fill:"none",stroke:"#5f95ff","stroke-width":"2","stroke-dasharray":t.dashed?"3 2":""}}),t._v(" "),t.dragging?n("path",{attrs:{d:t.dd,"marker-end":"url(#normalTriangle)",fill:"none",stroke:"#5f95ff","stroke-width":"2","stroke-dasharray":"3 2"}}):t._e()])},o=[];function s(t,e){return p(t)||d(t,e)||u(t,e)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function p(t){if(Array.isArray(t))return t}var f={},h={imLine:f,props:{start:{required:!0,type:Object,default:function(){return{x:0,y:0}}},end:{required:!0,type:Object,default:function(){return{x:0,y:0}}},dashed:{type:Boolean,default:!1},darggable:{type:Boolean,default:!0}},data:function(){return{dragging:!1}},computed:{d:function(){var t=Math.max(30,Math.abs(this.end.x-this.start.x)/3),e=0;return"M".concat(this.start.x," ").concat(this.start.y," C").concat(this.start.x+t,",").concat(this.start.y+e," ").concat(this.end.x-t,",").concat(this.end.y-e," ").concat(this.end.x,",").concat(this.end.y)},dd:function(){var t=Math.max(30,Math.abs(this.end.x-this.start.x)/3),e=0;return"M".concat(this.start.x," ").concat(this.start.y," C").concat(this.start.x+t,",").concat(this.start.y+e," ").concat(this.end.x-t,",").concat(this.end.y-e," ").concat(this.end.x,",").concat(this.end.y)}},methods:{pointerDown:function(t){this.dragging=!0},pointerMove:function(t){var e=s(this.startPos,2),n=e[0],r=e[1];this.$emit("update:x",this.x+t.x-n),this.$emit("update:y",this.y+t.y-r),this.startPos=[t.x,t.y]},pointerUp:function(t){this.dragging=!1}}},m=h,b=(n("0e59"),n("2877")),v=Object(b["a"])(m,i,o,!1,null,"41cb56fe",null),g=v.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shape",class:{active:t.active,disabled:t.disabled},style:t.styl,on:{pointerdown:function(e){return e.stopPropagation(),e.preventDefault(),t.chooseShape(e)},pointerup:function(e){return e.stopPropagation(),e.preventDefault(),t.endOnShape(e)}}},[t._t("default")],2)},k=[];function _(t,e){return L(t)||x(t,e)||S(t,e)||w()}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){if(t){if("string"===typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function L(t){if(Array.isArray(t))return t}var E={target:null},O={props:{x:{type:Number,required:!0,default:0},y:{type:Number,required:!0,default:0},disabled:{type:Boolean,default:!1}},data:function(){return{currShape:E,tx:0,ty:0}},computed:{styl:function(){return"top:".concat(this.y,"px;left:").concat(this.x,"px;")},active:function(){return E.target===this}},beforeDestroy:function(){E.target===this&&(E.target=null)},methods:{endOnShape:function(){this.disabled||(E.target===this?this.releaseShape():this.$emit("endonshape"))},chooseShape:function(t){this.disabled||(this.addEvts(),E.target=this,this.startPos=[t.x,t.y])},moveShape:function(t){var e=_(this.startPos,2),n=e[0],r=e[1];this.$emit("update:x",this.x+t.x-n),this.$emit("update:y",this.y+t.y-r),this.startPos=[t.x,t.y]},releaseShape:function(){this.freeEvts(),E.target=null,this.startPos=null},addEvts:function(){document.addEventListener("pointermove",this.moveShape,!0),document.addEventListener("pointerup",this.releaseShape,!0)},freeEvts:function(){document.removeEventListener("pointermove",this.moveShape,!0),document.removeEventListener("pointerup",this.releaseShape,!0)}}},T=O,I=(n("8f46"),Object(b["a"])(T,y,k,!1,null,"55b5b8fc",null)),D=I.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"task"},[t.url?n("a",{staticClass:"label url",domProps:{innerHTML:t._s(t.id)},on:{click:t.jump}}):n("span",{staticClass:"label",domProps:{innerHTML:t._s(t.id)}})])},P=[],N={props:{id:{required:!0,type:String,default:function(){return""}},url:{type:String,default:""}},computed:{logo:function(){return"https://gw.alipayobjects.com/zos/bmw-prod/2010ac9f-40e7-49d4-8c4a-4fcf2f83033b.svg"}},methods:{jump:function(){var t=this.id.split("<br")[0],e=this.id.split("<br/>")[1],n=this.$router.resolve({path:this.url,query:{id:t,name:e}}).href;window.open(n,"_blank")}}},A=N,$=(n("e935"),Object(b["a"])(A,j,P,!1,null,"4e702724",null)),F=$.exports,H=n("2638"),q=n.n(H);function R(t,e){return K(t)||G(t,e)||M(t,e)||z()}function z(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(t,e){if(t){if("string"===typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function K(t){if(Array.isArray(t))return t}var B,V,Q={props:{x:{required:!0,type:Number,default:0},y:{required:!0,type:Number,default:0},z:{required:!0,type:Number,default:0}},beforeDestroy:function(){this.freeEvts()},methods:{scroll:function(t){var e=t.deltaY,n=t.deltaX;t.preventDefault(),t.stopPropagation(),this.$emit("update:x",this.x-n),this.$emit("update:y",this.y-e)},pointerdown:function(t){this.disabled||(this.addEvts(),this.startPos=[t.x,t.y])},pointermove:function(t){var e=R(this.startPos,2),n=e[0],r=e[1];this.$emit("update:x",this.x+t.x-n),this.$emit("update:y",this.y+t.y-r),this.startPos=[t.x,t.y]},pointerup:function(){this.freeEvts(),this.startPos=null},addEvts:function(){document.addEventListener("pointermove",this.pointermove,!0),document.addEventListener("pointerup",this.pointerup,!0)},freeEvts:function(){document.removeEventListener("pointermove",this.pointermove,!0),document.removeEventListener("pointerup",this.pointerup,!0)}},render:function(t){var e,n=[],r=[];return null==(e=this.$slots.default)||e.forEach((function(t){t.componentOptions&&t.componentOptions.Ctor===g._Ctor[0]?n.push(t):r.push(t)})),t("div",q()([{class:"layer"},{on:{wheel:this.scroll.bind(this),pointerdown:this.pointerdown.bind(this)}}]),[t("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg",transform:"scale(".concat(this.z/100,") translate(").concat(this.x,", ").concat(this.y,")")},class:"lines-painter"},[t("defs",[t("marker",{attrs:{id:"normalTriangle",viewBox:"0 0 20 20",refX:"0",refY:"10",markerWidth:"3.5",markerHeight:"3.5",orient:"auto"}},[t("path",{attrs:{d:"M 0 0 L 20 10 L 0 20 z",fill:"#5f95ff"}})])]),n]),t("div",{class:"inner",style:{transform:"scale(".concat(this.z/100,") translate(").concat(this.x,"px, ").concat(this.y,"px)")}},[r]),t("div",{class:"map"},[t("div",{class:"inner",style:{transform:"scale(.5) translate(".concat(this.x,"px, ").concat(this.y,"px)")}},[r])])])}},J=Q,W=(n("4d2c"),Object(b["a"])(J,B,V,!1,null,"23b5a7a6",null)),Y=W.exports;function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){et(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t,e,n){return e=nt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nt(t){var e=rt(t,"string");return"symbol"===Z(e)?e:String(e)}function rt(t,e){if("object"!==Z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var at=105,it={components:{Shape:D,Task:F,Layer:Y,VLine:g},props:{relations:{type:Array,reauired:!0,default:function(){return[]}},shapes:{type:Array,reauired:!0,default:function(){return[]}},options:{type:Object,default:function(){return{idKey:"id",sourceKey:"source",targetKey:"target",titleKey:"id",jumpUrl:""}}},nodeClass:{type:Function,default:function(){}}},data:function(){return{root:null,layerPos:{x:0,y:0,z:100}}},computed:{name2Shape:function(){var t=this;return this.shapes.reduce((function(e,n){return tt(tt({},e),{},et({},n[t.options.idKey],n[t.options.idKey]in e?e[n[t.options.idKey]]:n))}),{})},depTree:function(){var t=this,e=105,n=40,r=40,a=200,i={},o={},s={};this.shapes.forEach((function(e){s[e[t.options.idKey]]=e})),this.relations.forEach((function(e){var n=e[t.options.sourceKey],r=e[t.options.targetKey];e.type;i[n]=s[r],o[r]=o[r]||[],o[r].push(s[n])}));for(var l,u=new Set(Object.keys(i)),c=Object.keys(s),d=0;d<c.length;++d)u.has(c[d])||(l=c[d]);var p,f,h,m,b,v=0,g=[s[l]],y=[],k=[];while(g.length>0){for(var _=0;_<g.length;++_)if(f=g[_],f.level=v,o[f[this.options.idKey]]){for(var w=[],S=o[f[this.options.idKey]],C=0;C<S.length;++C)o[S[C][this.options.idKey]]?y.push(S[C]):w.push(S[C]);y=y.concat(w)}k=g.concat(k),p=g,g=y,y=p,y.length=0,++v}for(var x=0;x<k.length;++x)f=k[x],h=(v-f.level-1)*(e+a),m=this.getPositionY(f,o),0!==x&&f.level===k[x-1].level||(b=0),void 0===m&&(m=b+n+r),b=m,f.x=h,f.y=m;return this.root=s[l],s},lines:function(){var t=this;return this.relations.map((function(e){var n=e[t.options.sourceKey],r=e[t.options.targetKey],a=e.type,i=t.depTree[n],o=t.depTree[r];if(i&&o){var s=i.x+at,l=o.x-at-4;return{start:{x:s,y:i.y},end:{x:l,y:o.y},dashed:!1===a}}})).filter((function(t){return!!t}))}},mounted:function(){this.format()},methods:{format:function(){var t=this;this.$nextTick((function(){var e=t.$refs.middleCanvas;e&&e.clientWidth>0&&e.clientHeight>0&&(t.layerPos.x=.75*e.clientWidth-t.root.x,t.layerPos.y=.5*e.clientHeight-t.root.y),t.layerPos.z=100}))},endLine:function(t){if(t&&"task"===t.type&&this.startPort&&!this.depTree[this.startPort.name].deps[t.name]&&!this.depTree[this.startPort.name].des[t.name]){var e=this.getDataSetData(this.startPort.name);this.name2Shape[t.name].task.inputDataset[0].metadata.type===e.metadata.type?(this.addRelation({s:this.startPort.name,t:t.name}),this.name2Shape[t.name].task.inputDataset.push(e)):this.$message.error("".concat(t.name,"不接受").concat(e.metadata.type,"类型的输入"))}this.startPort=null},moveLine:function(t){var e=t.currentTarget.getBoundingClientRect(),n=t.clientX-e.left-this.layerPos.x,r=t.clientY-e.top-this.layerPos.y;this.curPos={x:n,y:r}},getPositionY:function(t,e){var n;if(t){var r=e[t[this.options.idKey]];if(r&&r.length){for(var a=r[0].y,i=r[0].y,o=1;o<r.length;++o)r[o].y<a&&(a=r[o].y),r[o].y>i&&(i=r[o].y);n=(a+i)/2}}return n}}},ot=it,st=(n("7809"),Object(b["a"])(ot,r,a,!1,null,"9aa24cfe",null));e["a"]=st.exports},ad88:function(t,e,n){},ae01:function(t,e,n){},b199:function(t,e,n){"use strict";n.d(e,"y",(function(){return i})),n.d(e,"W",(function(){return o})),n.d(e,"E",(function(){return s})),n.d(e,"p",(function(){return l})),n.d(e,"ab",(function(){return u})),n.d(e,"s",(function(){return c})),n.d(e,"r",(function(){return d})),n.d(e,"t",(function(){return p})),n.d(e,"Q",(function(){return f})),n.d(e,"T",(function(){return h})),n.d(e,"A",(function(){return m})),n.d(e,"O",(function(){return b})),n.d(e,"B",(function(){return v})),n.d(e,"q",(function(){return g})),n.d(e,"e",(function(){return y})),n.d(e,"g",(function(){return k})),n.d(e,"d",(function(){return _})),n.d(e,"ib",(function(){return w})),n.d(e,"n",(function(){return S})),n.d(e,"Y",(function(){return C})),n.d(e,"I",(function(){return x})),n.d(e,"H",(function(){return L})),n.d(e,"c",(function(){return E})),n.d(e,"hb",(function(){return O})),n.d(e,"m",(function(){return T})),n.d(e,"j",(function(){return I})),n.d(e,"f",(function(){return D})),n.d(e,"bb",(function(){return j})),n.d(e,"J",(function(){return P})),n.d(e,"F",(function(){return N})),n.d(e,"h",(function(){return A})),n.d(e,"db",(function(){return $})),n.d(e,"z",(function(){return F})),n.d(e,"R",(function(){return H})),n.d(e,"u",(function(){return q})),n.d(e,"D",(function(){return R})),n.d(e,"P",(function(){return z})),n.d(e,"w",(function(){return M})),n.d(e,"Z",(function(){return U})),n.d(e,"C",(function(){return G})),n.d(e,"eb",(function(){return K})),n.d(e,"a",(function(){return B})),n.d(e,"fb",(function(){return V})),n.d(e,"cb",(function(){return Q})),n.d(e,"G",(function(){return J})),n.d(e,"U",(function(){return W})),n.d(e,"i",(function(){return Y})),n.d(e,"k",(function(){return Z})),n.d(e,"K",(function(){return X})),n.d(e,"L",(function(){return tt})),n.d(e,"N",(function(){return et})),n.d(e,"M",(function(){return nt})),n.d(e,"b",(function(){return rt})),n.d(e,"l",(function(){return at})),n.d(e,"o",(function(){return it})),n.d(e,"S",(function(){return ot})),n.d(e,"gb",(function(){return st})),n.d(e,"X",(function(){return lt})),n.d(e,"v",(function(){return ut})),n.d(e,"V",(function(){return ct}));var r=n("7258"),a="/ds_task/task";function i(t){return r["b"].post("/ds_task/metadata/search",t,{timeout:12e4})}function o(){return r["b"].get("/ds_task/sysdict/getTemplateList")}function s(t){return r["b"].get("/ds_task/dict/list",{params:t})}function l(t){return r["b"].get("/ds_task/artifact/list",{params:t})}function u(t){return r["b"].get("/ds_task/artifactversion/list",{params:t})}function c(t){return r["b"].get("/ds_task/flinkcluster/list",{params:t})}function d(t){return r["b"].get("/ds_task/flinkcluster/auto",{params:t})}function p(t){return r["b"].get("/ds_task/flinkcluster/noauto",{params:t})}function f(t){return r["b"].get("".concat(a,"/get"),{params:t})}function h(t){return r["b"].get("".concat(a,"/page"),{params:t,timeout:6e4})}function m(t){return r["b"].post("/ds_task/metadata/getddl",t)}function b(t){return r["b"].get("".concat(a,"/getInsertSql"),{params:t,timeout:6e5})}function v(t){return r["b"].post("/ds_task/metadata/getdispalyddl",t)}function g(t){return r["b"].get("".concat(a,"/getChildDependencies"),{params:{id:t}})}function y(t){return r["b"].get("".concat(a,"/backfill"),{params:t})}function k(t){return r["b"].put("".concat(a,"/onlineAndOffline"),null,{params:t})}function _(t){return r["b"].post("".concat(a,"/add"),t)}function w(t){return r["b"].put("".concat(a,"/update"),t)}function S(t){return r["b"].delete("".concat(a,"/new/delete"),{params:t})}function C(t){return r["b"].get("/ds_task/user/list",{params:{name:t}})}function x(t){return r["b"].get("/ds_task/label/list",{params:{name:t}})}function L(t){return r["b"].get("/ds_task/label/get",{params:{id:t}})}function E(t){return r["b"].post("/ds_task/label/add",t)}function O(t){return r["b"].put("/ds_task/label/update",t)}function T(t){return r["b"].delete("/ds_task/label/delete",{params:{id:t}})}function I(t){return r["b"].patch("/ds_task/collect/add",null,{params:t})}function D(t){return r["b"].get("/ds_task/collect/cancel",{params:t})}function j(t){return r["b"].get("/ds_task/collect/my",{params:t})}function P(t){return r["b"].get("/ds_task/task/listforlabel",{params:{name:t}})}function N(t){return r["b"].get("/ds_task/task/iam",{params:t})}function A(t){return r["b"].post("/ds_task/task/check",t,{timeout:18e4})}function $(t){return r["b"].get("/ds_task/task/name/search",{params:{name:t}})}function F(t){return r["b"].get("/ds_task/task/backfillDateDetail",{params:t})}function H(t){return r["b"].get("/ds_task/task/last7",{params:t})}function q(t){return r["b"].get("/ds_task/user/getEffectiveCostList",{params:{name:t}})}function R(t){return r["b"].get("/ds_task/task/getGitSqlFile",{params:t})}function z(t){return r["b"].post("/ds_task/task/sqlTbls",t,{headers:{"Content-Type":"multipart/form-data"}})}function M(t){return r["b"].post("/ds_task/task/getCrontab",t)}function U(t){return r["b"].get("/ds_task/taskversion/pages",{params:t})}function G(){return r["b"].get("/ds_task/auditlog/type?module=task")}function K(t){return r["b"].get("/ds_task/taskversion/verionSwitch",{params:t})}function B(t){return r["b"].post("/ds_task/task/addAndStart",t)}function V(t){return r["b"].post("/ds_task/task/updateAndStart",t)}function Q(t){return r["b"].post("/ds_task/task/date/preview",t)}function J(t){return r["b"].post("/ds_task/task/mergeSmallFiles/jars",t)}function W(t){return r["b"].post("/ds_task/task/getTasks",t)}function Y(t){return r["b"].post("/ds_task/task/checkPath",t,{headers:{"Content-Type":"multipart/form-data"}})}function Z(t){return r["b"].post("/ds_task/task/fastBackfill?taskId="+t.taskId,t)}function X(t){return r["b"].get("/ds_task/task/renderContent",{params:t})}function tt(t){return r["b"].post("/ds_task/metadata/preview",t)}function et(t){return r["b"].get("/ds_task/actor/sources/page",{params:t})}function nt(t){return r["b"].get("/ds_task/taskfolder/listFolder",{params:t})}function rt(t){return r["b"].post("/ds_task/taskfolder/saveFolder",t)}function at(t){return r["b"].get("/ds_task/taskfolder/deleteFolder",{params:t})}function it(t){return r["b"].post("/ds_task/taskfolder/editFolder",t)}function ot(t){return r["b"].get("/ds_task/taskfolder/listTask",{params:t})}function st(t){return r["b"].post("/ds_task/taskfolder/updateTask",t)}function lt(t){return r["b"].get("/ds_task/wechatAlert/listById?id=".concat(t))}function ut(t){return r["b"].post("/pipeline/cron/get",t)}function ct(t){return r["b"].get("/ds_task/task/templateRendering",{params:t})}},b893:function(t,e,n){"use strict";n.d(e,"n",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"j",(function(){return p})),n.d(e,"m",(function(){return f})),n.d(e,"o",(function(){return h})),n.d(e,"a",(function(){return m})),n.d(e,"i",(function(){return b})),n.d(e,"k",(function(){return v})),n.d(e,"l",(function(){return k})),n.d(e,"h",(function(){return _})),n.d(e,"e",(function(){return w})),n.d(e,"d",(function(){return S})),n.d(e,"b",(function(){return C})),n.d(e,"g",(function(){return x})),n.d(e,"f",(function(){return L}));var r=n("7ea2"),a=n("4360");function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),s=new j(r||[]);return a(o,"_invoke",{value:O(t,n,s)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var h="suspendedStart",m="suspendedYield",b="executing",v="completed",g={};function y(){}function k(){}function _(){}var w={};d(w,l,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(P([])));C&&C!==n&&r.call(C,l)&&(w=C);var x=_.prototype=y.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,i,s,l){var u=f(t[a],t,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==o(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):e.resolve(d).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,l)}))}l(u.arg)}var i;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return i=i?i.then(a,a):a()}})}function O(e,n,r){var a=h;return function(i,o){if(a===b)throw new Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:t,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=b;var u=f(e,n,r);if("normal"===u.type){if(a=r.done?v:m,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=f(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return k.prototype=_,a(x,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:k,configurable:!0}),k.displayName=d(_,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,d(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},L(E.prototype),d(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new E(p(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},L(x),d(x,c,"Generator"),d(x,l,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;D(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){s(i,r,a,o,l,"next",t)}function l(t){s(i,r,a,o,l,"throw",t)}o(void 0)}))}}var u={StreamingSQL:"step2FlinkSQL",StreamingJAR:"step2FlinkJar",Metis2Hive:"step2Metis",MysqlCDC2Hive:"step2CDC",Mysql2Lakehouse:"step2Hive",Mysql2Hive:"step2Hive",File2Lakehouse:"step2File",Mysql2Hudi:"step2Hudi",Hive2Hive:"step2HiveSQL",DataMigration:"step2HCCloud",SPARKJAR:"step2SparkJar",Hive2Sharestore:"step2ShareStore",Hive2Clickhouse:"step2ClickHouse",Hive2Mysql:"step2MySql",Hive2Doris:"step2Doris",PythonShell:"step2Shell",Db2Hive:"step2DB",Hive2Redis:"step2Redis",Hive2Redshift:"step2Redshift",MergeSmallFiles:"step2FileMerge",Hive2File:"step2Hive2File",TfJob:"step2TrainingModel"},c=a["a"].getters["isCloud"],d=[{title:"数据接入 Data Ingestion",list:[{label:"DB -> Lakehouse",templateCode:"step2Hive",path:"step2Hive",content:"该模板适用于拉取各类关系型DataBase数据到Lakehouse湖仓，提供离线全量和实时增量同步方案。"},{label:"File -> Lakehouse",templateCode:"File2Lakehouse",path:"step2File",content:"该模板适用于将对象存储(如AWS S3、OBS、KS3等)或分布式文件存储(如HDFS等)中存储的各种格式(如csv、json、paruet、orc等)的文件数据同步到Lakehouse湖仓中。"},{label:"Kafka -> Lakehouse",templateCode:"Metis2Hive",path:"step2Metis",content:"Kafka2Lakehouse统一模板，对接Kafka/Metis，透传至Lakehouse表。",isGray:!0}]},{title:"湖仓处理 Data Transformation",list:[{label:"Lakehouse -> Lakehouse",templateCode:"Hive2Hive",path:"step2HiveSQL",content:"基于Hive SQL/Spark SQL数据处理，不同的执行引擎语法略有差异，请参考官方语法。"}]},{title:"数据导出 Data Digestion",list:[{label:"Lakehouse -> Doris",templateCode:"Hive2Doris",path:"step2Doris",content:"用于数据的导出处理，可将数据从Lakehouse导出到Doris中。"},{label:"Lakehouse -> File",templateCode:"Hive2File",path:"step2Hive2File",content:"用于Lakehouse数据导出到文件的任务，可以支持以邮件的方式将文件发送给用户。"},{label:"Lakehouse -> MySQL",templateCode:"Hive2Mysql",path:"step2MySql",content:"用于数据的导出处理，可将数据从Lakehouse导出到MySQL中。"},{label:"Lakehouse -> ClickHouse",content:"用于数据的导出处理，可将数据从Lakehouse导出到ClickHouse中。",isGray:!0},{label:"Lakehouse -> Redshift",content:"适用于将S3文件中结构化数据映射到Aws Redshift表中的业务场景。",isGray:!0}]}],p=[{title:"数据接入 Data Ingestion",list:[{label:"Spark Jar",templateCode:"SPARKJAR",path:"step2SparkJar",content:"用于湖仓数据的基于Jar包的数据处理，一般用于更加复杂的数据处理逻辑。"},{label:"Shell/Python脚本",templateCode:"PythonShell",path:"step2Shell",content:"用于python和shell脚本任务的执行。"}]},{title:"湖仓处理 Lakehouse ETL",list:[{label:"Flink Jar",templateCode:"StreamingJAR",path:"step2FlinkJar",content:"通过上传Flink Jar包的方式，进行流式数据处理。",isGray:!0},{label:"Flink SQL",templateCode:"StreamingSQL",path:"step2FlinkSQL",content:"流式任务的统一模板，基于SQL查询的方式（Flink SQL）进行数据处理。Metis日志处理，统一归集到此处通过SQL的方式进行处理。",isGray:!0}]}],f={CREATED:"#8896B3",INITIALIZING:"rgba(146, 112, 202, 0.8)",SCHEDULED:"rgba(146, 112, 202, 0.8)",RUNNING:"#409EFF",RESTARTING:"#C6E2FF",RECONCILING:"#41F3D8",SUSPENDED:"#67C23A",CANCELED:"#E6A23C",CANCELLING:"#E6A23C",FAILED:"#FF5656",SUCCESS:"#67C23A",FINISHED:"#67C23A",FAILLING:"#FCE2E2"},h={CREATED:"#8896B3",INITIALIZING:"rgba(146, 112, 202, 0.8)",SCHEDULED:"rgba(146, 112, 202, 0.8)",RUNNING:"#409EFF",CANCELED:"#E6A23C",FAILED:"#FF5656",SUCCESS:"#67C23A",SUSPENDED:"#67C23A",FINISHED:"#67C23A",OFFLINE:"#dcdfe6"},m={CREATED:"已创建",INITIALIZING:"已上线",SCHEDULED:"已上线",RUNNING:"执行中",CANCELED:"已取消",FAILED:"失败",SUCCESS:"成功",SUSPENDED:"成功",FINISHED:"成功",OFFLINE:"已下线"},b={waiting:"检查上游",termination:"终止检查上游",waiting_queue:"排队中",running:"运行中",up_for_retry:"等待重试",failed:"失败",success:"成功"},v={INITIALIZING:"初始化中",CREATED:"已创建",RUNNING:"运行中",FAILING:"失败中",CANCELLING:"取消中",RESTARTING:"重启中",RECONCILING:"调度中",FAILED:"已失败",CANCELED:"已下线",FINISHED:"已完成",SUSPENDED:"已停止"};function g(){return y.apply(this,arguments)}function y(){return y=l(i().mark((function t(){var e,n;return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["r"])();case 2:return e=t.sent,n=e.data,t.abrupt("return",n.list.map((function(t){return{label:t.description,value:t.regionAlias}})));case 5:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}var k=c?g():new Promise((function(t,e){t([{label:"AWS 美东",value:"ue1"},{label:"AWS 新加坡",value:"sg1"},{label:"华为 新加坡",value:"sg2"}])})),_=[{label:"P0",value:0},{label:"P1",value:1},{label:"P2",value:2},{label:"P3",value:3}],w={GENERAL:"一般",SENIOR:"紧急"};function S(t,e){var n="";return function(r){n&&clearTimeout(n),n=setTimeout((function(){t(r)}),e)}}function C(t){if(null==t)return null;var e=Array.isArray(t)?[]:{};for(var n in t)t.hasOwnProperty(n)&&("object"===o(t[n])?e[n]=C(t[n]):e[n]=t[n]);return e}var x=[{package:"awscli",version:"1.16.263"},{package:"backports.ssl-match-hostname",version:"3.5.0.1"},{package:"boto",version:"2.49.0"},{package:"boto3",version:"1.9.220"},{package:"botocore",version:"1.12.253"},{package:"certifi",version:"2020.12.5"},{package:"chardet",version:"3.0.4"},{package:"colorama",version:"0.4.1"},{package:"docutils",version:"0.15.2"},{package:"futures",version:"3.3.0"},{package:"idna",version:"2.10"},{package:"iniparse",version:"0.4"},{package:"ipaddress",version:"1.0.16"},{package:"jmespath",version:"0.9.5"},{package:"kitchen",version:"1.1.1"},{package:"pip",version:"20.3.3"},{package:"pyasn1",version:"0.4.8"},{package:"pycurl",version:"7.19.0"},{package:"pygobject",version:"3.22.0"},{package:"pygpgme",version:"0.3"},{package:"pyliblzma",version:"0.5.3"},{package:"python-dateutil",version:"2.8.1"},{package:"pyxattr",version:"0.5.1"},{package:"PyYAML",version:"5.1.2"},{package:"requests",version:"2.24.0"},{package:"rsa",version:"3.4.2"},{package:"s3transfer",version:"0.2.1"},{package:"setuptools",version:"0.9.8"},{package:"six",version:"1.15.0"},{package:"urlgrabber",version:"3.10"},{package:"urllib3",version:"1.25.11"},{package:"yum-metadata-parser",version:"1.1.4"}],L={sg2:"swr.ap-southeast-3.myhuaweicloud.com/shareit-bdp/airflow-business:script_task",ue1:"848318613114.dkr.ecr.us-east-1.amazonaws.com/bdp/airflow:script_task",sg1:"848318613114.dkr.ecr.ap-southeast-1.amazonaws.com/bdp/workflow:script_task"}},c834:function(t,e,n){},e935:function(t,e,n){"use strict";n("17bc")}}]);